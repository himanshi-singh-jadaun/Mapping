{"ast":null,"code":"import _slicedToArray from \"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectSpread from \"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { useContext, useEffect, useMemo, useState, useRef } from 'react';\nimport { MapContext } from './map';\nimport assert from '../utils/assert';\nimport { deepEqual } from '../utils/deep-equal';\n/* eslint-disable complexity, max-statements */\nfunction updateLayer(map, id, props, prevProps) {\n  assert(props.id === prevProps.id, 'layer id changed');\n  assert(props.type === prevProps.type, 'layer type changed');\n  if (props.type === 'custom' || prevProps.type === 'custom') {\n    return;\n  }\n  var _props$layout = props.layout,\n    layout = _props$layout === void 0 ? {} : _props$layout,\n    _props$paint = props.paint,\n    paint = _props$paint === void 0 ? {} : _props$paint,\n    filter = props.filter,\n    minzoom = props.minzoom,\n    maxzoom = props.maxzoom,\n    beforeId = props.beforeId;\n  if (beforeId !== prevProps.beforeId) {\n    map.moveLayer(id, beforeId);\n  }\n  if (layout !== prevProps.layout) {\n    var prevLayout = prevProps.layout || {};\n    for (var key in layout) {\n      if (!deepEqual(layout[key], prevLayout[key])) {\n        map.setLayoutProperty(id, key, layout[key]);\n      }\n    }\n    for (var _key in prevLayout) {\n      if (!layout.hasOwnProperty(_key)) {\n        map.setLayoutProperty(id, _key, undefined);\n      }\n    }\n  }\n  if (paint !== prevProps.paint) {\n    var prevPaint = prevProps.paint || {};\n    for (var _key2 in paint) {\n      if (!deepEqual(paint[_key2], prevPaint[_key2])) {\n        map.setPaintProperty(id, _key2, paint[_key2]);\n      }\n    }\n    for (var _key3 in prevPaint) {\n      if (!paint.hasOwnProperty(_key3)) {\n        map.setPaintProperty(id, _key3, undefined);\n      }\n    }\n  }\n  if (!deepEqual(filter, prevProps.filter)) {\n    map.setFilter(id, filter);\n  }\n  if (minzoom !== prevProps.minzoom || maxzoom !== prevProps.maxzoom) {\n    map.setLayerZoomRange(id, minzoom, maxzoom);\n  }\n}\nfunction createLayer(map, id, props) {\n  // @ts-ignore\n  if (map.style && map.style._loaded && (!('source' in props) || map.getSource(props.source))) {\n    var options = _objectSpread(_objectSpread({}, props), {}, {\n      id: id\n    });\n    delete options.beforeId;\n    // @ts-ignore\n    map.addLayer(options, props.beforeId);\n  }\n}\n/* eslint-enable complexity, max-statements */\nvar layerCounter = 0;\nfunction Layer(props) {\n  var map = useContext(MapContext).map.getMap();\n  var propsRef = useRef(props);\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    setStyleLoaded = _useState2[1];\n  var id = useMemo(function () {\n    return props.id || \"jsx-layer-\".concat(layerCounter++);\n  }, []);\n  useEffect(function () {\n    if (map) {\n      var forceUpdate = function forceUpdate() {\n        return setStyleLoaded(function (version) {\n          return version + 1;\n        });\n      };\n      map.on('styledata', forceUpdate);\n      forceUpdate();\n      return function () {\n        map.off('styledata', forceUpdate);\n        // @ts-ignore\n        if (map.style && map.style._loaded && map.getLayer(id)) {\n          map.removeLayer(id);\n        }\n      };\n    }\n    return undefined;\n  }, [map]);\n  // @ts-ignore\n  var layer = map && map.style && map.getLayer(id);\n  if (layer) {\n    try {\n      updateLayer(map, id, props, propsRef.current);\n    } catch (error) {\n      console.warn(error); // eslint-disable-line\n    }\n  } else {\n    createLayer(map, id, props);\n  }\n  // Store last rendered props\n  propsRef.current = props;\n  return null;\n}\nexport default Layer;","map":{"version":3,"names":["useContext","useEffect","useMemo","useState","useRef","MapContext","assert","deepEqual","updateLayer","map","id","props","prevProps","type","_props$layout","layout","_props$paint","paint","filter","minzoom","maxzoom","beforeId","moveLayer","prevLayout","key","setLayoutProperty","hasOwnProperty","undefined","prevPaint","setPaintProperty","setFilter","setLayerZoomRange","createLayer","style","_loaded","getSource","source","options","_objectSpread","addLayer","layerCounter","Layer","getMap","propsRef","_useState","_useState2","_slicedToArray","setStyleLoaded","concat","forceUpdate","version","on","off","getLayer","removeLayer","layer","current","error","console","warn"],"sources":["C:\\Users\\HIMANSHI\\Desktop\\Mapping\\frontend\\node_modules\\react-map-gl\\src\\components\\layer.ts"],"sourcesContent":["import {useContext, useEffect, useMemo, useState, useRef} from 'react';\nimport {MapContext} from './map';\nimport assert from '../utils/assert';\nimport {deepEqual} from '../utils/deep-equal';\n\nimport type {MapboxMap, AnyLayer} from '../types';\n\n// Omiting property from a union type, see\n// https://github.com/microsoft/TypeScript/issues/39556#issuecomment-656925230\ntype OptionalId<T> = T extends {id: string} ? Omit<T, 'id'> & {id?: string} : T;\n\nexport type LayerProps = OptionalId<AnyLayer> & {\n  /** If set, the layer will be inserted before the specified layer */\n  beforeId?: string;\n};\n\n/* eslint-disable complexity, max-statements */\nfunction updateLayer(map: MapboxMap, id: string, props: LayerProps, prevProps: LayerProps) {\n  assert(props.id === prevProps.id, 'layer id changed');\n  assert(props.type === prevProps.type, 'layer type changed');\n\n  if (props.type === 'custom' || prevProps.type === 'custom') {\n    return;\n  }\n\n  const {layout = {}, paint = {}, filter, minzoom, maxzoom, beforeId} = props;\n\n  if (beforeId !== prevProps.beforeId) {\n    map.moveLayer(id, beforeId);\n  }\n  if (layout !== prevProps.layout) {\n    const prevLayout = prevProps.layout || {};\n    for (const key in layout) {\n      if (!deepEqual(layout[key], prevLayout[key])) {\n        map.setLayoutProperty(id, key, layout[key]);\n      }\n    }\n    for (const key in prevLayout) {\n      if (!layout.hasOwnProperty(key)) {\n        map.setLayoutProperty(id, key, undefined);\n      }\n    }\n  }\n  if (paint !== prevProps.paint) {\n    const prevPaint = prevProps.paint || {};\n    for (const key in paint) {\n      if (!deepEqual(paint[key], prevPaint[key])) {\n        map.setPaintProperty(id, key, paint[key]);\n      }\n    }\n    for (const key in prevPaint) {\n      if (!paint.hasOwnProperty(key)) {\n        map.setPaintProperty(id, key, undefined);\n      }\n    }\n  }\n  if (!deepEqual(filter, prevProps.filter)) {\n    map.setFilter(id, filter);\n  }\n  if (minzoom !== prevProps.minzoom || maxzoom !== prevProps.maxzoom) {\n    map.setLayerZoomRange(id, minzoom, maxzoom);\n  }\n}\n\nfunction createLayer(map: MapboxMap, id: string, props: LayerProps) {\n  // @ts-ignore\n  if (map.style && map.style._loaded && (!('source' in props) || map.getSource(props.source))) {\n    const options: LayerProps = {...props, id};\n    delete options.beforeId;\n\n    // @ts-ignore\n    map.addLayer(options, props.beforeId);\n  }\n}\n\n/* eslint-enable complexity, max-statements */\n\nlet layerCounter = 0;\n\nfunction Layer(props: LayerProps) {\n  const map: MapboxMap = useContext(MapContext).map.getMap();\n  const propsRef = useRef(props);\n  const [, setStyleLoaded] = useState(0);\n\n  const id = useMemo(() => props.id || `jsx-layer-${layerCounter++}`, []);\n\n  useEffect(() => {\n    if (map) {\n      const forceUpdate = () => setStyleLoaded(version => version + 1);\n      map.on('styledata', forceUpdate);\n      forceUpdate();\n\n      return () => {\n        map.off('styledata', forceUpdate);\n        // @ts-ignore\n        if (map.style && map.style._loaded && map.getLayer(id)) {\n          map.removeLayer(id);\n        }\n      };\n    }\n    return undefined;\n  }, [map]);\n\n  // @ts-ignore\n  const layer = map && map.style && map.getLayer(id);\n  if (layer) {\n    try {\n      updateLayer(map, id, props, propsRef.current);\n    } catch (error) {\n      console.warn(error); // eslint-disable-line\n    }\n  } else {\n    createLayer(map, id, props);\n  }\n\n  // Store last rendered props\n  propsRef.current = props;\n\n  return null;\n}\n\nexport default Layer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}