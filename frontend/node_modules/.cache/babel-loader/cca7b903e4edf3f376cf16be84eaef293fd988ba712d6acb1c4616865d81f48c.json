{"ast":null,"code":"import _objectSpread from \"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _createForOfIteratorHelper from \"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nvar refProps = ['type', 'source', 'source-layer', 'minzoom', 'maxzoom', 'filter', 'layout'];\n// Prepare a map style object for diffing\n// If immutable - convert to plain object\n// Work around some issues in older styles that would fail Mapbox's diffing\nexport function normalizeStyle(style) {\n  if (!style) {\n    return null;\n  }\n  if (typeof style === 'string') {\n    return style;\n  }\n  if ('toJS' in style) {\n    style = style.toJS();\n  }\n  if (!style.layers) {\n    return style;\n  }\n  var layerIndex = {};\n  var _iterator = _createForOfIteratorHelper(style.layers),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var layer = _step.value;\n      layerIndex[layer.id] = layer;\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  var layers = style.layers.map(function (layer) {\n    // @ts-expect-error\n    var layerRef = layerIndex[layer.ref];\n    var normalizedLayer = null;\n    if ('interactive' in layer) {\n      normalizedLayer = _objectSpread({}, layer);\n      // Breaks style diffing :(\n      delete normalizedLayer.interactive;\n    }\n    // Style diffing doesn't work with refs so expand them out manually before diffing.\n    if (layerRef) {\n      normalizedLayer = normalizedLayer || _objectSpread({}, layer);\n      delete normalizedLayer.ref;\n      // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/deref.js\n      var _iterator2 = _createForOfIteratorHelper(refProps),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var propName = _step2.value;\n          if (propName in layerRef) {\n            normalizedLayer[propName] = layerRef[propName];\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n    return normalizedLayer || layer;\n  });\n  // Do not mutate the style object provided by the user\n  return _objectSpread(_objectSpread({}, style), {}, {\n    layers: layers\n  });\n}","map":{"version":3,"names":["refProps","normalizeStyle","style","toJS","layers","layerIndex","_iterator","_createForOfIteratorHelper","_step","s","n","done","layer","value","id","err","e","f","map","layerRef","ref","normalizedLayer","_objectSpread","interactive","_iterator2","_step2","propName"],"sources":["C:\\Users\\HIMANSHI\\Desktop\\Mapping\\frontend\\node_modules\\react-map-gl\\src\\utils\\style-utils.ts"],"sourcesContent":["import {ImmutableLike, MapboxStyle} from '../types';\n\nconst refProps = ['type', 'source', 'source-layer', 'minzoom', 'maxzoom', 'filter', 'layout'];\n\n// Prepare a map style object for diffing\n// If immutable - convert to plain object\n// Work around some issues in older styles that would fail Mapbox's diffing\nexport function normalizeStyle(style: string | MapboxStyle | ImmutableLike): string | MapboxStyle {\n  if (!style) {\n    return null;\n  }\n  if (typeof style === 'string') {\n    return style;\n  }\n  if ('toJS' in style) {\n    style = style.toJS() as MapboxStyle;\n  }\n  if (!style.layers) {\n    return style;\n  }\n  const layerIndex = {};\n\n  for (const layer of style.layers) {\n    layerIndex[layer.id] = layer;\n  }\n\n  const layers = style.layers.map(layer => {\n    // @ts-expect-error\n    const layerRef = layerIndex[layer.ref];\n    let normalizedLayer = null;\n\n    if ('interactive' in layer) {\n      normalizedLayer = {...layer};\n      // Breaks style diffing :(\n      delete normalizedLayer.interactive;\n    }\n\n    // Style diffing doesn't work with refs so expand them out manually before diffing.\n    if (layerRef) {\n      normalizedLayer = normalizedLayer || {...layer};\n      delete normalizedLayer.ref;\n      // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/deref.js\n      for (const propName of refProps) {\n        if (propName in layerRef) {\n          normalizedLayer[propName] = layerRef[propName];\n        }\n      }\n    }\n\n    return normalizedLayer || layer;\n  });\n\n  // Do not mutate the style object provided by the user\n  return {...style, layers};\n}\n"],"mappings":";;AAEA,IAAMA,QAAQ,GAAG,CAAC,MAAM,EAAE,QAAQ,EAAE,cAAc,EAAE,SAAS,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,CAAC;AAE7F;AACA;AACA;AACA,OAAM,SAAUC,cAAcA,CAACC,KAA2C;EACxE,IAAI,CAACA,KAAK,EAAE;IACV,OAAO,IAAI;;EAEb,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IAC7B,OAAOA,KAAK;;EAEd,IAAI,MAAM,IAAIA,KAAK,EAAE;IACnBA,KAAK,GAAGA,KAAK,CAACC,IAAI,EAAiB;;EAErC,IAAI,CAACD,KAAK,CAACE,MAAM,EAAE;IACjB,OAAOF,KAAK;;EAEd,IAAMG,UAAU,GAAG,EAAE;EAAC,IAAAC,SAAA,GAAAC,0BAAA,CAEFL,KAAK,CAACE,MAAM;IAAAI,KAAA;EAAA;IAAhC,KAAAF,SAAA,CAAAG,CAAA,MAAAD,KAAA,GAAAF,SAAA,CAAAI,CAAA,IAAAC,IAAA,GAAkC;MAAA,IAAvBC,KAAK,GAAAJ,KAAA,CAAAK,KAAA;MACdR,UAAU,CAACO,KAAK,CAACE,EAAE,CAAC,GAAGF,KAAK;;EAC7B,SAAAG,GAAA;IAAAT,SAAA,CAAAU,CAAA,CAAAD,GAAA;EAAA;IAAAT,SAAA,CAAAW,CAAA;EAAA;EAED,IAAMb,MAAM,GAAGF,KAAK,CAACE,MAAM,CAACc,GAAG,CAAC,UAAAN,KAAK,EAAG;IACtC;IACA,IAAMO,QAAQ,GAAGd,UAAU,CAACO,KAAK,CAACQ,GAAG,CAAC;IACtC,IAAIC,eAAe,GAAG,IAAI;IAE1B,IAAI,aAAa,IAAIT,KAAK,EAAE;MAC1BS,eAAe,GAAAC,aAAA,KAAOV,KAAK,CAAC;MAC5B;MACA,OAAOS,eAAe,CAACE,WAAW;;IAGpC;IACA,IAAIJ,QAAQ,EAAE;MACZE,eAAe,GAAGA,eAAe,IAAAC,aAAA,KAAQV,KAAK,CAAC;MAC/C,OAAOS,eAAe,CAACD,GAAG;MAC1B;MAAA,IAAAI,UAAA,GAAAjB,0BAAA,CACuBP,QAAQ;QAAAyB,MAAA;MAAA;QAA/B,KAAAD,UAAA,CAAAf,CAAA,MAAAgB,MAAA,GAAAD,UAAA,CAAAd,CAAA,IAAAC,IAAA,GAAiC;UAAA,IAAtBe,QAAQ,GAAAD,MAAA,CAAAZ,KAAA;UACjB,IAAIa,QAAQ,IAAIP,QAAQ,EAAE;YACxBE,eAAe,CAACK,QAAQ,CAAC,GAAGP,QAAQ,CAACO,QAAQ,CAAC;;;MAEjD,SAAAX,GAAA;QAAAS,UAAA,CAAAR,CAAA,CAAAD,GAAA;MAAA;QAAAS,UAAA,CAAAP,CAAA;MAAA;;IAGH,OAAOI,eAAe,IAAIT,KAAK;EACjC,CAAC,CAAC;EAEF;EACA,OAAAU,aAAA,CAAAA,aAAA,KAAWpB,KAAK;IAAEE,MAAM,EAANA;EAAM;AAC1B"},"metadata":{},"sourceType":"module","externalDependencies":[]}