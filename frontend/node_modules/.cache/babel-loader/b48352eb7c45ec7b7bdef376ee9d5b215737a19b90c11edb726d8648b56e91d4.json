{"ast":null,"code":"import _objectSpread from \"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport * as React from 'react';\nimport { useState, useRef, useEffect, useContext, useMemo, forwardRef, useImperativeHandle } from 'react';\nimport { MountedMapsContext } from './use-map';\nimport Mapbox from '../mapbox/mapbox';\nimport createRef from '../mapbox/create-ref';\nimport useIsomorphicLayoutEffect from '../utils/use-isomorphic-layout-effect';\nimport setGlobals from '../utils/set-globals';\nexport var MapContext = React.createContext(null);\nvar defaultProps = {\n  // Constraints\n  minZoom: 0,\n  maxZoom: 22,\n  minPitch: 0,\n  maxPitch: 60,\n  // Interaction handlers\n  scrollZoom: true,\n  boxZoom: true,\n  dragRotate: true,\n  dragPan: true,\n  keyboard: true,\n  doubleClickZoom: true,\n  touchZoomRotate: true,\n  touchPitch: true,\n  // Style\n  mapStyle: {\n    version: 8,\n    sources: {},\n    layers: []\n  },\n  styleDiffing: true,\n  projection: 'mercator',\n  renderWorldCopies: true,\n  // Callbacks\n  onError: function onError(e) {\n    return console.error(e.error);\n  },\n  // Globals\n  RTLTextPlugin: 'https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js'\n};\nvar Map = forwardRef(function (props, ref) {\n  var mountedMapsContext = useContext(MountedMapsContext);\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    mapInstance = _useState2[0],\n    setMapInstance = _useState2[1];\n  var containerRef = useRef();\n  var _useRef = useRef({\n      mapLib: null,\n      map: null\n    }),\n    contextValue = _useRef.current;\n  useEffect(function () {\n    var mapLib = props.mapLib;\n    var isMounted = true;\n    var mapbox;\n    Promise.resolve(mapLib || import('mapbox-gl')).then(function (mapboxgl) {\n      if (!isMounted) {\n        return;\n      }\n      if (!mapboxgl.Map) {\n        // commonjs style\n        mapboxgl = mapboxgl.default;\n      }\n      if (!mapboxgl || !mapboxgl.Map) {\n        throw new Error('Invalid mapLib');\n      }\n      // workerUrl & workerClass may change the result of supported()\n      // https://github.com/visgl/react-map-gl/discussions/2027\n      setGlobals(mapboxgl, props);\n      if (!mapboxgl.supported || mapboxgl.supported(props)) {\n        if (props.reuseMaps) {\n          mapbox = Mapbox.reuse(props, containerRef.current);\n        }\n        if (!mapbox) {\n          mapbox = new Mapbox(mapboxgl.Map, props, containerRef.current);\n        }\n        contextValue.map = createRef(mapbox, mapboxgl);\n        contextValue.mapLib = mapboxgl;\n        setMapInstance(mapbox);\n        mountedMapsContext === null || mountedMapsContext === void 0 ? void 0 : mountedMapsContext.onMapMount(contextValue.map, props.id);\n      } else {\n        throw new Error('Map is not supported by this browser');\n      }\n    }).catch(function (error) {\n      props.onError({\n        type: 'error',\n        target: null,\n        originalEvent: null,\n        error: error\n      });\n    });\n    return function () {\n      isMounted = false;\n      if (mapbox) {\n        mountedMapsContext === null || mountedMapsContext === void 0 ? void 0 : mountedMapsContext.onMapUnmount(props.id);\n        if (props.reuseMaps) {\n          mapbox.recycle();\n        } else {\n          mapbox.destroy();\n        }\n      }\n    };\n  }, []);\n  useIsomorphicLayoutEffect(function () {\n    if (mapInstance) {\n      mapInstance.setProps(props);\n    }\n  });\n  useImperativeHandle(ref, function () {\n    return contextValue.map;\n  }, [mapInstance]);\n  var style = useMemo(function () {\n    return _objectSpread({\n      position: 'relative',\n      width: '100%',\n      height: '100%'\n    }, props.style);\n  }, [props.style]);\n  var CHILD_CONTAINER_STYLE = {\n    height: '100%'\n  };\n  return React.createElement(\"div\", {\n    id: props.id,\n    ref: containerRef,\n    style: style\n  }, mapInstance && React.createElement(MapContext.Provider, {\n    value: contextValue\n  }, React.createElement(\"div\", {\n    \"mapboxgl-children\": \"\",\n    style: CHILD_CONTAINER_STYLE\n  }, props.children)));\n});\nMap.displayName = 'Map';\nMap.defaultProps = defaultProps;\nexport default Map;","map":{"version":3,"names":["React","useState","useRef","useEffect","useContext","useMemo","forwardRef","useImperativeHandle","MountedMapsContext","Mapbox","createRef","useIsomorphicLayoutEffect","setGlobals","MapContext","createContext","defaultProps","minZoom","maxZoom","minPitch","maxPitch","scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch","mapStyle","version","sources","layers","styleDiffing","projection","renderWorldCopies","onError","e","console","error","RTLTextPlugin","Map","props","ref","mountedMapsContext","_useState","_useState2","_slicedToArray","mapInstance","setMapInstance","containerRef","_useRef","mapLib","map","contextValue","current","isMounted","mapbox","Promise","resolve","then","mapboxgl","default","Error","supported","reuseMaps","reuse","onMapMount","id","catch","type","target","originalEvent","onMapUnmount","recycle","destroy","setProps","style","_objectSpread","position","width","height","CHILD_CONTAINER_STYLE","createElement","Provider","value","children","displayName"],"sources":["C:\\Users\\HIMANSHI\\Desktop\\Mapping\\frontend\\node_modules\\react-map-gl\\src\\components\\map.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  useState,\n  useRef,\n  useEffect,\n  useContext,\n  useMemo,\n  forwardRef,\n  useImperativeHandle\n} from 'react';\n\nimport {MountedMapsContext} from './use-map';\nimport Mapbox, {MapboxProps} from '../mapbox/mapbox';\nimport createRef, {MapRef} from '../mapbox/create-ref';\n\nimport type {CSSProperties} from 'react';\nimport useIsomorphicLayoutEffect from '../utils/use-isomorphic-layout-effect';\nimport setGlobals, {GlobalSettings} from '../utils/set-globals';\n\nexport type MapContextValue = {\n  mapLib: any;\n  map: MapRef;\n};\n\nexport const MapContext = React.createContext<MapContextValue>(null);\n\nexport type MapProps = MapboxProps &\n  GlobalSettings & {\n    mapLib?: any;\n    reuseMaps?: boolean;\n    /** Map container id */\n    id?: string;\n    /** Map container CSS style */\n    style?: CSSProperties;\n    children?: any;\n  };\n\nconst defaultProps: MapProps = {\n  // Constraints\n  minZoom: 0,\n  maxZoom: 22,\n  minPitch: 0,\n  maxPitch: 60,\n\n  // Interaction handlers\n  scrollZoom: true,\n  boxZoom: true,\n  dragRotate: true,\n  dragPan: true,\n  keyboard: true,\n  doubleClickZoom: true,\n  touchZoomRotate: true,\n  touchPitch: true,\n\n  // Style\n  mapStyle: {version: 8, sources: {}, layers: []},\n  styleDiffing: true,\n  projection: 'mercator',\n  renderWorldCopies: true,\n\n  // Callbacks\n  onError: e => console.error(e.error), // eslint-disable-line\n\n  // Globals\n  RTLTextPlugin:\n    'https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js'\n};\n\nconst Map = forwardRef<MapRef, MapProps>((props, ref) => {\n  const mountedMapsContext = useContext(MountedMapsContext);\n  const [mapInstance, setMapInstance] = useState<Mapbox>(null);\n  const containerRef = useRef();\n\n  const {current: contextValue} = useRef<MapContextValue>({mapLib: null, map: null});\n\n  useEffect(() => {\n    const mapLib = props.mapLib;\n    let isMounted = true;\n    let mapbox;\n\n    Promise.resolve(mapLib || import('mapbox-gl'))\n      .then(mapboxgl => {\n        if (!isMounted) {\n          return;\n        }\n\n        if (!mapboxgl.Map) {\n          // commonjs style\n          mapboxgl = mapboxgl.default;\n        }\n        if (!mapboxgl || !mapboxgl.Map) {\n          throw new Error('Invalid mapLib');\n        }\n\n        // workerUrl & workerClass may change the result of supported()\n        // https://github.com/visgl/react-map-gl/discussions/2027\n        setGlobals(mapboxgl, props);\n        if (!mapboxgl.supported || mapboxgl.supported(props)) {\n          if (props.reuseMaps) {\n            mapbox = Mapbox.reuse(props, containerRef.current);\n          }\n          if (!mapbox) {\n            mapbox = new Mapbox(mapboxgl.Map, props, containerRef.current);\n          }\n          contextValue.map = createRef(mapbox, mapboxgl);\n          contextValue.mapLib = mapboxgl;\n\n          setMapInstance(mapbox);\n          mountedMapsContext?.onMapMount(contextValue.map, props.id);\n        } else {\n          throw new Error('Map is not supported by this browser');\n        }\n      })\n      .catch(error => {\n        props.onError({\n          type: 'error',\n          target: null,\n          originalEvent: null,\n          error\n        });\n      });\n\n    return () => {\n      isMounted = false;\n      if (mapbox) {\n        mountedMapsContext?.onMapUnmount(props.id);\n        if (props.reuseMaps) {\n          mapbox.recycle();\n        } else {\n          mapbox.destroy();\n        }\n      }\n    };\n  }, []);\n\n  useIsomorphicLayoutEffect(() => {\n    if (mapInstance) {\n      mapInstance.setProps(props);\n    }\n  });\n\n  useImperativeHandle(ref, () => contextValue.map, [mapInstance]);\n\n  const style: CSSProperties = useMemo(\n    () => ({\n      position: 'relative',\n      width: '100%',\n      height: '100%',\n      ...props.style\n    }),\n    [props.style]\n  );\n\n  const CHILD_CONTAINER_STYLE = {\n    height: '100%'\n  };\n\n  return (\n    <div id={props.id} ref={containerRef} style={style}>\n      {mapInstance && (\n        <MapContext.Provider value={contextValue}>\n          <div mapboxgl-children=\"\" style={CHILD_CONTAINER_STYLE}>\n            {props.children}\n          </div>\n        </MapContext.Provider>\n      )}\n    </div>\n  );\n});\n\nMap.displayName = 'Map';\nMap.defaultProps = defaultProps;\n\nexport default Map;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}