{"ast":null,"code":"var _defineProperty = require(\"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\nvar _assertThisInitialized = require(\"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/assertThisInitialized.js\").default;\nvar _construct = require(\"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/construct.js\").default;\nvar _get = require(\"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/get.js\").default;\nvar _getPrototypeOf = require(\"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/getPrototypeOf.js\").default;\nvar _possibleConstructorReturn = require(\"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\").default;\nvar _toArray = require(\"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/toArray.js\").default;\nvar _toConsumableArray = require(\"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/toConsumableArray.js\").default;\nvar _slicedToArray = require(\"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _createForOfIteratorHelper = require(\"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\nvar _createClass = require(\"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _classCallCheck = require(\"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _inherits = require(\"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nvar _wrapNativeSuper = require(\"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/wrapNativeSuper.js\").default;\n/* MapLibre GL JS is licensed under the 3-Clause BSD License. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v2.4.0/LICENSE.txt */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.maplibregl = factory());\n})(this, function () {\n  'use strict';\n\n  /* eslint-disable */\n  var shared, worker, maplibregl;\n  // define gets called three times: one for each chunk. we rely on the order\n  // they're imported to know which is which\n  function define(_, chunk) {\n    if (!shared) {\n      shared = chunk;\n    } else if (!worker) {\n      worker = chunk;\n    } else {\n      var workerBundleString = 'var sharedChunk = {}; (' + shared + ')(sharedChunk); (' + worker + ')(sharedChunk);';\n      var sharedChunk = {};\n      shared(sharedChunk);\n      maplibregl = chunk(sharedChunk);\n      if (typeof window !== 'undefined') {\n        maplibregl.workerUrl = window.URL.createObjectURL(new Blob([workerBundleString], {\n          type: 'text/javascript'\n        }));\n      }\n    }\n  }\n  define([\"exports\"], function (t) {\n    \"use strict\";\n\n    var e = r;\n    function r(t, e, r, n) {\n      this.cx = 3 * t, this.bx = 3 * (r - t) - this.cx, this.ax = 1 - this.cx - this.bx, this.cy = 3 * e, this.by = 3 * (n - e) - this.cy, this.ay = 1 - this.cy - this.by, this.p1x = t, this.p1y = e, this.p2x = r, this.p2y = n;\n    }\n    function n(t, r, n, i) {\n      var a = new e(t, r, n, i);\n      return function (t) {\n        return a.solve(t);\n      };\n    }\n    r.prototype = {\n      sampleCurveX: function sampleCurveX(t) {\n        return ((this.ax * t + this.bx) * t + this.cx) * t;\n      },\n      sampleCurveY: function sampleCurveY(t) {\n        return ((this.ay * t + this.by) * t + this.cy) * t;\n      },\n      sampleCurveDerivativeX: function sampleCurveDerivativeX(t) {\n        return (3 * this.ax * t + 2 * this.bx) * t + this.cx;\n      },\n      solveCurveX: function solveCurveX(t, e) {\n        if (void 0 === e && (e = 1e-6), t < 0) return 0;\n        if (t > 1) return 1;\n        for (var r = t, n = 0; n < 8; n++) {\n          var i = this.sampleCurveX(r) - t;\n          if (Math.abs(i) < e) return r;\n          var a = this.sampleCurveDerivativeX(r);\n          if (Math.abs(a) < 1e-6) break;\n          r -= i / a;\n        }\n        var s = 0,\n          o = 1;\n        for (r = t, n = 0; n < 20 && (i = this.sampleCurveX(r), !(Math.abs(i - t) < e)); n++) t > i ? s = r : o = r, r = .5 * (o - s) + s;\n        return r;\n      },\n      solve: function solve(t, e) {\n        return this.sampleCurveY(this.solveCurveX(t, e));\n      }\n    };\n    var i = n(.25, .1, .25, 1);\n    function a(t, e, r) {\n      return Math.min(r, Math.max(e, t));\n    }\n    function s(t, e, r) {\n      var n = r - e,\n        i = ((t - e) % n + n) % n + e;\n      return i === e ? r : i;\n    }\n    function o(t) {\n      for (var _len = arguments.length, e = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        e[_key - 1] = arguments[_key];\n      }\n      for (var _i2 = 0, _e2 = e; _i2 < _e2.length; _i2++) {\n        var _r2 = _e2[_i2];\n        for (var _e3 in _r2) t[_e3] = _r2[_e3];\n      }\n      return t;\n    }\n    var l = 1;\n    function u(t, e) {\n      t.forEach(function (t) {\n        e[t] && (e[t] = e[t].bind(e));\n      });\n    }\n    function c(t, e, r) {\n      var n = {};\n      for (var _i3 in t) n[_i3] = e.call(r || this, t[_i3], _i3, t);\n      return n;\n    }\n    function h(t, e, r) {\n      var n = {};\n      for (var _i4 in t) e.call(r || this, t[_i4], _i4, t) && (n[_i4] = t[_i4]);\n      return n;\n    }\n    function p(t) {\n      return Array.isArray(t) ? t.map(p) : \"object\" == typeof t && t ? c(t, p) : t;\n    }\n    var f = {};\n    function d(t) {\n      f[t] || (\"undefined\" != typeof console && console.warn(t), f[t] = !0);\n    }\n    function y(t, e, r) {\n      return (r.y - t.y) * (e.x - t.x) > (e.y - t.y) * (r.x - t.x);\n    }\n    function m(t) {\n      var e = 0;\n      for (var _r3, _n2, _i5 = 0, _a2 = t.length, _s2 = _a2 - 1; _i5 < _a2; _s2 = _i5++) _r3 = t[_i5], _n2 = t[_s2], e += (_n2.x - _r3.x) * (_r3.y + _n2.y);\n      return e;\n    }\n    function g() {\n      return \"undefined\" != typeof WorkerGlobalScope && \"undefined\" != typeof self && self instanceof WorkerGlobalScope;\n    }\n    function x(t) {\n      var e = {};\n      if (t.replace(/(?:^|(?:\\s*\\,\\s*))([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)(?:\\=(?:([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)|(?:\\\"((?:[^\"\\\\]|\\\\.)*)\\\")))?/g, function (t, r, n, i) {\n        var a = n || i;\n        return e[r] = !a || a.toLowerCase(), \"\";\n      }), e[\"max-age\"]) {\n        var _t2 = parseInt(e[\"max-age\"], 10);\n        isNaN(_t2) ? delete e[\"max-age\"] : e[\"max-age\"] = _t2;\n      }\n      return e;\n    }\n    var v,\n      b,\n      w = null;\n    function _(t) {\n      if (null == w) {\n        var _e4 = t.navigator ? t.navigator.userAgent : null;\n        w = !!t.safari || !(!_e4 || !(/\\b(iPad|iPhone|iPod)\\b/.test(_e4) || _e4.match(\"Safari\") && !_e4.match(\"Chrome\")));\n      }\n      return w;\n    }\n    function A(t) {\n      return \"undefined\" != typeof ImageBitmap && t instanceof ImageBitmap;\n    }\n    var k = {\n      now: \"undefined\" != typeof performance && performance && performance.now ? performance.now.bind(performance) : Date.now.bind(Date),\n      frame: function frame(t) {\n        var e = requestAnimationFrame(t);\n        return {\n          cancel: function cancel() {\n            return cancelAnimationFrame(e);\n          }\n        };\n      },\n      getImageData: function getImageData(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var r = window.document.createElement(\"canvas\"),\n          n = r.getContext(\"2d\");\n        if (!n) throw new Error(\"failed to create canvas 2d context\");\n        return r.width = t.width, r.height = t.height, n.drawImage(t, 0, 0, t.width, t.height), n.getImageData(-e, -e, t.width + 2 * e, t.height + 2 * e);\n      },\n      resolveURL: function resolveURL(t) {\n        return v || (v = document.createElement(\"a\")), v.href = t, v.href;\n      },\n      hardwareConcurrency: \"undefined\" != typeof navigator && navigator.hardwareConcurrency || 4,\n      get prefersReducedMotion() {\n        return !!matchMedia && (null == b && (b = matchMedia(\"(prefers-reduced-motion: reduce)\")), b.matches);\n      }\n    };\n    var S = I;\n    function I(t, e) {\n      this.x = t, this.y = e;\n    }\n    I.prototype = {\n      clone: function clone() {\n        return new I(this.x, this.y);\n      },\n      add: function add(t) {\n        return this.clone()._add(t);\n      },\n      sub: function sub(t) {\n        return this.clone()._sub(t);\n      },\n      multByPoint: function multByPoint(t) {\n        return this.clone()._multByPoint(t);\n      },\n      divByPoint: function divByPoint(t) {\n        return this.clone()._divByPoint(t);\n      },\n      mult: function mult(t) {\n        return this.clone()._mult(t);\n      },\n      div: function div(t) {\n        return this.clone()._div(t);\n      },\n      rotate: function rotate(t) {\n        return this.clone()._rotate(t);\n      },\n      rotateAround: function rotateAround(t, e) {\n        return this.clone()._rotateAround(t, e);\n      },\n      matMult: function matMult(t) {\n        return this.clone()._matMult(t);\n      },\n      unit: function unit() {\n        return this.clone()._unit();\n      },\n      perp: function perp() {\n        return this.clone()._perp();\n      },\n      round: function round() {\n        return this.clone()._round();\n      },\n      mag: function mag() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n      },\n      equals: function equals(t) {\n        return this.x === t.x && this.y === t.y;\n      },\n      dist: function dist(t) {\n        return Math.sqrt(this.distSqr(t));\n      },\n      distSqr: function distSqr(t) {\n        var e = t.x - this.x,\n          r = t.y - this.y;\n        return e * e + r * r;\n      },\n      angle: function angle() {\n        return Math.atan2(this.y, this.x);\n      },\n      angleTo: function angleTo(t) {\n        return Math.atan2(this.y - t.y, this.x - t.x);\n      },\n      angleWith: function angleWith(t) {\n        return this.angleWithSep(t.x, t.y);\n      },\n      angleWithSep: function angleWithSep(t, e) {\n        return Math.atan2(this.x * e - this.y * t, this.x * t + this.y * e);\n      },\n      _matMult: function _matMult(t) {\n        var e = t[2] * this.x + t[3] * this.y;\n        return this.x = t[0] * this.x + t[1] * this.y, this.y = e, this;\n      },\n      _add: function _add(t) {\n        return this.x += t.x, this.y += t.y, this;\n      },\n      _sub: function _sub(t) {\n        return this.x -= t.x, this.y -= t.y, this;\n      },\n      _mult: function _mult(t) {\n        return this.x *= t, this.y *= t, this;\n      },\n      _div: function _div(t) {\n        return this.x /= t, this.y /= t, this;\n      },\n      _multByPoint: function _multByPoint(t) {\n        return this.x *= t.x, this.y *= t.y, this;\n      },\n      _divByPoint: function _divByPoint(t) {\n        return this.x /= t.x, this.y /= t.y, this;\n      },\n      _unit: function _unit() {\n        return this._div(this.mag()), this;\n      },\n      _perp: function _perp() {\n        var t = this.y;\n        return this.y = this.x, this.x = -t, this;\n      },\n      _rotate: function _rotate(t) {\n        var e = Math.cos(t),\n          r = Math.sin(t),\n          n = r * this.x + e * this.y;\n        return this.x = e * this.x - r * this.y, this.y = n, this;\n      },\n      _rotateAround: function _rotateAround(t, e) {\n        var r = Math.cos(t),\n          n = Math.sin(t),\n          i = e.y + n * (this.x - e.x) + r * (this.y - e.y);\n        return this.x = e.x + r * (this.x - e.x) - n * (this.y - e.y), this.y = i, this;\n      },\n      _round: function _round() {\n        return this.x = Math.round(this.x), this.y = Math.round(this.y), this;\n      }\n    }, I.convert = function (t) {\n      return t instanceof I ? t : Array.isArray(t) ? new I(t[0], t[1]) : t;\n    };\n    var M = {\n        MAX_PARALLEL_IMAGE_REQUESTS: 16,\n        REGISTERED_PROTOCOLS: {}\n      },\n      z = \"mapbox-tiles\";\n    var B,\n      C,\n      P = 500,\n      V = 50;\n    function E() {\n      \"undefined\" == typeof caches || B || (B = caches.open(z));\n    }\n    var F = 1 / 0;\n    var T = {\n      supported: !1,\n      testSupport: function testSupport(t) {\n        !$ && D && (R ? O(t) : L = t);\n      }\n    };\n    var L,\n      D,\n      $ = !1,\n      R = !1;\n    function O(t) {\n      var e = t.createTexture();\n      t.bindTexture(t.TEXTURE_2D, e);\n      try {\n        if (t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, t.RGBA, t.UNSIGNED_BYTE, D), t.isContextLost()) return;\n        T.supported = !0;\n      } catch (t) {}\n      t.deleteTexture(e), $ = !0;\n    }\n    \"undefined\" != typeof document && (D = document.createElement(\"img\"), D.onload = function () {\n      L && O(L), L = null, R = !0;\n    }, D.onerror = function () {\n      $ = !0, L = null;\n    }, D.src = \"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=\");\n    var U = {\n      Unknown: \"Unknown\",\n      Style: \"Style\",\n      Source: \"Source\",\n      Tile: \"Tile\",\n      Glyphs: \"Glyphs\",\n      SpriteImage: \"SpriteImage\",\n      SpriteJSON: \"SpriteJSON\",\n      Image: \"Image\"\n    };\n    \"function\" == typeof Object.freeze && Object.freeze(U);\n    var q = /*#__PURE__*/function (_Error) {\n      _inherits(q, _Error);\n      var _super = _createSuper(q);\n      function q(t, e, r, n) {\n        var _this;\n        _classCallCheck(this, q);\n        _this = _super.call(this, \"AJAXError: \".concat(e, \" (\").concat(t, \"): \").concat(r)), _this.status = t, _this.statusText = e, _this.url = r, _this.body = n;\n        return _this;\n      }\n      return _createClass(q);\n    }( /*#__PURE__*/_wrapNativeSuper(Error));\n    var j = g() ? function () {\n      return self.worker && self.worker.referrer;\n    } : function () {\n      return (\"blob:\" === window.location.protocol ? window.parent : window).location.href;\n    };\n    function N(t, e) {\n      var r = new AbortController(),\n        n = new Request(t.url, {\n          method: t.method || \"GET\",\n          body: t.body,\n          credentials: t.credentials,\n          headers: t.headers,\n          referrer: j(),\n          signal: r.signal\n        });\n      var i = !1,\n        a = !1;\n      \"json\" === t.type && n.headers.set(\"Accept\", \"application/json\");\n      return function (r, s, o) {\n        if (a) return;\n        var l = Date.now();\n        fetch(n).then(function (r) {\n          return r.ok ? function (r, s, o) {\n            (\"arrayBuffer\" === t.type ? r.arrayBuffer() : \"json\" === t.type ? r.json() : r.text()).then(function (t) {\n              a || (s && o && function (t, e, r) {\n                if (E(), !B) return;\n                var n = {\n                  status: e.status,\n                  statusText: e.statusText,\n                  headers: new Headers()\n                };\n                e.headers.forEach(function (t, e) {\n                  return n.headers.set(e, t);\n                });\n                var i = x(e.headers.get(\"Cache-Control\") || \"\");\n                i[\"no-store\"] || (i[\"max-age\"] && n.headers.set(\"Expires\", new Date(r + 1e3 * i[\"max-age\"]).toUTCString()), new Date(n.headers.get(\"Expires\")).getTime() - r < 42e4 || function (t, e) {\n                  if (void 0 === C) try {\n                    new Response(new ReadableStream()), C = !0;\n                  } catch (t) {\n                    C = !1;\n                  }\n                  C ? e(t.body) : t.blob().then(e);\n                }(e, function (e) {\n                  var r = new Response(e, n);\n                  E(), B && B.then(function (e) {\n                    return e.put(function (t) {\n                      var e = t.indexOf(\"?\");\n                      return e < 0 ? t : t.slice(0, e);\n                    }(t.url), r);\n                  }).catch(function (t) {\n                    return d(t.message);\n                  });\n                }));\n              }(n, s, o), i = !0, e(null, t, r.headers.get(\"Cache-Control\"), r.headers.get(\"Expires\")));\n            }).catch(function (t) {\n              a || e(new Error(t.message));\n            });\n          }(r, null, l) : r.blob().then(function (n) {\n            return e(new q(r.status, r.statusText, t.url, n));\n          });\n        }).catch(function (t) {\n          20 !== t.code && e(new Error(t.message));\n        });\n      }(), {\n        cancel: function cancel() {\n          a = !0, i || r.abort();\n        }\n      };\n    }\n    var Z = function Z(t, e) {\n        if (/:\\/\\//.test(t.url) && !/^https?:|^file:/.test(t.url)) {\n          if (g() && self.worker && self.worker.actor) return self.worker.actor.send(\"getResource\", t, e);\n          if (!g()) {\n            var _r4 = t.url.substring(0, t.url.indexOf(\"://\"));\n            return (M.REGISTERED_PROTOCOLS[_r4] || N)(t, e);\n          }\n        }\n        if (!(/^file:/.test(r = t.url) || /^file:/.test(j()) && !/^\\w+:/.test(r))) {\n          if (fetch && Request && AbortController && Object.prototype.hasOwnProperty.call(Request.prototype, \"signal\")) return N(t, e);\n          if (g() && self.worker && self.worker.actor) return self.worker.actor.send(\"getResource\", t, e, void 0, !0);\n        }\n        var r;\n        return function (t, e) {\n          var r = new XMLHttpRequest();\n          r.open(t.method || \"GET\", t.url, !0), \"arrayBuffer\" === t.type && (r.responseType = \"arraybuffer\");\n          for (var _e5 in t.headers) r.setRequestHeader(_e5, t.headers[_e5]);\n          return \"json\" === t.type && (r.responseType = \"text\", r.setRequestHeader(\"Accept\", \"application/json\")), r.withCredentials = \"include\" === t.credentials, r.onerror = function () {\n            e(new Error(r.statusText));\n          }, r.onload = function () {\n            if ((r.status >= 200 && r.status < 300 || 0 === r.status) && null !== r.response) {\n              var _n3 = r.response;\n              if (\"json\" === t.type) try {\n                _n3 = JSON.parse(r.response);\n              } catch (t) {\n                return e(t);\n              }\n              e(null, _n3, r.getResponseHeader(\"Cache-Control\"), r.getResponseHeader(\"Expires\"));\n            } else {\n              var _n4 = new Blob([r.response], {\n                type: r.getResponseHeader(\"Content-Type\")\n              });\n              e(new q(r.status, r.statusText, t.url, _n4));\n            }\n          }, r.send(t.body), {\n            cancel: function cancel() {\n              return r.abort();\n            }\n          };\n        }(t, e);\n      },\n      K = function K(t, e) {\n        return Z(o(t, {\n          type: \"arrayBuffer\"\n        }), e);\n      };\n    function G(t) {\n      var e = window.document.createElement(\"a\");\n      return e.href = t, e.protocol === window.document.location.protocol && e.host === window.document.location.host;\n    }\n    var J = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=\";\n    var X, Y;\n    X = [], Y = 0;\n    var H = function H(t, e) {\n      if (T.supported && (t.headers || (t.headers = {}), t.headers.accept = \"image/webp,*/*\"), Y >= M.MAX_PARALLEL_IMAGE_REQUESTS) {\n        var _r5 = {\n          requestParameters: t,\n          callback: e,\n          cancelled: !1,\n          cancel: function cancel() {\n            this.cancelled = !0;\n          }\n        };\n        return X.push(_r5), _r5;\n      }\n      Y++;\n      var r = !1;\n      var n = function n() {\n          if (!r) for (r = !0, Y--; X.length && Y < M.MAX_PARALLEL_IMAGE_REQUESTS;) {\n            var _t3 = X.shift(),\n              _e6 = _t3.requestParameters,\n              _r6 = _t3.callback,\n              _n5 = _t3.cancelled;\n            _n5 || (_t3.cancel = H(_e6, _r6).cancel);\n          }\n        },\n        i = K(t, function (t, r, i, a) {\n          n(), t ? e(t) : r && function (t, e) {\n            \"function\" == typeof createImageBitmap ? function (t, e) {\n              var r = new Blob([new Uint8Array(t)], {\n                type: \"image/png\"\n              });\n              createImageBitmap(r).then(function (t) {\n                e(null, t);\n              }).catch(function (t) {\n                e(new Error(\"Could not load image because of \".concat(t.message, \". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.\")));\n              });\n            }(t, e) : function (t, e) {\n              var r = new Image();\n              r.onload = function () {\n                e(null, r), URL.revokeObjectURL(r.src), r.onload = null, window.requestAnimationFrame(function () {\n                  r.src = J;\n                });\n              }, r.onerror = function () {\n                return e(new Error(\"Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.\"));\n              };\n              var n = new Blob([new Uint8Array(t)], {\n                type: \"image/png\"\n              });\n              r.src = t.byteLength ? URL.createObjectURL(n) : J;\n            }(t, e);\n          }(r, function (t, r) {\n            null != t ? e(t) : null != r && e(null, r, {\n              cacheControl: i,\n              expires: a\n            });\n          });\n        });\n      return {\n        cancel: function cancel() {\n          i.cancel(), n();\n        }\n      };\n    };\n    function W(t, e, r) {\n      r[t] && -1 !== r[t].indexOf(e) || (r[t] = r[t] || [], r[t].push(e));\n    }\n    function Q(t, e, r) {\n      if (r && r[t]) {\n        var _n6 = r[t].indexOf(e);\n        -1 !== _n6 && r[t].splice(_n6, 1);\n      }\n    }\n    var tt = /*#__PURE__*/_createClass(function tt(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      _classCallCheck(this, tt);\n      o(this, e), this.type = t;\n    });\n    var et = /*#__PURE__*/function (_tt) {\n      _inherits(et, _tt);\n      var _super2 = _createSuper(et);\n      function et(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        _classCallCheck(this, et);\n        return _super2.call(this, \"error\", o({\n          error: t\n        }, e));\n      }\n      return _createClass(et);\n    }(tt);\n    var rt = /*#__PURE__*/function () {\n      function rt() {\n        _classCallCheck(this, rt);\n      }\n      _createClass(rt, [{\n        key: \"on\",\n        value: function on(t, e) {\n          return this._listeners = this._listeners || {}, W(t, e, this._listeners), this;\n        }\n      }, {\n        key: \"off\",\n        value: function off(t, e) {\n          return Q(t, e, this._listeners), Q(t, e, this._oneTimeListeners), this;\n        }\n      }, {\n        key: \"once\",\n        value: function once(t, e) {\n          return this._oneTimeListeners = this._oneTimeListeners || {}, W(t, e, this._oneTimeListeners), this;\n        }\n      }, {\n        key: \"fire\",\n        value: function fire(t, e) {\n          \"string\" == typeof t && (t = new tt(t, e || {}));\n          var r = t.type;\n          if (this.listens(r)) {\n            t.target = this;\n            var _e7 = this._listeners && this._listeners[r] ? this._listeners[r].slice() : [];\n            var _iterator = _createForOfIteratorHelper(_e7),\n              _step;\n            try {\n              for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                var _r7 = _step.value;\n                _r7.call(this, t);\n              }\n            } catch (err) {\n              _iterator.e(err);\n            } finally {\n              _iterator.f();\n            }\n            var _n7 = this._oneTimeListeners && this._oneTimeListeners[r] ? this._oneTimeListeners[r].slice() : [];\n            var _iterator2 = _createForOfIteratorHelper(_n7),\n              _step2;\n            try {\n              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                var _e8 = _step2.value;\n                Q(r, _e8, this._oneTimeListeners), _e8.call(this, t);\n              }\n            } catch (err) {\n              _iterator2.e(err);\n            } finally {\n              _iterator2.f();\n            }\n            var _i6 = this._eventedParent;\n            _i6 && (o(t, \"function\" == typeof this._eventedParentData ? this._eventedParentData() : this._eventedParentData), _i6.fire(t));\n          } else t instanceof et && console.error(t.error);\n          return this;\n        }\n      }, {\n        key: \"listens\",\n        value: function listens(t) {\n          return this._listeners && this._listeners[t] && this._listeners[t].length > 0 || this._oneTimeListeners && this._oneTimeListeners[t] && this._oneTimeListeners[t].length > 0 || this._eventedParent && this._eventedParent.listens(t);\n        }\n      }, {\n        key: \"setEventedParent\",\n        value: function setEventedParent(t, e) {\n          return this._eventedParent = t, this._eventedParentData = e, this;\n        }\n      }]);\n      return rt;\n    }();\n    var nt = {\n      $version: 8,\n      $root: {\n        version: {\n          required: !0,\n          type: \"enum\",\n          values: [8]\n        },\n        name: {\n          type: \"string\"\n        },\n        metadata: {\n          type: \"*\"\n        },\n        center: {\n          type: \"array\",\n          value: \"number\"\n        },\n        zoom: {\n          type: \"number\"\n        },\n        bearing: {\n          type: \"number\",\n          default: 0,\n          period: 360,\n          units: \"degrees\"\n        },\n        pitch: {\n          type: \"number\",\n          default: 0,\n          units: \"degrees\"\n        },\n        light: {\n          type: \"light\"\n        },\n        terrain: {\n          type: \"terrain\"\n        },\n        sources: {\n          required: !0,\n          type: \"sources\"\n        },\n        sprite: {\n          type: \"string\"\n        },\n        glyphs: {\n          type: \"string\"\n        },\n        transition: {\n          type: \"transition\"\n        },\n        layers: {\n          required: !0,\n          type: \"array\",\n          value: \"layer\"\n        }\n      },\n      sources: {\n        \"*\": {\n          type: \"source\"\n        }\n      },\n      source: [\"source_vector\", \"source_raster\", \"source_raster_dem\", \"source_geojson\", \"source_video\", \"source_image\"],\n      source_vector: {\n        type: {\n          required: !0,\n          type: \"enum\",\n          values: {\n            vector: {}\n          }\n        },\n        url: {\n          type: \"string\"\n        },\n        tiles: {\n          type: \"array\",\n          value: \"string\"\n        },\n        bounds: {\n          type: \"array\",\n          value: \"number\",\n          length: 4,\n          default: [-180, -85.051129, 180, 85.051129]\n        },\n        scheme: {\n          type: \"enum\",\n          values: {\n            xyz: {},\n            tms: {}\n          },\n          default: \"xyz\"\n        },\n        minzoom: {\n          type: \"number\",\n          default: 0\n        },\n        maxzoom: {\n          type: \"number\",\n          default: 22\n        },\n        attribution: {\n          type: \"string\"\n        },\n        promoteId: {\n          type: \"promoteId\"\n        },\n        volatile: {\n          type: \"boolean\",\n          default: !1\n        },\n        \"*\": {\n          type: \"*\"\n        }\n      },\n      source_raster: {\n        type: {\n          required: !0,\n          type: \"enum\",\n          values: {\n            raster: {}\n          }\n        },\n        url: {\n          type: \"string\"\n        },\n        tiles: {\n          type: \"array\",\n          value: \"string\"\n        },\n        bounds: {\n          type: \"array\",\n          value: \"number\",\n          length: 4,\n          default: [-180, -85.051129, 180, 85.051129]\n        },\n        minzoom: {\n          type: \"number\",\n          default: 0\n        },\n        maxzoom: {\n          type: \"number\",\n          default: 22\n        },\n        tileSize: {\n          type: \"number\",\n          default: 512,\n          units: \"pixels\"\n        },\n        scheme: {\n          type: \"enum\",\n          values: {\n            xyz: {},\n            tms: {}\n          },\n          default: \"xyz\"\n        },\n        attribution: {\n          type: \"string\"\n        },\n        volatile: {\n          type: \"boolean\",\n          default: !1\n        },\n        \"*\": {\n          type: \"*\"\n        }\n      },\n      source_raster_dem: {\n        type: {\n          required: !0,\n          type: \"enum\",\n          values: {\n            \"raster-dem\": {}\n          }\n        },\n        url: {\n          type: \"string\"\n        },\n        tiles: {\n          type: \"array\",\n          value: \"string\"\n        },\n        bounds: {\n          type: \"array\",\n          value: \"number\",\n          length: 4,\n          default: [-180, -85.051129, 180, 85.051129]\n        },\n        minzoom: {\n          type: \"number\",\n          default: 0\n        },\n        maxzoom: {\n          type: \"number\",\n          default: 22\n        },\n        tileSize: {\n          type: \"number\",\n          default: 512,\n          units: \"pixels\"\n        },\n        attribution: {\n          type: \"string\"\n        },\n        encoding: {\n          type: \"enum\",\n          values: {\n            terrarium: {},\n            mapbox: {}\n          },\n          default: \"mapbox\"\n        },\n        volatile: {\n          type: \"boolean\",\n          default: !1\n        },\n        \"*\": {\n          type: \"*\"\n        }\n      },\n      source_geojson: {\n        type: {\n          required: !0,\n          type: \"enum\",\n          values: {\n            geojson: {}\n          }\n        },\n        data: {\n          type: \"*\"\n        },\n        maxzoom: {\n          type: \"number\",\n          default: 18\n        },\n        attribution: {\n          type: \"string\"\n        },\n        buffer: {\n          type: \"number\",\n          default: 128,\n          maximum: 512,\n          minimum: 0\n        },\n        filter: {\n          type: \"*\"\n        },\n        tolerance: {\n          type: \"number\",\n          default: .375\n        },\n        cluster: {\n          type: \"boolean\",\n          default: !1\n        },\n        clusterRadius: {\n          type: \"number\",\n          default: 50,\n          minimum: 0\n        },\n        clusterMaxZoom: {\n          type: \"number\"\n        },\n        clusterMinPoints: {\n          type: \"number\"\n        },\n        clusterProperties: {\n          type: \"*\"\n        },\n        lineMetrics: {\n          type: \"boolean\",\n          default: !1\n        },\n        generateId: {\n          type: \"boolean\",\n          default: !1\n        },\n        promoteId: {\n          type: \"promoteId\"\n        }\n      },\n      source_video: {\n        type: {\n          required: !0,\n          type: \"enum\",\n          values: {\n            video: {}\n          }\n        },\n        urls: {\n          required: !0,\n          type: \"array\",\n          value: \"string\"\n        },\n        coordinates: {\n          required: !0,\n          type: \"array\",\n          length: 4,\n          value: {\n            type: \"array\",\n            length: 2,\n            value: \"number\"\n          }\n        }\n      },\n      source_image: {\n        type: {\n          required: !0,\n          type: \"enum\",\n          values: {\n            image: {}\n          }\n        },\n        url: {\n          required: !0,\n          type: \"string\"\n        },\n        coordinates: {\n          required: !0,\n          type: \"array\",\n          length: 4,\n          value: {\n            type: \"array\",\n            length: 2,\n            value: \"number\"\n          }\n        }\n      },\n      layer: {\n        id: {\n          type: \"string\",\n          required: !0\n        },\n        type: {\n          type: \"enum\",\n          values: {\n            fill: {},\n            line: {},\n            symbol: {},\n            circle: {},\n            heatmap: {},\n            \"fill-extrusion\": {},\n            raster: {},\n            hillshade: {},\n            background: {}\n          },\n          required: !0\n        },\n        metadata: {\n          type: \"*\"\n        },\n        source: {\n          type: \"string\"\n        },\n        \"source-layer\": {\n          type: \"string\"\n        },\n        minzoom: {\n          type: \"number\",\n          minimum: 0,\n          maximum: 24\n        },\n        maxzoom: {\n          type: \"number\",\n          minimum: 0,\n          maximum: 24\n        },\n        filter: {\n          type: \"filter\"\n        },\n        layout: {\n          type: \"layout\"\n        },\n        paint: {\n          type: \"paint\"\n        }\n      },\n      layout: [\"layout_fill\", \"layout_line\", \"layout_circle\", \"layout_heatmap\", \"layout_fill-extrusion\", \"layout_symbol\", \"layout_raster\", \"layout_hillshade\", \"layout_background\"],\n      layout_background: {\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_fill: {\n        \"fill-sort-key\": {\n          type: \"number\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_circle: {\n        \"circle-sort-key\": {\n          type: \"number\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_heatmap: {\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      \"layout_fill-extrusion\": {\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_line: {\n        \"line-cap\": {\n          type: \"enum\",\n          values: {\n            butt: {},\n            round: {},\n            square: {}\n          },\n          default: \"butt\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"line-join\": {\n          type: \"enum\",\n          values: {\n            bevel: {},\n            round: {},\n            miter: {}\n          },\n          default: \"miter\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-miter-limit\": {\n          type: \"number\",\n          default: 2,\n          requires: [{\n            \"line-join\": \"miter\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"line-round-limit\": {\n          type: \"number\",\n          default: 1.05,\n          requires: [{\n            \"line-join\": \"round\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"line-sort-key\": {\n          type: \"number\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_symbol: {\n        \"symbol-placement\": {\n          type: \"enum\",\n          values: {\n            point: {},\n            line: {},\n            \"line-center\": {}\n          },\n          default: \"point\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"symbol-spacing\": {\n          type: \"number\",\n          default: 250,\n          minimum: 1,\n          units: \"pixels\",\n          requires: [{\n            \"symbol-placement\": \"line\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"symbol-avoid-edges\": {\n          type: \"boolean\",\n          default: !1,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"symbol-sort-key\": {\n          type: \"number\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"symbol-z-order\": {\n          type: \"enum\",\n          values: {\n            auto: {},\n            \"viewport-y\": {},\n            source: {}\n          },\n          default: \"auto\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-allow-overlap\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"icon-image\", {\n            \"!\": \"icon-overlap\"\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-overlap\": {\n          type: \"enum\",\n          values: {\n            never: {},\n            always: {},\n            cooperative: {}\n          },\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-ignore-placement\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-optional\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"icon-image\", \"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-rotation-alignment\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {},\n            auto: {}\n          },\n          default: \"auto\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-size\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          units: \"factor of the original icon size\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-text-fit\": {\n          type: \"enum\",\n          values: {\n            none: {},\n            width: {},\n            height: {},\n            both: {}\n          },\n          default: \"none\",\n          requires: [\"icon-image\", \"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-text-fit-padding\": {\n          type: \"array\",\n          value: \"number\",\n          length: 4,\n          default: [0, 0, 0, 0],\n          units: \"pixels\",\n          requires: [\"icon-image\", \"text-field\", {\n            \"icon-text-fit\": [\"both\", \"width\", \"height\"]\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-image\": {\n          type: \"resolvedImage\",\n          tokens: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-rotate\": {\n          type: \"number\",\n          default: 0,\n          period: 360,\n          units: \"degrees\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-padding\": {\n          type: \"padding\",\n          default: [2],\n          units: \"pixels\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-keep-upright\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"icon-image\", {\n            \"icon-rotation-alignment\": \"map\"\n          }, {\n            \"symbol-placement\": [\"line\", \"line-center\"]\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-offset\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-anchor\": {\n          type: \"enum\",\n          values: {\n            center: {},\n            left: {},\n            right: {},\n            top: {},\n            bottom: {},\n            \"top-left\": {},\n            \"top-right\": {},\n            \"bottom-left\": {},\n            \"bottom-right\": {}\n          },\n          default: \"center\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-pitch-alignment\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {},\n            auto: {}\n          },\n          default: \"auto\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-pitch-alignment\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {},\n            auto: {}\n          },\n          default: \"auto\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-rotation-alignment\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {},\n            \"viewport-glyph\": {},\n            auto: {}\n          },\n          default: \"auto\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-field\": {\n          type: \"formatted\",\n          default: \"\",\n          tokens: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-font\": {\n          type: \"array\",\n          value: \"string\",\n          default: [\"Open Sans Regular\", \"Arial Unicode MS Regular\"],\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-size\": {\n          type: \"number\",\n          default: 16,\n          minimum: 0,\n          units: \"pixels\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-max-width\": {\n          type: \"number\",\n          default: 10,\n          minimum: 0,\n          units: \"ems\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-line-height\": {\n          type: \"number\",\n          default: 1.2,\n          units: \"ems\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-letter-spacing\": {\n          type: \"number\",\n          default: 0,\n          units: \"ems\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-justify\": {\n          type: \"enum\",\n          values: {\n            auto: {},\n            left: {},\n            center: {},\n            right: {}\n          },\n          default: \"center\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-radial-offset\": {\n          type: \"number\",\n          units: \"ems\",\n          default: 0,\n          requires: [\"text-field\"],\n          \"property-type\": \"data-driven\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          }\n        },\n        \"text-variable-anchor\": {\n          type: \"array\",\n          value: \"enum\",\n          values: {\n            center: {},\n            left: {},\n            right: {},\n            top: {},\n            bottom: {},\n            \"top-left\": {},\n            \"top-right\": {},\n            \"bottom-left\": {},\n            \"bottom-right\": {}\n          },\n          requires: [\"text-field\", {\n            \"symbol-placement\": [\"point\"]\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-anchor\": {\n          type: \"enum\",\n          values: {\n            center: {},\n            left: {},\n            right: {},\n            top: {},\n            bottom: {},\n            \"top-left\": {},\n            \"top-right\": {},\n            \"bottom-left\": {},\n            \"bottom-right\": {}\n          },\n          default: \"center\",\n          requires: [\"text-field\", {\n            \"!\": \"text-variable-anchor\"\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-max-angle\": {\n          type: \"number\",\n          default: 45,\n          units: \"degrees\",\n          requires: [\"text-field\", {\n            \"symbol-placement\": [\"line\", \"line-center\"]\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-writing-mode\": {\n          type: \"array\",\n          value: \"enum\",\n          values: {\n            horizontal: {},\n            vertical: {}\n          },\n          requires: [\"text-field\", {\n            \"symbol-placement\": [\"point\"]\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-rotate\": {\n          type: \"number\",\n          default: 0,\n          period: 360,\n          units: \"degrees\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-padding\": {\n          type: \"number\",\n          default: 2,\n          minimum: 0,\n          units: \"pixels\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-keep-upright\": {\n          type: \"boolean\",\n          default: !0,\n          requires: [\"text-field\", {\n            \"text-rotation-alignment\": \"map\"\n          }, {\n            \"symbol-placement\": [\"line\", \"line-center\"]\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-transform\": {\n          type: \"enum\",\n          values: {\n            none: {},\n            uppercase: {},\n            lowercase: {}\n          },\n          default: \"none\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-offset\": {\n          type: \"array\",\n          value: \"number\",\n          units: \"ems\",\n          length: 2,\n          default: [0, 0],\n          requires: [\"text-field\", {\n            \"!\": \"text-radial-offset\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-allow-overlap\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"text-field\", {\n            \"!\": \"text-overlap\"\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-overlap\": {\n          type: \"enum\",\n          values: {\n            never: {},\n            always: {},\n            cooperative: {}\n          },\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-ignore-placement\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-optional\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"text-field\", \"icon-image\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_raster: {\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_hillshade: {\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      filter: {\n        type: \"array\",\n        value: \"*\"\n      },\n      filter_operator: {\n        type: \"enum\",\n        values: {\n          \"==\": {},\n          \"!=\": {},\n          \">\": {},\n          \">=\": {},\n          \"<\": {},\n          \"<=\": {},\n          in: {},\n          \"!in\": {},\n          all: {},\n          any: {},\n          none: {},\n          has: {},\n          \"!has\": {},\n          within: {}\n        }\n      },\n      geometry_type: {\n        type: \"enum\",\n        values: {\n          Point: {},\n          LineString: {},\n          Polygon: {}\n        }\n      },\n      function: {\n        expression: {\n          type: \"expression\"\n        },\n        stops: {\n          type: \"array\",\n          value: \"function_stop\"\n        },\n        base: {\n          type: \"number\",\n          default: 1,\n          minimum: 0\n        },\n        property: {\n          type: \"string\",\n          default: \"$zoom\"\n        },\n        type: {\n          type: \"enum\",\n          values: {\n            identity: {},\n            exponential: {},\n            interval: {},\n            categorical: {}\n          },\n          default: \"exponential\"\n        },\n        colorSpace: {\n          type: \"enum\",\n          values: {\n            rgb: {},\n            lab: {},\n            hcl: {}\n          },\n          default: \"rgb\"\n        },\n        default: {\n          type: \"*\",\n          required: !1\n        }\n      },\n      function_stop: {\n        type: \"array\",\n        minimum: 0,\n        maximum: 24,\n        value: [\"number\", \"color\"],\n        length: 2\n      },\n      expression: {\n        type: \"array\",\n        value: \"*\",\n        minimum: 1\n      },\n      light: {\n        anchor: {\n          type: \"enum\",\n          default: \"viewport\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          \"property-type\": \"data-constant\",\n          transition: !1,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          }\n        },\n        position: {\n          type: \"array\",\n          default: [1.15, 210, 30],\n          length: 3,\n          value: \"number\",\n          \"property-type\": \"data-constant\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          }\n        },\n        color: {\n          type: \"color\",\n          \"property-type\": \"data-constant\",\n          default: \"#ffffff\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          transition: !0\n        },\n        intensity: {\n          type: \"number\",\n          \"property-type\": \"data-constant\",\n          default: .5,\n          minimum: 0,\n          maximum: 1,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          transition: !0\n        }\n      },\n      terrain: {\n        source: {\n          type: \"string\",\n          required: !0\n        },\n        exaggeration: {\n          type: \"number\",\n          minimum: 0,\n          default: 1\n        },\n        elevationOffset: {\n          type: \"number\",\n          default: 450\n        }\n      },\n      paint: [\"paint_fill\", \"paint_line\", \"paint_circle\", \"paint_heatmap\", \"paint_fill-extrusion\", \"paint_symbol\", \"paint_raster\", \"paint_hillshade\", \"paint_background\"],\n      paint_fill: {\n        \"fill-antialias\": {\n          type: \"boolean\",\n          default: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"fill-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"fill-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          requires: [{\n            \"!\": \"fill-pattern\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"fill-outline-color\": {\n          type: \"color\",\n          transition: !0,\n          requires: [{\n            \"!\": \"fill-pattern\"\n          }, {\n            \"fill-antialias\": !0\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"fill-translate\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"fill-translate-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          requires: [\"fill-translate\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"fill-pattern\": {\n          type: \"resolvedImage\",\n          transition: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"cross-faded-data-driven\"\n        }\n      },\n      \"paint_fill-extrusion\": {\n        \"fill-extrusion-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"fill-extrusion-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          requires: [{\n            \"!\": \"fill-extrusion-pattern\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"fill-extrusion-translate\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"fill-extrusion-translate-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          requires: [\"fill-extrusion-translate\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"fill-extrusion-pattern\": {\n          type: \"resolvedImage\",\n          transition: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"cross-faded-data-driven\"\n        },\n        \"fill-extrusion-height\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          units: \"meters\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"fill-extrusion-base\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          units: \"meters\",\n          transition: !0,\n          requires: [\"fill-extrusion-height\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"fill-extrusion-vertical-gradient\": {\n          type: \"boolean\",\n          default: !0,\n          transition: !1,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        }\n      },\n      paint_line: {\n        \"line-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          requires: [{\n            \"!\": \"line-pattern\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-translate\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"line-translate-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          requires: [\"line-translate\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"line-width\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-gap-width\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-offset\": {\n          type: \"number\",\n          default: 0,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-blur\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-dasharray\": {\n          type: \"array\",\n          value: \"number\",\n          minimum: 0,\n          transition: !0,\n          units: \"line widths\",\n          requires: [{\n            \"!\": \"line-pattern\"\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"cross-faded\"\n        },\n        \"line-pattern\": {\n          type: \"resolvedImage\",\n          transition: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"cross-faded-data-driven\"\n        },\n        \"line-gradient\": {\n          type: \"color\",\n          transition: !1,\n          requires: [{\n            \"!\": \"line-dasharray\"\n          }, {\n            \"!\": \"line-pattern\"\n          }, {\n            source: \"geojson\",\n            has: {\n              lineMetrics: !0\n            }\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"line-progress\"]\n          },\n          \"property-type\": \"color-ramp\"\n        }\n      },\n      paint_circle: {\n        \"circle-radius\": {\n          type: \"number\",\n          default: 5,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"circle-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"circle-blur\": {\n          type: \"number\",\n          default: 0,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"circle-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"circle-translate\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"circle-translate-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          requires: [\"circle-translate\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"circle-pitch-scale\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"circle-pitch-alignment\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"viewport\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"circle-stroke-width\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"circle-stroke-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"circle-stroke-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        }\n      },\n      paint_heatmap: {\n        \"heatmap-radius\": {\n          type: \"number\",\n          default: 30,\n          minimum: 1,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"heatmap-weight\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          transition: !1,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"heatmap-intensity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"heatmap-color\": {\n          type: \"color\",\n          default: [\"interpolate\", [\"linear\"], [\"heatmap-density\"], 0, \"rgba(0, 0, 255, 0)\", .1, \"royalblue\", .3, \"cyan\", .5, \"lime\", .7, \"yellow\", 1, \"red\"],\n          transition: !1,\n          expression: {\n            interpolated: !0,\n            parameters: [\"heatmap-density\"]\n          },\n          \"property-type\": \"color-ramp\"\n        },\n        \"heatmap-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        }\n      },\n      paint_symbol: {\n        \"icon-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-halo-color\": {\n          type: \"color\",\n          default: \"rgba(0, 0, 0, 0)\",\n          transition: !0,\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-halo-width\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-halo-blur\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-translate\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          transition: !0,\n          units: \"pixels\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-translate-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          requires: [\"icon-image\", \"icon-translate\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          overridable: !0,\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-halo-color\": {\n          type: \"color\",\n          default: \"rgba(0, 0, 0, 0)\",\n          transition: !0,\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-halo-width\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-halo-blur\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-translate\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          transition: !0,\n          units: \"pixels\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-translate-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          requires: [\"text-field\", \"text-translate\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        }\n      },\n      paint_raster: {\n        \"raster-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-hue-rotate\": {\n          type: \"number\",\n          default: 0,\n          period: 360,\n          transition: !0,\n          units: \"degrees\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-brightness-min\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-brightness-max\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-saturation\": {\n          type: \"number\",\n          default: 0,\n          minimum: -1,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-contrast\": {\n          type: \"number\",\n          default: 0,\n          minimum: -1,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-resampling\": {\n          type: \"enum\",\n          values: {\n            linear: {},\n            nearest: {}\n          },\n          default: \"linear\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-fade-duration\": {\n          type: \"number\",\n          default: 300,\n          minimum: 0,\n          transition: !1,\n          units: \"milliseconds\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        }\n      },\n      paint_hillshade: {\n        \"hillshade-illumination-direction\": {\n          type: \"number\",\n          default: 335,\n          minimum: 0,\n          maximum: 359,\n          transition: !1,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"hillshade-illumination-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"viewport\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"hillshade-exaggeration\": {\n          type: \"number\",\n          default: .5,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"hillshade-shadow-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"hillshade-highlight-color\": {\n          type: \"color\",\n          default: \"#FFFFFF\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"hillshade-accent-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        }\n      },\n      paint_background: {\n        \"background-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          requires: [{\n            \"!\": \"background-pattern\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"background-pattern\": {\n          type: \"resolvedImage\",\n          transition: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"cross-faded\"\n        },\n        \"background-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        }\n      },\n      transition: {\n        duration: {\n          type: \"number\",\n          default: 300,\n          minimum: 0,\n          units: \"milliseconds\"\n        },\n        delay: {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          units: \"milliseconds\"\n        }\n      },\n      \"property-type\": {\n        \"data-driven\": {\n          type: \"property-type\"\n        },\n        \"cross-faded\": {\n          type: \"property-type\"\n        },\n        \"cross-faded-data-driven\": {\n          type: \"property-type\"\n        },\n        \"color-ramp\": {\n          type: \"property-type\"\n        },\n        \"data-constant\": {\n          type: \"property-type\"\n        },\n        constant: {\n          type: \"property-type\"\n        }\n      },\n      promoteId: {\n        \"*\": {\n          type: \"string\"\n        }\n      }\n    };\n    var it = /*#__PURE__*/_createClass(function it(t, e, r, n) {\n      _classCallCheck(this, it);\n      this.message = (t ? \"\".concat(t, \": \") : \"\") + r, n && (this.identifier = n), null != e && e.__line__ && (this.line = e.__line__);\n    });\n    function at(t) {\n      var e = t.value;\n      return e ? [new it(t.key, e, \"constants have been deprecated as of v8\")] : [];\n    }\n    function st(t) {\n      for (var _len2 = arguments.length, e = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        e[_key2 - 1] = arguments[_key2];\n      }\n      for (var _i7 = 0, _e9 = e; _i7 < _e9.length; _i7++) {\n        var _r8 = _e9[_i7];\n        for (var _e10 in _r8) t[_e10] = _r8[_e10];\n      }\n      return t;\n    }\n    function ot(t) {\n      return t instanceof Number || t instanceof String || t instanceof Boolean ? t.valueOf() : t;\n    }\n    function lt(t) {\n      if (Array.isArray(t)) return t.map(lt);\n      if (t instanceof Object && !(t instanceof Number || t instanceof String || t instanceof Boolean)) {\n        var _e11 = {};\n        for (var _r9 in t) _e11[_r9] = lt(t[_r9]);\n        return _e11;\n      }\n      return ot(t);\n    }\n    var ut = /*#__PURE__*/function (_Error2) {\n      _inherits(ut, _Error2);\n      var _super3 = _createSuper(ut);\n      function ut(t, e) {\n        var _this2;\n        _classCallCheck(this, ut);\n        _this2 = _super3.call(this, e), _this2.message = e, _this2.key = t;\n        return _this2;\n      }\n      return _createClass(ut);\n    }( /*#__PURE__*/_wrapNativeSuper(Error));\n    var ct = /*#__PURE__*/function () {\n      function ct(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n        _classCallCheck(this, ct);\n        this.parent = t, this.bindings = {};\n        var _iterator3 = _createForOfIteratorHelper(e),\n          _step3;\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var _step3$value = _slicedToArray(_step3.value, 2),\n              _t4 = _step3$value[0],\n              _r10 = _step3$value[1];\n            this.bindings[_t4] = _r10;\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n      }\n      _createClass(ct, [{\n        key: \"concat\",\n        value: function concat(t) {\n          return new ct(this, t);\n        }\n      }, {\n        key: \"get\",\n        value: function get(t) {\n          if (this.bindings[t]) return this.bindings[t];\n          if (this.parent) return this.parent.get(t);\n          throw new Error(\"\".concat(t, \" not found in scope.\"));\n        }\n      }, {\n        key: \"has\",\n        value: function has(t) {\n          return !!this.bindings[t] || !!this.parent && this.parent.has(t);\n        }\n      }]);\n      return ct;\n    }();\n    var ht = {\n        kind: \"null\"\n      },\n      pt = {\n        kind: \"number\"\n      },\n      ft = {\n        kind: \"string\"\n      },\n      dt = {\n        kind: \"boolean\"\n      },\n      yt = {\n        kind: \"color\"\n      },\n      mt = {\n        kind: \"object\"\n      },\n      gt = {\n        kind: \"value\"\n      },\n      xt = {\n        kind: \"collator\"\n      },\n      vt = {\n        kind: \"formatted\"\n      },\n      bt = {\n        kind: \"padding\"\n      },\n      wt = {\n        kind: \"resolvedImage\"\n      };\n    function _t(t, e) {\n      return {\n        kind: \"array\",\n        itemType: t,\n        N: e\n      };\n    }\n    function At(t) {\n      if (\"array\" === t.kind) {\n        var _e12 = At(t.itemType);\n        return \"number\" == typeof t.N ? \"array<\".concat(_e12, \", \").concat(t.N, \">\") : \"value\" === t.itemType.kind ? \"array\" : \"array<\".concat(_e12, \">\");\n      }\n      return t.kind;\n    }\n    var kt = [ht, pt, ft, dt, yt, vt, mt, _t(gt), bt, wt];\n    function St(t, e) {\n      if (\"error\" === e.kind) return null;\n      if (\"array\" === t.kind) {\n        if (\"array\" === e.kind && (0 === e.N && \"value\" === e.itemType.kind || !St(t.itemType, e.itemType)) && (\"number\" != typeof t.N || t.N === e.N)) return null;\n      } else {\n        if (t.kind === e.kind) return null;\n        if (\"value\" === t.kind) for (var _i8 = 0, _kt = kt; _i8 < _kt.length; _i8++) {\n          var _t5 = _kt[_i8];\n          if (!St(_t5, e)) return null;\n        }\n      }\n      return \"Expected \".concat(At(t), \" but found \").concat(At(e), \" instead.\");\n    }\n    function It(t, e) {\n      return e.some(function (e) {\n        return e.kind === t.kind;\n      });\n    }\n    function Mt(t, e) {\n      return e.some(function (e) {\n        return \"null\" === e ? null === t : \"array\" === e ? Array.isArray(t) : \"object\" === e ? t && !Array.isArray(t) && \"object\" == typeof t : e === typeof t;\n      });\n    }\n    var zt,\n      Bt = {\n        transparent: [0, 0, 0, 0],\n        aliceblue: [240, 248, 255, 1],\n        antiquewhite: [250, 235, 215, 1],\n        aqua: [0, 255, 255, 1],\n        aquamarine: [127, 255, 212, 1],\n        azure: [240, 255, 255, 1],\n        beige: [245, 245, 220, 1],\n        bisque: [255, 228, 196, 1],\n        black: [0, 0, 0, 1],\n        blanchedalmond: [255, 235, 205, 1],\n        blue: [0, 0, 255, 1],\n        blueviolet: [138, 43, 226, 1],\n        brown: [165, 42, 42, 1],\n        burlywood: [222, 184, 135, 1],\n        cadetblue: [95, 158, 160, 1],\n        chartreuse: [127, 255, 0, 1],\n        chocolate: [210, 105, 30, 1],\n        coral: [255, 127, 80, 1],\n        cornflowerblue: [100, 149, 237, 1],\n        cornsilk: [255, 248, 220, 1],\n        crimson: [220, 20, 60, 1],\n        cyan: [0, 255, 255, 1],\n        darkblue: [0, 0, 139, 1],\n        darkcyan: [0, 139, 139, 1],\n        darkgoldenrod: [184, 134, 11, 1],\n        darkgray: [169, 169, 169, 1],\n        darkgreen: [0, 100, 0, 1],\n        darkgrey: [169, 169, 169, 1],\n        darkkhaki: [189, 183, 107, 1],\n        darkmagenta: [139, 0, 139, 1],\n        darkolivegreen: [85, 107, 47, 1],\n        darkorange: [255, 140, 0, 1],\n        darkorchid: [153, 50, 204, 1],\n        darkred: [139, 0, 0, 1],\n        darksalmon: [233, 150, 122, 1],\n        darkseagreen: [143, 188, 143, 1],\n        darkslateblue: [72, 61, 139, 1],\n        darkslategray: [47, 79, 79, 1],\n        darkslategrey: [47, 79, 79, 1],\n        darkturquoise: [0, 206, 209, 1],\n        darkviolet: [148, 0, 211, 1],\n        deeppink: [255, 20, 147, 1],\n        deepskyblue: [0, 191, 255, 1],\n        dimgray: [105, 105, 105, 1],\n        dimgrey: [105, 105, 105, 1],\n        dodgerblue: [30, 144, 255, 1],\n        firebrick: [178, 34, 34, 1],\n        floralwhite: [255, 250, 240, 1],\n        forestgreen: [34, 139, 34, 1],\n        fuchsia: [255, 0, 255, 1],\n        gainsboro: [220, 220, 220, 1],\n        ghostwhite: [248, 248, 255, 1],\n        gold: [255, 215, 0, 1],\n        goldenrod: [218, 165, 32, 1],\n        gray: [128, 128, 128, 1],\n        green: [0, 128, 0, 1],\n        greenyellow: [173, 255, 47, 1],\n        grey: [128, 128, 128, 1],\n        honeydew: [240, 255, 240, 1],\n        hotpink: [255, 105, 180, 1],\n        indianred: [205, 92, 92, 1],\n        indigo: [75, 0, 130, 1],\n        ivory: [255, 255, 240, 1],\n        khaki: [240, 230, 140, 1],\n        lavender: [230, 230, 250, 1],\n        lavenderblush: [255, 240, 245, 1],\n        lawngreen: [124, 252, 0, 1],\n        lemonchiffon: [255, 250, 205, 1],\n        lightblue: [173, 216, 230, 1],\n        lightcoral: [240, 128, 128, 1],\n        lightcyan: [224, 255, 255, 1],\n        lightgoldenrodyellow: [250, 250, 210, 1],\n        lightgray: [211, 211, 211, 1],\n        lightgreen: [144, 238, 144, 1],\n        lightgrey: [211, 211, 211, 1],\n        lightpink: [255, 182, 193, 1],\n        lightsalmon: [255, 160, 122, 1],\n        lightseagreen: [32, 178, 170, 1],\n        lightskyblue: [135, 206, 250, 1],\n        lightslategray: [119, 136, 153, 1],\n        lightslategrey: [119, 136, 153, 1],\n        lightsteelblue: [176, 196, 222, 1],\n        lightyellow: [255, 255, 224, 1],\n        lime: [0, 255, 0, 1],\n        limegreen: [50, 205, 50, 1],\n        linen: [250, 240, 230, 1],\n        magenta: [255, 0, 255, 1],\n        maroon: [128, 0, 0, 1],\n        mediumaquamarine: [102, 205, 170, 1],\n        mediumblue: [0, 0, 205, 1],\n        mediumorchid: [186, 85, 211, 1],\n        mediumpurple: [147, 112, 219, 1],\n        mediumseagreen: [60, 179, 113, 1],\n        mediumslateblue: [123, 104, 238, 1],\n        mediumspringgreen: [0, 250, 154, 1],\n        mediumturquoise: [72, 209, 204, 1],\n        mediumvioletred: [199, 21, 133, 1],\n        midnightblue: [25, 25, 112, 1],\n        mintcream: [245, 255, 250, 1],\n        mistyrose: [255, 228, 225, 1],\n        moccasin: [255, 228, 181, 1],\n        navajowhite: [255, 222, 173, 1],\n        navy: [0, 0, 128, 1],\n        oldlace: [253, 245, 230, 1],\n        olive: [128, 128, 0, 1],\n        olivedrab: [107, 142, 35, 1],\n        orange: [255, 165, 0, 1],\n        orangered: [255, 69, 0, 1],\n        orchid: [218, 112, 214, 1],\n        palegoldenrod: [238, 232, 170, 1],\n        palegreen: [152, 251, 152, 1],\n        paleturquoise: [175, 238, 238, 1],\n        palevioletred: [219, 112, 147, 1],\n        papayawhip: [255, 239, 213, 1],\n        peachpuff: [255, 218, 185, 1],\n        peru: [205, 133, 63, 1],\n        pink: [255, 192, 203, 1],\n        plum: [221, 160, 221, 1],\n        powderblue: [176, 224, 230, 1],\n        purple: [128, 0, 128, 1],\n        rebeccapurple: [102, 51, 153, 1],\n        red: [255, 0, 0, 1],\n        rosybrown: [188, 143, 143, 1],\n        royalblue: [65, 105, 225, 1],\n        saddlebrown: [139, 69, 19, 1],\n        salmon: [250, 128, 114, 1],\n        sandybrown: [244, 164, 96, 1],\n        seagreen: [46, 139, 87, 1],\n        seashell: [255, 245, 238, 1],\n        sienna: [160, 82, 45, 1],\n        silver: [192, 192, 192, 1],\n        skyblue: [135, 206, 235, 1],\n        slateblue: [106, 90, 205, 1],\n        slategray: [112, 128, 144, 1],\n        slategrey: [112, 128, 144, 1],\n        snow: [255, 250, 250, 1],\n        springgreen: [0, 255, 127, 1],\n        steelblue: [70, 130, 180, 1],\n        tan: [210, 180, 140, 1],\n        teal: [0, 128, 128, 1],\n        thistle: [216, 191, 216, 1],\n        tomato: [255, 99, 71, 1],\n        turquoise: [64, 224, 208, 1],\n        violet: [238, 130, 238, 1],\n        wheat: [245, 222, 179, 1],\n        white: [255, 255, 255, 1],\n        whitesmoke: [245, 245, 245, 1],\n        yellow: [255, 255, 0, 1],\n        yellowgreen: [154, 205, 50, 1]\n      };\n    function Ct(t) {\n      return (t = Math.round(t)) < 0 ? 0 : t > 255 ? 255 : t;\n    }\n    function Pt(t) {\n      return Ct(\"%\" === t[t.length - 1] ? parseFloat(t) / 100 * 255 : parseInt(t));\n    }\n    function Vt(t) {\n      return (e = \"%\" === t[t.length - 1] ? parseFloat(t) / 100 : parseFloat(t)) < 0 ? 0 : e > 1 ? 1 : e;\n      var e;\n    }\n    function Et(t, e, r) {\n      return r < 0 ? r += 1 : r > 1 && (r -= 1), 6 * r < 1 ? t + (e - t) * r * 6 : 2 * r < 1 ? e : 3 * r < 2 ? t + (e - t) * (2 / 3 - r) * 6 : t;\n    }\n    try {\n      zt = {}.parseCSSColor = function (t) {\n        var e,\n          r = t.replace(/ /g, \"\").toLowerCase();\n        if (r in Bt) return Bt[r].slice();\n        if (\"#\" === r[0]) return 4 === r.length ? (e = parseInt(r.substr(1), 16)) >= 0 && e <= 4095 ? [(3840 & e) >> 4 | (3840 & e) >> 8, 240 & e | (240 & e) >> 4, 15 & e | (15 & e) << 4, 1] : null : 7 === r.length && (e = parseInt(r.substr(1), 16)) >= 0 && e <= 16777215 ? [(16711680 & e) >> 16, (65280 & e) >> 8, 255 & e, 1] : null;\n        var n = r.indexOf(\"(\"),\n          i = r.indexOf(\")\");\n        if (-1 !== n && i + 1 === r.length) {\n          var a = r.substr(0, n),\n            s = r.substr(n + 1, i - (n + 1)).split(\",\"),\n            o = 1;\n          switch (a) {\n            case \"rgba\":\n              if (4 !== s.length) return null;\n              o = Vt(s.pop());\n            case \"rgb\":\n              return 3 !== s.length ? null : [Pt(s[0]), Pt(s[1]), Pt(s[2]), o];\n            case \"hsla\":\n              if (4 !== s.length) return null;\n              o = Vt(s.pop());\n            case \"hsl\":\n              if (3 !== s.length) return null;\n              var l = (parseFloat(s[0]) % 360 + 360) % 360 / 360,\n                u = Vt(s[1]),\n                c = Vt(s[2]),\n                h = c <= .5 ? c * (u + 1) : c + u - c * u,\n                p = 2 * c - h;\n              return [Ct(255 * Et(p, h, l + 1 / 3)), Ct(255 * Et(p, h, l)), Ct(255 * Et(p, h, l - 1 / 3)), o];\n            default:\n              return null;\n          }\n        }\n        return null;\n      };\n    } catch (t) {}\n    var Ft = /*#__PURE__*/function () {\n      function Ft(t, e, r) {\n        var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n        _classCallCheck(this, Ft);\n        this.r = t, this.g = e, this.b = r, this.a = n;\n      }\n      _createClass(Ft, [{\n        key: \"toString\",\n        value: function toString() {\n          var _this$toArray = this.toArray(),\n            _this$toArray2 = _slicedToArray(_this$toArray, 4),\n            t = _this$toArray2[0],\n            e = _this$toArray2[1],\n            r = _this$toArray2[2],\n            n = _this$toArray2[3];\n          return \"rgba(\".concat(Math.round(t), \",\").concat(Math.round(e), \",\").concat(Math.round(r), \",\").concat(n, \")\");\n        }\n      }, {\n        key: \"toArray\",\n        value: function toArray() {\n          var t = this.r,\n            e = this.g,\n            r = this.b,\n            n = this.a;\n          return 0 === n ? [0, 0, 0, 0] : [255 * t / n, 255 * e / n, 255 * r / n, n];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t) {\n          if (!t) return;\n          if (t instanceof Ft) return t;\n          if (\"string\" != typeof t) return;\n          var e = zt(t);\n          return e ? new Ft(e[0] / 255 * e[3], e[1] / 255 * e[3], e[2] / 255 * e[3], e[3]) : void 0;\n        }\n      }]);\n      return Ft;\n    }();\n    Ft.black = new Ft(0, 0, 0, 1), Ft.white = new Ft(1, 1, 1, 1), Ft.transparent = new Ft(0, 0, 0, 0), Ft.red = new Ft(1, 0, 0, 1);\n    var Tt = /*#__PURE__*/function () {\n      function Tt(t, e, r) {\n        _classCallCheck(this, Tt);\n        this.sensitivity = t ? e ? \"variant\" : \"case\" : e ? \"accent\" : \"base\", this.locale = r, this.collator = new Intl.Collator(this.locale ? this.locale : [], {\n          sensitivity: this.sensitivity,\n          usage: \"search\"\n        });\n      }\n      _createClass(Tt, [{\n        key: \"compare\",\n        value: function compare(t, e) {\n          return this.collator.compare(t, e);\n        }\n      }, {\n        key: \"resolvedLocale\",\n        value: function resolvedLocale() {\n          return new Intl.Collator(this.locale ? this.locale : []).resolvedOptions().locale;\n        }\n      }]);\n      return Tt;\n    }();\n    var Lt = /*#__PURE__*/_createClass(function Lt(t, e, r, n, i) {\n      _classCallCheck(this, Lt);\n      this.text = t, this.image = e, this.scale = r, this.fontStack = n, this.textColor = i;\n    });\n    var Dt = /*#__PURE__*/function () {\n      function Dt(t) {\n        _classCallCheck(this, Dt);\n        this.sections = t;\n      }\n      _createClass(Dt, [{\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.sections.length || !this.sections.some(function (t) {\n            return 0 !== t.text.length || t.image && 0 !== t.image.name.length;\n          });\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          return 0 === this.sections.length ? \"\" : this.sections.map(function (t) {\n            return t.text;\n          }).join(\"\");\n        }\n      }], [{\n        key: \"fromString\",\n        value: function fromString(t) {\n          return new Dt([new Lt(t, null, null, null, null)]);\n        }\n      }, {\n        key: \"factory\",\n        value: function factory(t) {\n          return t instanceof Dt ? t : Dt.fromString(t);\n        }\n      }]);\n      return Dt;\n    }();\n    var $t = /*#__PURE__*/function () {\n      function $t(t) {\n        _classCallCheck(this, $t);\n        this.values = t.slice();\n      }\n      _createClass($t, [{\n        key: \"toString\",\n        value: function toString() {\n          return JSON.stringify(this.values);\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t) {\n          if (t instanceof $t) return t;\n          if (\"number\" == typeof t) return new $t([t, t, t, t]);\n          if (Array.isArray(t) && !(t.length < 1 || t.length > 4)) {\n            var _iterator4 = _createForOfIteratorHelper(t),\n              _step4;\n            try {\n              for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n                var _e13 = _step4.value;\n                if (\"number\" != typeof _e13) return;\n              }\n            } catch (err) {\n              _iterator4.e(err);\n            } finally {\n              _iterator4.f();\n            }\n            switch (t.length) {\n              case 1:\n                t = [t[0], t[0], t[0], t[0]];\n                break;\n              case 2:\n                t = [t[0], t[1], t[0], t[1]];\n                break;\n              case 3:\n                t = [t[0], t[1], t[2], t[1]];\n            }\n            return new $t(t);\n          }\n        }\n      }]);\n      return $t;\n    }();\n    var Rt = /*#__PURE__*/function () {\n      function Rt(t) {\n        _classCallCheck(this, Rt);\n        this.name = t.name, this.available = t.available;\n      }\n      _createClass(Rt, [{\n        key: \"toString\",\n        value: function toString() {\n          return this.name;\n        }\n      }], [{\n        key: \"fromString\",\n        value: function fromString(t) {\n          return t ? new Rt({\n            name: t,\n            available: !1\n          }) : null;\n        }\n      }]);\n      return Rt;\n    }();\n    function Ot(t, e, r, n) {\n      return \"number\" == typeof t && t >= 0 && t <= 255 && \"number\" == typeof e && e >= 0 && e <= 255 && \"number\" == typeof r && r >= 0 && r <= 255 ? void 0 === n || \"number\" == typeof n && n >= 0 && n <= 1 ? null : \"Invalid rgba value [\".concat([t, e, r, n].join(\", \"), \"]: 'a' must be between 0 and 1.\") : \"Invalid rgba value [\".concat((\"number\" == typeof n ? [t, e, r, n] : [t, e, r]).join(\", \"), \"]: 'r', 'g', and 'b' must be between 0 and 255.\");\n    }\n    function Ut(t) {\n      if (null === t) return !0;\n      if (\"string\" == typeof t) return !0;\n      if (\"boolean\" == typeof t) return !0;\n      if (\"number\" == typeof t) return !0;\n      if (t instanceof Ft) return !0;\n      if (t instanceof Tt) return !0;\n      if (t instanceof Dt) return !0;\n      if (t instanceof $t) return !0;\n      if (t instanceof Rt) return !0;\n      if (Array.isArray(t)) {\n        var _iterator5 = _createForOfIteratorHelper(t),\n          _step5;\n        try {\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            var _e14 = _step5.value;\n            if (!Ut(_e14)) return !1;\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n        return !0;\n      }\n      if (\"object\" == typeof t) {\n        for (var _e15 in t) if (!Ut(t[_e15])) return !1;\n        return !0;\n      }\n      return !1;\n    }\n    function qt(t) {\n      if (null === t) return ht;\n      if (\"string\" == typeof t) return ft;\n      if (\"boolean\" == typeof t) return dt;\n      if (\"number\" == typeof t) return pt;\n      if (t instanceof Ft) return yt;\n      if (t instanceof Tt) return xt;\n      if (t instanceof Dt) return vt;\n      if (t instanceof $t) return bt;\n      if (t instanceof Rt) return wt;\n      if (Array.isArray(t)) {\n        var _e16 = t.length;\n        var _r11;\n        var _iterator6 = _createForOfIteratorHelper(t),\n          _step6;\n        try {\n          for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n            var _e17 = _step6.value;\n            var _t6 = qt(_e17);\n            if (_r11) {\n              if (_r11 === _t6) continue;\n              _r11 = gt;\n              break;\n            }\n            _r11 = _t6;\n          }\n        } catch (err) {\n          _iterator6.e(err);\n        } finally {\n          _iterator6.f();\n        }\n        return _t(_r11 || gt, _e16);\n      }\n      return mt;\n    }\n    function jt(t) {\n      var e = typeof t;\n      return null === t ? \"\" : \"string\" === e || \"number\" === e || \"boolean\" === e ? String(t) : t instanceof Ft || t instanceof Dt || t instanceof $t || t instanceof Rt ? t.toString() : JSON.stringify(t);\n    }\n    var Nt = /*#__PURE__*/function () {\n      function Nt(t, e) {\n        _classCallCheck(this, Nt);\n        this.type = t, this.value = e;\n      }\n      _createClass(Nt, [{\n        key: \"evaluate\",\n        value: function evaluate() {\n          return this.value;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild() {}\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !0;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (2 !== t.length) return e.error(\"'literal' expression requires exactly one argument, but found \".concat(t.length - 1, \" instead.\"));\n          if (!Ut(t[1])) return e.error(\"invalid value\");\n          var r = t[1];\n          var n = qt(r);\n          var i = e.expectedType;\n          return \"array\" !== n.kind || 0 !== n.N || !i || \"array\" !== i.kind || \"number\" == typeof i.N && 0 !== i.N || (n = i), new Nt(n, r);\n        }\n      }]);\n      return Nt;\n    }();\n    var Zt = /*#__PURE__*/function () {\n      function Zt(t) {\n        _classCallCheck(this, Zt);\n        this.name = \"ExpressionEvaluationError\", this.message = t;\n      }\n      _createClass(Zt, [{\n        key: \"toJSON\",\n        value: function toJSON() {\n          return this.message;\n        }\n      }]);\n      return Zt;\n    }();\n    var Kt = {\n      string: ft,\n      number: pt,\n      boolean: dt,\n      object: mt\n    };\n    var Gt = /*#__PURE__*/function () {\n      function Gt(t, e) {\n        _classCallCheck(this, Gt);\n        this.type = t, this.args = e;\n      }\n      _createClass(Gt, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          for (var _e18 = 0; _e18 < this.args.length; _e18++) {\n            var _r12 = this.args[_e18].evaluate(t);\n            if (!St(this.type, qt(_r12))) return _r12;\n            if (_e18 === this.args.length - 1) throw new Zt(\"Expected value to be of type \".concat(At(this.type), \", but found \").concat(At(qt(_r12)), \" instead.\"));\n          }\n          throw new Error();\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          this.args.forEach(t);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.args.every(function (t) {\n            return t.outputDefined();\n          });\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 2) return e.error(\"Expected at least one argument.\");\n          var r,\n            n = 1;\n          var i = t[0];\n          if (\"array\" === i) {\n            var _i9, _a3;\n            if (t.length > 2) {\n              var _r13 = t[1];\n              if (\"string\" != typeof _r13 || !(_r13 in Kt) || \"object\" === _r13) return e.error('The item type argument of \"array\" must be one of string, number, boolean', 1);\n              _i9 = Kt[_r13], n++;\n            } else _i9 = gt;\n            if (t.length > 3) {\n              if (null !== t[2] && (\"number\" != typeof t[2] || t[2] < 0 || t[2] !== Math.floor(t[2]))) return e.error('The length argument to \"array\" must be a positive integer literal', 2);\n              _a3 = t[2], n++;\n            }\n            r = _t(_i9, _a3);\n          } else {\n            if (!Kt[i]) throw new Error(\"Types doesn't contain name = \".concat(i));\n            r = Kt[i];\n          }\n          var a = [];\n          for (; n < t.length; n++) {\n            var _r14 = e.parse(t[n], n, gt);\n            if (!_r14) return null;\n            a.push(_r14);\n          }\n          return new Gt(r, a);\n        }\n      }]);\n      return Gt;\n    }();\n    var Jt = {\n      \"to-boolean\": dt,\n      \"to-color\": yt,\n      \"to-number\": pt,\n      \"to-string\": ft\n    };\n    var Xt = /*#__PURE__*/function () {\n      function Xt(t, e) {\n        _classCallCheck(this, Xt);\n        this.type = t, this.args = e;\n      }\n      _createClass(Xt, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          if (\"boolean\" === this.type.kind) return Boolean(this.args[0].evaluate(t));\n          if (\"color\" === this.type.kind) {\n            var _e19, _r15;\n            var _iterator7 = _createForOfIteratorHelper(this.args),\n              _step7;\n            try {\n              for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n                var _n8 = _step7.value;\n                if (_e19 = _n8.evaluate(t), _r15 = null, _e19 instanceof Ft) return _e19;\n                if (\"string\" == typeof _e19) {\n                  var _r16 = t.parseColor(_e19);\n                  if (_r16) return _r16;\n                } else if (Array.isArray(_e19) && (_r15 = _e19.length < 3 || _e19.length > 4 ? \"Invalid rbga value \".concat(JSON.stringify(_e19), \": expected an array containing either three or four numeric values.\") : Ot(_e19[0], _e19[1], _e19[2], _e19[3]), !_r15)) return new Ft(_e19[0] / 255, _e19[1] / 255, _e19[2] / 255, _e19[3]);\n              }\n            } catch (err) {\n              _iterator7.e(err);\n            } finally {\n              _iterator7.f();\n            }\n            throw new Zt(_r15 || \"Could not parse color from value '\".concat(\"string\" == typeof _e19 ? _e19 : JSON.stringify(_e19), \"'\"));\n          }\n          if (\"padding\" === this.type.kind) {\n            var _e20;\n            var _iterator8 = _createForOfIteratorHelper(this.args),\n              _step8;\n            try {\n              for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n                var _r17 = _step8.value;\n                _e20 = _r17.evaluate(t);\n                var _n9 = $t.parse(_e20);\n                if (_n9) return _n9;\n              }\n            } catch (err) {\n              _iterator8.e(err);\n            } finally {\n              _iterator8.f();\n            }\n            throw new Zt(\"Could not parse padding from value '\".concat(\"string\" == typeof _e20 ? _e20 : JSON.stringify(_e20), \"'\"));\n          }\n          if (\"number\" === this.type.kind) {\n            var _e21 = null;\n            var _iterator9 = _createForOfIteratorHelper(this.args),\n              _step9;\n            try {\n              for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n                var _r18 = _step9.value;\n                if (_e21 = _r18.evaluate(t), null === _e21) return 0;\n                var _n10 = Number(_e21);\n                if (!isNaN(_n10)) return _n10;\n              }\n            } catch (err) {\n              _iterator9.e(err);\n            } finally {\n              _iterator9.f();\n            }\n            throw new Zt(\"Could not convert \".concat(JSON.stringify(_e21), \" to number.\"));\n          }\n          return \"formatted\" === this.type.kind ? Dt.fromString(jt(this.args[0].evaluate(t))) : \"resolvedImage\" === this.type.kind ? Rt.fromString(jt(this.args[0].evaluate(t))) : jt(this.args[0].evaluate(t));\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          this.args.forEach(t);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.args.every(function (t) {\n            return t.outputDefined();\n          });\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 2) return e.error(\"Expected at least one argument.\");\n          var r = t[0];\n          if (!Jt[r]) throw new Error(\"Can't parse \".concat(r, \" as it is not part of the known types\"));\n          if ((\"to-boolean\" === r || \"to-string\" === r) && 2 !== t.length) return e.error(\"Expected one argument.\");\n          var n = Jt[r],\n            i = [];\n          for (var _r19 = 1; _r19 < t.length; _r19++) {\n            var _n11 = e.parse(t[_r19], _r19, gt);\n            if (!_n11) return null;\n            i.push(_n11);\n          }\n          return new Xt(n, i);\n        }\n      }]);\n      return Xt;\n    }();\n    var Yt = [\"Unknown\", \"Point\", \"LineString\", \"Polygon\"];\n    var Ht = /*#__PURE__*/function () {\n      function Ht() {\n        _classCallCheck(this, Ht);\n        this.globals = null, this.feature = null, this.featureState = null, this.formattedSection = null, this._parseColorCache = {}, this.availableImages = null, this.canonical = null;\n      }\n      _createClass(Ht, [{\n        key: \"id\",\n        value: function id() {\n          return this.feature && \"id\" in this.feature ? this.feature.id : null;\n        }\n      }, {\n        key: \"geometryType\",\n        value: function geometryType() {\n          return this.feature ? \"number\" == typeof this.feature.type ? Yt[this.feature.type] : this.feature.type : null;\n        }\n      }, {\n        key: \"geometry\",\n        value: function geometry() {\n          return this.feature && \"geometry\" in this.feature ? this.feature.geometry : null;\n        }\n      }, {\n        key: \"canonicalID\",\n        value: function canonicalID() {\n          return this.canonical;\n        }\n      }, {\n        key: \"properties\",\n        value: function properties() {\n          return this.feature && this.feature.properties || {};\n        }\n      }, {\n        key: \"parseColor\",\n        value: function parseColor(t) {\n          var e = this._parseColorCache[t];\n          return e || (e = this._parseColorCache[t] = Ft.parse(t)), e;\n        }\n      }]);\n      return Ht;\n    }();\n    var Wt = /*#__PURE__*/function () {\n      function Wt(t, e, r, n) {\n        _classCallCheck(this, Wt);\n        this.name = t, this.type = e, this._evaluate = r, this.args = n;\n      }\n      _createClass(Wt, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          return this._evaluate(t, this.args);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          this.args.forEach(t);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          var _e$errors;\n          var r = t[0],\n            n = Wt.definitions[r];\n          if (!n) return e.error(\"Unknown expression \\\"\".concat(r, \"\\\". If you wanted a literal array, use [\\\"literal\\\", [...]].\"), 0);\n          var i = Array.isArray(n) ? n[0] : n.type,\n            a = Array.isArray(n) ? [[n[1], n[2]]] : n.overloads,\n            s = a.filter(function (_ref) {\n              var _ref2 = _slicedToArray(_ref, 1),\n                e = _ref2[0];\n              return !Array.isArray(e) || e.length === t.length - 1;\n            });\n          var o = null;\n          var _iterator10 = _createForOfIteratorHelper(s),\n            _step10;\n          try {\n            for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n              var _step10$value = _slicedToArray(_step10.value, 2),\n                _n13 = _step10$value[0],\n                _a4 = _step10$value[1];\n              o = new we(e.registry, e.path, null, e.scope);\n              var _s3 = [];\n              var _l2 = !1;\n              for (var _e22 = 1; _e22 < t.length; _e22++) {\n                var _r22 = t[_e22],\n                  _i11 = Array.isArray(_n13) ? _n13[_e22 - 1] : _n13.type,\n                  _a5 = o.parse(_r22, 1 + _s3.length, _i11);\n                if (!_a5) {\n                  _l2 = !0;\n                  break;\n                }\n                _s3.push(_a5);\n              }\n              if (!_l2) if (Array.isArray(_n13) && _n13.length !== _s3.length) o.error(\"Expected \".concat(_n13.length, \" arguments, but found \").concat(_s3.length, \" instead.\"));else {\n                for (var _t7 = 0; _t7 < _s3.length; _t7++) {\n                  var _e23 = Array.isArray(_n13) ? _n13[_t7] : _n13.type,\n                    _r23 = _s3[_t7];\n                  o.concat(_t7 + 1).checkSubtype(_e23, _r23.type);\n                }\n                if (0 === o.errors.length) return new Wt(r, i, _a4, _s3);\n              }\n            }\n          } catch (err) {\n            _iterator10.e(err);\n          } finally {\n            _iterator10.f();\n          }\n          if (1 === s.length) (_e$errors = e.errors).push.apply(_e$errors, _toConsumableArray(o.errors));else {\n            var _r20 = (s.length ? s : a).map(function (_ref3) {\n                var _ref4 = _slicedToArray(_ref3, 1),\n                  t = _ref4[0];\n                return e = t, Array.isArray(e) ? \"(\".concat(e.map(At).join(\", \"), \")\") : \"(\".concat(At(e.type), \"...)\");\n                var e;\n              }).join(\" | \"),\n              _n12 = [];\n            for (var _r21 = 1; _r21 < t.length; _r21++) {\n              var _i10 = e.parse(t[_r21], 1 + _n12.length);\n              if (!_i10) return null;\n              _n12.push(At(_i10.type));\n            }\n            e.error(\"Expected arguments of type \".concat(_r20, \", but found (\").concat(_n12.join(\", \"), \") instead.\"));\n          }\n          return null;\n        }\n      }, {\n        key: \"register\",\n        value: function register(t, e) {\n          Wt.definitions = e;\n          for (var _r24 in e) t[_r24] = Wt;\n        }\n      }]);\n      return Wt;\n    }();\n    var Qt = /*#__PURE__*/function () {\n      function Qt(t, e, r) {\n        _classCallCheck(this, Qt);\n        this.type = xt, this.locale = r, this.caseSensitive = t, this.diacriticSensitive = e;\n      }\n      _createClass(Qt, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          return new Tt(this.caseSensitive.evaluate(t), this.diacriticSensitive.evaluate(t), this.locale ? this.locale.evaluate(t) : null);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.caseSensitive), t(this.diacriticSensitive), this.locale && t(this.locale);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (2 !== t.length) return e.error(\"Expected one argument.\");\n          var r = t[1];\n          if (\"object\" != typeof r || Array.isArray(r)) return e.error(\"Collator options argument must be an object.\");\n          var n = e.parse(void 0 !== r[\"case-sensitive\"] && r[\"case-sensitive\"], 1, dt);\n          if (!n) return null;\n          var i = e.parse(void 0 !== r[\"diacritic-sensitive\"] && r[\"diacritic-sensitive\"], 1, dt);\n          if (!i) return null;\n          var a = null;\n          return r.locale && (a = e.parse(r.locale, 1, ft), !a) ? null : new Qt(n, i, a);\n        }\n      }]);\n      return Qt;\n    }();\n    var te = 8192;\n    function ee(t, e) {\n      t[0] = Math.min(t[0], e[0]), t[1] = Math.min(t[1], e[1]), t[2] = Math.max(t[2], e[0]), t[3] = Math.max(t[3], e[1]);\n    }\n    function re(t, e) {\n      return !(t[0] <= e[0] || t[2] >= e[2] || t[1] <= e[1] || t[3] >= e[3]);\n    }\n    function ne(t, e) {\n      var r = (180 + t[0]) / 360,\n        n = (180 - 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + t[1] * Math.PI / 360))) / 360,\n        i = Math.pow(2, e.z);\n      return [Math.round(r * i * te), Math.round(n * i * te)];\n    }\n    function ie(t, e, r) {\n      var n = t[0] - e[0],\n        i = t[1] - e[1],\n        a = t[0] - r[0],\n        s = t[1] - r[1];\n      return n * s - a * i == 0 && n * a <= 0 && i * s <= 0;\n    }\n    function ae(t, e) {\n      var r = !1;\n      for (var _s4 = 0, _o2 = e.length; _s4 < _o2; _s4++) {\n        var _o3 = e[_s4];\n        for (var _e24 = 0, _s5 = _o3.length; _e24 < _s5 - 1; _e24++) {\n          if (ie(t, _o3[_e24], _o3[_e24 + 1])) return !1;\n          (i = _o3[_e24])[1] > (n = t)[1] != (a = _o3[_e24 + 1])[1] > n[1] && n[0] < (a[0] - i[0]) * (n[1] - i[1]) / (a[1] - i[1]) + i[0] && (r = !r);\n        }\n      }\n      var n, i, a;\n      return r;\n    }\n    function se(t, e) {\n      for (var _r25 = 0; _r25 < e.length; _r25++) if (ae(t, e[_r25])) return !0;\n      return !1;\n    }\n    function oe(t, e, r, n) {\n      var i = n[0] - r[0],\n        a = n[1] - r[1],\n        s = (t[0] - r[0]) * a - i * (t[1] - r[1]),\n        o = (e[0] - r[0]) * a - i * (e[1] - r[1]);\n      return s > 0 && o < 0 || s < 0 && o > 0;\n    }\n    function le(t, e, r) {\n      var _iterator11 = _createForOfIteratorHelper(r),\n        _step11;\n      try {\n        for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n          var _u2 = _step11.value;\n          for (var _r26 = 0; _r26 < _u2.length - 1; ++_r26) if (0 != (o = [(s = _u2[_r26 + 1])[0] - (a = _u2[_r26])[0], s[1] - a[1]])[0] * (l = [(i = e)[0] - (n = t)[0], i[1] - n[1]])[1] - o[1] * l[0] && oe(n, i, a, s) && oe(a, s, n, i)) return !0;\n        }\n      } catch (err) {\n        _iterator11.e(err);\n      } finally {\n        _iterator11.f();\n      }\n      var n, i, a, s, o, l;\n      return !1;\n    }\n    function ue(t, e) {\n      for (var _r27 = 0; _r27 < t.length; ++_r27) if (!ae(t[_r27], e)) return !1;\n      for (var _r28 = 0; _r28 < t.length - 1; ++_r28) if (le(t[_r28], t[_r28 + 1], e)) return !1;\n      return !0;\n    }\n    function ce(t, e) {\n      for (var _r29 = 0; _r29 < e.length; _r29++) if (ue(t, e[_r29])) return !0;\n      return !1;\n    }\n    function he(t, e, r) {\n      var n = [];\n      for (var _i12 = 0; _i12 < t.length; _i12++) {\n        var _a6 = [];\n        for (var _n14 = 0; _n14 < t[_i12].length; _n14++) {\n          var _s6 = ne(t[_i12][_n14], r);\n          ee(e, _s6), _a6.push(_s6);\n        }\n        n.push(_a6);\n      }\n      return n;\n    }\n    function pe(t, e, r) {\n      var n = [];\n      for (var _i13 = 0; _i13 < t.length; _i13++) {\n        var _a7 = he(t[_i13], e, r);\n        n.push(_a7);\n      }\n      return n;\n    }\n    function fe(t, e, r, n) {\n      if (t[0] < r[0] || t[0] > r[2]) {\n        var _e25 = .5 * n;\n        var _i14 = t[0] - r[0] > _e25 ? -n : r[0] - t[0] > _e25 ? n : 0;\n        0 === _i14 && (_i14 = t[0] - r[2] > _e25 ? -n : r[2] - t[0] > _e25 ? n : 0), t[0] += _i14;\n      }\n      ee(e, t);\n    }\n    function de(t, e, r, n) {\n      var i = Math.pow(2, n.z) * te,\n        a = [n.x * te, n.y * te],\n        s = [];\n      var _iterator12 = _createForOfIteratorHelper(t),\n        _step12;\n      try {\n        for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n          var _n15 = _step12.value;\n          var _iterator13 = _createForOfIteratorHelper(_n15),\n            _step13;\n          try {\n            for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n              var _t8 = _step13.value;\n              var _n16 = [_t8.x + a[0], _t8.y + a[1]];\n              fe(_n16, e, r, i), s.push(_n16);\n            }\n          } catch (err) {\n            _iterator13.e(err);\n          } finally {\n            _iterator13.f();\n          }\n        }\n      } catch (err) {\n        _iterator12.e(err);\n      } finally {\n        _iterator12.f();\n      }\n      return s;\n    }\n    function ye(t, e, r, n) {\n      var i = Math.pow(2, n.z) * te,\n        a = [n.x * te, n.y * te],\n        s = [];\n      var _iterator14 = _createForOfIteratorHelper(t),\n        _step14;\n      try {\n        for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n          var _r30 = _step14.value;\n          var _t10 = [];\n          var _iterator17 = _createForOfIteratorHelper(_r30),\n            _step17;\n          try {\n            for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {\n              var _n18 = _step17.value;\n              var _r31 = [_n18.x + a[0], _n18.y + a[1]];\n              ee(e, _r31), _t10.push(_r31);\n            }\n          } catch (err) {\n            _iterator17.e(err);\n          } finally {\n            _iterator17.f();\n          }\n          s.push(_t10);\n        }\n      } catch (err) {\n        _iterator14.e(err);\n      } finally {\n        _iterator14.f();\n      }\n      if (e[2] - e[0] <= i / 2) {\n        (o = e)[0] = o[1] = 1 / 0, o[2] = o[3] = -1 / 0;\n        var _iterator15 = _createForOfIteratorHelper(s),\n          _step15;\n        try {\n          for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n            var _t9 = _step15.value;\n            var _iterator16 = _createForOfIteratorHelper(_t9),\n              _step16;\n            try {\n              for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n                var _n17 = _step16.value;\n                fe(_n17, e, r, i);\n              }\n            } catch (err) {\n              _iterator16.e(err);\n            } finally {\n              _iterator16.f();\n            }\n          }\n        } catch (err) {\n          _iterator15.e(err);\n        } finally {\n          _iterator15.f();\n        }\n      }\n      var o;\n      return s;\n    }\n    var me = /*#__PURE__*/function () {\n      function me(t, e) {\n        _classCallCheck(this, me);\n        this.type = dt, this.geojson = t, this.geometries = e;\n      }\n      _createClass(me, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          if (null != t.geometry() && null != t.canonicalID()) {\n            if (\"Point\" === t.geometryType()) return function (t, e) {\n              var r = [1 / 0, 1 / 0, -1 / 0, -1 / 0],\n                n = [1 / 0, 1 / 0, -1 / 0, -1 / 0],\n                i = t.canonicalID();\n              if (\"Polygon\" === e.type) {\n                var _a8 = he(e.coordinates, n, i),\n                  _s7 = de(t.geometry(), r, n, i);\n                if (!re(r, n)) return !1;\n                var _iterator18 = _createForOfIteratorHelper(_s7),\n                  _step18;\n                try {\n                  for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {\n                    var _t11 = _step18.value;\n                    if (!ae(_t11, _a8)) return !1;\n                  }\n                } catch (err) {\n                  _iterator18.e(err);\n                } finally {\n                  _iterator18.f();\n                }\n              }\n              if (\"MultiPolygon\" === e.type) {\n                var _a9 = pe(e.coordinates, n, i),\n                  _s8 = de(t.geometry(), r, n, i);\n                if (!re(r, n)) return !1;\n                var _iterator19 = _createForOfIteratorHelper(_s8),\n                  _step19;\n                try {\n                  for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {\n                    var _t12 = _step19.value;\n                    if (!se(_t12, _a9)) return !1;\n                  }\n                } catch (err) {\n                  _iterator19.e(err);\n                } finally {\n                  _iterator19.f();\n                }\n              }\n              return !0;\n            }(t, this.geometries);\n            if (\"LineString\" === t.geometryType()) return function (t, e) {\n              var r = [1 / 0, 1 / 0, -1 / 0, -1 / 0],\n                n = [1 / 0, 1 / 0, -1 / 0, -1 / 0],\n                i = t.canonicalID();\n              if (\"Polygon\" === e.type) {\n                var _a10 = he(e.coordinates, n, i),\n                  _s9 = ye(t.geometry(), r, n, i);\n                if (!re(r, n)) return !1;\n                var _iterator20 = _createForOfIteratorHelper(_s9),\n                  _step20;\n                try {\n                  for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {\n                    var _t13 = _step20.value;\n                    if (!ue(_t13, _a10)) return !1;\n                  }\n                } catch (err) {\n                  _iterator20.e(err);\n                } finally {\n                  _iterator20.f();\n                }\n              }\n              if (\"MultiPolygon\" === e.type) {\n                var _a11 = pe(e.coordinates, n, i),\n                  _s10 = ye(t.geometry(), r, n, i);\n                if (!re(r, n)) return !1;\n                var _iterator21 = _createForOfIteratorHelper(_s10),\n                  _step21;\n                try {\n                  for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {\n                    var _t14 = _step21.value;\n                    if (!ce(_t14, _a11)) return !1;\n                  }\n                } catch (err) {\n                  _iterator21.e(err);\n                } finally {\n                  _iterator21.f();\n                }\n              }\n              return !0;\n            }(t, this.geometries);\n          }\n          return !1;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild() {}\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !0;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (2 !== t.length) return e.error(\"'within' expression requires exactly one argument, but found \".concat(t.length - 1, \" instead.\"));\n          if (Ut(t[1])) {\n            var _e26 = t[1];\n            if (\"FeatureCollection\" === _e26.type) for (var _t15 = 0; _t15 < _e26.features.length; ++_t15) {\n              var _r32 = _e26.features[_t15].geometry.type;\n              if (\"Polygon\" === _r32 || \"MultiPolygon\" === _r32) return new me(_e26, _e26.features[_t15].geometry);\n            } else if (\"Feature\" === _e26.type) {\n              var _t16 = _e26.geometry.type;\n              if (\"Polygon\" === _t16 || \"MultiPolygon\" === _t16) return new me(_e26, _e26.geometry);\n            } else if (\"Polygon\" === _e26.type || \"MultiPolygon\" === _e26.type) return new me(_e26, _e26);\n          }\n          return e.error(\"'within' expression requires valid geojson object that contains polygon geometry type.\");\n        }\n      }]);\n      return me;\n    }();\n    function ge(t) {\n      if (t instanceof Wt) {\n        if (\"get\" === t.name && 1 === t.args.length) return !1;\n        if (\"feature-state\" === t.name) return !1;\n        if (\"has\" === t.name && 1 === t.args.length) return !1;\n        if (\"properties\" === t.name || \"geometry-type\" === t.name || \"id\" === t.name) return !1;\n        if (/^filter-/.test(t.name)) return !1;\n      }\n      if (t instanceof me) return !1;\n      var e = !0;\n      return t.eachChild(function (t) {\n        e && !ge(t) && (e = !1);\n      }), e;\n    }\n    function xe(t) {\n      if (t instanceof Wt && \"feature-state\" === t.name) return !1;\n      var e = !0;\n      return t.eachChild(function (t) {\n        e && !xe(t) && (e = !1);\n      }), e;\n    }\n    function ve(t, e) {\n      if (t instanceof Wt && e.indexOf(t.name) >= 0) return !1;\n      var r = !0;\n      return t.eachChild(function (t) {\n        r && !ve(t, e) && (r = !1);\n      }), r;\n    }\n    var be = /*#__PURE__*/function () {\n      function be(t, e) {\n        _classCallCheck(this, be);\n        this.type = e.type, this.name = t, this.boundExpression = e;\n      }\n      _createClass(be, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          return this.boundExpression.evaluate(t);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild() {}\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (2 !== t.length || \"string\" != typeof t[1]) return e.error(\"'var' expression requires exactly one string literal argument.\");\n          var r = t[1];\n          return e.scope.has(r) ? new be(r, e.scope.get(r)) : e.error(\"Unknown variable \\\"\".concat(r, \"\\\". Make sure \\\"\").concat(r, \"\\\" has been bound in an enclosing \\\"let\\\" expression before using it.\"), 1);\n        }\n      }]);\n      return be;\n    }();\n    var we = /*#__PURE__*/function () {\n      function we(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n        var r = arguments.length > 2 ? arguments[2] : undefined;\n        var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : new ct();\n        var i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];\n        _classCallCheck(this, we);\n        this.registry = t, this.path = e, this.key = e.map(function (t) {\n          return \"[\".concat(t, \"]\");\n        }).join(\"\"), this.scope = n, this.errors = i, this.expectedType = r;\n      }\n      _createClass(we, [{\n        key: \"parse\",\n        value: function parse(t, e, r, n) {\n          var i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n          return e ? this.concat(e, r, n)._parse(t, i) : this._parse(t, i);\n        }\n      }, {\n        key: \"_parse\",\n        value: function _parse(t, e) {\n          function r(t, e, r) {\n            return \"assert\" === r ? new Gt(e, [t]) : \"coerce\" === r ? new Xt(e, [t]) : t;\n          }\n          if (null !== t && \"string\" != typeof t && \"boolean\" != typeof t && \"number\" != typeof t || (t = [\"literal\", t]), Array.isArray(t)) {\n            if (0 === t.length) return this.error('Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].');\n            var _n19 = t[0];\n            if (\"string\" != typeof _n19) return this.error(\"Expression name must be a string, but found \".concat(typeof _n19, \" instead. If you wanted a literal array, use [\\\"literal\\\", [...]].\"), 0), null;\n            var _i15 = this.registry[_n19];\n            if (_i15) {\n              var _n20 = _i15.parse(t, this);\n              if (!_n20) return null;\n              if (this.expectedType) {\n                var _t17 = this.expectedType,\n                  _i16 = _n20.type;\n                if (\"string\" !== _t17.kind && \"number\" !== _t17.kind && \"boolean\" !== _t17.kind && \"object\" !== _t17.kind && \"array\" !== _t17.kind || \"value\" !== _i16.kind) {\n                  if (\"color\" !== _t17.kind && \"formatted\" !== _t17.kind && \"resolvedImage\" !== _t17.kind || \"value\" !== _i16.kind && \"string\" !== _i16.kind) {\n                    if (\"padding\" !== _t17.kind || \"value\" !== _i16.kind && \"number\" !== _i16.kind && \"array\" !== _i16.kind) {\n                      if (this.checkSubtype(_t17, _i16)) return null;\n                    } else _n20 = r(_n20, _t17, e.typeAnnotation || \"coerce\");\n                  } else _n20 = r(_n20, _t17, e.typeAnnotation || \"coerce\");\n                } else _n20 = r(_n20, _t17, e.typeAnnotation || \"assert\");\n              }\n              if (!(_n20 instanceof Nt) && \"resolvedImage\" !== _n20.type.kind && _e(_n20)) {\n                var _t18 = new Ht();\n                try {\n                  _n20 = new Nt(_n20.type, _n20.evaluate(_t18));\n                } catch (t) {\n                  return this.error(t.message), null;\n                }\n              }\n              return _n20;\n            }\n            return this.error(\"Unknown expression \\\"\".concat(_n19, \"\\\". If you wanted a literal array, use [\\\"literal\\\", [...]].\"), 0);\n          }\n          return this.error(void 0 === t ? \"'undefined' value invalid. Use null instead.\" : \"object\" == typeof t ? 'Bare objects invalid. Use [\"literal\", {...}] instead.' : \"Expected an array, but found \".concat(typeof t, \" instead.\"));\n        }\n      }, {\n        key: \"concat\",\n        value: function concat(t, e, r) {\n          var n = \"number\" == typeof t ? this.path.concat(t) : this.path,\n            i = r ? this.scope.concat(r) : this.scope;\n          return new we(this.registry, n, e || null, i, this.errors);\n        }\n      }, {\n        key: \"error\",\n        value: function error(t) {\n          for (var _len3 = arguments.length, e = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n            e[_key3 - 1] = arguments[_key3];\n          }\n          var r = \"\".concat(this.key).concat(e.map(function (t) {\n            return \"[\".concat(t, \"]\");\n          }).join(\"\"));\n          this.errors.push(new ut(r, t));\n        }\n      }, {\n        key: \"checkSubtype\",\n        value: function checkSubtype(t, e) {\n          var r = St(t, e);\n          return r && this.error(r), r;\n        }\n      }]);\n      return we;\n    }();\n    function _e(t) {\n      if (t instanceof be) return _e(t.boundExpression);\n      if (t instanceof Wt && \"error\" === t.name) return !1;\n      if (t instanceof Qt) return !1;\n      if (t instanceof me) return !1;\n      var e = t instanceof Xt || t instanceof Gt;\n      var r = !0;\n      return t.eachChild(function (t) {\n        r = e ? r && _e(t) : r && t instanceof Nt;\n      }), !!r && ge(t) && ve(t, [\"zoom\", \"heatmap-density\", \"line-progress\", \"accumulated\", \"is-supported-script\"]);\n    }\n    function Ae(t, e) {\n      var r = t.length - 1;\n      var n,\n        i,\n        a = 0,\n        s = r,\n        o = 0;\n      for (; a <= s;) if (o = Math.floor((a + s) / 2), n = t[o], i = t[o + 1], n <= e) {\n        if (o === r || e < i) return o;\n        a = o + 1;\n      } else {\n        if (!(n > e)) throw new Zt(\"Input is not a number.\");\n        s = o - 1;\n      }\n      return 0;\n    }\n    var ke = /*#__PURE__*/function () {\n      function ke(t, e, r) {\n        _classCallCheck(this, ke);\n        this.type = t, this.input = e, this.labels = [], this.outputs = [];\n        var _iterator22 = _createForOfIteratorHelper(r),\n          _step22;\n        try {\n          for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {\n            var _step22$value = _slicedToArray(_step22.value, 2),\n              _t19 = _step22$value[0],\n              _e27 = _step22$value[1];\n            this.labels.push(_t19), this.outputs.push(_e27);\n          }\n        } catch (err) {\n          _iterator22.e(err);\n        } finally {\n          _iterator22.f();\n        }\n      }\n      _createClass(ke, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.labels,\n            r = this.outputs;\n          if (1 === e.length) return r[0].evaluate(t);\n          var n = this.input.evaluate(t);\n          if (n <= e[0]) return r[0].evaluate(t);\n          var i = e.length;\n          return n >= e[i - 1] ? r[i - 1].evaluate(t) : r[Ae(e, n)].evaluate(t);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.input);\n          var _iterator23 = _createForOfIteratorHelper(this.outputs),\n            _step23;\n          try {\n            for (_iterator23.s(); !(_step23 = _iterator23.n()).done;) {\n              var _e28 = _step23.value;\n              t(_e28);\n            }\n          } catch (err) {\n            _iterator23.e(err);\n          } finally {\n            _iterator23.f();\n          }\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.outputs.every(function (t) {\n            return t.outputDefined();\n          });\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length - 1 < 4) return e.error(\"Expected at least 4 arguments, but found only \".concat(t.length - 1, \".\"));\n          if ((t.length - 1) % 2 != 0) return e.error(\"Expected an even number of arguments.\");\n          var r = e.parse(t[1], 1, pt);\n          if (!r) return null;\n          var n = [];\n          var i = null;\n          e.expectedType && \"value\" !== e.expectedType.kind && (i = e.expectedType);\n          for (var _r33 = 1; _r33 < t.length; _r33 += 2) {\n            var _a12 = 1 === _r33 ? -1 / 0 : t[_r33],\n              _s11 = t[_r33 + 1],\n              _o4 = _r33,\n              _l3 = _r33 + 1;\n            if (\"number\" != typeof _a12) return e.error('Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.', _o4);\n            if (n.length && n[n.length - 1][0] >= _a12) return e.error('Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.', _o4);\n            var _u3 = e.parse(_s11, _l3, i);\n            if (!_u3) return null;\n            i = i || _u3.type, n.push([_a12, _u3]);\n          }\n          return new ke(i, r, n);\n        }\n      }]);\n      return ke;\n    }();\n    function Se(t, e, r) {\n      return t * (1 - r) + e * r;\n    }\n    var Ie = Object.freeze({\n      __proto__: null,\n      number: Se,\n      color: function color(t, e, r) {\n        return new Ft(Se(t.r, e.r, r), Se(t.g, e.g, r), Se(t.b, e.b, r), Se(t.a, e.a, r));\n      },\n      array: function array(t, e, r) {\n        return t.map(function (t, n) {\n          return Se(t, e[n], r);\n        });\n      },\n      padding: function padding(t, e, r) {\n        var n = t.values,\n          i = e.values;\n        return new $t([Se(n[0], i[0], r), Se(n[1], i[1], r), Se(n[2], i[2], r), Se(n[3], i[3], r)]);\n      }\n    });\n    var Me = .95047,\n      ze = 1.08883,\n      Be = 4 / 29,\n      Ce = 6 / 29,\n      Pe = 3 * Ce * Ce,\n      Ve = Math.PI / 180,\n      Ee = 180 / Math.PI;\n    function Fe(t) {\n      return t > .008856451679035631 ? Math.pow(t, 1 / 3) : t / Pe + Be;\n    }\n    function Te(t) {\n      return t > Ce ? t * t * t : Pe * (t - Be);\n    }\n    function Le(t) {\n      return 255 * (t <= .0031308 ? 12.92 * t : 1.055 * Math.pow(t, 1 / 2.4) - .055);\n    }\n    function De(t) {\n      return (t /= 255) <= .04045 ? t / 12.92 : Math.pow((t + .055) / 1.055, 2.4);\n    }\n    function $e(t) {\n      var e = De(t.r),\n        r = De(t.g),\n        n = De(t.b),\n        i = Fe((.4124564 * e + .3575761 * r + .1804375 * n) / Me),\n        a = Fe((.2126729 * e + .7151522 * r + .072175 * n) / 1);\n      return {\n        l: 116 * a - 16,\n        a: 500 * (i - a),\n        b: 200 * (a - Fe((.0193339 * e + .119192 * r + .9503041 * n) / ze)),\n        alpha: t.a\n      };\n    }\n    function Re(t) {\n      var e = (t.l + 16) / 116,\n        r = isNaN(t.a) ? e : e + t.a / 500,\n        n = isNaN(t.b) ? e : e - t.b / 200;\n      return e = 1 * Te(e), r = Me * Te(r), n = ze * Te(n), new Ft(Le(3.2404542 * r - 1.5371385 * e - .4985314 * n), Le(-.969266 * r + 1.8760108 * e + .041556 * n), Le(.0556434 * r - .2040259 * e + 1.0572252 * n), t.alpha);\n    }\n    function Oe(t, e, r) {\n      var n = e - t;\n      return t + r * (n > 180 || n < -180 ? n - 360 * Math.round(n / 360) : n);\n    }\n    var Ue = {\n        forward: $e,\n        reverse: Re,\n        interpolate: function interpolate(t, e, r) {\n          return {\n            l: Se(t.l, e.l, r),\n            a: Se(t.a, e.a, r),\n            b: Se(t.b, e.b, r),\n            alpha: Se(t.alpha, e.alpha, r)\n          };\n        }\n      },\n      qe = {\n        forward: function forward(t) {\n          var _$e = $e(t),\n            e = _$e.l,\n            r = _$e.a,\n            n = _$e.b,\n            i = Math.atan2(n, r) * Ee;\n          return {\n            h: i < 0 ? i + 360 : i,\n            c: Math.sqrt(r * r + n * n),\n            l: e,\n            alpha: t.a\n          };\n        },\n        reverse: function reverse(t) {\n          var e = t.h * Ve,\n            r = t.c;\n          return Re({\n            l: t.l,\n            a: Math.cos(e) * r,\n            b: Math.sin(e) * r,\n            alpha: t.alpha\n          });\n        },\n        interpolate: function interpolate(t, e, r) {\n          return {\n            h: Oe(t.h, e.h, r),\n            c: Se(t.c, e.c, r),\n            l: Se(t.l, e.l, r),\n            alpha: Se(t.alpha, e.alpha, r)\n          };\n        }\n      };\n    var je = Object.freeze({\n      __proto__: null,\n      lab: Ue,\n      hcl: qe\n    });\n    var Ne = /*#__PURE__*/function () {\n      function Ne(t, e, r, n, i) {\n        _classCallCheck(this, Ne);\n        this.type = t, this.operator = e, this.interpolation = r, this.input = n, this.labels = [], this.outputs = [];\n        var _iterator24 = _createForOfIteratorHelper(i),\n          _step24;\n        try {\n          for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {\n            var _step24$value = _slicedToArray(_step24.value, 2),\n              _t20 = _step24$value[0],\n              _e29 = _step24$value[1];\n            this.labels.push(_t20), this.outputs.push(_e29);\n          }\n        } catch (err) {\n          _iterator24.e(err);\n        } finally {\n          _iterator24.f();\n        }\n      }\n      _createClass(Ne, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.labels,\n            r = this.outputs;\n          if (1 === e.length) return r[0].evaluate(t);\n          var n = this.input.evaluate(t);\n          if (n <= e[0]) return r[0].evaluate(t);\n          var i = e.length;\n          if (n >= e[i - 1]) return r[i - 1].evaluate(t);\n          var a = Ae(e, n),\n            s = Ne.interpolationFactor(this.interpolation, n, e[a], e[a + 1]),\n            o = r[a].evaluate(t),\n            l = r[a + 1].evaluate(t);\n          return \"interpolate\" === this.operator ? Ie[this.type.kind.toLowerCase()](o, l, s) : \"interpolate-hcl\" === this.operator ? qe.reverse(qe.interpolate(qe.forward(o), qe.forward(l), s)) : Ue.reverse(Ue.interpolate(Ue.forward(o), Ue.forward(l), s));\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.input);\n          var _iterator25 = _createForOfIteratorHelper(this.outputs),\n            _step25;\n          try {\n            for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {\n              var _e30 = _step25.value;\n              t(_e30);\n            }\n          } catch (err) {\n            _iterator25.e(err);\n          } finally {\n            _iterator25.f();\n          }\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.outputs.every(function (t) {\n            return t.outputDefined();\n          });\n        }\n      }], [{\n        key: \"interpolationFactor\",\n        value: function interpolationFactor(t, r, n, i) {\n          var a = 0;\n          if (\"exponential\" === t.name) a = Ze(r, t.base, n, i);else if (\"linear\" === t.name) a = Ze(r, 1, n, i);else if (\"cubic-bezier\" === t.name) {\n            var _s12 = t.controlPoints;\n            a = new e(_s12[0], _s12[1], _s12[2], _s12[3]).solve(Ze(r, 1, n, i));\n          }\n          return a;\n        }\n      }, {\n        key: \"parse\",\n        value: function parse(t, e) {\n          var _t21 = _toArray(t),\n            r = _t21[0],\n            n = _t21[1],\n            i = _t21[2],\n            a = _t21.slice(3);\n          if (!Array.isArray(n) || 0 === n.length) return e.error(\"Expected an interpolation type expression.\", 1);\n          if (\"linear\" === n[0]) n = {\n            name: \"linear\"\n          };else if (\"exponential\" === n[0]) {\n            var _t22 = n[1];\n            if (\"number\" != typeof _t22) return e.error(\"Exponential interpolation requires a numeric base.\", 1, 1);\n            n = {\n              name: \"exponential\",\n              base: _t22\n            };\n          } else {\n            if (\"cubic-bezier\" !== n[0]) return e.error(\"Unknown interpolation type \".concat(String(n[0])), 1, 0);\n            {\n              var _t23 = n.slice(1);\n              if (4 !== _t23.length || _t23.some(function (t) {\n                return \"number\" != typeof t || t < 0 || t > 1;\n              })) return e.error(\"Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.\", 1);\n              n = {\n                name: \"cubic-bezier\",\n                controlPoints: _t23\n              };\n            }\n          }\n          if (t.length - 1 < 4) return e.error(\"Expected at least 4 arguments, but found only \".concat(t.length - 1, \".\"));\n          if ((t.length - 1) % 2 != 0) return e.error(\"Expected an even number of arguments.\");\n          if (i = e.parse(i, 2, pt), !i) return null;\n          var s = [];\n          var o = null;\n          \"interpolate-hcl\" === r || \"interpolate-lab\" === r ? o = yt : e.expectedType && \"value\" !== e.expectedType.kind && (o = e.expectedType);\n          for (var _t24 = 0; _t24 < a.length; _t24 += 2) {\n            var _r34 = a[_t24],\n              _n21 = a[_t24 + 1],\n              _i17 = _t24 + 3,\n              _l4 = _t24 + 4;\n            if (\"number\" != typeof _r34) return e.error('Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.', _i17);\n            if (s.length && s[s.length - 1][0] >= _r34) return e.error('Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.', _i17);\n            var _u4 = e.parse(_n21, _l4, o);\n            if (!_u4) return null;\n            o = o || _u4.type, s.push([_r34, _u4]);\n          }\n          return \"number\" === o.kind || \"color\" === o.kind || \"padding\" === o.kind || \"array\" === o.kind && \"number\" === o.itemType.kind && \"number\" == typeof o.N ? new Ne(o, r, n, i, s) : e.error(\"Type \".concat(At(o), \" is not interpolatable.\"));\n        }\n      }]);\n      return Ne;\n    }();\n    function Ze(t, e, r, n) {\n      var i = n - r,\n        a = t - r;\n      return 0 === i ? 0 : 1 === e ? a / i : (Math.pow(e, a) - 1) / (Math.pow(e, i) - 1);\n    }\n    var Ke = /*#__PURE__*/function () {\n      function Ke(t, e) {\n        _classCallCheck(this, Ke);\n        this.type = t, this.args = e;\n      }\n      _createClass(Ke, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e,\n            r = null,\n            n = 0;\n          var _iterator26 = _createForOfIteratorHelper(this.args),\n            _step26;\n          try {\n            for (_iterator26.s(); !(_step26 = _iterator26.n()).done;) {\n              var _i18 = _step26.value;\n              if (n++, r = _i18.evaluate(t), r && r instanceof Rt && !r.available && (e || (e = r.name), r = null, n === this.args.length && (r = e)), null !== r) break;\n            }\n          } catch (err) {\n            _iterator26.e(err);\n          } finally {\n            _iterator26.f();\n          }\n          return r;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          this.args.forEach(t);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.args.every(function (t) {\n            return t.outputDefined();\n          });\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 2) return e.error(\"Expectected at least one argument.\");\n          var r = null;\n          var n = e.expectedType;\n          n && \"value\" !== n.kind && (r = n);\n          var i = [];\n          var _iterator27 = _createForOfIteratorHelper(t.slice(1)),\n            _step27;\n          try {\n            for (_iterator27.s(); !(_step27 = _iterator27.n()).done;) {\n              var _n22 = _step27.value;\n              var _t25 = e.parse(_n22, 1 + i.length, r, void 0, {\n                typeAnnotation: \"omit\"\n              });\n              if (!_t25) return null;\n              r = r || _t25.type, i.push(_t25);\n            }\n          } catch (err) {\n            _iterator27.e(err);\n          } finally {\n            _iterator27.f();\n          }\n          if (!r) throw new Error(\"No output type\");\n          var a = n && i.some(function (t) {\n            return St(n, t.type);\n          });\n          return new Ke(a ? gt : r, i);\n        }\n      }]);\n      return Ke;\n    }();\n    var Ge = /*#__PURE__*/function () {\n      function Ge(t, e) {\n        _classCallCheck(this, Ge);\n        this.type = e.type, this.bindings = [].concat(t), this.result = e;\n      }\n      _createClass(Ge, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          return this.result.evaluate(t);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          var _iterator28 = _createForOfIteratorHelper(this.bindings),\n            _step28;\n          try {\n            for (_iterator28.s(); !(_step28 = _iterator28.n()).done;) {\n              var _e31 = _step28.value;\n              t(_e31[1]);\n            }\n          } catch (err) {\n            _iterator28.e(err);\n          } finally {\n            _iterator28.f();\n          }\n          t(this.result);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.result.outputDefined();\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 4) return e.error(\"Expected at least 3 arguments, but found \".concat(t.length - 1, \" instead.\"));\n          var r = [];\n          for (var _n23 = 1; _n23 < t.length - 1; _n23 += 2) {\n            var _i19 = t[_n23];\n            if (\"string\" != typeof _i19) return e.error(\"Expected string, but found \".concat(typeof _i19, \" instead.\"), _n23);\n            if (/[^a-zA-Z0-9_]/.test(_i19)) return e.error(\"Variable names must contain only alphanumeric characters or '_'.\", _n23);\n            var _a13 = e.parse(t[_n23 + 1], _n23 + 1);\n            if (!_a13) return null;\n            r.push([_i19, _a13]);\n          }\n          var n = e.parse(t[t.length - 1], t.length - 1, e.expectedType, r);\n          return n ? new Ge(r, n) : null;\n        }\n      }]);\n      return Ge;\n    }();\n    var Je = /*#__PURE__*/function () {\n      function Je(t, e, r) {\n        _classCallCheck(this, Je);\n        this.type = t, this.index = e, this.input = r;\n      }\n      _createClass(Je, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.index.evaluate(t),\n            r = this.input.evaluate(t);\n          if (e < 0) throw new Zt(\"Array index out of bounds: \".concat(e, \" < 0.\"));\n          if (e >= r.length) throw new Zt(\"Array index out of bounds: \".concat(e, \" > \").concat(r.length - 1, \".\"));\n          if (e !== Math.floor(e)) throw new Zt(\"Array index must be an integer, but found \".concat(e, \" instead.\"));\n          return r[e];\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.index), t(this.input);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (3 !== t.length) return e.error(\"Expected 2 arguments, but found \".concat(t.length - 1, \" instead.\"));\n          var r = e.parse(t[1], 1, pt),\n            n = e.parse(t[2], 2, _t(e.expectedType || gt));\n          return r && n ? new Je(n.type.itemType, r, n) : null;\n        }\n      }]);\n      return Je;\n    }();\n    var Xe = /*#__PURE__*/function () {\n      function Xe(t, e) {\n        _classCallCheck(this, Xe);\n        this.type = dt, this.needle = t, this.haystack = e;\n      }\n      _createClass(Xe, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.needle.evaluate(t),\n            r = this.haystack.evaluate(t);\n          if (!r) return !1;\n          if (!Mt(e, [\"boolean\", \"string\", \"number\", \"null\"])) throw new Zt(\"Expected first argument to be of type boolean, string, number or null, but found \".concat(At(qt(e)), \" instead.\"));\n          if (!Mt(r, [\"string\", \"array\"])) throw new Zt(\"Expected second argument to be of type array or string, but found \".concat(At(qt(r)), \" instead.\"));\n          return r.indexOf(e) >= 0;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.needle), t(this.haystack);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !0;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (3 !== t.length) return e.error(\"Expected 2 arguments, but found \".concat(t.length - 1, \" instead.\"));\n          var r = e.parse(t[1], 1, gt),\n            n = e.parse(t[2], 2, gt);\n          return r && n ? It(r.type, [dt, ft, pt, ht, gt]) ? new Xe(r, n) : e.error(\"Expected first argument to be of type boolean, string, number or null, but found \".concat(At(r.type), \" instead\")) : null;\n        }\n      }]);\n      return Xe;\n    }();\n    var Ye = /*#__PURE__*/function () {\n      function Ye(t, e, r) {\n        _classCallCheck(this, Ye);\n        this.type = pt, this.needle = t, this.haystack = e, this.fromIndex = r;\n      }\n      _createClass(Ye, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.needle.evaluate(t),\n            r = this.haystack.evaluate(t);\n          if (!Mt(e, [\"boolean\", \"string\", \"number\", \"null\"])) throw new Zt(\"Expected first argument to be of type boolean, string, number or null, but found \".concat(At(qt(e)), \" instead.\"));\n          if (!Mt(r, [\"string\", \"array\"])) throw new Zt(\"Expected second argument to be of type array or string, but found \".concat(At(qt(r)), \" instead.\"));\n          if (this.fromIndex) {\n            var _n24 = this.fromIndex.evaluate(t);\n            return r.indexOf(e, _n24);\n          }\n          return r.indexOf(e);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.needle), t(this.haystack), this.fromIndex && t(this.fromIndex);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length <= 2 || t.length >= 5) return e.error(\"Expected 3 or 4 arguments, but found \".concat(t.length - 1, \" instead.\"));\n          var r = e.parse(t[1], 1, gt),\n            n = e.parse(t[2], 2, gt);\n          if (!r || !n) return null;\n          if (!It(r.type, [dt, ft, pt, ht, gt])) return e.error(\"Expected first argument to be of type boolean, string, number or null, but found \".concat(At(r.type), \" instead\"));\n          if (4 === t.length) {\n            var _i20 = e.parse(t[3], 3, pt);\n            return _i20 ? new Ye(r, n, _i20) : null;\n          }\n          return new Ye(r, n);\n        }\n      }]);\n      return Ye;\n    }();\n    var He = /*#__PURE__*/function () {\n      function He(t, e, r, n, i, a) {\n        _classCallCheck(this, He);\n        this.inputType = t, this.type = e, this.input = r, this.cases = n, this.outputs = i, this.otherwise = a;\n      }\n      _createClass(He, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.input.evaluate(t);\n          return (qt(e) === this.inputType && this.outputs[this.cases[e]] || this.otherwise).evaluate(t);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.input), this.outputs.forEach(t), t(this.otherwise);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.outputs.every(function (t) {\n            return t.outputDefined();\n          }) && this.otherwise.outputDefined();\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 5) return e.error(\"Expected at least 4 arguments, but found only \".concat(t.length - 1, \".\"));\n          if (t.length % 2 != 1) return e.error(\"Expected an even number of arguments.\");\n          var r, n;\n          e.expectedType && \"value\" !== e.expectedType.kind && (n = e.expectedType);\n          var i = {},\n            a = [];\n          for (var _s13 = 2; _s13 < t.length - 1; _s13 += 2) {\n            var _o5 = t[_s13];\n            var _l5 = t[_s13 + 1];\n            Array.isArray(_o5) || (_o5 = [_o5]);\n            var _u5 = e.concat(_s13);\n            if (0 === _o5.length) return _u5.error(\"Expected at least one branch label.\");\n            var _iterator29 = _createForOfIteratorHelper(_o5),\n              _step29;\n            try {\n              for (_iterator29.s(); !(_step29 = _iterator29.n()).done;) {\n                var _t26 = _step29.value;\n                if (\"number\" != typeof _t26 && \"string\" != typeof _t26) return _u5.error(\"Branch labels must be numbers or strings.\");\n                if (\"number\" == typeof _t26 && Math.abs(_t26) > Number.MAX_SAFE_INTEGER) return _u5.error(\"Branch labels must be integers no larger than \".concat(Number.MAX_SAFE_INTEGER, \".\"));\n                if (\"number\" == typeof _t26 && Math.floor(_t26) !== _t26) return _u5.error(\"Numeric branch labels must be integer values.\");\n                if (r) {\n                  if (_u5.checkSubtype(r, qt(_t26))) return null;\n                } else r = qt(_t26);\n                if (void 0 !== i[String(_t26)]) return _u5.error(\"Branch labels must be unique.\");\n                i[String(_t26)] = a.length;\n              }\n            } catch (err) {\n              _iterator29.e(err);\n            } finally {\n              _iterator29.f();\n            }\n            var _c = e.parse(_l5, _s13, n);\n            if (!_c) return null;\n            n = n || _c.type, a.push(_c);\n          }\n          var s = e.parse(t[1], 1, gt);\n          if (!s) return null;\n          var o = e.parse(t[t.length - 1], t.length - 1, n);\n          return o ? \"value\" !== s.type.kind && e.concat(1).checkSubtype(r, s.type) ? null : new He(r, n, s, i, a, o) : null;\n        }\n      }]);\n      return He;\n    }();\n    var We = /*#__PURE__*/function () {\n      function We(t, e, r) {\n        _classCallCheck(this, We);\n        this.type = t, this.branches = e, this.otherwise = r;\n      }\n      _createClass(We, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var _iterator30 = _createForOfIteratorHelper(this.branches),\n            _step30;\n          try {\n            for (_iterator30.s(); !(_step30 = _iterator30.n()).done;) {\n              var _step30$value = _slicedToArray(_step30.value, 2),\n                _e32 = _step30$value[0],\n                _r35 = _step30$value[1];\n              if (_e32.evaluate(t)) return _r35.evaluate(t);\n            }\n          } catch (err) {\n            _iterator30.e(err);\n          } finally {\n            _iterator30.f();\n          }\n          return this.otherwise.evaluate(t);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          var _iterator31 = _createForOfIteratorHelper(this.branches),\n            _step31;\n          try {\n            for (_iterator31.s(); !(_step31 = _iterator31.n()).done;) {\n              var _step31$value = _slicedToArray(_step31.value, 2),\n                _e33 = _step31$value[0],\n                _r36 = _step31$value[1];\n              t(_e33), t(_r36);\n            }\n          } catch (err) {\n            _iterator31.e(err);\n          } finally {\n            _iterator31.f();\n          }\n          t(this.otherwise);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.branches.every(function (_ref5) {\n            var _ref6 = _slicedToArray(_ref5, 2),\n              t = _ref6[0],\n              e = _ref6[1];\n            return e.outputDefined();\n          }) && this.otherwise.outputDefined();\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 4) return e.error(\"Expected at least 3 arguments, but found only \".concat(t.length - 1, \".\"));\n          if (t.length % 2 != 0) return e.error(\"Expected an odd number of arguments.\");\n          var r;\n          e.expectedType && \"value\" !== e.expectedType.kind && (r = e.expectedType);\n          var n = [];\n          for (var _i21 = 1; _i21 < t.length - 1; _i21 += 2) {\n            var _a14 = e.parse(t[_i21], _i21, dt);\n            if (!_a14) return null;\n            var _s14 = e.parse(t[_i21 + 1], _i21 + 1, r);\n            if (!_s14) return null;\n            n.push([_a14, _s14]), r = r || _s14.type;\n          }\n          var i = e.parse(t[t.length - 1], t.length - 1, r);\n          if (!i) return null;\n          if (!r) throw new Error(\"Can't infer output type\");\n          return new We(r, n, i);\n        }\n      }]);\n      return We;\n    }();\n    var Qe = /*#__PURE__*/function () {\n      function Qe(t, e, r, n) {\n        _classCallCheck(this, Qe);\n        this.type = t, this.input = e, this.beginIndex = r, this.endIndex = n;\n      }\n      _createClass(Qe, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.input.evaluate(t),\n            r = this.beginIndex.evaluate(t);\n          if (!Mt(e, [\"string\", \"array\"])) throw new Zt(\"Expected first argument to be of type array or string, but found \".concat(At(qt(e)), \" instead.\"));\n          if (this.endIndex) {\n            var _n25 = this.endIndex.evaluate(t);\n            return e.slice(r, _n25);\n          }\n          return e.slice(r);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.input), t(this.beginIndex), this.endIndex && t(this.endIndex);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length <= 2 || t.length >= 5) return e.error(\"Expected 3 or 4 arguments, but found \".concat(t.length - 1, \" instead.\"));\n          var r = e.parse(t[1], 1, gt),\n            n = e.parse(t[2], 2, pt);\n          if (!r || !n) return null;\n          if (!It(r.type, [_t(gt), ft, gt])) return e.error(\"Expected first argument to be of type array or string, but found \".concat(At(r.type), \" instead\"));\n          if (4 === t.length) {\n            var _i22 = e.parse(t[3], 3, pt);\n            return _i22 ? new Qe(r.type, r, n, _i22) : null;\n          }\n          return new Qe(r.type, r, n);\n        }\n      }]);\n      return Qe;\n    }();\n    function tr(t, e) {\n      return \"==\" === t || \"!=\" === t ? \"boolean\" === e.kind || \"string\" === e.kind || \"number\" === e.kind || \"null\" === e.kind || \"value\" === e.kind : \"string\" === e.kind || \"number\" === e.kind || \"value\" === e.kind;\n    }\n    function er(t, e, r, n) {\n      return 0 === n.compare(e, r);\n    }\n    function rr(t, e, r) {\n      var n = \"==\" !== t && \"!=\" !== t;\n      return /*#__PURE__*/function () {\n        function i(t, e, r) {\n          _classCallCheck(this, i);\n          this.type = dt, this.lhs = t, this.rhs = e, this.collator = r, this.hasUntypedArgument = \"value\" === t.type.kind || \"value\" === e.type.kind;\n        }\n        _createClass(i, [{\n          key: \"evaluate\",\n          value: function evaluate(_i23) {\n            var a = this.lhs.evaluate(_i23),\n              s = this.rhs.evaluate(_i23);\n            if (n && this.hasUntypedArgument) {\n              var _e34 = qt(a),\n                _r37 = qt(s);\n              if (_e34.kind !== _r37.kind || \"string\" !== _e34.kind && \"number\" !== _e34.kind) throw new Zt(\"Expected arguments for \\\"\".concat(t, \"\\\" to be (string, string) or (number, number), but found (\").concat(_e34.kind, \", \").concat(_r37.kind, \") instead.\"));\n            }\n            if (this.collator && !n && this.hasUntypedArgument) {\n              var _t27 = qt(a),\n                _r38 = qt(s);\n              if (\"string\" !== _t27.kind || \"string\" !== _r38.kind) return e(_i23, a, s);\n            }\n            return this.collator ? r(_i23, a, s, this.collator.evaluate(_i23)) : e(_i23, a, s);\n          }\n        }, {\n          key: \"eachChild\",\n          value: function eachChild(t) {\n            t(this.lhs), t(this.rhs), this.collator && t(this.collator);\n          }\n        }, {\n          key: \"outputDefined\",\n          value: function outputDefined() {\n            return !0;\n          }\n        }], [{\n          key: \"parse\",\n          value: function parse(t, e) {\n            if (3 !== t.length && 4 !== t.length) return e.error(\"Expected two or three arguments.\");\n            var r = t[0];\n            var a = e.parse(t[1], 1, gt);\n            if (!a) return null;\n            if (!tr(r, a.type)) return e.concat(1).error(\"\\\"\".concat(r, \"\\\" comparisons are not supported for type '\").concat(At(a.type), \"'.\"));\n            var s = e.parse(t[2], 2, gt);\n            if (!s) return null;\n            if (!tr(r, s.type)) return e.concat(2).error(\"\\\"\".concat(r, \"\\\" comparisons are not supported for type '\").concat(At(s.type), \"'.\"));\n            if (a.type.kind !== s.type.kind && \"value\" !== a.type.kind && \"value\" !== s.type.kind) return e.error(\"Cannot compare types '\".concat(At(a.type), \"' and '\").concat(At(s.type), \"'.\"));\n            n && (\"value\" === a.type.kind && \"value\" !== s.type.kind ? a = new Gt(s.type, [a]) : \"value\" !== a.type.kind && \"value\" === s.type.kind && (s = new Gt(a.type, [s])));\n            var o = null;\n            if (4 === t.length) {\n              if (\"string\" !== a.type.kind && \"string\" !== s.type.kind && \"value\" !== a.type.kind && \"value\" !== s.type.kind) return e.error(\"Cannot use collator to compare non-string types.\");\n              if (o = e.parse(t[3], 3, xt), !o) return null;\n            }\n            return new i(a, s, o);\n          }\n        }]);\n        return i;\n      }();\n    }\n    var nr = rr(\"==\", function (t, e, r) {\n        return e === r;\n      }, er),\n      ir = rr(\"!=\", function (t, e, r) {\n        return e !== r;\n      }, function (t, e, r, n) {\n        return !er(0, e, r, n);\n      }),\n      ar = rr(\"<\", function (t, e, r) {\n        return e < r;\n      }, function (t, e, r, n) {\n        return n.compare(e, r) < 0;\n      }),\n      sr = rr(\">\", function (t, e, r) {\n        return e > r;\n      }, function (t, e, r, n) {\n        return n.compare(e, r) > 0;\n      }),\n      or = rr(\"<=\", function (t, e, r) {\n        return e <= r;\n      }, function (t, e, r, n) {\n        return n.compare(e, r) <= 0;\n      }),\n      lr = rr(\">=\", function (t, e, r) {\n        return e >= r;\n      }, function (t, e, r, n) {\n        return n.compare(e, r) >= 0;\n      });\n    var ur = /*#__PURE__*/function () {\n      function ur(t, e, r, n, i) {\n        _classCallCheck(this, ur);\n        this.type = ft, this.number = t, this.locale = e, this.currency = r, this.minFractionDigits = n, this.maxFractionDigits = i;\n      }\n      _createClass(ur, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          return new Intl.NumberFormat(this.locale ? this.locale.evaluate(t) : [], {\n            style: this.currency ? \"currency\" : \"decimal\",\n            currency: this.currency ? this.currency.evaluate(t) : void 0,\n            minimumFractionDigits: this.minFractionDigits ? this.minFractionDigits.evaluate(t) : void 0,\n            maximumFractionDigits: this.maxFractionDigits ? this.maxFractionDigits.evaluate(t) : void 0\n          }).format(this.number.evaluate(t));\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.number), this.locale && t(this.locale), this.currency && t(this.currency), this.minFractionDigits && t(this.minFractionDigits), this.maxFractionDigits && t(this.maxFractionDigits);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (3 !== t.length) return e.error(\"Expected two arguments.\");\n          var r = e.parse(t[1], 1, pt);\n          if (!r) return null;\n          var n = t[2];\n          if (\"object\" != typeof n || Array.isArray(n)) return e.error(\"NumberFormat options argument must be an object.\");\n          var i = null;\n          if (n.locale && (i = e.parse(n.locale, 1, ft), !i)) return null;\n          var a = null;\n          if (n.currency && (a = e.parse(n.currency, 1, ft), !a)) return null;\n          var s = null;\n          if (n[\"min-fraction-digits\"] && (s = e.parse(n[\"min-fraction-digits\"], 1, pt), !s)) return null;\n          var o = null;\n          return n[\"max-fraction-digits\"] && (o = e.parse(n[\"max-fraction-digits\"], 1, pt), !o) ? null : new ur(r, i, a, s, o);\n        }\n      }]);\n      return ur;\n    }();\n    var cr = /*#__PURE__*/function () {\n      function cr(t) {\n        _classCallCheck(this, cr);\n        this.type = vt, this.sections = t;\n      }\n      _createClass(cr, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          return new Dt(this.sections.map(function (e) {\n            var r = e.content.evaluate(t);\n            return qt(r) === wt ? new Lt(\"\", r, null, null, null) : new Lt(jt(r), null, e.scale ? e.scale.evaluate(t) : null, e.font ? e.font.evaluate(t).join(\",\") : null, e.textColor ? e.textColor.evaluate(t) : null);\n          }));\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          var _iterator32 = _createForOfIteratorHelper(this.sections),\n            _step32;\n          try {\n            for (_iterator32.s(); !(_step32 = _iterator32.n()).done;) {\n              var _e35 = _step32.value;\n              t(_e35.content), _e35.scale && t(_e35.scale), _e35.font && t(_e35.font), _e35.textColor && t(_e35.textColor);\n            }\n          } catch (err) {\n            _iterator32.e(err);\n          } finally {\n            _iterator32.f();\n          }\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 2) return e.error(\"Expected at least one argument.\");\n          var r = t[1];\n          if (!Array.isArray(r) && \"object\" == typeof r) return e.error(\"First argument must be an image or text section.\");\n          var n = [];\n          var i = !1;\n          for (var _r39 = 1; _r39 <= t.length - 1; ++_r39) {\n            var _a15 = t[_r39];\n            if (i && \"object\" == typeof _a15 && !Array.isArray(_a15)) {\n              i = !1;\n              var _t28 = null;\n              if (_a15[\"font-scale\"] && (_t28 = e.parse(_a15[\"font-scale\"], 1, pt), !_t28)) return null;\n              var _r40 = null;\n              if (_a15[\"text-font\"] && (_r40 = e.parse(_a15[\"text-font\"], 1, _t(ft)), !_r40)) return null;\n              var _s15 = null;\n              if (_a15[\"text-color\"] && (_s15 = e.parse(_a15[\"text-color\"], 1, yt), !_s15)) return null;\n              var _o6 = n[n.length - 1];\n              _o6.scale = _t28, _o6.font = _r40, _o6.textColor = _s15;\n            } else {\n              var _a16 = e.parse(t[_r39], 1, gt);\n              if (!_a16) return null;\n              var _s16 = _a16.type.kind;\n              if (\"string\" !== _s16 && \"value\" !== _s16 && \"null\" !== _s16 && \"resolvedImage\" !== _s16) return e.error(\"Formatted text type must be 'string', 'value', 'image' or 'null'.\");\n              i = !0, n.push({\n                content: _a16,\n                scale: null,\n                font: null,\n                textColor: null\n              });\n            }\n          }\n          return new cr(n);\n        }\n      }]);\n      return cr;\n    }();\n    var hr = /*#__PURE__*/function () {\n      function hr(t) {\n        _classCallCheck(this, hr);\n        this.type = wt, this.input = t;\n      }\n      _createClass(hr, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.input.evaluate(t),\n            r = Rt.fromString(e);\n          return r && t.availableImages && (r.available = t.availableImages.indexOf(e) > -1), r;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.input);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (2 !== t.length) return e.error(\"Expected two arguments.\");\n          var r = e.parse(t[1], 1, ft);\n          return r ? new hr(r) : e.error(\"No image name provided.\");\n        }\n      }]);\n      return hr;\n    }();\n    var pr = /*#__PURE__*/function () {\n      function pr(t) {\n        _classCallCheck(this, pr);\n        this.type = pt, this.input = t;\n      }\n      _createClass(pr, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.input.evaluate(t);\n          if (\"string\" == typeof e) return e.length;\n          if (Array.isArray(e)) return e.length;\n          throw new Zt(\"Expected value to be of type string or array, but found \".concat(At(qt(e)), \" instead.\"));\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.input);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (2 !== t.length) return e.error(\"Expected 1 argument, but found \".concat(t.length - 1, \" instead.\"));\n          var r = e.parse(t[1], 1);\n          return r ? \"array\" !== r.type.kind && \"string\" !== r.type.kind && \"value\" !== r.type.kind ? e.error(\"Expected argument of type string or array, but found \".concat(At(r.type), \" instead.\")) : new pr(r) : null;\n        }\n      }]);\n      return pr;\n    }();\n    var fr = {\n      \"==\": nr,\n      \"!=\": ir,\n      \">\": sr,\n      \"<\": ar,\n      \">=\": lr,\n      \"<=\": or,\n      array: Gt,\n      at: Je,\n      boolean: Gt,\n      case: We,\n      coalesce: Ke,\n      collator: Qt,\n      format: cr,\n      image: hr,\n      in: Xe,\n      \"index-of\": Ye,\n      interpolate: Ne,\n      \"interpolate-hcl\": Ne,\n      \"interpolate-lab\": Ne,\n      length: pr,\n      let: Ge,\n      literal: Nt,\n      match: He,\n      number: Gt,\n      \"number-format\": ur,\n      object: Gt,\n      slice: Qe,\n      step: ke,\n      string: Gt,\n      \"to-boolean\": Xt,\n      \"to-color\": Xt,\n      \"to-number\": Xt,\n      \"to-string\": Xt,\n      var: be,\n      within: me\n    };\n    function dr(t, _ref7) {\n      var _ref8 = _slicedToArray(_ref7, 4),\n        e = _ref8[0],\n        r = _ref8[1],\n        n = _ref8[2],\n        i = _ref8[3];\n      e = e.evaluate(t), r = r.evaluate(t), n = n.evaluate(t);\n      var a = i ? i.evaluate(t) : 1,\n        s = Ot(e, r, n, a);\n      if (s) throw new Zt(s);\n      return new Ft(e / 255 * a, r / 255 * a, n / 255 * a, a);\n    }\n    function yr(t, e) {\n      return t in e;\n    }\n    function mr(t, e) {\n      var r = e[t];\n      return void 0 === r ? null : r;\n    }\n    function gr(t) {\n      return {\n        type: t\n      };\n    }\n    function xr(t) {\n      return {\n        result: \"success\",\n        value: t\n      };\n    }\n    function vr(t) {\n      return {\n        result: \"error\",\n        value: t\n      };\n    }\n    function br(t) {\n      return \"data-driven\" === t[\"property-type\"] || \"cross-faded-data-driven\" === t[\"property-type\"];\n    }\n    function wr(t) {\n      return !!t.expression && t.expression.parameters.indexOf(\"zoom\") > -1;\n    }\n    function _r(t) {\n      return !!t.expression && t.expression.interpolated;\n    }\n    function Ar(t) {\n      return t instanceof Number ? \"number\" : t instanceof String ? \"string\" : t instanceof Boolean ? \"boolean\" : Array.isArray(t) ? \"array\" : null === t ? \"null\" : typeof t;\n    }\n    function kr(t) {\n      return \"object\" == typeof t && null !== t && !Array.isArray(t);\n    }\n    function Sr(t) {\n      return t;\n    }\n    function Ir(t, e) {\n      var r = \"color\" === e.type,\n        n = t.stops && \"object\" == typeof t.stops[0][0],\n        i = n || !(n || void 0 !== t.property),\n        a = t.type || (_r(e) ? \"exponential\" : \"interval\");\n      if (r || \"padding\" === e.type) {\n        var _n26 = r ? Ft.parse : $t.parse;\n        (t = st({}, t)).stops && (t.stops = t.stops.map(function (t) {\n          return [t[0], _n26(t[1])];\n        })), t.default = _n26(t.default ? t.default : e.default);\n      }\n      if (t.colorSpace && \"rgb\" !== t.colorSpace && !je[t.colorSpace]) throw new Error(\"Unknown color space: \".concat(t.colorSpace));\n      var s, o, l;\n      if (\"exponential\" === a) s = Cr;else if (\"interval\" === a) s = Br;else if (\"categorical\" === a) {\n        s = zr, o = Object.create(null);\n        var _iterator33 = _createForOfIteratorHelper(t.stops),\n          _step33;\n        try {\n          for (_iterator33.s(); !(_step33 = _iterator33.n()).done;) {\n            var _e36 = _step33.value;\n            o[_e36[0]] = _e36[1];\n          }\n        } catch (err) {\n          _iterator33.e(err);\n        } finally {\n          _iterator33.f();\n        }\n        l = typeof t.stops[0][0];\n      } else {\n        if (\"identity\" !== a) throw new Error(\"Unknown function type \\\"\".concat(a, \"\\\"\"));\n        s = Pr;\n      }\n      if (n) {\n        var _r41 = {},\n          _n27 = [];\n        for (var _e37 = 0; _e37 < t.stops.length; _e37++) {\n          var _i24 = t.stops[_e37],\n            _a17 = _i24[0].zoom;\n          void 0 === _r41[_a17] && (_r41[_a17] = {\n            zoom: _a17,\n            type: t.type,\n            property: t.property,\n            default: t.default,\n            stops: []\n          }, _n27.push(_a17)), _r41[_a17].stops.push([_i24[0].value, _i24[1]]);\n        }\n        var _i25 = [];\n        for (var _i26 = 0, _n28 = _n27; _i26 < _n28.length; _i26++) {\n          var _t29 = _n28[_i26];\n          _i25.push([_r41[_t29].zoom, Ir(_r41[_t29], e)]);\n        }\n        var _a18 = {\n          name: \"linear\"\n        };\n        return {\n          kind: \"composite\",\n          interpolationType: _a18,\n          interpolationFactor: Ne.interpolationFactor.bind(void 0, _a18),\n          zoomStops: _i25.map(function (t) {\n            return t[0];\n          }),\n          evaluate: function evaluate(_ref9, n) {\n            var r = _ref9.zoom;\n            return Cr({\n              stops: _i25,\n              base: t.base\n            }, e, r).evaluate(r, n);\n          }\n        };\n      }\n      if (i) {\n        var _r42 = \"exponential\" === a ? {\n          name: \"exponential\",\n          base: void 0 !== t.base ? t.base : 1\n        } : null;\n        return {\n          kind: \"camera\",\n          interpolationType: _r42,\n          interpolationFactor: Ne.interpolationFactor.bind(void 0, _r42),\n          zoomStops: t.stops.map(function (t) {\n            return t[0];\n          }),\n          evaluate: function evaluate(_ref10) {\n            var r = _ref10.zoom;\n            return s(t, e, r, o, l);\n          }\n        };\n      }\n      return {\n        kind: \"source\",\n        evaluate: function evaluate(r, n) {\n          var i = n && n.properties ? n.properties[t.property] : void 0;\n          return void 0 === i ? Mr(t.default, e.default) : s(t, e, i, o, l);\n        }\n      };\n    }\n    function Mr(t, e, r) {\n      return void 0 !== t ? t : void 0 !== e ? e : void 0 !== r ? r : void 0;\n    }\n    function zr(t, e, r, n, i) {\n      return Mr(typeof r === i ? n[r] : void 0, t.default, e.default);\n    }\n    function Br(t, e, r) {\n      if (\"number\" !== Ar(r)) return Mr(t.default, e.default);\n      var n = t.stops.length;\n      if (1 === n) return t.stops[0][1];\n      if (r <= t.stops[0][0]) return t.stops[0][1];\n      if (r >= t.stops[n - 1][0]) return t.stops[n - 1][1];\n      var i = Ae(t.stops.map(function (t) {\n        return t[0];\n      }), r);\n      return t.stops[i][1];\n    }\n    function Cr(t, e, r) {\n      var n = void 0 !== t.base ? t.base : 1;\n      if (\"number\" !== Ar(r)) return Mr(t.default, e.default);\n      var i = t.stops.length;\n      if (1 === i) return t.stops[0][1];\n      if (r <= t.stops[0][0]) return t.stops[0][1];\n      if (r >= t.stops[i - 1][0]) return t.stops[i - 1][1];\n      var a = Ae(t.stops.map(function (t) {\n          return t[0];\n        }), r),\n        s = function (t, e, r, n) {\n          var i = n - r,\n            a = t - r;\n          return 0 === i ? 0 : 1 === e ? a / i : (Math.pow(e, a) - 1) / (Math.pow(e, i) - 1);\n        }(r, n, t.stops[a][0], t.stops[a + 1][0]),\n        o = t.stops[a][1],\n        l = t.stops[a + 1][1];\n      var u = Ie[e.type] || Sr;\n      if (t.colorSpace && \"rgb\" !== t.colorSpace) {\n        var _e38 = je[t.colorSpace];\n        u = function u(t, r) {\n          return _e38.reverse(_e38.interpolate(_e38.forward(t), _e38.forward(r), s));\n        };\n      }\n      return \"function\" == typeof o.evaluate ? {\n        evaluate: function evaluate() {\n          for (var _len4 = arguments.length, t = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n            t[_key4] = arguments[_key4];\n          }\n          var e = o.evaluate.apply(void 0, t),\n            r = l.evaluate.apply(void 0, t);\n          if (void 0 !== e && void 0 !== r) return u(e, r, s);\n        }\n      } : u(o, l, s);\n    }\n    function Pr(t, e, r) {\n      switch (e.type) {\n        case \"color\":\n          r = Ft.parse(r);\n          break;\n        case \"formatted\":\n          r = Dt.fromString(r.toString());\n          break;\n        case \"resolvedImage\":\n          r = Rt.fromString(r.toString());\n          break;\n        case \"padding\":\n          r = $t.parse(r);\n          break;\n        default:\n          Ar(r) === e.type || \"enum\" === e.type && e.values[r] || (r = void 0);\n      }\n      return Mr(r, t.default, e.default);\n    }\n    Wt.register(fr, {\n      error: [{\n        kind: \"error\"\n      }, [ft], function (t, _ref11) {\n        var _ref12 = _slicedToArray(_ref11, 1),\n          e = _ref12[0];\n        throw new Zt(e.evaluate(t));\n      }],\n      typeof: [ft, [gt], function (t, _ref13) {\n        var _ref14 = _slicedToArray(_ref13, 1),\n          e = _ref14[0];\n        return At(qt(e.evaluate(t)));\n      }],\n      \"to-rgba\": [_t(pt, 4), [yt], function (t, _ref15) {\n        var _ref16 = _slicedToArray(_ref15, 1),\n          e = _ref16[0];\n        return e.evaluate(t).toArray();\n      }],\n      rgb: [yt, [pt, pt, pt], dr],\n      rgba: [yt, [pt, pt, pt, pt], dr],\n      has: {\n        type: dt,\n        overloads: [[[ft], function (t, _ref17) {\n          var _ref18 = _slicedToArray(_ref17, 1),\n            e = _ref18[0];\n          return yr(e.evaluate(t), t.properties());\n        }], [[ft, mt], function (t, _ref19) {\n          var _ref20 = _slicedToArray(_ref19, 2),\n            e = _ref20[0],\n            r = _ref20[1];\n          return yr(e.evaluate(t), r.evaluate(t));\n        }]]\n      },\n      get: {\n        type: gt,\n        overloads: [[[ft], function (t, _ref21) {\n          var _ref22 = _slicedToArray(_ref21, 1),\n            e = _ref22[0];\n          return mr(e.evaluate(t), t.properties());\n        }], [[ft, mt], function (t, _ref23) {\n          var _ref24 = _slicedToArray(_ref23, 2),\n            e = _ref24[0],\n            r = _ref24[1];\n          return mr(e.evaluate(t), r.evaluate(t));\n        }]]\n      },\n      \"feature-state\": [gt, [ft], function (t, _ref25) {\n        var _ref26 = _slicedToArray(_ref25, 1),\n          e = _ref26[0];\n        return mr(e.evaluate(t), t.featureState || {});\n      }],\n      properties: [mt, [], function (t) {\n        return t.properties();\n      }],\n      \"geometry-type\": [ft, [], function (t) {\n        return t.geometryType();\n      }],\n      id: [gt, [], function (t) {\n        return t.id();\n      }],\n      zoom: [pt, [], function (t) {\n        return t.globals.zoom;\n      }],\n      \"heatmap-density\": [pt, [], function (t) {\n        return t.globals.heatmapDensity || 0;\n      }],\n      \"line-progress\": [pt, [], function (t) {\n        return t.globals.lineProgress || 0;\n      }],\n      accumulated: [gt, [], function (t) {\n        return void 0 === t.globals.accumulated ? null : t.globals.accumulated;\n      }],\n      \"+\": [pt, gr(pt), function (t, e) {\n        var r = 0;\n        var _iterator34 = _createForOfIteratorHelper(e),\n          _step34;\n        try {\n          for (_iterator34.s(); !(_step34 = _iterator34.n()).done;) {\n            var _n29 = _step34.value;\n            r += _n29.evaluate(t);\n          }\n        } catch (err) {\n          _iterator34.e(err);\n        } finally {\n          _iterator34.f();\n        }\n        return r;\n      }],\n      \"*\": [pt, gr(pt), function (t, e) {\n        var r = 1;\n        var _iterator35 = _createForOfIteratorHelper(e),\n          _step35;\n        try {\n          for (_iterator35.s(); !(_step35 = _iterator35.n()).done;) {\n            var _n30 = _step35.value;\n            r *= _n30.evaluate(t);\n          }\n        } catch (err) {\n          _iterator35.e(err);\n        } finally {\n          _iterator35.f();\n        }\n        return r;\n      }],\n      \"-\": {\n        type: pt,\n        overloads: [[[pt, pt], function (t, _ref27) {\n          var _ref28 = _slicedToArray(_ref27, 2),\n            e = _ref28[0],\n            r = _ref28[1];\n          return e.evaluate(t) - r.evaluate(t);\n        }], [[pt], function (t, _ref29) {\n          var _ref30 = _slicedToArray(_ref29, 1),\n            e = _ref30[0];\n          return -e.evaluate(t);\n        }]]\n      },\n      \"/\": [pt, [pt, pt], function (t, _ref31) {\n        var _ref32 = _slicedToArray(_ref31, 2),\n          e = _ref32[0],\n          r = _ref32[1];\n        return e.evaluate(t) / r.evaluate(t);\n      }],\n      \"%\": [pt, [pt, pt], function (t, _ref33) {\n        var _ref34 = _slicedToArray(_ref33, 2),\n          e = _ref34[0],\n          r = _ref34[1];\n        return e.evaluate(t) % r.evaluate(t);\n      }],\n      ln2: [pt, [], function () {\n        return Math.LN2;\n      }],\n      pi: [pt, [], function () {\n        return Math.PI;\n      }],\n      e: [pt, [], function () {\n        return Math.E;\n      }],\n      \"^\": [pt, [pt, pt], function (t, _ref35) {\n        var _ref36 = _slicedToArray(_ref35, 2),\n          e = _ref36[0],\n          r = _ref36[1];\n        return Math.pow(e.evaluate(t), r.evaluate(t));\n      }],\n      sqrt: [pt, [pt], function (t, _ref37) {\n        var _ref38 = _slicedToArray(_ref37, 1),\n          e = _ref38[0];\n        return Math.sqrt(e.evaluate(t));\n      }],\n      log10: [pt, [pt], function (t, _ref39) {\n        var _ref40 = _slicedToArray(_ref39, 1),\n          e = _ref40[0];\n        return Math.log(e.evaluate(t)) / Math.LN10;\n      }],\n      ln: [pt, [pt], function (t, _ref41) {\n        var _ref42 = _slicedToArray(_ref41, 1),\n          e = _ref42[0];\n        return Math.log(e.evaluate(t));\n      }],\n      log2: [pt, [pt], function (t, _ref43) {\n        var _ref44 = _slicedToArray(_ref43, 1),\n          e = _ref44[0];\n        return Math.log(e.evaluate(t)) / Math.LN2;\n      }],\n      sin: [pt, [pt], function (t, _ref45) {\n        var _ref46 = _slicedToArray(_ref45, 1),\n          e = _ref46[0];\n        return Math.sin(e.evaluate(t));\n      }],\n      cos: [pt, [pt], function (t, _ref47) {\n        var _ref48 = _slicedToArray(_ref47, 1),\n          e = _ref48[0];\n        return Math.cos(e.evaluate(t));\n      }],\n      tan: [pt, [pt], function (t, _ref49) {\n        var _ref50 = _slicedToArray(_ref49, 1),\n          e = _ref50[0];\n        return Math.tan(e.evaluate(t));\n      }],\n      asin: [pt, [pt], function (t, _ref51) {\n        var _ref52 = _slicedToArray(_ref51, 1),\n          e = _ref52[0];\n        return Math.asin(e.evaluate(t));\n      }],\n      acos: [pt, [pt], function (t, _ref53) {\n        var _ref54 = _slicedToArray(_ref53, 1),\n          e = _ref54[0];\n        return Math.acos(e.evaluate(t));\n      }],\n      atan: [pt, [pt], function (t, _ref55) {\n        var _ref56 = _slicedToArray(_ref55, 1),\n          e = _ref56[0];\n        return Math.atan(e.evaluate(t));\n      }],\n      min: [pt, gr(pt), function (t, e) {\n        return Math.min.apply(Math, _toConsumableArray(e.map(function (e) {\n          return e.evaluate(t);\n        })));\n      }],\n      max: [pt, gr(pt), function (t, e) {\n        return Math.max.apply(Math, _toConsumableArray(e.map(function (e) {\n          return e.evaluate(t);\n        })));\n      }],\n      abs: [pt, [pt], function (t, _ref57) {\n        var _ref58 = _slicedToArray(_ref57, 1),\n          e = _ref58[0];\n        return Math.abs(e.evaluate(t));\n      }],\n      round: [pt, [pt], function (t, _ref59) {\n        var _ref60 = _slicedToArray(_ref59, 1),\n          e = _ref60[0];\n        var r = e.evaluate(t);\n        return r < 0 ? -Math.round(-r) : Math.round(r);\n      }],\n      floor: [pt, [pt], function (t, _ref61) {\n        var _ref62 = _slicedToArray(_ref61, 1),\n          e = _ref62[0];\n        return Math.floor(e.evaluate(t));\n      }],\n      ceil: [pt, [pt], function (t, _ref63) {\n        var _ref64 = _slicedToArray(_ref63, 1),\n          e = _ref64[0];\n        return Math.ceil(e.evaluate(t));\n      }],\n      \"filter-==\": [dt, [ft, gt], function (t, _ref65) {\n        var _ref66 = _slicedToArray(_ref65, 2),\n          e = _ref66[0],\n          r = _ref66[1];\n        return t.properties()[e.value] === r.value;\n      }],\n      \"filter-id-==\": [dt, [gt], function (t, _ref67) {\n        var _ref68 = _slicedToArray(_ref67, 1),\n          e = _ref68[0];\n        return t.id() === e.value;\n      }],\n      \"filter-type-==\": [dt, [ft], function (t, _ref69) {\n        var _ref70 = _slicedToArray(_ref69, 1),\n          e = _ref70[0];\n        return t.geometryType() === e.value;\n      }],\n      \"filter-<\": [dt, [ft, gt], function (t, _ref71) {\n        var _ref72 = _slicedToArray(_ref71, 2),\n          e = _ref72[0],\n          r = _ref72[1];\n        var n = t.properties()[e.value],\n          i = r.value;\n        return typeof n == typeof i && n < i;\n      }],\n      \"filter-id-<\": [dt, [gt], function (t, _ref73) {\n        var _ref74 = _slicedToArray(_ref73, 1),\n          e = _ref74[0];\n        var r = t.id(),\n          n = e.value;\n        return typeof r == typeof n && r < n;\n      }],\n      \"filter->\": [dt, [ft, gt], function (t, _ref75) {\n        var _ref76 = _slicedToArray(_ref75, 2),\n          e = _ref76[0],\n          r = _ref76[1];\n        var n = t.properties()[e.value],\n          i = r.value;\n        return typeof n == typeof i && n > i;\n      }],\n      \"filter-id->\": [dt, [gt], function (t, _ref77) {\n        var _ref78 = _slicedToArray(_ref77, 1),\n          e = _ref78[0];\n        var r = t.id(),\n          n = e.value;\n        return typeof r == typeof n && r > n;\n      }],\n      \"filter-<=\": [dt, [ft, gt], function (t, _ref79) {\n        var _ref80 = _slicedToArray(_ref79, 2),\n          e = _ref80[0],\n          r = _ref80[1];\n        var n = t.properties()[e.value],\n          i = r.value;\n        return typeof n == typeof i && n <= i;\n      }],\n      \"filter-id-<=\": [dt, [gt], function (t, _ref81) {\n        var _ref82 = _slicedToArray(_ref81, 1),\n          e = _ref82[0];\n        var r = t.id(),\n          n = e.value;\n        return typeof r == typeof n && r <= n;\n      }],\n      \"filter->=\": [dt, [ft, gt], function (t, _ref83) {\n        var _ref84 = _slicedToArray(_ref83, 2),\n          e = _ref84[0],\n          r = _ref84[1];\n        var n = t.properties()[e.value],\n          i = r.value;\n        return typeof n == typeof i && n >= i;\n      }],\n      \"filter-id->=\": [dt, [gt], function (t, _ref85) {\n        var _ref86 = _slicedToArray(_ref85, 1),\n          e = _ref86[0];\n        var r = t.id(),\n          n = e.value;\n        return typeof r == typeof n && r >= n;\n      }],\n      \"filter-has\": [dt, [gt], function (t, _ref87) {\n        var _ref88 = _slicedToArray(_ref87, 1),\n          e = _ref88[0];\n        return e.value in t.properties();\n      }],\n      \"filter-has-id\": [dt, [], function (t) {\n        return null !== t.id() && void 0 !== t.id();\n      }],\n      \"filter-type-in\": [dt, [_t(ft)], function (t, _ref89) {\n        var _ref90 = _slicedToArray(_ref89, 1),\n          e = _ref90[0];\n        return e.value.indexOf(t.geometryType()) >= 0;\n      }],\n      \"filter-id-in\": [dt, [_t(gt)], function (t, _ref91) {\n        var _ref92 = _slicedToArray(_ref91, 1),\n          e = _ref92[0];\n        return e.value.indexOf(t.id()) >= 0;\n      }],\n      \"filter-in-small\": [dt, [ft, _t(gt)], function (t, _ref93) {\n        var _ref94 = _slicedToArray(_ref93, 2),\n          e = _ref94[0],\n          r = _ref94[1];\n        return r.value.indexOf(t.properties()[e.value]) >= 0;\n      }],\n      \"filter-in-large\": [dt, [ft, _t(gt)], function (t, _ref95) {\n        var _ref96 = _slicedToArray(_ref95, 2),\n          e = _ref96[0],\n          r = _ref96[1];\n        return function (t, e, r, n) {\n          for (; r <= n;) {\n            var _i27 = r + n >> 1;\n            if (e[_i27] === t) return !0;\n            e[_i27] > t ? n = _i27 - 1 : r = _i27 + 1;\n          }\n          return !1;\n        }(t.properties()[e.value], r.value, 0, r.value.length - 1);\n      }],\n      all: {\n        type: dt,\n        overloads: [[[dt, dt], function (t, _ref97) {\n          var _ref98 = _slicedToArray(_ref97, 2),\n            e = _ref98[0],\n            r = _ref98[1];\n          return e.evaluate(t) && r.evaluate(t);\n        }], [gr(dt), function (t, e) {\n          var _iterator36 = _createForOfIteratorHelper(e),\n            _step36;\n          try {\n            for (_iterator36.s(); !(_step36 = _iterator36.n()).done;) {\n              var _r43 = _step36.value;\n              if (!_r43.evaluate(t)) return !1;\n            }\n          } catch (err) {\n            _iterator36.e(err);\n          } finally {\n            _iterator36.f();\n          }\n          return !0;\n        }]]\n      },\n      any: {\n        type: dt,\n        overloads: [[[dt, dt], function (t, _ref99) {\n          var _ref100 = _slicedToArray(_ref99, 2),\n            e = _ref100[0],\n            r = _ref100[1];\n          return e.evaluate(t) || r.evaluate(t);\n        }], [gr(dt), function (t, e) {\n          var _iterator37 = _createForOfIteratorHelper(e),\n            _step37;\n          try {\n            for (_iterator37.s(); !(_step37 = _iterator37.n()).done;) {\n              var _r44 = _step37.value;\n              if (_r44.evaluate(t)) return !0;\n            }\n          } catch (err) {\n            _iterator37.e(err);\n          } finally {\n            _iterator37.f();\n          }\n          return !1;\n        }]]\n      },\n      \"!\": [dt, [dt], function (t, _ref101) {\n        var _ref102 = _slicedToArray(_ref101, 1),\n          e = _ref102[0];\n        return !e.evaluate(t);\n      }],\n      \"is-supported-script\": [dt, [ft], function (t, _ref103) {\n        var _ref104 = _slicedToArray(_ref103, 1),\n          e = _ref104[0];\n        var r = t.globals && t.globals.isSupportedScript;\n        return !r || r(e.evaluate(t));\n      }],\n      upcase: [ft, [ft], function (t, _ref105) {\n        var _ref106 = _slicedToArray(_ref105, 1),\n          e = _ref106[0];\n        return e.evaluate(t).toUpperCase();\n      }],\n      downcase: [ft, [ft], function (t, _ref107) {\n        var _ref108 = _slicedToArray(_ref107, 1),\n          e = _ref108[0];\n        return e.evaluate(t).toLowerCase();\n      }],\n      concat: [ft, gr(gt), function (t, e) {\n        return e.map(function (e) {\n          return jt(e.evaluate(t));\n        }).join(\"\");\n      }],\n      \"resolved-locale\": [ft, [xt], function (t, _ref109) {\n        var _ref110 = _slicedToArray(_ref109, 1),\n          e = _ref110[0];\n        return e.evaluate(t).resolvedLocale();\n      }]\n    });\n    var Vr = /*#__PURE__*/function () {\n      function Vr(t, e) {\n        _classCallCheck(this, Vr);\n        this.expression = t, this._warningHistory = {}, this._evaluator = new Ht(), this._defaultValue = e ? function (t) {\n          return \"color\" === t.type && kr(t.default) ? new Ft(0, 0, 0, 0) : \"color\" === t.type ? Ft.parse(t.default) || null : \"padding\" === t.type ? $t.parse(t.default) || null : void 0 === t.default ? null : t.default;\n        }(e) : null, this._enumValues = e && \"enum\" === e.type ? e.values : null;\n      }\n      _createClass(Vr, [{\n        key: \"evaluateWithoutErrorHandling\",\n        value: function evaluateWithoutErrorHandling(t, e, r, n, i, a) {\n          return this._evaluator.globals = t, this._evaluator.feature = e, this._evaluator.featureState = r, this._evaluator.canonical = n, this._evaluator.availableImages = i || null, this._evaluator.formattedSection = a, this.expression.evaluate(this._evaluator);\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, n, i, a) {\n          this._evaluator.globals = t, this._evaluator.feature = e || null, this._evaluator.featureState = r || null, this._evaluator.canonical = n, this._evaluator.availableImages = i || null, this._evaluator.formattedSection = a || null;\n          try {\n            var _t30 = this.expression.evaluate(this._evaluator);\n            if (null == _t30 || \"number\" == typeof _t30 && _t30 != _t30) return this._defaultValue;\n            if (this._enumValues && !(_t30 in this._enumValues)) throw new Zt(\"Expected value to be one of \".concat(Object.keys(this._enumValues).map(function (t) {\n              return JSON.stringify(t);\n            }).join(\", \"), \", but found \").concat(JSON.stringify(_t30), \" instead.\"));\n            return _t30;\n          } catch (t) {\n            return this._warningHistory[t.message] || (this._warningHistory[t.message] = !0, \"undefined\" != typeof console && console.warn(t.message)), this._defaultValue;\n          }\n        }\n      }]);\n      return Vr;\n    }();\n    function Er(t) {\n      return Array.isArray(t) && t.length > 0 && \"string\" == typeof t[0] && t[0] in fr;\n    }\n    function Fr(t, e) {\n      var r = new we(fr, [], e ? function (t) {\n          var e = {\n            color: yt,\n            string: ft,\n            number: pt,\n            enum: ft,\n            boolean: dt,\n            formatted: vt,\n            padding: bt,\n            resolvedImage: wt\n          };\n          return \"array\" === t.type ? _t(e[t.value] || gt, t.length) : e[t.type];\n        }(e) : void 0),\n        n = r.parse(t, void 0, void 0, void 0, e && \"string\" === e.type ? {\n          typeAnnotation: \"coerce\"\n        } : void 0);\n      return n ? xr(new Vr(n, e)) : vr(r.errors);\n    }\n    var Tr = /*#__PURE__*/function () {\n      function Tr(t, e) {\n        _classCallCheck(this, Tr);\n        this.kind = t, this._styleExpression = e, this.isStateDependent = \"constant\" !== t && !xe(e.expression);\n      }\n      _createClass(Tr, [{\n        key: \"evaluateWithoutErrorHandling\",\n        value: function evaluateWithoutErrorHandling(t, e, r, n, i, a) {\n          return this._styleExpression.evaluateWithoutErrorHandling(t, e, r, n, i, a);\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, n, i, a) {\n          return this._styleExpression.evaluate(t, e, r, n, i, a);\n        }\n      }]);\n      return Tr;\n    }();\n    var Lr = /*#__PURE__*/function () {\n      function Lr(t, e, r, n) {\n        _classCallCheck(this, Lr);\n        this.kind = t, this.zoomStops = r, this._styleExpression = e, this.isStateDependent = \"camera\" !== t && !xe(e.expression), this.interpolationType = n;\n      }\n      _createClass(Lr, [{\n        key: \"evaluateWithoutErrorHandling\",\n        value: function evaluateWithoutErrorHandling(t, e, r, n, i, a) {\n          return this._styleExpression.evaluateWithoutErrorHandling(t, e, r, n, i, a);\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, n, i, a) {\n          return this._styleExpression.evaluate(t, e, r, n, i, a);\n        }\n      }, {\n        key: \"interpolationFactor\",\n        value: function interpolationFactor(t, e, r) {\n          return this.interpolationType ? Ne.interpolationFactor(this.interpolationType, t, e, r) : 0;\n        }\n      }]);\n      return Lr;\n    }();\n    function Dr(t, e) {\n      var r = Fr(t, e);\n      if (\"error\" === r.result) return r;\n      var n = r.value.expression,\n        i = ge(n);\n      if (!i && !br(e)) return vr([new ut(\"\", \"data expressions not supported\")]);\n      var a = ve(n, [\"zoom\"]);\n      if (!a && !wr(e)) return vr([new ut(\"\", \"zoom expressions not supported\")]);\n      var s = Rr(n);\n      return s || a ? s instanceof ut ? vr([s]) : s instanceof Ne && !_r(e) ? vr([new ut(\"\", '\"interpolate\" expressions cannot be used with this property')]) : xr(s ? new Lr(i ? \"camera\" : \"composite\", r.value, s.labels, s instanceof Ne ? s.interpolation : void 0) : new Tr(i ? \"constant\" : \"source\", r.value)) : vr([new ut(\"\", '\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.')]);\n    }\n    var $r = /*#__PURE__*/function () {\n      function $r(t, e) {\n        _classCallCheck(this, $r);\n        this._parameters = t, this._specification = e, st(this, Ir(this._parameters, this._specification));\n      }\n      _createClass($r, null, [{\n        key: \"deserialize\",\n        value: function deserialize(t) {\n          return new $r(t._parameters, t._specification);\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize(t) {\n          return {\n            _parameters: t._parameters,\n            _specification: t._specification\n          };\n        }\n      }]);\n      return $r;\n    }();\n    function Rr(t) {\n      var e = null;\n      if (t instanceof Ge) e = Rr(t.result);else if (t instanceof Ke) {\n        var _iterator38 = _createForOfIteratorHelper(t.args),\n          _step38;\n        try {\n          for (_iterator38.s(); !(_step38 = _iterator38.n()).done;) {\n            var _r45 = _step38.value;\n            if (e = Rr(_r45), e) break;\n          }\n        } catch (err) {\n          _iterator38.e(err);\n        } finally {\n          _iterator38.f();\n        }\n      } else (t instanceof ke || t instanceof Ne) && t.input instanceof Wt && \"zoom\" === t.input.name && (e = t);\n      return e instanceof ut || t.eachChild(function (t) {\n        var r = Rr(t);\n        r instanceof ut ? e = r : !e && r ? e = new ut(\"\", '\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.') : e && r && e !== r && (e = new ut(\"\", 'Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression.'));\n      }), e;\n    }\n    function Or(t) {\n      var e = t.key,\n        r = t.value,\n        n = t.valueSpec || {},\n        i = t.objectElementValidators || {},\n        a = t.style,\n        s = t.styleSpec;\n      var o = [];\n      var l = Ar(r);\n      if (\"object\" !== l) return [new it(e, r, \"object expected, \".concat(l, \" found\"))];\n      for (var _t31 in r) {\n        var _l6 = _t31.split(\".\")[0],\n          _u6 = n[_l6] || n[\"*\"];\n        var _c2 = void 0;\n        if (i[_l6]) _c2 = i[_l6];else if (n[_l6]) _c2 = yn;else if (i[\"*\"]) _c2 = i[\"*\"];else {\n          if (!n[\"*\"]) {\n            o.push(new it(e, r[_t31], \"unknown property \\\"\".concat(_t31, \"\\\"\")));\n            continue;\n          }\n          _c2 = yn;\n        }\n        o = o.concat(_c2({\n          key: (e ? \"\".concat(e, \".\") : e) + _t31,\n          value: r[_t31],\n          valueSpec: _u6,\n          style: a,\n          styleSpec: s,\n          object: r,\n          objectKey: _t31\n        }, r));\n      }\n      for (var _t32 in n) i[_t32] || n[_t32].required && void 0 === n[_t32].default && void 0 === r[_t32] && o.push(new it(e, r, \"missing required property \\\"\".concat(_t32, \"\\\"\")));\n      return o;\n    }\n    function Ur(t) {\n      var e = t.value,\n        r = t.valueSpec,\n        n = t.style,\n        i = t.styleSpec,\n        a = t.key,\n        s = t.arrayElementValidator || yn;\n      if (\"array\" !== Ar(e)) return [new it(a, e, \"array expected, \".concat(Ar(e), \" found\"))];\n      if (r.length && e.length !== r.length) return [new it(a, e, \"array length \".concat(r.length, \" expected, length \").concat(e.length, \" found\"))];\n      if (r[\"min-length\"] && e.length < r[\"min-length\"]) return [new it(a, e, \"array length at least \".concat(r[\"min-length\"], \" expected, length \").concat(e.length, \" found\"))];\n      var o = {\n        type: r.value,\n        values: r.values\n      };\n      i.$version < 7 && (o.function = r.function), \"object\" === Ar(r.value) && (o = r.value);\n      var l = [];\n      for (var _t33 = 0; _t33 < e.length; _t33++) l = l.concat(s({\n        array: e,\n        arrayIndex: _t33,\n        value: e[_t33],\n        valueSpec: o,\n        style: n,\n        styleSpec: i,\n        key: \"\".concat(a, \"[\").concat(_t33, \"]\")\n      }));\n      return l;\n    }\n    function qr(t) {\n      var e = t.key,\n        r = t.value,\n        n = t.valueSpec;\n      var i = Ar(r);\n      return \"number\" === i && r != r && (i = \"NaN\"), \"number\" !== i ? [new it(e, r, \"number expected, \".concat(i, \" found\"))] : \"minimum\" in n && r < n.minimum ? [new it(e, r, \"\".concat(r, \" is less than the minimum value \").concat(n.minimum))] : \"maximum\" in n && r > n.maximum ? [new it(e, r, \"\".concat(r, \" is greater than the maximum value \").concat(n.maximum))] : [];\n    }\n    function jr(t) {\n      var e = t.valueSpec,\n        r = ot(t.value.type);\n      var n,\n        i,\n        a,\n        s = {};\n      var o = \"categorical\" !== r && void 0 === t.value.property,\n        l = !o,\n        u = \"array\" === Ar(t.value.stops) && \"array\" === Ar(t.value.stops[0]) && \"object\" === Ar(t.value.stops[0][0]),\n        c = Or({\n          key: t.key,\n          value: t.value,\n          valueSpec: t.styleSpec.function,\n          style: t.style,\n          styleSpec: t.styleSpec,\n          objectElementValidators: {\n            stops: function stops(t) {\n              if (\"identity\" === r) return [new it(t.key, t.value, 'identity function may not have a \"stops\" property')];\n              var e = [];\n              var n = t.value;\n              return e = e.concat(Ur({\n                key: t.key,\n                value: n,\n                valueSpec: t.valueSpec,\n                style: t.style,\n                styleSpec: t.styleSpec,\n                arrayElementValidator: h\n              })), \"array\" === Ar(n) && 0 === n.length && e.push(new it(t.key, n, \"array must have at least one stop\")), e;\n            },\n            default: function _default(t) {\n              return yn({\n                key: t.key,\n                value: t.value,\n                valueSpec: e,\n                style: t.style,\n                styleSpec: t.styleSpec\n              });\n            }\n          }\n        });\n      return \"identity\" === r && o && c.push(new it(t.key, t.value, 'missing required property \"property\"')), \"identity\" === r || t.value.stops || c.push(new it(t.key, t.value, 'missing required property \"stops\"')), \"exponential\" === r && t.valueSpec.expression && !_r(t.valueSpec) && c.push(new it(t.key, t.value, \"exponential functions not supported\")), t.styleSpec.$version >= 8 && (l && !br(t.valueSpec) ? c.push(new it(t.key, t.value, \"property functions not supported\")) : o && !wr(t.valueSpec) && c.push(new it(t.key, t.value, \"zoom functions not supported\"))), \"categorical\" !== r && !u || void 0 !== t.value.property || c.push(new it(t.key, t.value, '\"property\" property is required')), c;\n      function h(t) {\n        var r = [];\n        var n = t.value,\n          o = t.key;\n        if (\"array\" !== Ar(n)) return [new it(o, n, \"array expected, \".concat(Ar(n), \" found\"))];\n        if (2 !== n.length) return [new it(o, n, \"array length 2 expected, length \".concat(n.length, \" found\"))];\n        if (u) {\n          if (\"object\" !== Ar(n[0])) return [new it(o, n, \"object expected, \".concat(Ar(n[0]), \" found\"))];\n          if (void 0 === n[0].zoom) return [new it(o, n, \"object stop key must have zoom\")];\n          if (void 0 === n[0].value) return [new it(o, n, \"object stop key must have value\")];\n          if (a && a > ot(n[0].zoom)) return [new it(o, n[0].zoom, \"stop zoom values must appear in ascending order\")];\n          ot(n[0].zoom) !== a && (a = ot(n[0].zoom), i = void 0, s = {}), r = r.concat(Or({\n            key: \"\".concat(o, \"[0]\"),\n            value: n[0],\n            valueSpec: {\n              zoom: {}\n            },\n            style: t.style,\n            styleSpec: t.styleSpec,\n            objectElementValidators: {\n              zoom: qr,\n              value: p\n            }\n          }));\n        } else r = r.concat(p({\n          key: \"\".concat(o, \"[0]\"),\n          value: n[0],\n          valueSpec: {},\n          style: t.style,\n          styleSpec: t.styleSpec\n        }, n));\n        return Er(lt(n[1])) ? r.concat([new it(\"\".concat(o, \"[1]\"), n[1], \"expressions are not allowed in function stops.\")]) : r.concat(yn({\n          key: \"\".concat(o, \"[1]\"),\n          value: n[1],\n          valueSpec: e,\n          style: t.style,\n          styleSpec: t.styleSpec\n        }));\n      }\n      function p(t, a) {\n        var o = Ar(t.value),\n          l = ot(t.value),\n          u = null !== t.value ? t.value : a;\n        if (n) {\n          if (o !== n) return [new it(t.key, u, \"\".concat(o, \" stop domain type must match previous stop domain type \").concat(n))];\n        } else n = o;\n        if (\"number\" !== o && \"string\" !== o && \"boolean\" !== o) return [new it(t.key, u, \"stop domain value must be a number, string, or boolean\")];\n        if (\"number\" !== o && \"categorical\" !== r) {\n          var _n31 = \"number expected, \".concat(o, \" found\");\n          return br(e) && void 0 === r && (_n31 += '\\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`.'), [new it(t.key, u, _n31)];\n        }\n        return \"categorical\" !== r || \"number\" !== o || isFinite(l) && Math.floor(l) === l ? \"categorical\" !== r && \"number\" === o && void 0 !== i && l < i ? [new it(t.key, u, \"stop domain values must appear in ascending order\")] : (i = l, \"categorical\" === r && l in s ? [new it(t.key, u, \"stop domain values must be unique\")] : (s[l] = !0, [])) : [new it(t.key, u, \"integer expected, found \".concat(l))];\n      }\n    }\n    function Nr(t) {\n      var e = (\"property\" === t.expressionContext ? Dr : Fr)(lt(t.value), t.valueSpec);\n      if (\"error\" === e.result) return e.value.map(function (e) {\n        return new it(\"\".concat(t.key).concat(e.key), t.value, e.message);\n      });\n      var r = e.value.expression || e.value._styleExpression.expression;\n      if (\"property\" === t.expressionContext && \"text-font\" === t.propertyKey && !r.outputDefined()) return [new it(t.key, t.value, \"Invalid data expression for \\\"\".concat(t.propertyKey, \"\\\". Output values must be contained as literals within the expression.\"))];\n      if (\"property\" === t.expressionContext && \"layout\" === t.propertyType && !xe(r)) return [new it(t.key, t.value, '\"feature-state\" data expressions are not supported with layout properties.')];\n      if (\"filter\" === t.expressionContext && !xe(r)) return [new it(t.key, t.value, '\"feature-state\" data expressions are not supported with filters.')];\n      if (t.expressionContext && 0 === t.expressionContext.indexOf(\"cluster\")) {\n        if (!ve(r, [\"zoom\", \"feature-state\"])) return [new it(t.key, t.value, '\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.')];\n        if (\"cluster-initial\" === t.expressionContext && !ge(r)) return [new it(t.key, t.value, \"Feature data expressions are not supported with initial expression part of cluster properties.\")];\n      }\n      return [];\n    }\n    function Zr(t) {\n      var e = t.key,\n        r = t.value,\n        n = t.valueSpec,\n        i = [];\n      return Array.isArray(n.values) ? -1 === n.values.indexOf(ot(r)) && i.push(new it(e, r, \"expected one of [\".concat(n.values.join(\", \"), \"], \").concat(JSON.stringify(r), \" found\"))) : -1 === Object.keys(n.values).indexOf(ot(r)) && i.push(new it(e, r, \"expected one of [\".concat(Object.keys(n.values).join(\", \"), \"], \").concat(JSON.stringify(r), \" found\"))), i;\n    }\n    function Kr(t) {\n      if (!0 === t || !1 === t) return !0;\n      if (!Array.isArray(t) || 0 === t.length) return !1;\n      switch (t[0]) {\n        case \"has\":\n          return t.length >= 2 && \"$id\" !== t[1] && \"$type\" !== t[1];\n        case \"in\":\n          return t.length >= 3 && (\"string\" != typeof t[1] || Array.isArray(t[2]));\n        case \"!in\":\n        case \"!has\":\n        case \"none\":\n          return !1;\n        case \"==\":\n        case \"!=\":\n        case \">\":\n        case \">=\":\n        case \"<\":\n        case \"<=\":\n          return 3 !== t.length || Array.isArray(t[1]) || Array.isArray(t[2]);\n        case \"any\":\n        case \"all\":\n          var _iterator39 = _createForOfIteratorHelper(t.slice(1)),\n            _step39;\n          try {\n            for (_iterator39.s(); !(_step39 = _iterator39.n()).done;) {\n              var _e39 = _step39.value;\n              if (!Kr(_e39) && \"boolean\" != typeof _e39) return !1;\n            }\n          } catch (err) {\n            _iterator39.e(err);\n          } finally {\n            _iterator39.f();\n          }\n          return !0;\n        default:\n          return !0;\n      }\n    }\n    var Gr = {\n      type: \"boolean\",\n      default: !1,\n      transition: !1,\n      \"property-type\": \"data-driven\",\n      expression: {\n        interpolated: !1,\n        parameters: [\"zoom\", \"feature\"]\n      }\n    };\n    function Jr(t) {\n      if (null == t) return {\n        filter: function filter() {\n          return !0;\n        },\n        needGeometry: !1\n      };\n      Kr(t) || (t = Hr(t));\n      var e = Fr(t, Gr);\n      if (\"error\" === e.result) throw new Error(e.value.map(function (t) {\n        return \"\".concat(t.key, \": \").concat(t.message);\n      }).join(\", \"));\n      return {\n        filter: function filter(t, r, n) {\n          return e.value.evaluate(t, r, {}, n);\n        },\n        needGeometry: Yr(t)\n      };\n    }\n    function Xr(t, e) {\n      return t < e ? -1 : t > e ? 1 : 0;\n    }\n    function Yr(t) {\n      if (!Array.isArray(t)) return !1;\n      if (\"within\" === t[0]) return !0;\n      for (var _e40 = 1; _e40 < t.length; _e40++) if (Yr(t[_e40])) return !0;\n      return !1;\n    }\n    function Hr(t) {\n      if (!t) return !0;\n      var e = t[0];\n      return t.length <= 1 ? \"any\" !== e : \"==\" === e ? Wr(t[1], t[2], \"==\") : \"!=\" === e ? en(Wr(t[1], t[2], \"==\")) : \"<\" === e || \">\" === e || \"<=\" === e || \">=\" === e ? Wr(t[1], t[2], e) : \"any\" === e ? (r = t.slice(1), [\"any\"].concat(r.map(Hr))) : \"all\" === e ? [\"all\"].concat(t.slice(1).map(Hr)) : \"none\" === e ? [\"all\"].concat(t.slice(1).map(Hr).map(en)) : \"in\" === e ? Qr(t[1], t.slice(2)) : \"!in\" === e ? en(Qr(t[1], t.slice(2))) : \"has\" === e ? tn(t[1]) : \"!has\" === e ? en(tn(t[1])) : \"within\" !== e || t;\n      var r;\n    }\n    function Wr(t, e, r) {\n      switch (t) {\n        case \"$type\":\n          return [\"filter-type-\".concat(r), e];\n        case \"$id\":\n          return [\"filter-id-\".concat(r), e];\n        default:\n          return [\"filter-\".concat(r), t, e];\n      }\n    }\n    function Qr(t, e) {\n      if (0 === e.length) return !1;\n      switch (t) {\n        case \"$type\":\n          return [\"filter-type-in\", [\"literal\", e]];\n        case \"$id\":\n          return [\"filter-id-in\", [\"literal\", e]];\n        default:\n          return e.length > 200 && !e.some(function (t) {\n            return typeof t != typeof e[0];\n          }) ? [\"filter-in-large\", t, [\"literal\", e.sort(Xr)]] : [\"filter-in-small\", t, [\"literal\", e]];\n      }\n    }\n    function tn(t) {\n      switch (t) {\n        case \"$type\":\n          return !0;\n        case \"$id\":\n          return [\"filter-has-id\"];\n        default:\n          return [\"filter-has\", t];\n      }\n    }\n    function en(t) {\n      return [\"!\", t];\n    }\n    function rn(t) {\n      return Kr(lt(t.value)) ? Nr(st({}, t, {\n        expressionContext: \"filter\",\n        valueSpec: {\n          value: \"boolean\"\n        }\n      })) : nn(t);\n    }\n    function nn(t) {\n      var e = t.value,\n        r = t.key;\n      if (\"array\" !== Ar(e)) return [new it(r, e, \"array expected, \".concat(Ar(e), \" found\"))];\n      var n = t.styleSpec;\n      var i,\n        a = [];\n      if (e.length < 1) return [new it(r, e, \"filter array must have at least 1 element\")];\n      switch (a = a.concat(Zr({\n        key: \"\".concat(r, \"[0]\"),\n        value: e[0],\n        valueSpec: n.filter_operator,\n        style: t.style,\n        styleSpec: t.styleSpec\n      })), ot(e[0])) {\n        case \"<\":\n        case \"<=\":\n        case \">\":\n        case \">=\":\n          e.length >= 2 && \"$type\" === ot(e[1]) && a.push(new it(r, e, \"\\\"$type\\\" cannot be use with operator \\\"\".concat(e[0], \"\\\"\")));\n        case \"==\":\n        case \"!=\":\n          3 !== e.length && a.push(new it(r, e, \"filter array for operator \\\"\".concat(e[0], \"\\\" must have 3 elements\")));\n        case \"in\":\n        case \"!in\":\n          e.length >= 2 && (i = Ar(e[1]), \"string\" !== i && a.push(new it(\"\".concat(r, \"[1]\"), e[1], \"string expected, \".concat(i, \" found\"))));\n          for (var _s17 = 2; _s17 < e.length; _s17++) i = Ar(e[_s17]), \"$type\" === ot(e[1]) ? a = a.concat(Zr({\n            key: \"\".concat(r, \"[\").concat(_s17, \"]\"),\n            value: e[_s17],\n            valueSpec: n.geometry_type,\n            style: t.style,\n            styleSpec: t.styleSpec\n          })) : \"string\" !== i && \"number\" !== i && \"boolean\" !== i && a.push(new it(\"\".concat(r, \"[\").concat(_s17, \"]\"), e[_s17], \"string, number, or boolean expected, \".concat(i, \" found\")));\n          break;\n        case \"any\":\n        case \"all\":\n        case \"none\":\n          for (var _n32 = 1; _n32 < e.length; _n32++) a = a.concat(nn({\n            key: \"\".concat(r, \"[\").concat(_n32, \"]\"),\n            value: e[_n32],\n            style: t.style,\n            styleSpec: t.styleSpec\n          }));\n          break;\n        case \"has\":\n        case \"!has\":\n          i = Ar(e[1]), 2 !== e.length ? a.push(new it(r, e, \"filter array for \\\"\".concat(e[0], \"\\\" operator must have 2 elements\"))) : \"string\" !== i && a.push(new it(\"\".concat(r, \"[1]\"), e[1], \"string expected, \".concat(i, \" found\")));\n          break;\n        case \"within\":\n          i = Ar(e[1]), 2 !== e.length ? a.push(new it(r, e, \"filter array for \\\"\".concat(e[0], \"\\\" operator must have 2 elements\"))) : \"object\" !== i && a.push(new it(\"\".concat(r, \"[1]\"), e[1], \"object expected, \".concat(i, \" found\")));\n      }\n      return a;\n    }\n    function an(t, e) {\n      var r = t.key,\n        n = t.style,\n        i = t.styleSpec,\n        a = t.value,\n        s = t.objectKey,\n        o = i[\"\".concat(e, \"_\").concat(t.layerType)];\n      if (!o) return [];\n      var l = s.match(/^(.*)-transition$/);\n      if (\"paint\" === e && l && o[l[1]] && o[l[1]].transition) return yn({\n        key: r,\n        value: a,\n        valueSpec: i.transition,\n        style: n,\n        styleSpec: i\n      });\n      var u = t.valueSpec || o[s];\n      if (!u) return [new it(r, a, \"unknown property \\\"\".concat(s, \"\\\"\"))];\n      var c;\n      if (\"string\" === Ar(a) && br(u) && !u.tokens && (c = /^{([^}]+)}$/.exec(a))) return [new it(r, a, \"\\\"\".concat(s, \"\\\" does not support interpolation syntax\\nUse an identity property function instead: `{ \\\"type\\\": \\\"identity\\\", \\\"property\\\": \").concat(JSON.stringify(c[1]), \" }`.\"))];\n      var h = [];\n      return \"symbol\" === t.layerType && (\"text-field\" === s && n && !n.glyphs && h.push(new it(r, a, 'use of \"text-field\" requires a style \"glyphs\" property')), \"text-font\" === s && kr(lt(a)) && \"identity\" === ot(a.type) && h.push(new it(r, a, '\"text-font\" does not support identity functions'))), h.concat(yn({\n        key: t.key,\n        value: a,\n        valueSpec: u,\n        style: n,\n        styleSpec: i,\n        expressionContext: \"property\",\n        propertyType: e,\n        propertyKey: s\n      }));\n    }\n    function sn(t) {\n      return an(t, \"paint\");\n    }\n    function on(t) {\n      return an(t, \"layout\");\n    }\n    function ln(t) {\n      var e = [];\n      var r = t.value,\n        n = t.key,\n        i = t.style,\n        a = t.styleSpec;\n      r.type || r.ref || e.push(new it(n, r, 'either \"type\" or \"ref\" is required'));\n      var s = ot(r.type);\n      var o = ot(r.ref);\n      if (r.id) {\n        var _a19 = ot(r.id);\n        for (var _s18 = 0; _s18 < t.arrayIndex; _s18++) {\n          var _t34 = i.layers[_s18];\n          ot(_t34.id) === _a19 && e.push(new it(n, r.id, \"duplicate layer id \\\"\".concat(r.id, \"\\\", previously used at line \").concat(_t34.id.__line__)));\n        }\n      }\n      if (\"ref\" in r) {\n        var _t35;\n        [\"type\", \"source\", \"source-layer\", \"filter\", \"layout\"].forEach(function (t) {\n          t in r && e.push(new it(n, r[t], \"\\\"\".concat(t, \"\\\" is prohibited for ref layers\")));\n        }), i.layers.forEach(function (e) {\n          ot(e.id) === o && (_t35 = e);\n        }), _t35 ? _t35.ref ? e.push(new it(n, r.ref, \"ref cannot reference another ref layer\")) : s = ot(_t35.type) : e.push(new it(n, r.ref, \"ref layer \\\"\".concat(o, \"\\\" not found\")));\n      } else if (\"background\" !== s) if (r.source) {\n        var _t36 = i.sources && i.sources[r.source],\n          _a20 = _t36 && ot(_t36.type);\n        _t36 ? \"vector\" === _a20 && \"raster\" === s ? e.push(new it(n, r.source, \"layer \\\"\".concat(r.id, \"\\\" requires a raster source\"))) : \"raster\" === _a20 && \"raster\" !== s ? e.push(new it(n, r.source, \"layer \\\"\".concat(r.id, \"\\\" requires a vector source\"))) : \"vector\" !== _a20 || r[\"source-layer\"] ? \"raster-dem\" === _a20 && \"hillshade\" !== s ? e.push(new it(n, r.source, \"raster-dem source can only be used with layer type 'hillshade'.\")) : \"line\" !== s || !r.paint || !r.paint[\"line-gradient\"] || \"geojson\" === _a20 && _t36.lineMetrics || e.push(new it(n, r, \"layer \\\"\".concat(r.id, \"\\\" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.\"))) : e.push(new it(n, r, \"layer \\\"\".concat(r.id, \"\\\" must specify a \\\"source-layer\\\"\"))) : e.push(new it(n, r.source, \"source \\\"\".concat(r.source, \"\\\" not found\")));\n      } else e.push(new it(n, r, 'missing required property \"source\"'));\n      return e = e.concat(Or({\n        key: n,\n        value: r,\n        valueSpec: a.layer,\n        style: t.style,\n        styleSpec: t.styleSpec,\n        objectElementValidators: {\n          \"*\": function _() {\n            return [];\n          },\n          type: function type() {\n            return yn({\n              key: \"\".concat(n, \".type\"),\n              value: r.type,\n              valueSpec: a.layer.type,\n              style: t.style,\n              styleSpec: t.styleSpec,\n              object: r,\n              objectKey: \"type\"\n            });\n          },\n          filter: rn,\n          layout: function layout(t) {\n            return Or({\n              layer: r,\n              key: t.key,\n              value: t.value,\n              style: t.style,\n              styleSpec: t.styleSpec,\n              objectElementValidators: {\n                \"*\": function _(t) {\n                  return on(st({\n                    layerType: s\n                  }, t));\n                }\n              }\n            });\n          },\n          paint: function paint(t) {\n            return Or({\n              layer: r,\n              key: t.key,\n              value: t.value,\n              style: t.style,\n              styleSpec: t.styleSpec,\n              objectElementValidators: {\n                \"*\": function _(t) {\n                  return sn(st({\n                    layerType: s\n                  }, t));\n                }\n              }\n            });\n          }\n        }\n      })), e;\n    }\n    function un(t) {\n      var e = t.value,\n        r = t.key,\n        n = Ar(e);\n      return \"string\" !== n ? [new it(r, e, \"string expected, \".concat(n, \" found\"))] : [];\n    }\n    var cn = {\n      promoteId: function promoteId(_ref111) {\n        var t = _ref111.key,\n          e = _ref111.value;\n        if (\"string\" === Ar(e)) return un({\n          key: t,\n          value: e\n        });\n        {\n          var _r46 = [];\n          for (var _n33 in e) _r46.push.apply(_r46, _toConsumableArray(un({\n            key: \"\".concat(t, \".\").concat(_n33),\n            value: e[_n33]\n          })));\n          return _r46;\n        }\n      }\n    };\n    function hn(t) {\n      var e = t.value,\n        r = t.key,\n        n = t.styleSpec,\n        i = t.style;\n      if (!e.type) return [new it(r, e, '\"type\" is required')];\n      var a = ot(e.type);\n      var s;\n      switch (a) {\n        case \"vector\":\n        case \"raster\":\n        case \"raster-dem\":\n          return s = Or({\n            key: r,\n            value: e,\n            valueSpec: n[\"source_\".concat(a.replace(\"-\", \"_\"))],\n            style: t.style,\n            styleSpec: n,\n            objectElementValidators: cn\n          }), s;\n        case \"geojson\":\n          if (s = Or({\n            key: r,\n            value: e,\n            valueSpec: n.source_geojson,\n            style: i,\n            styleSpec: n,\n            objectElementValidators: cn\n          }), e.cluster) for (var _t37 in e.clusterProperties) {\n            var _s19, _s20;\n            var _e$clusterProperties$ = _slicedToArray(e.clusterProperties[_t37], 2),\n              _n34 = _e$clusterProperties$[0],\n              _i28 = _e$clusterProperties$[1],\n              _a21 = \"string\" == typeof _n34 ? [_n34, [\"accumulated\"], [\"get\", _t37]] : _n34;\n            (_s19 = s).push.apply(_s19, _toConsumableArray(Nr({\n              key: \"\".concat(r, \".\").concat(_t37, \".map\"),\n              value: _i28,\n              expressionContext: \"cluster-map\"\n            }))), (_s20 = s).push.apply(_s20, _toConsumableArray(Nr({\n              key: \"\".concat(r, \".\").concat(_t37, \".reduce\"),\n              value: _a21,\n              expressionContext: \"cluster-reduce\"\n            })));\n          }\n          return s;\n        case \"video\":\n          return Or({\n            key: r,\n            value: e,\n            valueSpec: n.source_video,\n            style: i,\n            styleSpec: n\n          });\n        case \"image\":\n          return Or({\n            key: r,\n            value: e,\n            valueSpec: n.source_image,\n            style: i,\n            styleSpec: n\n          });\n        case \"canvas\":\n          return [new it(r, null, \"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.\", \"source.canvas\")];\n        default:\n          return Zr({\n            key: \"\".concat(r, \".type\"),\n            value: e.type,\n            valueSpec: {\n              values: [\"vector\", \"raster\", \"raster-dem\", \"geojson\", \"video\", \"image\"]\n            },\n            style: i,\n            styleSpec: n\n          });\n      }\n    }\n    function pn(t) {\n      var e = t.value,\n        r = t.styleSpec,\n        n = r.light,\n        i = t.style;\n      var a = [];\n      var s = Ar(e);\n      if (void 0 === e) return a;\n      if (\"object\" !== s) return a = a.concat([new it(\"light\", e, \"object expected, \".concat(s, \" found\"))]), a;\n      for (var _t38 in e) {\n        var _s21 = _t38.match(/^(.*)-transition$/);\n        a = a.concat(_s21 && n[_s21[1]] && n[_s21[1]].transition ? yn({\n          key: _t38,\n          value: e[_t38],\n          valueSpec: r.transition,\n          style: i,\n          styleSpec: r\n        }) : n[_t38] ? yn({\n          key: _t38,\n          value: e[_t38],\n          valueSpec: n[_t38],\n          style: i,\n          styleSpec: r\n        }) : [new it(_t38, e[_t38], \"unknown property \\\"\".concat(_t38, \"\\\"\"))]);\n      }\n      return a;\n    }\n    function fn(t) {\n      var e = t.value,\n        r = t.styleSpec,\n        n = r.terrain,\n        i = t.style;\n      var a = [];\n      var s = Ar(e);\n      if (void 0 === e) return a;\n      if (\"object\" !== s) return a = a.concat([new it(\"terrain\", e, \"object expected, \".concat(s, \" found\"))]), a;\n      for (var _t39 in e) a = a.concat(n[_t39] ? yn({\n        key: _t39,\n        value: e[_t39],\n        valueSpec: n[_t39],\n        style: i,\n        styleSpec: r\n      }) : [new it(_t39, e[_t39], \"unknown property \\\"\".concat(_t39, \"\\\"\"))]);\n      return a;\n    }\n    var dn = {\n      \"*\": function _() {\n        return [];\n      },\n      array: Ur,\n      boolean: function boolean(t) {\n        var e = t.value,\n          r = t.key,\n          n = Ar(e);\n        return \"boolean\" !== n ? [new it(r, e, \"boolean expected, \".concat(n, \" found\"))] : [];\n      },\n      number: qr,\n      color: function color(t) {\n        var e = t.key,\n          r = t.value,\n          n = Ar(r);\n        return \"string\" !== n ? [new it(e, r, \"color expected, \".concat(n, \" found\"))] : null === zt(r) ? [new it(e, r, \"color expected, \\\"\".concat(r, \"\\\" found\"))] : [];\n      },\n      constants: at,\n      enum: Zr,\n      filter: rn,\n      function: jr,\n      layer: ln,\n      object: Or,\n      source: hn,\n      light: pn,\n      terrain: fn,\n      string: un,\n      formatted: function formatted(t) {\n        return 0 === un(t).length ? [] : Nr(t);\n      },\n      resolvedImage: function resolvedImage(t) {\n        return 0 === un(t).length ? [] : Nr(t);\n      },\n      padding: function padding(t) {\n        var e = t.key,\n          r = t.value;\n        if (\"array\" === Ar(r)) {\n          if (r.length < 1 || r.length > 4) return [new it(e, r, \"padding requires 1 to 4 values; \".concat(r.length, \" values found\"))];\n          var _t40 = {\n            type: \"number\"\n          };\n          var _n35 = [];\n          for (var _i29 = 0; _i29 < r.length; _i29++) _n35 = _n35.concat(yn({\n            key: \"\".concat(e, \"[\").concat(_i29, \"]\"),\n            value: r[_i29],\n            valueSpec: _t40\n          }));\n          return _n35;\n        }\n        return qr({\n          key: e,\n          value: r,\n          valueSpec: {}\n        });\n      }\n    };\n    function yn(t) {\n      var e = t.value,\n        r = t.valueSpec,\n        n = t.styleSpec;\n      return r.expression && kr(ot(e)) ? jr(t) : r.expression && Er(lt(e)) ? Nr(t) : r.type && dn[r.type] ? dn[r.type](t) : Or(st({}, t, {\n        valueSpec: r.type ? n[r.type] : r\n      }));\n    }\n    function mn(t) {\n      var e = t.value,\n        r = t.key,\n        n = un(t);\n      return n.length || (-1 === e.indexOf(\"{fontstack}\") && n.push(new it(r, e, '\"glyphs\" url must include a \"{fontstack}\" token')), -1 === e.indexOf(\"{range}\") && n.push(new it(r, e, '\"glyphs\" url must include a \"{range}\" token'))), n;\n    }\n    function gn(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : nt;\n      var r = [];\n      return r = r.concat(yn({\n        key: \"\",\n        value: t,\n        valueSpec: e.$root,\n        styleSpec: e,\n        style: t,\n        objectElementValidators: {\n          glyphs: mn,\n          \"*\": function _() {\n            return [];\n          }\n        }\n      })), t.constants && (r = r.concat(at({\n        key: \"constants\",\n        value: t.constants,\n        style: t,\n        styleSpec: e\n      }))), xn(r);\n    }\n    function xn(t) {\n      return [].concat(t).sort(function (t, e) {\n        return t.line - e.line;\n      });\n    }\n    function vn(t) {\n      return function () {\n        for (var _len5 = arguments.length, e = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n          e[_key5] = arguments[_key5];\n        }\n        return xn(t.apply(this, e));\n      };\n    }\n    gn.source = vn(hn), gn.light = vn(pn), gn.terrain = vn(fn), gn.layer = vn(ln), gn.filter = vn(rn), gn.paintProperty = vn(sn), gn.layoutProperty = vn(on);\n    var bn = gn,\n      wn = bn.light,\n      _n = bn.paintProperty,\n      An = bn.layoutProperty;\n    function kn(t, e) {\n      var r = !1;\n      if (e && e.length) {\n        var _iterator40 = _createForOfIteratorHelper(e),\n          _step40;\n        try {\n          for (_iterator40.s(); !(_step40 = _iterator40.n()).done;) {\n            var _n36 = _step40.value;\n            t.fire(new et(new Error(_n36.message))), r = !0;\n          }\n        } catch (err) {\n          _iterator40.e(err);\n        } finally {\n          _iterator40.f();\n        }\n      }\n      return r;\n    }\n    var Sn = /*#__PURE__*/function () {\n      function Sn(t, e, r) {\n        _classCallCheck(this, Sn);\n        var n = this.cells = [];\n        if (t instanceof ArrayBuffer) {\n          this.arrayBuffer = t;\n          var _i30 = new Int32Array(this.arrayBuffer);\n          t = _i30[0], this.d = (e = _i30[1]) + 2 * (r = _i30[2]);\n          for (var _t41 = 0; _t41 < this.d * this.d; _t41++) {\n            var _e41 = _i30[3 + _t41],\n              _r47 = _i30[3 + _t41 + 1];\n            n.push(_e41 === _r47 ? null : _i30.subarray(_e41, _r47));\n          }\n          var _a22 = _i30[3 + n.length + 1];\n          this.keys = _i30.subarray(_i30[3 + n.length], _a22), this.bboxes = _i30.subarray(_a22), this.insert = this._insertReadonly;\n        } else {\n          this.d = e + 2 * r;\n          for (var _t42 = 0; _t42 < this.d * this.d; _t42++) n.push([]);\n          this.keys = [], this.bboxes = [];\n        }\n        this.n = e, this.extent = t, this.padding = r, this.scale = e / t, this.uid = 0;\n        var i = r / e * t;\n        this.min = -i, this.max = t + i;\n      }\n      _createClass(Sn, [{\n        key: \"insert\",\n        value: function insert(t, e, r, n, i) {\n          this._forEachCell(e, r, n, i, this._insertCell, this.uid++, void 0, void 0), this.keys.push(t), this.bboxes.push(e), this.bboxes.push(r), this.bboxes.push(n), this.bboxes.push(i);\n        }\n      }, {\n        key: \"_insertReadonly\",\n        value: function _insertReadonly() {\n          throw new Error(\"Cannot insert into a GridIndex created from an ArrayBuffer.\");\n        }\n      }, {\n        key: \"_insertCell\",\n        value: function _insertCell(t, e, r, n, i, a) {\n          this.cells[i].push(a);\n        }\n      }, {\n        key: \"query\",\n        value: function query(t, e, r, n, i) {\n          var a = this.min,\n            s = this.max;\n          if (t <= a && e <= a && s <= r && s <= n && !i) return Array.prototype.slice.call(this.keys);\n          {\n            var _a23 = [];\n            return this._forEachCell(t, e, r, n, this._queryCell, _a23, {}, i), _a23;\n          }\n        }\n      }, {\n        key: \"_queryCell\",\n        value: function _queryCell(t, e, r, n, i, a, s, o) {\n          var l = this.cells[i];\n          if (null !== l) {\n            var _i31 = this.keys,\n              _u7 = this.bboxes;\n            for (var _c3 = 0; _c3 < l.length; _c3++) {\n              var _h = l[_c3];\n              if (void 0 === s[_h]) {\n                var _l7 = 4 * _h;\n                (o ? o(_u7[_l7 + 0], _u7[_l7 + 1], _u7[_l7 + 2], _u7[_l7 + 3]) : t <= _u7[_l7 + 2] && e <= _u7[_l7 + 3] && r >= _u7[_l7 + 0] && n >= _u7[_l7 + 1]) ? (s[_h] = !0, a.push(_i31[_h])) : s[_h] = !1;\n              }\n            }\n          }\n        }\n      }, {\n        key: \"_forEachCell\",\n        value: function _forEachCell(t, e, r, n, i, a, s, o) {\n          var l = this._convertToCellCoord(t),\n            u = this._convertToCellCoord(e),\n            c = this._convertToCellCoord(r),\n            h = this._convertToCellCoord(n);\n          for (var _p = l; _p <= c; _p++) for (var _l8 = u; _l8 <= h; _l8++) {\n            var _u8 = this.d * _l8 + _p;\n            if ((!o || o(this._convertFromCellCoord(_p), this._convertFromCellCoord(_l8), this._convertFromCellCoord(_p + 1), this._convertFromCellCoord(_l8 + 1))) && i.call(this, t, e, r, n, _u8, a, s, o)) return;\n          }\n        }\n      }, {\n        key: \"_convertFromCellCoord\",\n        value: function _convertFromCellCoord(t) {\n          return (t - this.padding) / this.scale;\n        }\n      }, {\n        key: \"_convertToCellCoord\",\n        value: function _convertToCellCoord(t) {\n          return Math.max(0, Math.min(this.d - 1, Math.floor(t * this.scale) + this.padding));\n        }\n      }, {\n        key: \"toArrayBuffer\",\n        value: function toArrayBuffer() {\n          if (this.arrayBuffer) return this.arrayBuffer;\n          var t = this.cells,\n            e = 3 + this.cells.length + 1 + 1;\n          var r = 0;\n          for (var _t43 = 0; _t43 < this.cells.length; _t43++) r += this.cells[_t43].length;\n          var n = new Int32Array(e + r + this.keys.length + this.bboxes.length);\n          n[0] = this.extent, n[1] = this.n, n[2] = this.padding;\n          var i = e;\n          for (var _e42 = 0; _e42 < t.length; _e42++) {\n            var _r48 = t[_e42];\n            n[3 + _e42] = i, n.set(_r48, i), i += _r48.length;\n          }\n          return n[3 + t.length] = i, n.set(this.keys, i), i += this.keys.length, n[3 + t.length + 1] = i, n.set(this.bboxes, i), i += this.bboxes.length, n.buffer;\n        }\n      }], [{\n        key: \"serialize\",\n        value: function serialize(t, e) {\n          var r = t.toArrayBuffer();\n          return e && e.push(r), {\n            buffer: r\n          };\n        }\n      }, {\n        key: \"deserialize\",\n        value: function deserialize(t) {\n          return new Sn(t.buffer);\n        }\n      }]);\n      return Sn;\n    }();\n    var In = {};\n    function Mn(t, e) {\n      var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      if (In[t]) throw new Error(\"\".concat(t, \" is already registered.\"));\n      Object.defineProperty(e, \"_classRegistryKey\", {\n        value: t,\n        writeable: !1\n      }), In[t] = {\n        klass: e,\n        omit: r.omit || [],\n        shallow: r.shallow || []\n      };\n    }\n    Mn(\"Object\", Object), Mn(\"TransferableGridIndex\", Sn), Mn(\"Color\", Ft), Mn(\"Error\", Error), Mn(\"AJAXError\", q), Mn(\"ResolvedImage\", Rt), Mn(\"StylePropertyFunction\", $r), Mn(\"StyleExpression\", Vr, {\n      omit: [\"_evaluator\"]\n    }), Mn(\"ZoomDependentExpression\", Lr), Mn(\"ZoomConstantExpression\", Tr), Mn(\"CompoundExpression\", Wt, {\n      omit: [\"_evaluate\"]\n    });\n    for (var _t44 in fr) fr[_t44]._classRegistryKey || Mn(\"Expression_\".concat(_t44), fr[_t44]);\n    function zn(t) {\n      return t && \"undefined\" != typeof ArrayBuffer && (t instanceof ArrayBuffer || t.constructor && \"ArrayBuffer\" === t.constructor.name);\n    }\n    function Bn(t, e) {\n      if (null == t || \"boolean\" == typeof t || \"number\" == typeof t || \"string\" == typeof t || t instanceof Boolean || t instanceof Number || t instanceof String || t instanceof Date || t instanceof RegExp || t instanceof Blob) return t;\n      if (zn(t)) return e && e.push(t), t;\n      if (A(t)) return e && e.push(t), t;\n      if (ArrayBuffer.isView(t)) {\n        var _r49 = t;\n        return e && e.push(_r49.buffer), _r49;\n      }\n      if (t instanceof ImageData) return e && e.push(t.data.buffer), t;\n      if (Array.isArray(t)) {\n        var _r50 = [];\n        var _iterator41 = _createForOfIteratorHelper(t),\n          _step41;\n        try {\n          for (_iterator41.s(); !(_step41 = _iterator41.n()).done;) {\n            var _n37 = _step41.value;\n            _r50.push(Bn(_n37, e));\n          }\n        } catch (err) {\n          _iterator41.e(err);\n        } finally {\n          _iterator41.f();\n        }\n        return _r50;\n      }\n      if (\"object\" == typeof t) {\n        var _r51 = t.constructor,\n          _n38 = _r51._classRegistryKey;\n        if (!_n38) throw new Error(\"can't serialize object of unregistered class\");\n        if (!In[_n38]) throw new Error(\"\".concat(_n38, \" is not registered.\"));\n        var _i32 = _r51.serialize ? _r51.serialize(t, e) : {};\n        if (_r51.serialize) {\n          if (e && _i32 === e[e.length - 1]) throw new Error(\"statically serialized object won't survive transfer of $name property\");\n        } else {\n          for (var _r52 in t) {\n            if (!t.hasOwnProperty(_r52)) continue;\n            if (In[_n38].omit.indexOf(_r52) >= 0) continue;\n            var _a24 = t[_r52];\n            _i32[_r52] = In[_n38].shallow.indexOf(_r52) >= 0 ? _a24 : Bn(_a24, e);\n          }\n          t instanceof Error && (_i32.message = t.message);\n        }\n        if (_i32.$name) throw new Error(\"$name property is reserved for worker serialization logic.\");\n        return \"Object\" !== _n38 && (_i32.$name = _n38), _i32;\n      }\n      throw new Error(\"can't serialize object of type \" + typeof t);\n    }\n    function Cn(t) {\n      if (null == t || \"boolean\" == typeof t || \"number\" == typeof t || \"string\" == typeof t || t instanceof Boolean || t instanceof Number || t instanceof String || t instanceof Date || t instanceof RegExp || t instanceof Blob || zn(t) || A(t) || ArrayBuffer.isView(t) || t instanceof ImageData) return t;\n      if (Array.isArray(t)) return t.map(Cn);\n      if (\"object\" == typeof t) {\n        var _e43 = t.$name || \"Object\";\n        if (!In[_e43]) throw new Error(\"can't deserialize unregistered class \".concat(_e43));\n        var _r53 = In[_e43].klass;\n        if (!_r53) throw new Error(\"can't deserialize unregistered class \".concat(_e43));\n        if (_r53.deserialize) return _r53.deserialize(t);\n        var _n39 = Object.create(_r53.prototype);\n        for (var _i33 = 0, _Object$keys = Object.keys(t); _i33 < _Object$keys.length; _i33++) {\n          var _r54 = _Object$keys[_i33];\n          if (\"$name\" === _r54) continue;\n          var _i34 = t[_r54];\n          _n39[_r54] = In[_e43].shallow.indexOf(_r54) >= 0 ? _i34 : Cn(_i34);\n        }\n        return _n39;\n      }\n      throw new Error(\"can't deserialize object of type \" + typeof t);\n    }\n    var Pn = /*#__PURE__*/function () {\n      function Pn() {\n        _classCallCheck(this, Pn);\n        this.first = !0;\n      }\n      _createClass(Pn, [{\n        key: \"update\",\n        value: function update(t, e) {\n          var r = Math.floor(t);\n          return this.first ? (this.first = !1, this.lastIntegerZoom = r, this.lastIntegerZoomTime = 0, this.lastZoom = t, this.lastFloorZoom = r, !0) : (this.lastFloorZoom > r ? (this.lastIntegerZoom = r + 1, this.lastIntegerZoomTime = e) : this.lastFloorZoom < r && (this.lastIntegerZoom = r, this.lastIntegerZoomTime = e), t !== this.lastZoom && (this.lastZoom = t, this.lastFloorZoom = r, !0));\n        }\n      }]);\n      return Pn;\n    }();\n    var Vn = {\n      \"Latin-1 Supplement\": function Latin1Supplement(t) {\n        return t >= 128 && t <= 255;\n      },\n      Arabic: function Arabic(t) {\n        return t >= 1536 && t <= 1791;\n      },\n      \"Arabic Supplement\": function ArabicSupplement(t) {\n        return t >= 1872 && t <= 1919;\n      },\n      \"Arabic Extended-A\": function ArabicExtendedA(t) {\n        return t >= 2208 && t <= 2303;\n      },\n      \"Hangul Jamo\": function HangulJamo(t) {\n        return t >= 4352 && t <= 4607;\n      },\n      \"Unified Canadian Aboriginal Syllabics\": function UnifiedCanadianAboriginalSyllabics(t) {\n        return t >= 5120 && t <= 5759;\n      },\n      Khmer: function Khmer(t) {\n        return t >= 6016 && t <= 6143;\n      },\n      \"Unified Canadian Aboriginal Syllabics Extended\": function UnifiedCanadianAboriginalSyllabicsExtended(t) {\n        return t >= 6320 && t <= 6399;\n      },\n      \"General Punctuation\": function GeneralPunctuation(t) {\n        return t >= 8192 && t <= 8303;\n      },\n      \"Letterlike Symbols\": function LetterlikeSymbols(t) {\n        return t >= 8448 && t <= 8527;\n      },\n      \"Number Forms\": function NumberForms(t) {\n        return t >= 8528 && t <= 8591;\n      },\n      \"Miscellaneous Technical\": function MiscellaneousTechnical(t) {\n        return t >= 8960 && t <= 9215;\n      },\n      \"Control Pictures\": function ControlPictures(t) {\n        return t >= 9216 && t <= 9279;\n      },\n      \"Optical Character Recognition\": function OpticalCharacterRecognition(t) {\n        return t >= 9280 && t <= 9311;\n      },\n      \"Enclosed Alphanumerics\": function EnclosedAlphanumerics(t) {\n        return t >= 9312 && t <= 9471;\n      },\n      \"Geometric Shapes\": function GeometricShapes(t) {\n        return t >= 9632 && t <= 9727;\n      },\n      \"Miscellaneous Symbols\": function MiscellaneousSymbols(t) {\n        return t >= 9728 && t <= 9983;\n      },\n      \"Miscellaneous Symbols and Arrows\": function MiscellaneousSymbolsAndArrows(t) {\n        return t >= 11008 && t <= 11263;\n      },\n      \"CJK Radicals Supplement\": function CJKRadicalsSupplement(t) {\n        return t >= 11904 && t <= 12031;\n      },\n      \"Kangxi Radicals\": function KangxiRadicals(t) {\n        return t >= 12032 && t <= 12255;\n      },\n      \"Ideographic Description Characters\": function IdeographicDescriptionCharacters(t) {\n        return t >= 12272 && t <= 12287;\n      },\n      \"CJK Symbols and Punctuation\": function CJKSymbolsAndPunctuation(t) {\n        return t >= 12288 && t <= 12351;\n      },\n      Hiragana: function Hiragana(t) {\n        return t >= 12352 && t <= 12447;\n      },\n      Katakana: function Katakana(t) {\n        return t >= 12448 && t <= 12543;\n      },\n      Bopomofo: function Bopomofo(t) {\n        return t >= 12544 && t <= 12591;\n      },\n      \"Hangul Compatibility Jamo\": function HangulCompatibilityJamo(t) {\n        return t >= 12592 && t <= 12687;\n      },\n      Kanbun: function Kanbun(t) {\n        return t >= 12688 && t <= 12703;\n      },\n      \"Bopomofo Extended\": function BopomofoExtended(t) {\n        return t >= 12704 && t <= 12735;\n      },\n      \"CJK Strokes\": function CJKStrokes(t) {\n        return t >= 12736 && t <= 12783;\n      },\n      \"Katakana Phonetic Extensions\": function KatakanaPhoneticExtensions(t) {\n        return t >= 12784 && t <= 12799;\n      },\n      \"Enclosed CJK Letters and Months\": function EnclosedCJKLettersAndMonths(t) {\n        return t >= 12800 && t <= 13055;\n      },\n      \"CJK Compatibility\": function CJKCompatibility(t) {\n        return t >= 13056 && t <= 13311;\n      },\n      \"CJK Unified Ideographs Extension A\": function CJKUnifiedIdeographsExtensionA(t) {\n        return t >= 13312 && t <= 19903;\n      },\n      \"Yijing Hexagram Symbols\": function YijingHexagramSymbols(t) {\n        return t >= 19904 && t <= 19967;\n      },\n      \"CJK Unified Ideographs\": function CJKUnifiedIdeographs(t) {\n        return t >= 19968 && t <= 40959;\n      },\n      \"Yi Syllables\": function YiSyllables(t) {\n        return t >= 40960 && t <= 42127;\n      },\n      \"Yi Radicals\": function YiRadicals(t) {\n        return t >= 42128 && t <= 42191;\n      },\n      \"Hangul Jamo Extended-A\": function HangulJamoExtendedA(t) {\n        return t >= 43360 && t <= 43391;\n      },\n      \"Hangul Syllables\": function HangulSyllables(t) {\n        return t >= 44032 && t <= 55215;\n      },\n      \"Hangul Jamo Extended-B\": function HangulJamoExtendedB(t) {\n        return t >= 55216 && t <= 55295;\n      },\n      \"Private Use Area\": function PrivateUseArea(t) {\n        return t >= 57344 && t <= 63743;\n      },\n      \"CJK Compatibility Ideographs\": function CJKCompatibilityIdeographs(t) {\n        return t >= 63744 && t <= 64255;\n      },\n      \"Arabic Presentation Forms-A\": function ArabicPresentationFormsA(t) {\n        return t >= 64336 && t <= 65023;\n      },\n      \"Vertical Forms\": function VerticalForms(t) {\n        return t >= 65040 && t <= 65055;\n      },\n      \"CJK Compatibility Forms\": function CJKCompatibilityForms(t) {\n        return t >= 65072 && t <= 65103;\n      },\n      \"Small Form Variants\": function SmallFormVariants(t) {\n        return t >= 65104 && t <= 65135;\n      },\n      \"Arabic Presentation Forms-B\": function ArabicPresentationFormsB(t) {\n        return t >= 65136 && t <= 65279;\n      },\n      \"Halfwidth and Fullwidth Forms\": function HalfwidthAndFullwidthForms(t) {\n        return t >= 65280 && t <= 65519;\n      }\n    };\n    function En(t) {\n      var _iterator42 = _createForOfIteratorHelper(t),\n        _step42;\n      try {\n        for (_iterator42.s(); !(_step42 = _iterator42.n()).done;) {\n          var _e44 = _step42.value;\n          if (Ln(_e44.charCodeAt(0))) return !0;\n        }\n      } catch (err) {\n        _iterator42.e(err);\n      } finally {\n        _iterator42.f();\n      }\n      return !1;\n    }\n    function Fn(t) {\n      var _iterator43 = _createForOfIteratorHelper(t),\n        _step43;\n      try {\n        for (_iterator43.s(); !(_step43 = _iterator43.n()).done;) {\n          var _e45 = _step43.value;\n          if (!Tn(_e45.charCodeAt(0))) return !1;\n        }\n      } catch (err) {\n        _iterator43.e(err);\n      } finally {\n        _iterator43.f();\n      }\n      return !0;\n    }\n    function Tn(t) {\n      return !(Vn.Arabic(t) || Vn[\"Arabic Supplement\"](t) || Vn[\"Arabic Extended-A\"](t) || Vn[\"Arabic Presentation Forms-A\"](t) || Vn[\"Arabic Presentation Forms-B\"](t));\n    }\n    function Ln(t) {\n      return !(746 !== t && 747 !== t && (t < 4352 || !(Vn[\"Bopomofo Extended\"](t) || Vn.Bopomofo(t) || Vn[\"CJK Compatibility Forms\"](t) && !(t >= 65097 && t <= 65103) || Vn[\"CJK Compatibility Ideographs\"](t) || Vn[\"CJK Compatibility\"](t) || Vn[\"CJK Radicals Supplement\"](t) || Vn[\"CJK Strokes\"](t) || !(!Vn[\"CJK Symbols and Punctuation\"](t) || t >= 12296 && t <= 12305 || t >= 12308 && t <= 12319 || 12336 === t) || Vn[\"CJK Unified Ideographs Extension A\"](t) || Vn[\"CJK Unified Ideographs\"](t) || Vn[\"Enclosed CJK Letters and Months\"](t) || Vn[\"Hangul Compatibility Jamo\"](t) || Vn[\"Hangul Jamo Extended-A\"](t) || Vn[\"Hangul Jamo Extended-B\"](t) || Vn[\"Hangul Jamo\"](t) || Vn[\"Hangul Syllables\"](t) || Vn.Hiragana(t) || Vn[\"Ideographic Description Characters\"](t) || Vn.Kanbun(t) || Vn[\"Kangxi Radicals\"](t) || Vn[\"Katakana Phonetic Extensions\"](t) || Vn.Katakana(t) && 12540 !== t || !(!Vn[\"Halfwidth and Fullwidth Forms\"](t) || 65288 === t || 65289 === t || 65293 === t || t >= 65306 && t <= 65310 || 65339 === t || 65341 === t || 65343 === t || t >= 65371 && t <= 65503 || 65507 === t || t >= 65512 && t <= 65519) || !(!Vn[\"Small Form Variants\"](t) || t >= 65112 && t <= 65118 || t >= 65123 && t <= 65126) || Vn[\"Unified Canadian Aboriginal Syllabics\"](t) || Vn[\"Unified Canadian Aboriginal Syllabics Extended\"](t) || Vn[\"Vertical Forms\"](t) || Vn[\"Yijing Hexagram Symbols\"](t) || Vn[\"Yi Syllables\"](t) || Vn[\"Yi Radicals\"](t))));\n    }\n    function Dn(t) {\n      return !(Ln(t) || function (t) {\n        return !!(Vn[\"Latin-1 Supplement\"](t) && (167 === t || 169 === t || 174 === t || 177 === t || 188 === t || 189 === t || 190 === t || 215 === t || 247 === t) || Vn[\"General Punctuation\"](t) && (8214 === t || 8224 === t || 8225 === t || 8240 === t || 8241 === t || 8251 === t || 8252 === t || 8258 === t || 8263 === t || 8264 === t || 8265 === t || 8273 === t) || Vn[\"Letterlike Symbols\"](t) || Vn[\"Number Forms\"](t) || Vn[\"Miscellaneous Technical\"](t) && (t >= 8960 && t <= 8967 || t >= 8972 && t <= 8991 || t >= 8996 && t <= 9e3 || 9003 === t || t >= 9085 && t <= 9114 || t >= 9150 && t <= 9165 || 9167 === t || t >= 9169 && t <= 9179 || t >= 9186 && t <= 9215) || Vn[\"Control Pictures\"](t) && 9251 !== t || Vn[\"Optical Character Recognition\"](t) || Vn[\"Enclosed Alphanumerics\"](t) || Vn[\"Geometric Shapes\"](t) || Vn[\"Miscellaneous Symbols\"](t) && !(t >= 9754 && t <= 9759) || Vn[\"Miscellaneous Symbols and Arrows\"](t) && (t >= 11026 && t <= 11055 || t >= 11088 && t <= 11097 || t >= 11192 && t <= 11243) || Vn[\"CJK Symbols and Punctuation\"](t) || Vn.Katakana(t) || Vn[\"Private Use Area\"](t) || Vn[\"CJK Compatibility Forms\"](t) || Vn[\"Small Form Variants\"](t) || Vn[\"Halfwidth and Fullwidth Forms\"](t) || 8734 === t || 8756 === t || 8757 === t || t >= 9984 && t <= 10087 || t >= 10102 && t <= 10131 || 65532 === t || 65533 === t);\n      }(t));\n    }\n    function $n(t) {\n      return t >= 1424 && t <= 2303 || Vn[\"Arabic Presentation Forms-A\"](t) || Vn[\"Arabic Presentation Forms-B\"](t);\n    }\n    function Rn(t, e) {\n      return !(!e && $n(t) || t >= 2304 && t <= 3583 || t >= 3840 && t <= 4255 || Vn.Khmer(t));\n    }\n    function On(t) {\n      var _iterator44 = _createForOfIteratorHelper(t),\n        _step44;\n      try {\n        for (_iterator44.s(); !(_step44 = _iterator44.n()).done;) {\n          var _e46 = _step44.value;\n          if ($n(_e46.charCodeAt(0))) return !0;\n        }\n      } catch (err) {\n        _iterator44.e(err);\n      } finally {\n        _iterator44.f();\n      }\n      return !1;\n    }\n    var Un = \"deferred\",\n      qn = \"loading\",\n      jn = \"loaded\";\n    var Nn = null,\n      Zn = \"unavailable\",\n      Kn = null;\n    var Gn = function Gn(t) {\n      t && \"string\" == typeof t && t.indexOf(\"NetworkError\") > -1 && (Zn = \"error\"), Nn && Nn(t);\n    };\n    function Jn() {\n      Xn.fire(new tt(\"pluginStateChange\", {\n        pluginStatus: Zn,\n        pluginURL: Kn\n      }));\n    }\n    var Xn = new rt(),\n      Yn = function Yn() {\n        return Zn;\n      },\n      Hn = function Hn() {\n        if (Zn !== Un || !Kn) throw new Error(\"rtl-text-plugin cannot be downloaded unless a pluginURL is specified\");\n        Zn = qn, Jn(), Kn && K({\n          url: Kn\n        }, function (t) {\n          t ? Gn(t) : (Zn = jn, Jn());\n        });\n      },\n      Wn = {\n        applyArabicShaping: null,\n        processBidirectionalText: null,\n        processStyledBidirectionalText: null,\n        isLoaded: function isLoaded() {\n          return Zn === jn || null != Wn.applyArabicShaping;\n        },\n        isLoading: function isLoading() {\n          return Zn === qn;\n        },\n        setState: function setState(t) {\n          if (!g()) throw new Error(\"Cannot set the state of the rtl-text-plugin when not in the web-worker context\");\n          Zn = t.pluginStatus, Kn = t.pluginURL;\n        },\n        isParsed: function isParsed() {\n          if (!g()) throw new Error(\"rtl-text-plugin is only parsed on the worker-threads\");\n          return null != Wn.applyArabicShaping && null != Wn.processBidirectionalText && null != Wn.processStyledBidirectionalText;\n        },\n        getPluginURL: function getPluginURL() {\n          if (!g()) throw new Error(\"rtl-text-plugin url can only be queried from the worker threads\");\n          return Kn;\n        }\n      };\n    var Qn = /*#__PURE__*/function () {\n      function Qn(t, e) {\n        _classCallCheck(this, Qn);\n        this.zoom = t, e ? (this.now = e.now, this.fadeDuration = e.fadeDuration, this.zoomHistory = e.zoomHistory, this.transition = e.transition) : (this.now = 0, this.fadeDuration = 0, this.zoomHistory = new Pn(), this.transition = {});\n      }\n      _createClass(Qn, [{\n        key: \"isSupportedScript\",\n        value: function isSupportedScript(t) {\n          return function (t, e) {\n            var _iterator45 = _createForOfIteratorHelper(t),\n              _step45;\n            try {\n              for (_iterator45.s(); !(_step45 = _iterator45.n()).done;) {\n                var _r55 = _step45.value;\n                if (!Rn(_r55.charCodeAt(0), e)) return !1;\n              }\n            } catch (err) {\n              _iterator45.e(err);\n            } finally {\n              _iterator45.f();\n            }\n            return !0;\n          }(t, Wn.isLoaded());\n        }\n      }, {\n        key: \"crossFadingFactor\",\n        value: function crossFadingFactor() {\n          return 0 === this.fadeDuration ? 1 : Math.min((this.now - this.zoomHistory.lastIntegerZoomTime) / this.fadeDuration, 1);\n        }\n      }, {\n        key: \"getCrossfadeParameters\",\n        value: function getCrossfadeParameters() {\n          var t = this.zoom,\n            e = t - Math.floor(t),\n            r = this.crossFadingFactor();\n          return t > this.zoomHistory.lastIntegerZoom ? {\n            fromScale: 2,\n            toScale: 1,\n            t: e + (1 - e) * r\n          } : {\n            fromScale: .5,\n            toScale: 1,\n            t: 1 - (1 - r) * e\n          };\n        }\n      }]);\n      return Qn;\n    }();\n    var ti = /*#__PURE__*/function () {\n      function ti(t, e) {\n        _classCallCheck(this, ti);\n        this.property = t, this.value = e, this.expression = function (t, e) {\n          if (kr(t)) return new $r(t, e);\n          if (Er(t)) {\n            var _r56 = Dr(t, e);\n            if (\"error\" === _r56.result) throw new Error(_r56.value.map(function (t) {\n              return \"\".concat(t.key, \": \").concat(t.message);\n            }).join(\", \"));\n            return _r56.value;\n          }\n          {\n            var _r57 = t;\n            return \"color\" === e.type && \"string\" == typeof t ? _r57 = Ft.parse(t) : \"padding\" !== e.type || \"number\" != typeof t && !Array.isArray(t) || (_r57 = $t.parse(t)), {\n              kind: \"constant\",\n              evaluate: function evaluate() {\n                return _r57;\n              }\n            };\n          }\n        }(void 0 === e ? t.specification.default : e, t.specification);\n      }\n      _createClass(ti, [{\n        key: \"isDataDriven\",\n        value: function isDataDriven() {\n          return \"source\" === this.expression.kind || \"composite\" === this.expression.kind;\n        }\n      }, {\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r) {\n          return this.property.possiblyEvaluate(this, t, e, r);\n        }\n      }]);\n      return ti;\n    }();\n    var ei = /*#__PURE__*/function () {\n      function ei(t) {\n        _classCallCheck(this, ei);\n        this.property = t, this.value = new ti(t, void 0);\n      }\n      _createClass(ei, [{\n        key: \"transitioned\",\n        value: function transitioned(t, e) {\n          return new ni(this.property, this.value, e, o({}, t.transition, this.transition), t.now);\n        }\n      }, {\n        key: \"untransitioned\",\n        value: function untransitioned() {\n          return new ni(this.property, this.value, null, {}, 0);\n        }\n      }]);\n      return ei;\n    }();\n    var ri = /*#__PURE__*/function () {\n      function ri(t) {\n        _classCallCheck(this, ri);\n        this._properties = t, this._values = Object.create(t.defaultTransitionablePropertyValues);\n      }\n      _createClass(ri, [{\n        key: \"getValue\",\n        value: function getValue(t) {\n          return p(this._values[t].value.value);\n        }\n      }, {\n        key: \"setValue\",\n        value: function setValue(t, e) {\n          Object.prototype.hasOwnProperty.call(this._values, t) || (this._values[t] = new ei(this._values[t].property)), this._values[t].value = new ti(this._values[t].property, null === e ? void 0 : p(e));\n        }\n      }, {\n        key: \"getTransition\",\n        value: function getTransition(t) {\n          return p(this._values[t].transition);\n        }\n      }, {\n        key: \"setTransition\",\n        value: function setTransition(t, e) {\n          Object.prototype.hasOwnProperty.call(this._values, t) || (this._values[t] = new ei(this._values[t].property)), this._values[t].transition = p(e) || void 0;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = {};\n          for (var _i35 = 0, _Object$keys2 = Object.keys(this._values); _i35 < _Object$keys2.length; _i35++) {\n            var _e47 = _Object$keys2[_i35];\n            var _r58 = this.getValue(_e47);\n            void 0 !== _r58 && (t[_e47] = _r58);\n            var _n40 = this.getTransition(_e47);\n            void 0 !== _n40 && (t[\"\".concat(_e47, \"-transition\")] = _n40);\n          }\n          return t;\n        }\n      }, {\n        key: \"transitioned\",\n        value: function transitioned(t, e) {\n          var r = new ii(this._properties);\n          for (var _i36 = 0, _Object$keys3 = Object.keys(this._values); _i36 < _Object$keys3.length; _i36++) {\n            var _n41 = _Object$keys3[_i36];\n            r._values[_n41] = this._values[_n41].transitioned(t, e._values[_n41]);\n          }\n          return r;\n        }\n      }, {\n        key: \"untransitioned\",\n        value: function untransitioned() {\n          var t = new ii(this._properties);\n          for (var _i37 = 0, _Object$keys4 = Object.keys(this._values); _i37 < _Object$keys4.length; _i37++) {\n            var _e48 = _Object$keys4[_i37];\n            t._values[_e48] = this._values[_e48].untransitioned();\n          }\n          return t;\n        }\n      }]);\n      return ri;\n    }();\n    var ni = /*#__PURE__*/function () {\n      function ni(t, e, r, n, i) {\n        _classCallCheck(this, ni);\n        this.property = t, this.value = e, this.begin = i + n.delay || 0, this.end = this.begin + n.duration || 0, t.specification.transition && (n.delay || n.duration) && (this.prior = r);\n      }\n      _createClass(ni, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r) {\n          var n = t.now || 0,\n            i = this.value.possiblyEvaluate(t, e, r),\n            a = this.prior;\n          if (a) {\n            if (n > this.end) return this.prior = null, i;\n            if (this.value.isDataDriven()) return this.prior = null, i;\n            if (n < this.begin) return a.possiblyEvaluate(t, e, r);\n            {\n              var _s22 = (n - this.begin) / (this.end - this.begin);\n              return this.property.interpolate(a.possiblyEvaluate(t, e, r), i, function (t) {\n                if (t <= 0) return 0;\n                if (t >= 1) return 1;\n                var e = t * t,\n                  r = e * t;\n                return 4 * (t < .5 ? r : 3 * (t - e) + r - .75);\n              }(_s22));\n            }\n          }\n          return i;\n        }\n      }]);\n      return ni;\n    }();\n    var ii = /*#__PURE__*/function () {\n      function ii(t) {\n        _classCallCheck(this, ii);\n        this._properties = t, this._values = Object.create(t.defaultTransitioningPropertyValues);\n      }\n      _createClass(ii, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r) {\n          var n = new oi(this._properties);\n          for (var _i38 = 0, _Object$keys5 = Object.keys(this._values); _i38 < _Object$keys5.length; _i38++) {\n            var _i39 = _Object$keys5[_i38];\n            n._values[_i39] = this._values[_i39].possiblyEvaluate(t, e, r);\n          }\n          return n;\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          for (var _i40 = 0, _Object$keys6 = Object.keys(this._values); _i40 < _Object$keys6.length; _i40++) {\n            var _t45 = _Object$keys6[_i40];\n            if (this._values[_t45].prior) return !0;\n          }\n          return !1;\n        }\n      }]);\n      return ii;\n    }();\n    var ai = /*#__PURE__*/function () {\n      function ai(t) {\n        _classCallCheck(this, ai);\n        this._properties = t, this._values = Object.create(t.defaultPropertyValues);\n      }\n      _createClass(ai, [{\n        key: \"getValue\",\n        value: function getValue(t) {\n          return p(this._values[t].value);\n        }\n      }, {\n        key: \"setValue\",\n        value: function setValue(t, e) {\n          this._values[t] = new ti(this._values[t].property, null === e ? void 0 : p(e));\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = {};\n          for (var _i41 = 0, _Object$keys7 = Object.keys(this._values); _i41 < _Object$keys7.length; _i41++) {\n            var _e49 = _Object$keys7[_i41];\n            var _r59 = this.getValue(_e49);\n            void 0 !== _r59 && (t[_e49] = _r59);\n          }\n          return t;\n        }\n      }, {\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r) {\n          var n = new oi(this._properties);\n          for (var _i42 = 0, _Object$keys8 = Object.keys(this._values); _i42 < _Object$keys8.length; _i42++) {\n            var _i43 = _Object$keys8[_i42];\n            n._values[_i43] = this._values[_i43].possiblyEvaluate(t, e, r);\n          }\n          return n;\n        }\n      }]);\n      return ai;\n    }();\n    var si = /*#__PURE__*/function () {\n      function si(t, e, r) {\n        _classCallCheck(this, si);\n        this.property = t, this.value = e, this.parameters = r;\n      }\n      _createClass(si, [{\n        key: \"isConstant\",\n        value: function isConstant() {\n          return \"constant\" === this.value.kind;\n        }\n      }, {\n        key: \"constantOr\",\n        value: function constantOr(t) {\n          return \"constant\" === this.value.kind ? this.value.value : t;\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, n) {\n          return this.property.evaluate(this.value, this.parameters, t, e, r, n);\n        }\n      }]);\n      return si;\n    }();\n    var oi = /*#__PURE__*/function () {\n      function oi(t) {\n        _classCallCheck(this, oi);\n        this._properties = t, this._values = Object.create(t.defaultPossiblyEvaluatedValues);\n      }\n      _createClass(oi, [{\n        key: \"get\",\n        value: function get(t) {\n          return this._values[t];\n        }\n      }]);\n      return oi;\n    }();\n    var li = /*#__PURE__*/function () {\n      function li(t) {\n        _classCallCheck(this, li);\n        this.specification = t;\n      }\n      _createClass(li, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e) {\n          if (t.isDataDriven()) throw new Error(\"Value should not be data driven\");\n          return t.expression.evaluate(e);\n        }\n      }, {\n        key: \"interpolate\",\n        value: function interpolate(t, e, r) {\n          var n = Ie[this.specification.type];\n          return n ? n(t, e, r) : t;\n        }\n      }]);\n      return li;\n    }();\n    var ui = /*#__PURE__*/function () {\n      function ui(t, e) {\n        _classCallCheck(this, ui);\n        this.specification = t, this.overrides = e;\n      }\n      _createClass(ui, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r, n) {\n          return new si(this, \"constant\" === t.expression.kind || \"camera\" === t.expression.kind ? {\n            kind: \"constant\",\n            value: t.expression.evaluate(e, null, {}, r, n)\n          } : t.expression, e);\n        }\n      }, {\n        key: \"interpolate\",\n        value: function interpolate(t, e, r) {\n          if (\"constant\" !== t.value.kind || \"constant\" !== e.value.kind) return t;\n          if (void 0 === t.value.value || void 0 === e.value.value) return new si(this, {\n            kind: \"constant\",\n            value: void 0\n          }, t.parameters);\n          var n = Ie[this.specification.type];\n          return n ? new si(this, {\n            kind: \"constant\",\n            value: n(t.value.value, e.value.value, r)\n          }, t.parameters) : t;\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, n, i, a) {\n          return \"constant\" === t.kind ? t.value : t.evaluate(e, r, n, i, a);\n        }\n      }]);\n      return ui;\n    }();\n    var ci = /*#__PURE__*/function (_ui) {\n      _inherits(ci, _ui);\n      var _super4 = _createSuper(ci);\n      function ci() {\n        _classCallCheck(this, ci);\n        return _super4.apply(this, arguments);\n      }\n      _createClass(ci, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r, n) {\n          if (void 0 === t.value) return new si(this, {\n            kind: \"constant\",\n            value: void 0\n          }, e);\n          if (\"constant\" === t.expression.kind) {\n            var _i44 = t.expression.evaluate(e, null, {}, r, n),\n              _a25 = \"resolvedImage\" === t.property.specification.type && \"string\" != typeof _i44 ? _i44.name : _i44,\n              _s23 = this._calculate(_a25, _a25, _a25, e);\n            return new si(this, {\n              kind: \"constant\",\n              value: _s23\n            }, e);\n          }\n          if (\"camera\" === t.expression.kind) {\n            var _r60 = this._calculate(t.expression.evaluate({\n              zoom: e.zoom - 1\n            }), t.expression.evaluate({\n              zoom: e.zoom\n            }), t.expression.evaluate({\n              zoom: e.zoom + 1\n            }), e);\n            return new si(this, {\n              kind: \"constant\",\n              value: _r60\n            }, e);\n          }\n          return new si(this, t.expression, e);\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, n, i, a) {\n          if (\"source\" === t.kind) {\n            var _s24 = t.evaluate(e, r, n, i, a);\n            return this._calculate(_s24, _s24, _s24, e);\n          }\n          return \"composite\" === t.kind ? this._calculate(t.evaluate({\n            zoom: Math.floor(e.zoom) - 1\n          }, r, n), t.evaluate({\n            zoom: Math.floor(e.zoom)\n          }, r, n), t.evaluate({\n            zoom: Math.floor(e.zoom) + 1\n          }, r, n), e) : t.value;\n        }\n      }, {\n        key: \"_calculate\",\n        value: function _calculate(t, e, r, n) {\n          return n.zoom > n.zoomHistory.lastIntegerZoom ? {\n            from: t,\n            to: e\n          } : {\n            from: r,\n            to: e\n          };\n        }\n      }, {\n        key: \"interpolate\",\n        value: function interpolate(t) {\n          return t;\n        }\n      }]);\n      return ci;\n    }(ui);\n    var hi = /*#__PURE__*/function () {\n      function hi(t) {\n        _classCallCheck(this, hi);\n        this.specification = t;\n      }\n      _createClass(hi, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r, n) {\n          if (void 0 !== t.value) {\n            if (\"constant\" === t.expression.kind) {\n              var _i45 = t.expression.evaluate(e, null, {}, r, n);\n              return this._calculate(_i45, _i45, _i45, e);\n            }\n            return this._calculate(t.expression.evaluate(new Qn(Math.floor(e.zoom - 1), e)), t.expression.evaluate(new Qn(Math.floor(e.zoom), e)), t.expression.evaluate(new Qn(Math.floor(e.zoom + 1), e)), e);\n          }\n        }\n      }, {\n        key: \"_calculate\",\n        value: function _calculate(t, e, r, n) {\n          return n.zoom > n.zoomHistory.lastIntegerZoom ? {\n            from: t,\n            to: e\n          } : {\n            from: r,\n            to: e\n          };\n        }\n      }, {\n        key: \"interpolate\",\n        value: function interpolate(t) {\n          return t;\n        }\n      }]);\n      return hi;\n    }();\n    var pi = /*#__PURE__*/function () {\n      function pi(t) {\n        _classCallCheck(this, pi);\n        this.specification = t;\n      }\n      _createClass(pi, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r, n) {\n          return !!t.expression.evaluate(e, null, {}, r, n);\n        }\n      }, {\n        key: \"interpolate\",\n        value: function interpolate() {\n          return !1;\n        }\n      }]);\n      return pi;\n    }();\n    var fi = /*#__PURE__*/_createClass(function fi(t) {\n      _classCallCheck(this, fi);\n      this.properties = t, this.defaultPropertyValues = {}, this.defaultTransitionablePropertyValues = {}, this.defaultTransitioningPropertyValues = {}, this.defaultPossiblyEvaluatedValues = {}, this.overridableProperties = [];\n      for (var _e50 in t) {\n        var _r61 = t[_e50];\n        _r61.specification.overridable && this.overridableProperties.push(_e50);\n        var _n42 = this.defaultPropertyValues[_e50] = new ti(_r61, void 0),\n          _i46 = this.defaultTransitionablePropertyValues[_e50] = new ei(_r61);\n        this.defaultTransitioningPropertyValues[_e50] = _i46.untransitioned(), this.defaultPossiblyEvaluatedValues[_e50] = _n42.possiblyEvaluate({});\n      }\n    });\n    Mn(\"DataDrivenProperty\", ui), Mn(\"DataConstantProperty\", li), Mn(\"CrossFadedDataDrivenProperty\", ci), Mn(\"CrossFadedProperty\", hi), Mn(\"ColorRampProperty\", pi);\n    var di = \"-transition\";\n    var yi = /*#__PURE__*/function (_rt) {\n      _inherits(yi, _rt);\n      var _super5 = _createSuper(yi);\n      function yi(t, e) {\n        var _this3;\n        _classCallCheck(this, yi);\n        if (_this3 = _super5.call(this), _this3.id = t.id, _this3.type = t.type, _this3._featureFilter = {\n          filter: function filter() {\n            return !0;\n          },\n          needGeometry: !1\n        }, \"custom\" !== t.type && (_this3.metadata = t.metadata, _this3.minzoom = t.minzoom, _this3.maxzoom = t.maxzoom, \"background\" !== t.type && (_this3.source = t.source, _this3.sourceLayer = t[\"source-layer\"], _this3.filter = t.filter), e.layout && (_this3._unevaluatedLayout = new ai(e.layout)), e.paint)) {\n          _this3._transitionablePaint = new ri(e.paint);\n          for (var _e51 in t.paint) _this3.setPaintProperty(_e51, t.paint[_e51], {\n            validate: !1\n          });\n          for (var _e52 in t.layout) _this3.setLayoutProperty(_e52, t.layout[_e52], {\n            validate: !1\n          });\n          _this3._transitioningPaint = _this3._transitionablePaint.untransitioned(), _this3.paint = new oi(e.paint);\n        }\n        return _possibleConstructorReturn(_this3);\n      }\n      _createClass(yi, [{\n        key: \"getCrossfadeParameters\",\n        value: function getCrossfadeParameters() {\n          return this._crossfadeParameters;\n        }\n      }, {\n        key: \"getLayoutProperty\",\n        value: function getLayoutProperty(t) {\n          return \"visibility\" === t ? this.visibility : this._unevaluatedLayout.getValue(t);\n        }\n      }, {\n        key: \"setLayoutProperty\",\n        value: function setLayoutProperty(t, e) {\n          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          null != e && this._validate(An, \"layers.\".concat(this.id, \".layout.\").concat(t), t, e, r) || (\"visibility\" !== t ? this._unevaluatedLayout.setValue(t, e) : this.visibility = e);\n        }\n      }, {\n        key: \"getPaintProperty\",\n        value: function getPaintProperty(t) {\n          return t.endsWith(di) ? this._transitionablePaint.getTransition(t.slice(0, -di.length)) : this._transitionablePaint.getValue(t);\n        }\n      }, {\n        key: \"setPaintProperty\",\n        value: function setPaintProperty(t, e) {\n          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          if (null != e && this._validate(_n, \"layers.\".concat(this.id, \".paint.\").concat(t), t, e, r)) return !1;\n          if (t.endsWith(di)) return this._transitionablePaint.setTransition(t.slice(0, -di.length), e || void 0), !1;\n          {\n            var _r62 = this._transitionablePaint._values[t],\n              _n43 = \"cross-faded-data-driven\" === _r62.property.specification[\"property-type\"],\n              _i47 = _r62.value.isDataDriven(),\n              _a26 = _r62.value;\n            this._transitionablePaint.setValue(t, e), this._handleSpecialPaintPropertyUpdate(t);\n            var _s25 = this._transitionablePaint._values[t].value;\n            return _s25.isDataDriven() || _i47 || _n43 || this._handleOverridablePaintPropertyUpdate(t, _a26, _s25);\n          }\n        }\n      }, {\n        key: \"_handleSpecialPaintPropertyUpdate\",\n        value: function _handleSpecialPaintPropertyUpdate(t) {}\n      }, {\n        key: \"_handleOverridablePaintPropertyUpdate\",\n        value: function _handleOverridablePaintPropertyUpdate(t, e, r) {\n          return !1;\n        }\n      }, {\n        key: \"isHidden\",\n        value: function isHidden(t) {\n          return !!(this.minzoom && t < this.minzoom) || !!(this.maxzoom && t >= this.maxzoom) || \"none\" === this.visibility;\n        }\n      }, {\n        key: \"updateTransitions\",\n        value: function updateTransitions(t) {\n          this._transitioningPaint = this._transitionablePaint.transitioned(t, this._transitioningPaint);\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return this._transitioningPaint.hasTransition();\n        }\n      }, {\n        key: \"recalculate\",\n        value: function recalculate(t, e) {\n          t.getCrossfadeParameters && (this._crossfadeParameters = t.getCrossfadeParameters()), this._unevaluatedLayout && (this.layout = this._unevaluatedLayout.possiblyEvaluate(t, void 0, e)), this.paint = this._transitioningPaint.possiblyEvaluate(t, void 0, e);\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = {\n            id: this.id,\n            type: this.type,\n            source: this.source,\n            \"source-layer\": this.sourceLayer,\n            metadata: this.metadata,\n            minzoom: this.minzoom,\n            maxzoom: this.maxzoom,\n            filter: this.filter,\n            layout: this._unevaluatedLayout && this._unevaluatedLayout.serialize(),\n            paint: this._transitionablePaint && this._transitionablePaint.serialize()\n          };\n          return this.visibility && (t.layout = t.layout || {}, t.layout.visibility = this.visibility), h(t, function (t, e) {\n            return !(void 0 === t || \"layout\" === e && !Object.keys(t).length || \"paint\" === e && !Object.keys(t).length);\n          });\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate(t, e, r, n) {\n          var i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n          return (!i || !1 !== i.validate) && kn(this, t.call(bn, {\n            key: e,\n            layerType: this.type,\n            objectKey: r,\n            value: n,\n            styleSpec: nt,\n            style: {\n              glyphs: !0,\n              sprite: !0\n            }\n          }));\n        }\n      }, {\n        key: \"is3D\",\n        value: function is3D() {\n          return !1;\n        }\n      }, {\n        key: \"isTileClipped\",\n        value: function isTileClipped() {\n          return !1;\n        }\n      }, {\n        key: \"hasOffscreenPass\",\n        value: function hasOffscreenPass() {\n          return !1;\n        }\n      }, {\n        key: \"resize\",\n        value: function resize() {}\n      }, {\n        key: \"isStateDependent\",\n        value: function isStateDependent() {\n          for (var _t46 in this.paint._values) {\n            var _e53 = this.paint.get(_t46);\n            if (_e53 instanceof si && br(_e53.property.specification) && (\"source\" === _e53.value.kind || \"composite\" === _e53.value.kind) && _e53.value.isStateDependent) return !0;\n          }\n          return !1;\n        }\n      }]);\n      return yi;\n    }(rt);\n    var mi = {\n      Int8: Int8Array,\n      Uint8: Uint8Array,\n      Int16: Int16Array,\n      Uint16: Uint16Array,\n      Int32: Int32Array,\n      Uint32: Uint32Array,\n      Float32: Float32Array\n    };\n    var gi = /*#__PURE__*/_createClass(function gi(t, e) {\n      _classCallCheck(this, gi);\n      this._structArray = t, this._pos1 = e * this.size, this._pos2 = this._pos1 / 2, this._pos4 = this._pos1 / 4, this._pos8 = this._pos1 / 8;\n    });\n    var xi = /*#__PURE__*/function () {\n      function xi() {\n        _classCallCheck(this, xi);\n        this.isTransferred = !1, this.capacity = -1, this.resize(0);\n      }\n      _createClass(xi, [{\n        key: \"_trim\",\n        value: function _trim() {\n          this.length !== this.capacity && (this.capacity = this.length, this.arrayBuffer = this.arrayBuffer.slice(0, this.length * this.bytesPerElement), this._refreshViews());\n        }\n      }, {\n        key: \"clear\",\n        value: function clear() {\n          this.length = 0;\n        }\n      }, {\n        key: \"resize\",\n        value: function resize(t) {\n          this.reserve(t), this.length = t;\n        }\n      }, {\n        key: \"reserve\",\n        value: function reserve(t) {\n          if (t > this.capacity) {\n            this.capacity = Math.max(t, Math.floor(5 * this.capacity), 128), this.arrayBuffer = new ArrayBuffer(this.capacity * this.bytesPerElement);\n            var _e54 = this.uint8;\n            this._refreshViews(), _e54 && this.uint8.set(_e54);\n          }\n        }\n      }, {\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          throw new Error(\"_refreshViews() must be implemented by each concrete StructArray layout\");\n        }\n      }], [{\n        key: \"serialize\",\n        value: function serialize(t, e) {\n          return t._trim(), e && (t.isTransferred = !0, e.push(t.arrayBuffer)), {\n            length: t.length,\n            arrayBuffer: t.arrayBuffer\n          };\n        }\n      }, {\n        key: \"deserialize\",\n        value: function deserialize(t) {\n          var e = Object.create(this.prototype);\n          return e.arrayBuffer = t.arrayBuffer, e.length = t.length, e.capacity = t.arrayBuffer.byteLength / e.bytesPerElement, e._refreshViews(), e;\n        }\n      }]);\n      return xi;\n    }();\n    function vi(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var r = 0,\n        n = 0;\n      return {\n        members: t.map(function (t) {\n          var i = mi[t.type].BYTES_PER_ELEMENT,\n            a = r = bi(r, Math.max(e, i)),\n            s = t.components || 1;\n          return n = Math.max(n, i), r += i * s, {\n            name: t.name,\n            type: t.type,\n            components: s,\n            offset: a\n          };\n        }),\n        size: bi(r, Math.max(n, e)),\n        alignment: e\n      };\n    }\n    function bi(t, e) {\n      return Math.ceil(t / e) * e;\n    }\n    var wi = /*#__PURE__*/function (_xi) {\n      _inherits(wi, _xi);\n      var _super6 = _createSuper(wi);\n      function wi() {\n        _classCallCheck(this, wi);\n        return _super6.apply(this, arguments);\n      }\n      _createClass(wi, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e) {\n          var r = this.length;\n          return this.resize(r + 1), this.emplace(r, t, e);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r) {\n          var n = 2 * t;\n          return this.int16[n + 0] = e, this.int16[n + 1] = r, t;\n        }\n      }]);\n      return wi;\n    }(xi);\n    wi.prototype.bytesPerElement = 4, Mn(\"StructArrayLayout2i4\", wi);\n    var _i = /*#__PURE__*/function (_xi2) {\n      _inherits(_i, _xi2);\n      var _super7 = _createSuper(_i);\n      function _i() {\n        _classCallCheck(this, _i);\n        return _super7.apply(this, arguments);\n      }\n      _createClass(_i, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n) {\n          var i = this.length;\n          return this.resize(i + 1), this.emplace(i, t, e, r, n);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i) {\n          var a = 4 * t;\n          return this.int16[a + 0] = e, this.int16[a + 1] = r, this.int16[a + 2] = n, this.int16[a + 3] = i, t;\n        }\n      }]);\n      return _i;\n    }(xi);\n    _i.prototype.bytesPerElement = 8, Mn(\"StructArrayLayout4i8\", _i);\n    var Ai = /*#__PURE__*/function (_xi3) {\n      _inherits(Ai, _xi3);\n      var _super8 = _createSuper(Ai);\n      function Ai() {\n        _classCallCheck(this, Ai);\n        return _super8.apply(this, arguments);\n      }\n      _createClass(Ai, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n, i, a) {\n          var s = this.length;\n          return this.resize(s + 1), this.emplace(s, t, e, r, n, i, a);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i, a, s) {\n          var o = 6 * t;\n          return this.int16[o + 0] = e, this.int16[o + 1] = r, this.int16[o + 2] = n, this.int16[o + 3] = i, this.int16[o + 4] = a, this.int16[o + 5] = s, t;\n        }\n      }]);\n      return Ai;\n    }(xi);\n    Ai.prototype.bytesPerElement = 12, Mn(\"StructArrayLayout2i4i12\", Ai);\n    var ki = /*#__PURE__*/function (_xi4) {\n      _inherits(ki, _xi4);\n      var _super9 = _createSuper(ki);\n      function ki() {\n        _classCallCheck(this, ki);\n        return _super9.apply(this, arguments);\n      }\n      _createClass(ki, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n, i, a) {\n          var s = this.length;\n          return this.resize(s + 1), this.emplace(s, t, e, r, n, i, a);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i, a, s) {\n          var o = 4 * t,\n            l = 8 * t;\n          return this.int16[o + 0] = e, this.int16[o + 1] = r, this.uint8[l + 4] = n, this.uint8[l + 5] = i, this.uint8[l + 6] = a, this.uint8[l + 7] = s, t;\n        }\n      }]);\n      return ki;\n    }(xi);\n    ki.prototype.bytesPerElement = 8, Mn(\"StructArrayLayout2i4ub8\", ki);\n    var Si = /*#__PURE__*/function (_xi5) {\n      _inherits(Si, _xi5);\n      var _super10 = _createSuper(Si);\n      function Si() {\n        _classCallCheck(this, Si);\n        return _super10.apply(this, arguments);\n      }\n      _createClass(Si, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e) {\n          var r = this.length;\n          return this.resize(r + 1), this.emplace(r, t, e);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r) {\n          var n = 2 * t;\n          return this.float32[n + 0] = e, this.float32[n + 1] = r, t;\n        }\n      }]);\n      return Si;\n    }(xi);\n    Si.prototype.bytesPerElement = 8, Mn(\"StructArrayLayout2f8\", Si);\n    var Ii = /*#__PURE__*/function (_xi6) {\n      _inherits(Ii, _xi6);\n      var _super11 = _createSuper(Ii);\n      function Ii() {\n        _classCallCheck(this, Ii);\n        return _super11.apply(this, arguments);\n      }\n      _createClass(Ii, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n, i, a, s, o, l, u) {\n          var c = this.length;\n          return this.resize(c + 1), this.emplace(c, t, e, r, n, i, a, s, o, l, u);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i, a, s, o, l, u, c) {\n          var h = 10 * t;\n          return this.uint16[h + 0] = e, this.uint16[h + 1] = r, this.uint16[h + 2] = n, this.uint16[h + 3] = i, this.uint16[h + 4] = a, this.uint16[h + 5] = s, this.uint16[h + 6] = o, this.uint16[h + 7] = l, this.uint16[h + 8] = u, this.uint16[h + 9] = c, t;\n        }\n      }]);\n      return Ii;\n    }(xi);\n    Ii.prototype.bytesPerElement = 20, Mn(\"StructArrayLayout10ui20\", Ii);\n    var Mi = /*#__PURE__*/function (_xi7) {\n      _inherits(Mi, _xi7);\n      var _super12 = _createSuper(Mi);\n      function Mi() {\n        _classCallCheck(this, Mi);\n        return _super12.apply(this, arguments);\n      }\n      _createClass(Mi, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n, i, a, s, o, l, u, c, h) {\n          var p = this.length;\n          return this.resize(p + 1), this.emplace(p, t, e, r, n, i, a, s, o, l, u, c, h);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i, a, s, o, l, u, c, h, p) {\n          var f = 12 * t;\n          return this.int16[f + 0] = e, this.int16[f + 1] = r, this.int16[f + 2] = n, this.int16[f + 3] = i, this.uint16[f + 4] = a, this.uint16[f + 5] = s, this.uint16[f + 6] = o, this.uint16[f + 7] = l, this.int16[f + 8] = u, this.int16[f + 9] = c, this.int16[f + 10] = h, this.int16[f + 11] = p, t;\n        }\n      }]);\n      return Mi;\n    }(xi);\n    Mi.prototype.bytesPerElement = 24, Mn(\"StructArrayLayout4i4ui4i24\", Mi);\n    var zi = /*#__PURE__*/function (_xi8) {\n      _inherits(zi, _xi8);\n      var _super13 = _createSuper(zi);\n      function zi() {\n        _classCallCheck(this, zi);\n        return _super13.apply(this, arguments);\n      }\n      _createClass(zi, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r) {\n          var n = this.length;\n          return this.resize(n + 1), this.emplace(n, t, e, r);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n) {\n          var i = 3 * t;\n          return this.float32[i + 0] = e, this.float32[i + 1] = r, this.float32[i + 2] = n, t;\n        }\n      }]);\n      return zi;\n    }(xi);\n    zi.prototype.bytesPerElement = 12, Mn(\"StructArrayLayout3f12\", zi);\n    var Bi = /*#__PURE__*/function (_xi9) {\n      _inherits(Bi, _xi9);\n      var _super14 = _createSuper(Bi);\n      function Bi() {\n        _classCallCheck(this, Bi);\n        return _super14.apply(this, arguments);\n      }\n      _createClass(Bi, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t) {\n          var e = this.length;\n          return this.resize(e + 1), this.emplace(e, t);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e) {\n          return this.uint32[1 * t + 0] = e, t;\n        }\n      }]);\n      return Bi;\n    }(xi);\n    Bi.prototype.bytesPerElement = 4, Mn(\"StructArrayLayout1ul4\", Bi);\n    var Ci = /*#__PURE__*/function (_xi10) {\n      _inherits(Ci, _xi10);\n      var _super15 = _createSuper(Ci);\n      function Ci() {\n        _classCallCheck(this, Ci);\n        return _super15.apply(this, arguments);\n      }\n      _createClass(Ci, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n, i, a, s, o, l) {\n          var u = this.length;\n          return this.resize(u + 1), this.emplace(u, t, e, r, n, i, a, s, o, l);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i, a, s, o, l, u) {\n          var c = 10 * t,\n            h = 5 * t;\n          return this.int16[c + 0] = e, this.int16[c + 1] = r, this.int16[c + 2] = n, this.int16[c + 3] = i, this.int16[c + 4] = a, this.int16[c + 5] = s, this.uint32[h + 3] = o, this.uint16[c + 8] = l, this.uint16[c + 9] = u, t;\n        }\n      }]);\n      return Ci;\n    }(xi);\n    Ci.prototype.bytesPerElement = 20, Mn(\"StructArrayLayout6i1ul2ui20\", Ci);\n    var Pi = /*#__PURE__*/function (_xi11) {\n      _inherits(Pi, _xi11);\n      var _super16 = _createSuper(Pi);\n      function Pi() {\n        _classCallCheck(this, Pi);\n        return _super16.apply(this, arguments);\n      }\n      _createClass(Pi, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n, i, a) {\n          var s = this.length;\n          return this.resize(s + 1), this.emplace(s, t, e, r, n, i, a);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i, a, s) {\n          var o = 6 * t;\n          return this.int16[o + 0] = e, this.int16[o + 1] = r, this.int16[o + 2] = n, this.int16[o + 3] = i, this.int16[o + 4] = a, this.int16[o + 5] = s, t;\n        }\n      }]);\n      return Pi;\n    }(xi);\n    Pi.prototype.bytesPerElement = 12, Mn(\"StructArrayLayout2i2i2i12\", Pi);\n    var Vi = /*#__PURE__*/function (_xi12) {\n      _inherits(Vi, _xi12);\n      var _super17 = _createSuper(Vi);\n      function Vi() {\n        _classCallCheck(this, Vi);\n        return _super17.apply(this, arguments);\n      }\n      _createClass(Vi, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n, i) {\n          var a = this.length;\n          return this.resize(a + 1), this.emplace(a, t, e, r, n, i);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i, a) {\n          var s = 4 * t,\n            o = 8 * t;\n          return this.float32[s + 0] = e, this.float32[s + 1] = r, this.float32[s + 2] = n, this.int16[o + 6] = i, this.int16[o + 7] = a, t;\n        }\n      }]);\n      return Vi;\n    }(xi);\n    Vi.prototype.bytesPerElement = 16, Mn(\"StructArrayLayout2f1f2i16\", Vi);\n    var Ei = /*#__PURE__*/function (_xi13) {\n      _inherits(Ei, _xi13);\n      var _super18 = _createSuper(Ei);\n      function Ei() {\n        _classCallCheck(this, Ei);\n        return _super18.apply(this, arguments);\n      }\n      _createClass(Ei, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n) {\n          var i = this.length;\n          return this.resize(i + 1), this.emplace(i, t, e, r, n);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i) {\n          var a = 12 * t,\n            s = 3 * t;\n          return this.uint8[a + 0] = e, this.uint8[a + 1] = r, this.float32[s + 1] = n, this.float32[s + 2] = i, t;\n        }\n      }]);\n      return Ei;\n    }(xi);\n    Ei.prototype.bytesPerElement = 12, Mn(\"StructArrayLayout2ub2f12\", Ei);\n    var Fi = /*#__PURE__*/function (_xi14) {\n      _inherits(Fi, _xi14);\n      var _super19 = _createSuper(Fi);\n      function Fi() {\n        _classCallCheck(this, Fi);\n        return _super19.apply(this, arguments);\n      }\n      _createClass(Fi, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r) {\n          var n = this.length;\n          return this.resize(n + 1), this.emplace(n, t, e, r);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n) {\n          var i = 3 * t;\n          return this.uint16[i + 0] = e, this.uint16[i + 1] = r, this.uint16[i + 2] = n, t;\n        }\n      }]);\n      return Fi;\n    }(xi);\n    Fi.prototype.bytesPerElement = 6, Mn(\"StructArrayLayout3ui6\", Fi);\n    var Ti = /*#__PURE__*/function (_xi15) {\n      _inherits(Ti, _xi15);\n      var _super20 = _createSuper(Ti);\n      function Ti() {\n        _classCallCheck(this, Ti);\n        return _super20.apply(this, arguments);\n      }\n      _createClass(Ti, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n, i, a, s, o, l, u, c, h, p, f, d, y, m) {\n          var g = this.length;\n          return this.resize(g + 1), this.emplace(g, t, e, r, n, i, a, s, o, l, u, c, h, p, f, d, y, m);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i, a, s, o, l, u, c, h, p, f, d, y, m, g) {\n          var x = 24 * t,\n            v = 12 * t,\n            b = 48 * t;\n          return this.int16[x + 0] = e, this.int16[x + 1] = r, this.uint16[x + 2] = n, this.uint16[x + 3] = i, this.uint32[v + 2] = a, this.uint32[v + 3] = s, this.uint32[v + 4] = o, this.uint16[x + 10] = l, this.uint16[x + 11] = u, this.uint16[x + 12] = c, this.float32[v + 7] = h, this.float32[v + 8] = p, this.uint8[b + 36] = f, this.uint8[b + 37] = d, this.uint8[b + 38] = y, this.uint32[v + 10] = m, this.int16[x + 22] = g, t;\n        }\n      }]);\n      return Ti;\n    }(xi);\n    Ti.prototype.bytesPerElement = 48, Mn(\"StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48\", Ti);\n    var Li = /*#__PURE__*/function (_xi16) {\n      _inherits(Li, _xi16);\n      var _super21 = _createSuper(Li);\n      function Li() {\n        _classCallCheck(this, Li);\n        return _super21.apply(this, arguments);\n      }\n      _createClass(Li, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n, i, a, s, o, l, u, c, h, p, f, d, y, m, g, x, v, b, w, _, A, k, S, I, M) {\n          var z = this.length;\n          return this.resize(z + 1), this.emplace(z, t, e, r, n, i, a, s, o, l, u, c, h, p, f, d, y, m, g, x, v, b, w, _, A, k, S, I, M);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i, a, s, o, l, u, c, h, p, f, d, y, m, g, x, v, b, w, _, A, k, S, I, M, z) {\n          var B = 34 * t,\n            C = 17 * t;\n          return this.int16[B + 0] = e, this.int16[B + 1] = r, this.int16[B + 2] = n, this.int16[B + 3] = i, this.int16[B + 4] = a, this.int16[B + 5] = s, this.int16[B + 6] = o, this.int16[B + 7] = l, this.uint16[B + 8] = u, this.uint16[B + 9] = c, this.uint16[B + 10] = h, this.uint16[B + 11] = p, this.uint16[B + 12] = f, this.uint16[B + 13] = d, this.uint16[B + 14] = y, this.uint16[B + 15] = m, this.uint16[B + 16] = g, this.uint16[B + 17] = x, this.uint16[B + 18] = v, this.uint16[B + 19] = b, this.uint16[B + 20] = w, this.uint16[B + 21] = _, this.uint16[B + 22] = A, this.uint32[C + 12] = k, this.float32[C + 13] = S, this.float32[C + 14] = I, this.float32[C + 15] = M, this.float32[C + 16] = z, t;\n        }\n      }]);\n      return Li;\n    }(xi);\n    Li.prototype.bytesPerElement = 68, Mn(\"StructArrayLayout8i15ui1ul4f68\", Li);\n    var Di = /*#__PURE__*/function (_xi17) {\n      _inherits(Di, _xi17);\n      var _super22 = _createSuper(Di);\n      function Di() {\n        _classCallCheck(this, Di);\n        return _super22.apply(this, arguments);\n      }\n      _createClass(Di, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t) {\n          var e = this.length;\n          return this.resize(e + 1), this.emplace(e, t);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e) {\n          return this.float32[1 * t + 0] = e, t;\n        }\n      }]);\n      return Di;\n    }(xi);\n    Di.prototype.bytesPerElement = 4, Mn(\"StructArrayLayout1f4\", Di);\n    var $i = /*#__PURE__*/function (_xi18) {\n      _inherits($i, _xi18);\n      var _super23 = _createSuper($i);\n      function $i() {\n        _classCallCheck(this, $i);\n        return _super23.apply(this, arguments);\n      }\n      _createClass($i, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r) {\n          var n = this.length;\n          return this.resize(n + 1), this.emplace(n, t, e, r);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n) {\n          var i = 3 * t;\n          return this.int16[i + 0] = e, this.int16[i + 1] = r, this.int16[i + 2] = n, t;\n        }\n      }]);\n      return $i;\n    }(xi);\n    $i.prototype.bytesPerElement = 6, Mn(\"StructArrayLayout3i6\", $i);\n    var Ri = /*#__PURE__*/function (_xi19) {\n      _inherits(Ri, _xi19);\n      var _super24 = _createSuper(Ri);\n      function Ri() {\n        _classCallCheck(this, Ri);\n        return _super24.apply(this, arguments);\n      }\n      _createClass(Ri, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r) {\n          var n = this.length;\n          return this.resize(n + 1), this.emplace(n, t, e, r);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n) {\n          var i = 4 * t;\n          return this.uint32[2 * t + 0] = e, this.uint16[i + 2] = r, this.uint16[i + 3] = n, t;\n        }\n      }]);\n      return Ri;\n    }(xi);\n    Ri.prototype.bytesPerElement = 8, Mn(\"StructArrayLayout1ul2ui8\", Ri);\n    var Oi = /*#__PURE__*/function (_xi20) {\n      _inherits(Oi, _xi20);\n      var _super25 = _createSuper(Oi);\n      function Oi() {\n        _classCallCheck(this, Oi);\n        return _super25.apply(this, arguments);\n      }\n      _createClass(Oi, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e) {\n          var r = this.length;\n          return this.resize(r + 1), this.emplace(r, t, e);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r) {\n          var n = 2 * t;\n          return this.uint16[n + 0] = e, this.uint16[n + 1] = r, t;\n        }\n      }]);\n      return Oi;\n    }(xi);\n    Oi.prototype.bytesPerElement = 4, Mn(\"StructArrayLayout2ui4\", Oi);\n    var Ui = /*#__PURE__*/function (_xi21) {\n      _inherits(Ui, _xi21);\n      var _super26 = _createSuper(Ui);\n      function Ui() {\n        _classCallCheck(this, Ui);\n        return _super26.apply(this, arguments);\n      }\n      _createClass(Ui, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t) {\n          var e = this.length;\n          return this.resize(e + 1), this.emplace(e, t);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e) {\n          return this.uint16[1 * t + 0] = e, t;\n        }\n      }]);\n      return Ui;\n    }(xi);\n    Ui.prototype.bytesPerElement = 2, Mn(\"StructArrayLayout1ui2\", Ui);\n    var qi = /*#__PURE__*/function (_xi22) {\n      _inherits(qi, _xi22);\n      var _super27 = _createSuper(qi);\n      function qi() {\n        _classCallCheck(this, qi);\n        return _super27.apply(this, arguments);\n      }\n      _createClass(qi, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n) {\n          var i = this.length;\n          return this.resize(i + 1), this.emplace(i, t, e, r, n);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i) {\n          var a = 4 * t;\n          return this.float32[a + 0] = e, this.float32[a + 1] = r, this.float32[a + 2] = n, this.float32[a + 3] = i, t;\n        }\n      }]);\n      return qi;\n    }(xi);\n    qi.prototype.bytesPerElement = 16, Mn(\"StructArrayLayout4f16\", qi);\n    var ji = /*#__PURE__*/function (_gi) {\n      _inherits(ji, _gi);\n      var _super28 = _createSuper(ji);\n      function ji() {\n        _classCallCheck(this, ji);\n        return _super28.apply(this, arguments);\n      }\n      _createClass(ji, [{\n        key: \"anchorPointX\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 0];\n        }\n      }, {\n        key: \"anchorPointY\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 1];\n        }\n      }, {\n        key: \"x1\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 2];\n        }\n      }, {\n        key: \"y1\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 3];\n        }\n      }, {\n        key: \"x2\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 4];\n        }\n      }, {\n        key: \"y2\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 5];\n        }\n      }, {\n        key: \"featureIndex\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 3];\n        }\n      }, {\n        key: \"sourceLayerIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 8];\n        }\n      }, {\n        key: \"bucketIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 9];\n        }\n      }, {\n        key: \"anchorPoint\",\n        get: function get() {\n          return new S(this.anchorPointX, this.anchorPointY);\n        }\n      }]);\n      return ji;\n    }(gi);\n    ji.prototype.size = 20;\n    var Ni = /*#__PURE__*/function (_Ci) {\n      _inherits(Ni, _Ci);\n      var _super29 = _createSuper(Ni);\n      function Ni() {\n        _classCallCheck(this, Ni);\n        return _super29.apply(this, arguments);\n      }\n      _createClass(Ni, [{\n        key: \"get\",\n        value: function get(t) {\n          return new ji(this, t);\n        }\n      }]);\n      return Ni;\n    }(Ci);\n    Mn(\"CollisionBoxArray\", Ni);\n    var Zi = /*#__PURE__*/function (_gi2) {\n      _inherits(Zi, _gi2);\n      var _super30 = _createSuper(Zi);\n      function Zi() {\n        _classCallCheck(this, Zi);\n        return _super30.apply(this, arguments);\n      }\n      _createClass(Zi, [{\n        key: \"anchorX\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 0];\n        }\n      }, {\n        key: \"anchorY\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 1];\n        }\n      }, {\n        key: \"glyphStartIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 2];\n        }\n      }, {\n        key: \"numGlyphs\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 3];\n        }\n      }, {\n        key: \"vertexStartIndex\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 2];\n        }\n      }, {\n        key: \"lineStartIndex\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 3];\n        }\n      }, {\n        key: \"lineLength\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 4];\n        }\n      }, {\n        key: \"segment\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 10];\n        }\n      }, {\n        key: \"lowerSize\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 11];\n        }\n      }, {\n        key: \"upperSize\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 12];\n        }\n      }, {\n        key: \"lineOffsetX\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 7];\n        }\n      }, {\n        key: \"lineOffsetY\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 8];\n        }\n      }, {\n        key: \"writingMode\",\n        get: function get() {\n          return this._structArray.uint8[this._pos1 + 36];\n        }\n      }, {\n        key: \"placedOrientation\",\n        get: function get() {\n          return this._structArray.uint8[this._pos1 + 37];\n        },\n        set: function set(t) {\n          this._structArray.uint8[this._pos1 + 37] = t;\n        }\n      }, {\n        key: \"hidden\",\n        get: function get() {\n          return this._structArray.uint8[this._pos1 + 38];\n        },\n        set: function set(t) {\n          this._structArray.uint8[this._pos1 + 38] = t;\n        }\n      }, {\n        key: \"crossTileID\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 10];\n        },\n        set: function set(t) {\n          this._structArray.uint32[this._pos4 + 10] = t;\n        }\n      }, {\n        key: \"associatedIconIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 22];\n        }\n      }]);\n      return Zi;\n    }(gi);\n    Zi.prototype.size = 48;\n    var Ki = /*#__PURE__*/function (_Ti) {\n      _inherits(Ki, _Ti);\n      var _super31 = _createSuper(Ki);\n      function Ki() {\n        _classCallCheck(this, Ki);\n        return _super31.apply(this, arguments);\n      }\n      _createClass(Ki, [{\n        key: \"get\",\n        value: function get(t) {\n          return new Zi(this, t);\n        }\n      }]);\n      return Ki;\n    }(Ti);\n    Mn(\"PlacedSymbolArray\", Ki);\n    var Gi = /*#__PURE__*/function (_gi3) {\n      _inherits(Gi, _gi3);\n      var _super32 = _createSuper(Gi);\n      function Gi() {\n        _classCallCheck(this, Gi);\n        return _super32.apply(this, arguments);\n      }\n      _createClass(Gi, [{\n        key: \"anchorX\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 0];\n        }\n      }, {\n        key: \"anchorY\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 1];\n        }\n      }, {\n        key: \"rightJustifiedTextSymbolIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 2];\n        }\n      }, {\n        key: \"centerJustifiedTextSymbolIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 3];\n        }\n      }, {\n        key: \"leftJustifiedTextSymbolIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 4];\n        }\n      }, {\n        key: \"verticalPlacedTextSymbolIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 5];\n        }\n      }, {\n        key: \"placedIconSymbolIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 6];\n        }\n      }, {\n        key: \"verticalPlacedIconSymbolIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 7];\n        }\n      }, {\n        key: \"key\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 8];\n        }\n      }, {\n        key: \"textBoxStartIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 9];\n        }\n      }, {\n        key: \"textBoxEndIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 10];\n        }\n      }, {\n        key: \"verticalTextBoxStartIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 11];\n        }\n      }, {\n        key: \"verticalTextBoxEndIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 12];\n        }\n      }, {\n        key: \"iconBoxStartIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 13];\n        }\n      }, {\n        key: \"iconBoxEndIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 14];\n        }\n      }, {\n        key: \"verticalIconBoxStartIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 15];\n        }\n      }, {\n        key: \"verticalIconBoxEndIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 16];\n        }\n      }, {\n        key: \"featureIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 17];\n        }\n      }, {\n        key: \"numHorizontalGlyphVertices\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 18];\n        }\n      }, {\n        key: \"numVerticalGlyphVertices\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 19];\n        }\n      }, {\n        key: \"numIconVertices\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 20];\n        }\n      }, {\n        key: \"numVerticalIconVertices\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 21];\n        }\n      }, {\n        key: \"useRuntimeCollisionCircles\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 22];\n        }\n      }, {\n        key: \"crossTileID\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 12];\n        },\n        set: function set(t) {\n          this._structArray.uint32[this._pos4 + 12] = t;\n        }\n      }, {\n        key: \"textBoxScale\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 13];\n        }\n      }, {\n        key: \"textOffset0\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 14];\n        }\n      }, {\n        key: \"textOffset1\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 15];\n        }\n      }, {\n        key: \"collisionCircleDiameter\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 16];\n        }\n      }]);\n      return Gi;\n    }(gi);\n    Gi.prototype.size = 68;\n    var Ji = /*#__PURE__*/function (_Li) {\n      _inherits(Ji, _Li);\n      var _super33 = _createSuper(Ji);\n      function Ji() {\n        _classCallCheck(this, Ji);\n        return _super33.apply(this, arguments);\n      }\n      _createClass(Ji, [{\n        key: \"get\",\n        value: function get(t) {\n          return new Gi(this, t);\n        }\n      }]);\n      return Ji;\n    }(Li);\n    Mn(\"SymbolInstanceArray\", Ji);\n    var Xi = /*#__PURE__*/function (_Di) {\n      _inherits(Xi, _Di);\n      var _super34 = _createSuper(Xi);\n      function Xi() {\n        _classCallCheck(this, Xi);\n        return _super34.apply(this, arguments);\n      }\n      _createClass(Xi, [{\n        key: \"getoffsetX\",\n        value: function getoffsetX(t) {\n          return this.float32[1 * t + 0];\n        }\n      }]);\n      return Xi;\n    }(Di);\n    Mn(\"GlyphOffsetArray\", Xi);\n    var Yi = /*#__PURE__*/function (_$i) {\n      _inherits(Yi, _$i);\n      var _super35 = _createSuper(Yi);\n      function Yi() {\n        _classCallCheck(this, Yi);\n        return _super35.apply(this, arguments);\n      }\n      _createClass(Yi, [{\n        key: \"getx\",\n        value: function getx(t) {\n          return this.int16[3 * t + 0];\n        }\n      }, {\n        key: \"gety\",\n        value: function gety(t) {\n          return this.int16[3 * t + 1];\n        }\n      }, {\n        key: \"gettileUnitDistanceFromAnchor\",\n        value: function gettileUnitDistanceFromAnchor(t) {\n          return this.int16[3 * t + 2];\n        }\n      }]);\n      return Yi;\n    }($i);\n    Mn(\"SymbolLineVertexArray\", Yi);\n    var Hi = /*#__PURE__*/function (_gi4) {\n      _inherits(Hi, _gi4);\n      var _super36 = _createSuper(Hi);\n      function Hi() {\n        _classCallCheck(this, Hi);\n        return _super36.apply(this, arguments);\n      }\n      _createClass(Hi, [{\n        key: \"featureIndex\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 0];\n        }\n      }, {\n        key: \"sourceLayerIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 2];\n        }\n      }, {\n        key: \"bucketIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 3];\n        }\n      }]);\n      return Hi;\n    }(gi);\n    Hi.prototype.size = 8;\n    var Wi = /*#__PURE__*/function (_Ri) {\n      _inherits(Wi, _Ri);\n      var _super37 = _createSuper(Wi);\n      function Wi() {\n        _classCallCheck(this, Wi);\n        return _super37.apply(this, arguments);\n      }\n      _createClass(Wi, [{\n        key: \"get\",\n        value: function get(t) {\n          return new Hi(this, t);\n        }\n      }]);\n      return Wi;\n    }(Ri);\n    Mn(\"FeatureIndexArray\", Wi);\n    var Qi = /*#__PURE__*/function (_wi) {\n      _inherits(Qi, _wi);\n      var _super38 = _createSuper(Qi);\n      function Qi() {\n        _classCallCheck(this, Qi);\n        return _super38.apply(this, arguments);\n      }\n      return _createClass(Qi);\n    }(wi);\n    var ta = /*#__PURE__*/function (_wi2) {\n      _inherits(ta, _wi2);\n      var _super39 = _createSuper(ta);\n      function ta() {\n        _classCallCheck(this, ta);\n        return _super39.apply(this, arguments);\n      }\n      return _createClass(ta);\n    }(wi);\n    var ea = /*#__PURE__*/function (_wi3) {\n      _inherits(ea, _wi3);\n      var _super40 = _createSuper(ea);\n      function ea() {\n        _classCallCheck(this, ea);\n        return _super40.apply(this, arguments);\n      }\n      return _createClass(ea);\n    }(wi);\n    var ra = /*#__PURE__*/function (_Ai) {\n      _inherits(ra, _Ai);\n      var _super41 = _createSuper(ra);\n      function ra() {\n        _classCallCheck(this, ra);\n        return _super41.apply(this, arguments);\n      }\n      return _createClass(ra);\n    }(Ai);\n    var na = /*#__PURE__*/function (_ki) {\n      _inherits(na, _ki);\n      var _super42 = _createSuper(na);\n      function na() {\n        _classCallCheck(this, na);\n        return _super42.apply(this, arguments);\n      }\n      return _createClass(na);\n    }(ki);\n    var ia = /*#__PURE__*/function (_Si) {\n      _inherits(ia, _Si);\n      var _super43 = _createSuper(ia);\n      function ia() {\n        _classCallCheck(this, ia);\n        return _super43.apply(this, arguments);\n      }\n      return _createClass(ia);\n    }(Si);\n    var aa = /*#__PURE__*/function (_Ii) {\n      _inherits(aa, _Ii);\n      var _super44 = _createSuper(aa);\n      function aa() {\n        _classCallCheck(this, aa);\n        return _super44.apply(this, arguments);\n      }\n      return _createClass(aa);\n    }(Ii);\n    var sa = /*#__PURE__*/function (_Mi) {\n      _inherits(sa, _Mi);\n      var _super45 = _createSuper(sa);\n      function sa() {\n        _classCallCheck(this, sa);\n        return _super45.apply(this, arguments);\n      }\n      return _createClass(sa);\n    }(Mi);\n    var oa = /*#__PURE__*/function (_zi) {\n      _inherits(oa, _zi);\n      var _super46 = _createSuper(oa);\n      function oa() {\n        _classCallCheck(this, oa);\n        return _super46.apply(this, arguments);\n      }\n      return _createClass(oa);\n    }(zi);\n    var la = /*#__PURE__*/function (_Bi) {\n      _inherits(la, _Bi);\n      var _super47 = _createSuper(la);\n      function la() {\n        _classCallCheck(this, la);\n        return _super47.apply(this, arguments);\n      }\n      return _createClass(la);\n    }(Bi);\n    var ua = /*#__PURE__*/function (_Pi) {\n      _inherits(ua, _Pi);\n      var _super48 = _createSuper(ua);\n      function ua() {\n        _classCallCheck(this, ua);\n        return _super48.apply(this, arguments);\n      }\n      return _createClass(ua);\n    }(Pi);\n    var ca = /*#__PURE__*/function (_Ei) {\n      _inherits(ca, _Ei);\n      var _super49 = _createSuper(ca);\n      function ca() {\n        _classCallCheck(this, ca);\n        return _super49.apply(this, arguments);\n      }\n      return _createClass(ca);\n    }(Ei);\n    var ha = /*#__PURE__*/function (_Fi) {\n      _inherits(ha, _Fi);\n      var _super50 = _createSuper(ha);\n      function ha() {\n        _classCallCheck(this, ha);\n        return _super50.apply(this, arguments);\n      }\n      return _createClass(ha);\n    }(Fi);\n    var pa = /*#__PURE__*/function (_Oi) {\n      _inherits(pa, _Oi);\n      var _super51 = _createSuper(pa);\n      function pa() {\n        _classCallCheck(this, pa);\n        return _super51.apply(this, arguments);\n      }\n      return _createClass(pa);\n    }(Oi);\n    var fa = vi([{\n        name: \"a_pos\",\n        components: 2,\n        type: \"Int16\"\n      }], 4),\n      da = fa.members;\n    var ya = /*#__PURE__*/function () {\n      function ya() {\n        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n        _classCallCheck(this, ya);\n        this.segments = t;\n      }\n      _createClass(ya, [{\n        key: \"prepareSegment\",\n        value: function prepareSegment(t, e, r, n) {\n          var i = this.segments[this.segments.length - 1];\n          return t > ya.MAX_VERTEX_ARRAY_LENGTH && d(\"Max vertices per segment is \".concat(ya.MAX_VERTEX_ARRAY_LENGTH, \": bucket requested \").concat(t)), (!i || i.vertexLength + t > ya.MAX_VERTEX_ARRAY_LENGTH || i.sortKey !== n) && (i = {\n            vertexOffset: e.length,\n            primitiveOffset: r.length,\n            vertexLength: 0,\n            primitiveLength: 0\n          }, void 0 !== n && (i.sortKey = n), this.segments.push(i)), i;\n        }\n      }, {\n        key: \"get\",\n        value: function get() {\n          return this.segments;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          var _iterator46 = _createForOfIteratorHelper(this.segments),\n            _step46;\n          try {\n            for (_iterator46.s(); !(_step46 = _iterator46.n()).done;) {\n              var _t47 = _step46.value;\n              for (var _e55 in _t47.vaos) _t47.vaos[_e55].destroy();\n            }\n          } catch (err) {\n            _iterator46.e(err);\n          } finally {\n            _iterator46.f();\n          }\n        }\n      }], [{\n        key: \"simpleSegment\",\n        value: function simpleSegment(t, e, r, n) {\n          return new ya([{\n            vertexOffset: t,\n            primitiveOffset: e,\n            vertexLength: r,\n            primitiveLength: n,\n            vaos: {},\n            sortKey: 0\n          }]);\n        }\n      }]);\n      return ya;\n    }();\n    function ma(t, e) {\n      return 256 * (t = a(Math.floor(t), 0, 255)) + a(Math.floor(e), 0, 255);\n    }\n    ya.MAX_VERTEX_ARRAY_LENGTH = Math.pow(2, 16) - 1, Mn(\"SegmentVector\", ya);\n    var ga = vi([{\n      name: \"a_pattern_from\",\n      components: 4,\n      type: \"Uint16\"\n    }, {\n      name: \"a_pattern_to\",\n      components: 4,\n      type: \"Uint16\"\n    }, {\n      name: \"a_pixel_ratio_from\",\n      components: 1,\n      type: \"Uint16\"\n    }, {\n      name: \"a_pixel_ratio_to\",\n      components: 1,\n      type: \"Uint16\"\n    }]);\n    var xa = {\n        exports: {}\n      },\n      va = {\n        exports: {}\n      };\n    va.exports = function (t, e) {\n      var r, n, i, a, s, o, l, u;\n      for (n = t.length - (r = 3 & t.length), i = e, s = 3432918353, o = 461845907, u = 0; u < n;) l = 255 & t.charCodeAt(u) | (255 & t.charCodeAt(++u)) << 8 | (255 & t.charCodeAt(++u)) << 16 | (255 & t.charCodeAt(++u)) << 24, ++u, i = 27492 + (65535 & (a = 5 * (65535 & (i = (i ^= l = (65535 & (l = (l = (65535 & l) * s + (((l >>> 16) * s & 65535) << 16) & 4294967295) << 15 | l >>> 17)) * o + (((l >>> 16) * o & 65535) << 16) & 4294967295) << 13 | i >>> 19)) + ((5 * (i >>> 16) & 65535) << 16) & 4294967295)) + ((58964 + (a >>> 16) & 65535) << 16);\n      switch (l = 0, r) {\n        case 3:\n          l ^= (255 & t.charCodeAt(u + 2)) << 16;\n        case 2:\n          l ^= (255 & t.charCodeAt(u + 1)) << 8;\n        case 1:\n          i ^= l = (65535 & (l = (l = (65535 & (l ^= 255 & t.charCodeAt(u))) * s + (((l >>> 16) * s & 65535) << 16) & 4294967295) << 15 | l >>> 17)) * o + (((l >>> 16) * o & 65535) << 16) & 4294967295;\n      }\n      return i ^= t.length, i = 2246822507 * (65535 & (i ^= i >>> 16)) + ((2246822507 * (i >>> 16) & 65535) << 16) & 4294967295, i = 3266489909 * (65535 & (i ^= i >>> 13)) + ((3266489909 * (i >>> 16) & 65535) << 16) & 4294967295, (i ^= i >>> 16) >>> 0;\n    };\n    var ba = {\n      exports: {}\n    };\n    ba.exports = function (t, e) {\n      for (var r, n = t.length, i = e ^ n, a = 0; n >= 4;) r = 1540483477 * (65535 & (r = 255 & t.charCodeAt(a) | (255 & t.charCodeAt(++a)) << 8 | (255 & t.charCodeAt(++a)) << 16 | (255 & t.charCodeAt(++a)) << 24)) + ((1540483477 * (r >>> 16) & 65535) << 16), i = 1540483477 * (65535 & i) + ((1540483477 * (i >>> 16) & 65535) << 16) ^ (r = 1540483477 * (65535 & (r ^= r >>> 24)) + ((1540483477 * (r >>> 16) & 65535) << 16)), n -= 4, ++a;\n      switch (n) {\n        case 3:\n          i ^= (255 & t.charCodeAt(a + 2)) << 16;\n        case 2:\n          i ^= (255 & t.charCodeAt(a + 1)) << 8;\n        case 1:\n          i = 1540483477 * (65535 & (i ^= 255 & t.charCodeAt(a))) + ((1540483477 * (i >>> 16) & 65535) << 16);\n      }\n      return i = 1540483477 * (65535 & (i ^= i >>> 13)) + ((1540483477 * (i >>> 16) & 65535) << 16), (i ^= i >>> 15) >>> 0;\n    };\n    var wa = va.exports,\n      _a = ba.exports;\n    xa.exports = wa, xa.exports.murmur3 = wa, xa.exports.murmur2 = _a;\n    var Aa = /*#__PURE__*/function () {\n      function Aa() {\n        _classCallCheck(this, Aa);\n        this.ids = [], this.positions = [], this.indexed = !1;\n      }\n      _createClass(Aa, [{\n        key: \"add\",\n        value: function add(t, e, r, n) {\n          this.ids.push(ka(t)), this.positions.push(e, r, n);\n        }\n      }, {\n        key: \"getPositions\",\n        value: function getPositions(t) {\n          if (!this.indexed) throw new Error(\"Trying to get index, but feature positions are not indexed\");\n          var e = ka(t);\n          var r = 0,\n            n = this.ids.length - 1;\n          for (; r < n;) {\n            var _t48 = r + n >> 1;\n            this.ids[_t48] >= e ? n = _t48 : r = _t48 + 1;\n          }\n          var i = [];\n          for (; this.ids[r] === e;) i.push({\n            index: this.positions[3 * r],\n            start: this.positions[3 * r + 1],\n            end: this.positions[3 * r + 2]\n          }), r++;\n          return i;\n        }\n      }], [{\n        key: \"serialize\",\n        value: function serialize(t, e) {\n          var r = new Float64Array(t.ids),\n            n = new Uint32Array(t.positions);\n          return Sa(r, n, 0, r.length - 1), e && e.push(r.buffer, n.buffer), {\n            ids: r,\n            positions: n\n          };\n        }\n      }, {\n        key: \"deserialize\",\n        value: function deserialize(t) {\n          var e = new Aa();\n          return e.ids = t.ids, e.positions = t.positions, e.indexed = !0, e;\n        }\n      }]);\n      return Aa;\n    }();\n    function ka(t) {\n      var e = +t;\n      return !isNaN(e) && e <= Number.MAX_SAFE_INTEGER ? e : xa.exports(String(t));\n    }\n    function Sa(t, e, r, n) {\n      for (; r < n;) {\n        var _i48 = t[r + n >> 1];\n        var _a27 = r - 1,\n          _s26 = n + 1;\n        for (;;) {\n          do {\n            _a27++;\n          } while (t[_a27] < _i48);\n          do {\n            _s26--;\n          } while (t[_s26] > _i48);\n          if (_a27 >= _s26) break;\n          Ia(t, _a27, _s26), Ia(e, 3 * _a27, 3 * _s26), Ia(e, 3 * _a27 + 1, 3 * _s26 + 1), Ia(e, 3 * _a27 + 2, 3 * _s26 + 2);\n        }\n        _s26 - r < n - _s26 ? (Sa(t, e, r, _s26), r = _s26 + 1) : (Sa(t, e, _s26 + 1, n), n = _s26);\n      }\n    }\n    function Ia(t, e, r) {\n      var n = t[e];\n      t[e] = t[r], t[r] = n;\n    }\n    Mn(\"FeaturePositionMap\", Aa);\n    var Ma = /*#__PURE__*/_createClass(function Ma(t, e) {\n      _classCallCheck(this, Ma);\n      this.gl = t.gl, this.location = e;\n    });\n    var za = /*#__PURE__*/function (_Ma) {\n      _inherits(za, _Ma);\n      var _super52 = _createSuper(za);\n      function za(t, e) {\n        var _this4;\n        _classCallCheck(this, za);\n        _this4 = _super52.call(this, t, e), _this4.current = 0;\n        return _this4;\n      }\n      _createClass(za, [{\n        key: \"set\",\n        value: function set(t) {\n          this.current !== t && (this.current = t, this.gl.uniform1f(this.location, t));\n        }\n      }]);\n      return za;\n    }(Ma);\n    var Ba = /*#__PURE__*/function (_Ma2) {\n      _inherits(Ba, _Ma2);\n      var _super53 = _createSuper(Ba);\n      function Ba(t, e) {\n        var _this5;\n        _classCallCheck(this, Ba);\n        _this5 = _super53.call(this, t, e), _this5.current = [0, 0, 0, 0];\n        return _this5;\n      }\n      _createClass(Ba, [{\n        key: \"set\",\n        value: function set(t) {\n          t[0] === this.current[0] && t[1] === this.current[1] && t[2] === this.current[2] && t[3] === this.current[3] || (this.current = t, this.gl.uniform4f(this.location, t[0], t[1], t[2], t[3]));\n        }\n      }]);\n      return Ba;\n    }(Ma);\n    var Ca = /*#__PURE__*/function (_Ma3) {\n      _inherits(Ca, _Ma3);\n      var _super54 = _createSuper(Ca);\n      function Ca(t, e) {\n        var _this6;\n        _classCallCheck(this, Ca);\n        _this6 = _super54.call(this, t, e), _this6.current = Ft.transparent;\n        return _this6;\n      }\n      _createClass(Ca, [{\n        key: \"set\",\n        value: function set(t) {\n          t.r === this.current.r && t.g === this.current.g && t.b === this.current.b && t.a === this.current.a || (this.current = t, this.gl.uniform4f(this.location, t.r, t.g, t.b, t.a));\n        }\n      }]);\n      return Ca;\n    }(Ma);\n    var Pa = new Float32Array(16);\n    function Va(t) {\n      return [ma(255 * t.r, 255 * t.g), ma(255 * t.b, 255 * t.a)];\n    }\n    var Ea = /*#__PURE__*/function () {\n      function Ea(t, e, r) {\n        _classCallCheck(this, Ea);\n        this.value = t, this.uniformNames = e.map(function (t) {\n          return \"u_\".concat(t);\n        }), this.type = r;\n      }\n      _createClass(Ea, [{\n        key: \"setUniform\",\n        value: function setUniform(t, e, r) {\n          t.set(r.constantOr(this.value));\n        }\n      }, {\n        key: \"getBinding\",\n        value: function getBinding(t, e, r) {\n          return \"color\" === this.type ? new Ca(t, e) : new za(t, e);\n        }\n      }]);\n      return Ea;\n    }();\n    var Fa = /*#__PURE__*/function () {\n      function Fa(t, e) {\n        _classCallCheck(this, Fa);\n        this.uniformNames = e.map(function (t) {\n          return \"u_\".concat(t);\n        }), this.patternFrom = null, this.patternTo = null, this.pixelRatioFrom = 1, this.pixelRatioTo = 1;\n      }\n      _createClass(Fa, [{\n        key: \"setConstantPatternPositions\",\n        value: function setConstantPatternPositions(t, e) {\n          this.pixelRatioFrom = e.pixelRatio, this.pixelRatioTo = t.pixelRatio, this.patternFrom = e.tlbr, this.patternTo = t.tlbr;\n        }\n      }, {\n        key: \"setUniform\",\n        value: function setUniform(t, e, r, n) {\n          var i = \"u_pattern_to\" === n ? this.patternTo : \"u_pattern_from\" === n ? this.patternFrom : \"u_pixel_ratio_to\" === n ? this.pixelRatioTo : \"u_pixel_ratio_from\" === n ? this.pixelRatioFrom : null;\n          i && t.set(i);\n        }\n      }, {\n        key: \"getBinding\",\n        value: function getBinding(t, e, r) {\n          return \"u_pattern\" === r.substr(0, 9) ? new Ba(t, e) : new za(t, e);\n        }\n      }]);\n      return Fa;\n    }();\n    var Ta = /*#__PURE__*/function () {\n      function Ta(t, e, r, n) {\n        _classCallCheck(this, Ta);\n        this.expression = t, this.type = r, this.maxValue = 0, this.paintVertexAttributes = e.map(function (t) {\n          return {\n            name: \"a_\".concat(t),\n            type: \"Float32\",\n            components: \"color\" === r ? 2 : 1,\n            offset: 0\n          };\n        }), this.paintVertexArray = new n();\n      }\n      _createClass(Ta, [{\n        key: \"populatePaintArray\",\n        value: function populatePaintArray(t, e, r, n, i) {\n          var a = this.paintVertexArray.length,\n            s = this.expression.evaluate(new Qn(0), e, {}, n, [], i);\n          this.paintVertexArray.resize(t), this._setPaintValue(a, t, s);\n        }\n      }, {\n        key: \"updatePaintArray\",\n        value: function updatePaintArray(t, e, r, n) {\n          var i = this.expression.evaluate({\n            zoom: 0\n          }, r, n);\n          this._setPaintValue(t, e, i);\n        }\n      }, {\n        key: \"_setPaintValue\",\n        value: function _setPaintValue(t, e, r) {\n          if (\"color\" === this.type) {\n            var _n44 = Va(r);\n            for (var _r63 = t; _r63 < e; _r63++) this.paintVertexArray.emplace(_r63, _n44[0], _n44[1]);\n          } else {\n            for (var _n45 = t; _n45 < e; _n45++) this.paintVertexArray.emplace(_n45, r);\n            this.maxValue = Math.max(this.maxValue, Math.abs(r));\n          }\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.paintVertexArray && this.paintVertexArray.arrayBuffer && (this.paintVertexBuffer && this.paintVertexBuffer.buffer ? this.paintVertexBuffer.updateData(this.paintVertexArray) : this.paintVertexBuffer = t.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.paintVertexBuffer && this.paintVertexBuffer.destroy();\n        }\n      }]);\n      return Ta;\n    }();\n    var La = /*#__PURE__*/function () {\n      function La(t, e, r, n, i, a) {\n        _classCallCheck(this, La);\n        this.expression = t, this.uniformNames = e.map(function (t) {\n          return \"u_\".concat(t, \"_t\");\n        }), this.type = r, this.useIntegerZoom = n, this.zoom = i, this.maxValue = 0, this.paintVertexAttributes = e.map(function (t) {\n          return {\n            name: \"a_\".concat(t),\n            type: \"Float32\",\n            components: \"color\" === r ? 4 : 2,\n            offset: 0\n          };\n        }), this.paintVertexArray = new a();\n      }\n      _createClass(La, [{\n        key: \"populatePaintArray\",\n        value: function populatePaintArray(t, e, r, n, i) {\n          var a = this.expression.evaluate(new Qn(this.zoom), e, {}, n, [], i),\n            s = this.expression.evaluate(new Qn(this.zoom + 1), e, {}, n, [], i),\n            o = this.paintVertexArray.length;\n          this.paintVertexArray.resize(t), this._setPaintValue(o, t, a, s);\n        }\n      }, {\n        key: \"updatePaintArray\",\n        value: function updatePaintArray(t, e, r, n) {\n          var i = this.expression.evaluate({\n              zoom: this.zoom\n            }, r, n),\n            a = this.expression.evaluate({\n              zoom: this.zoom + 1\n            }, r, n);\n          this._setPaintValue(t, e, i, a);\n        }\n      }, {\n        key: \"_setPaintValue\",\n        value: function _setPaintValue(t, e, r, n) {\n          if (\"color\" === this.type) {\n            var _i49 = Va(r),\n              _a28 = Va(n);\n            for (var _r64 = t; _r64 < e; _r64++) this.paintVertexArray.emplace(_r64, _i49[0], _i49[1], _a28[0], _a28[1]);\n          } else {\n            for (var _i50 = t; _i50 < e; _i50++) this.paintVertexArray.emplace(_i50, r, n);\n            this.maxValue = Math.max(this.maxValue, Math.abs(r), Math.abs(n));\n          }\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.paintVertexArray && this.paintVertexArray.arrayBuffer && (this.paintVertexBuffer && this.paintVertexBuffer.buffer ? this.paintVertexBuffer.updateData(this.paintVertexArray) : this.paintVertexBuffer = t.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.paintVertexBuffer && this.paintVertexBuffer.destroy();\n        }\n      }, {\n        key: \"setUniform\",\n        value: function setUniform(t, e) {\n          var r = this.useIntegerZoom ? Math.floor(e.zoom) : e.zoom,\n            n = a(this.expression.interpolationFactor(r, this.zoom, this.zoom + 1), 0, 1);\n          t.set(n);\n        }\n      }, {\n        key: \"getBinding\",\n        value: function getBinding(t, e, r) {\n          return new za(t, e);\n        }\n      }]);\n      return La;\n    }();\n    var Da = /*#__PURE__*/function () {\n      function Da(t, e, r, n, i, a) {\n        _classCallCheck(this, Da);\n        this.expression = t, this.type = e, this.useIntegerZoom = r, this.zoom = n, this.layerId = a, this.zoomInPaintVertexArray = new i(), this.zoomOutPaintVertexArray = new i();\n      }\n      _createClass(Da, [{\n        key: \"populatePaintArray\",\n        value: function populatePaintArray(t, e, r) {\n          var n = this.zoomInPaintVertexArray.length;\n          this.zoomInPaintVertexArray.resize(t), this.zoomOutPaintVertexArray.resize(t), this._setPaintValues(n, t, e.patterns && e.patterns[this.layerId], r);\n        }\n      }, {\n        key: \"updatePaintArray\",\n        value: function updatePaintArray(t, e, r, n, i) {\n          this._setPaintValues(t, e, r.patterns && r.patterns[this.layerId], i);\n        }\n      }, {\n        key: \"_setPaintValues\",\n        value: function _setPaintValues(t, e, r, n) {\n          if (!n || !r) return;\n          var i = r.min,\n            a = r.mid,\n            s = r.max,\n            o = n[i],\n            l = n[a],\n            u = n[s];\n          if (o && l && u) for (var _r65 = t; _r65 < e; _r65++) this.zoomInPaintVertexArray.emplace(_r65, l.tl[0], l.tl[1], l.br[0], l.br[1], o.tl[0], o.tl[1], o.br[0], o.br[1], l.pixelRatio, o.pixelRatio), this.zoomOutPaintVertexArray.emplace(_r65, l.tl[0], l.tl[1], l.br[0], l.br[1], u.tl[0], u.tl[1], u.br[0], u.br[1], l.pixelRatio, u.pixelRatio);\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.zoomInPaintVertexArray && this.zoomInPaintVertexArray.arrayBuffer && this.zoomOutPaintVertexArray && this.zoomOutPaintVertexArray.arrayBuffer && (this.zoomInPaintVertexBuffer = t.createVertexBuffer(this.zoomInPaintVertexArray, ga.members, this.expression.isStateDependent), this.zoomOutPaintVertexBuffer = t.createVertexBuffer(this.zoomOutPaintVertexArray, ga.members, this.expression.isStateDependent));\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.zoomOutPaintVertexBuffer && this.zoomOutPaintVertexBuffer.destroy(), this.zoomInPaintVertexBuffer && this.zoomInPaintVertexBuffer.destroy();\n        }\n      }]);\n      return Da;\n    }();\n    var $a = /*#__PURE__*/function () {\n      function $a(t, e, r) {\n        _classCallCheck(this, $a);\n        this.binders = {}, this._buffers = [];\n        var n = [];\n        for (var _i51 in t.paint._values) {\n          if (!r(_i51)) continue;\n          var _a29 = t.paint.get(_i51);\n          if (!(_a29 instanceof si && br(_a29.property.specification))) continue;\n          var _s27 = Oa(_i51, t.type),\n            _o7 = _a29.value,\n            _l9 = _a29.property.specification.type,\n            _u9 = _a29.property.useIntegerZoom,\n            _c4 = _a29.property.specification[\"property-type\"],\n            _h2 = \"cross-faded\" === _c4 || \"cross-faded-data-driven\" === _c4;\n          if (\"constant\" === _o7.kind) this.binders[_i51] = _h2 ? new Fa(_o7.value, _s27) : new Ea(_o7.value, _s27, _l9), n.push(\"/u_\".concat(_i51));else if (\"source\" === _o7.kind || _h2) {\n            var _r66 = Ua(_i51, _l9, \"source\");\n            this.binders[_i51] = _h2 ? new Da(_o7, _l9, _u9, e, _r66, t.id) : new Ta(_o7, _s27, _l9, _r66), n.push(\"/a_\".concat(_i51));\n          } else {\n            var _t49 = Ua(_i51, _l9, \"composite\");\n            this.binders[_i51] = new La(_o7, _s27, _l9, _u9, e, _t49), n.push(\"/z_\".concat(_i51));\n          }\n        }\n        this.cacheKey = n.sort().join(\"\");\n      }\n      _createClass($a, [{\n        key: \"getMaxValue\",\n        value: function getMaxValue(t) {\n          var e = this.binders[t];\n          return e instanceof Ta || e instanceof La ? e.maxValue : 0;\n        }\n      }, {\n        key: \"populatePaintArrays\",\n        value: function populatePaintArrays(t, e, r, n, i) {\n          for (var _a30 in this.binders) {\n            var _s28 = this.binders[_a30];\n            (_s28 instanceof Ta || _s28 instanceof La || _s28 instanceof Da) && _s28.populatePaintArray(t, e, r, n, i);\n          }\n        }\n      }, {\n        key: \"setConstantPatternPositions\",\n        value: function setConstantPatternPositions(t, e) {\n          for (var _r67 in this.binders) {\n            var _n46 = this.binders[_r67];\n            _n46 instanceof Fa && _n46.setConstantPatternPositions(t, e);\n          }\n        }\n      }, {\n        key: \"updatePaintArrays\",\n        value: function updatePaintArrays(t, e, r, n, i) {\n          var a = !1;\n          for (var _s29 in t) {\n            var _o8 = e.getPositions(_s29);\n            var _iterator47 = _createForOfIteratorHelper(_o8),\n              _step47;\n            try {\n              for (_iterator47.s(); !(_step47 = _iterator47.n()).done;) {\n                var _e56 = _step47.value;\n                var _o9 = r.feature(_e56.index);\n                for (var _r68 in this.binders) {\n                  var _l10 = this.binders[_r68];\n                  if ((_l10 instanceof Ta || _l10 instanceof La || _l10 instanceof Da) && !0 === _l10.expression.isStateDependent) {\n                    var _u10 = n.paint.get(_r68);\n                    _l10.expression = _u10.value, _l10.updatePaintArray(_e56.start, _e56.end, _o9, t[_s29], i), a = !0;\n                  }\n                }\n              }\n            } catch (err) {\n              _iterator47.e(err);\n            } finally {\n              _iterator47.f();\n            }\n          }\n          return a;\n        }\n      }, {\n        key: \"defines\",\n        value: function defines() {\n          var t = [];\n          for (var _e57 in this.binders) {\n            var _r69 = this.binders[_e57];\n            (_r69 instanceof Ea || _r69 instanceof Fa) && t.push.apply(t, _toConsumableArray(_r69.uniformNames.map(function (t) {\n              return \"#define HAS_UNIFORM_\".concat(t);\n            })));\n          }\n          return t;\n        }\n      }, {\n        key: \"getBinderAttributes\",\n        value: function getBinderAttributes() {\n          var t = [];\n          for (var _e58 in this.binders) {\n            var _r70 = this.binders[_e58];\n            if (_r70 instanceof Ta || _r70 instanceof La) for (var _e59 = 0; _e59 < _r70.paintVertexAttributes.length; _e59++) t.push(_r70.paintVertexAttributes[_e59].name);else if (_r70 instanceof Da) for (var _e60 = 0; _e60 < ga.members.length; _e60++) t.push(ga.members[_e60].name);\n          }\n          return t;\n        }\n      }, {\n        key: \"getBinderUniforms\",\n        value: function getBinderUniforms() {\n          var t = [];\n          for (var _e61 in this.binders) {\n            var _r71 = this.binders[_e61];\n            if (_r71 instanceof Ea || _r71 instanceof Fa || _r71 instanceof La) {\n              var _iterator48 = _createForOfIteratorHelper(_r71.uniformNames),\n                _step48;\n              try {\n                for (_iterator48.s(); !(_step48 = _iterator48.n()).done;) {\n                  var _e62 = _step48.value;\n                  t.push(_e62);\n                }\n              } catch (err) {\n                _iterator48.e(err);\n              } finally {\n                _iterator48.f();\n              }\n            }\n          }\n          return t;\n        }\n      }, {\n        key: \"getPaintVertexBuffers\",\n        value: function getPaintVertexBuffers() {\n          return this._buffers;\n        }\n      }, {\n        key: \"getUniforms\",\n        value: function getUniforms(t, e) {\n          var r = [];\n          for (var _n47 in this.binders) {\n            var _i52 = this.binders[_n47];\n            if (_i52 instanceof Ea || _i52 instanceof Fa || _i52 instanceof La) {\n              var _iterator49 = _createForOfIteratorHelper(_i52.uniformNames),\n                _step49;\n              try {\n                for (_iterator49.s(); !(_step49 = _iterator49.n()).done;) {\n                  var _a31 = _step49.value;\n                  if (e[_a31]) {\n                    var _s30 = _i52.getBinding(t, e[_a31], _a31);\n                    r.push({\n                      name: _a31,\n                      property: _n47,\n                      binding: _s30\n                    });\n                  }\n                }\n              } catch (err) {\n                _iterator49.e(err);\n              } finally {\n                _iterator49.f();\n              }\n            }\n          }\n          return r;\n        }\n      }, {\n        key: \"setUniforms\",\n        value: function setUniforms(t, e, r, n) {\n          var _iterator50 = _createForOfIteratorHelper(e),\n            _step50;\n          try {\n            for (_iterator50.s(); !(_step50 = _iterator50.n()).done;) {\n              var _step50$value = _step50.value,\n                _t50 = _step50$value.name,\n                _i53 = _step50$value.property,\n                _a32 = _step50$value.binding;\n              this.binders[_i53].setUniform(_a32, n, r.get(_i53), _t50);\n            }\n          } catch (err) {\n            _iterator50.e(err);\n          } finally {\n            _iterator50.f();\n          }\n        }\n      }, {\n        key: \"updatePaintBuffers\",\n        value: function updatePaintBuffers(t) {\n          this._buffers = [];\n          for (var _e63 in this.binders) {\n            var _r72 = this.binders[_e63];\n            if (t && _r72 instanceof Da) {\n              var _e64 = 2 === t.fromScale ? _r72.zoomInPaintVertexBuffer : _r72.zoomOutPaintVertexBuffer;\n              _e64 && this._buffers.push(_e64);\n            } else (_r72 instanceof Ta || _r72 instanceof La) && _r72.paintVertexBuffer && this._buffers.push(_r72.paintVertexBuffer);\n          }\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          for (var _e65 in this.binders) {\n            var _r73 = this.binders[_e65];\n            (_r73 instanceof Ta || _r73 instanceof La || _r73 instanceof Da) && _r73.upload(t);\n          }\n          this.updatePaintBuffers();\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          for (var _t51 in this.binders) {\n            var _e66 = this.binders[_t51];\n            (_e66 instanceof Ta || _e66 instanceof La || _e66 instanceof Da) && _e66.destroy();\n          }\n        }\n      }]);\n      return $a;\n    }();\n    var Ra = /*#__PURE__*/function () {\n      function Ra(t, e) {\n        var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {\n          return !0;\n        };\n        _classCallCheck(this, Ra);\n        this.programConfigurations = {};\n        var _iterator51 = _createForOfIteratorHelper(t),\n          _step51;\n        try {\n          for (_iterator51.s(); !(_step51 = _iterator51.n()).done;) {\n            var _n48 = _step51.value;\n            this.programConfigurations[_n48.id] = new $a(_n48, e, r);\n          }\n        } catch (err) {\n          _iterator51.e(err);\n        } finally {\n          _iterator51.f();\n        }\n        this.needsUpload = !1, this._featureMap = new Aa(), this._bufferOffset = 0;\n      }\n      _createClass(Ra, [{\n        key: \"populatePaintArrays\",\n        value: function populatePaintArrays(t, e, r, n, i, a) {\n          for (var _r74 in this.programConfigurations) this.programConfigurations[_r74].populatePaintArrays(t, e, n, i, a);\n          void 0 !== e.id && this._featureMap.add(e.id, r, this._bufferOffset, t), this._bufferOffset = t, this.needsUpload = !0;\n        }\n      }, {\n        key: \"updatePaintArrays\",\n        value: function updatePaintArrays(t, e, r, n) {\n          var _iterator52 = _createForOfIteratorHelper(r),\n            _step52;\n          try {\n            for (_iterator52.s(); !(_step52 = _iterator52.n()).done;) {\n              var _i54 = _step52.value;\n              this.needsUpload = this.programConfigurations[_i54.id].updatePaintArrays(t, this._featureMap, e, _i54, n) || this.needsUpload;\n            }\n          } catch (err) {\n            _iterator52.e(err);\n          } finally {\n            _iterator52.f();\n          }\n        }\n      }, {\n        key: \"get\",\n        value: function get(t) {\n          return this.programConfigurations[t];\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          if (this.needsUpload) {\n            for (var _e67 in this.programConfigurations) this.programConfigurations[_e67].upload(t);\n            this.needsUpload = !1;\n          }\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          for (var _t52 in this.programConfigurations) this.programConfigurations[_t52].destroy();\n        }\n      }]);\n      return Ra;\n    }();\n    function Oa(t, e) {\n      return {\n        \"text-opacity\": [\"opacity\"],\n        \"icon-opacity\": [\"opacity\"],\n        \"text-color\": [\"fill_color\"],\n        \"icon-color\": [\"fill_color\"],\n        \"text-halo-color\": [\"halo_color\"],\n        \"icon-halo-color\": [\"halo_color\"],\n        \"text-halo-blur\": [\"halo_blur\"],\n        \"icon-halo-blur\": [\"halo_blur\"],\n        \"text-halo-width\": [\"halo_width\"],\n        \"icon-halo-width\": [\"halo_width\"],\n        \"line-gap-width\": [\"gapwidth\"],\n        \"line-pattern\": [\"pattern_to\", \"pattern_from\", \"pixel_ratio_to\", \"pixel_ratio_from\"],\n        \"fill-pattern\": [\"pattern_to\", \"pattern_from\", \"pixel_ratio_to\", \"pixel_ratio_from\"],\n        \"fill-extrusion-pattern\": [\"pattern_to\", \"pattern_from\", \"pixel_ratio_to\", \"pixel_ratio_from\"]\n      }[t] || [t.replace(\"\".concat(e, \"-\"), \"\").replace(/-/g, \"_\")];\n    }\n    function Ua(t, e, r) {\n      var n = {\n          color: {\n            source: Si,\n            composite: qi\n          },\n          number: {\n            source: Di,\n            composite: Si\n          }\n        },\n        i = function (t) {\n          return {\n            \"line-pattern\": {\n              source: aa,\n              composite: aa\n            },\n            \"fill-pattern\": {\n              source: aa,\n              composite: aa\n            },\n            \"fill-extrusion-pattern\": {\n              source: aa,\n              composite: aa\n            }\n          }[t];\n        }(t);\n      return i && i[r] || n[e][r];\n    }\n    Mn(\"ConstantBinder\", Ea), Mn(\"CrossFadedConstantBinder\", Fa), Mn(\"SourceExpressionBinder\", Ta), Mn(\"CrossFadedCompositeBinder\", Da), Mn(\"CompositeExpressionBinder\", La), Mn(\"ProgramConfiguration\", $a, {\n      omit: [\"_buffers\"]\n    }), Mn(\"ProgramConfigurationSet\", Ra);\n    var qa = 8192;\n    var ja = Math.pow(2, 14) - 1,\n      Na = -ja - 1;\n    function Za(t) {\n      var e = qa / t.extent,\n        r = t.loadGeometry();\n      for (var _t53 = 0; _t53 < r.length; _t53++) {\n        var _n49 = r[_t53];\n        for (var _t54 = 0; _t54 < _n49.length; _t54++) {\n          var _r75 = _n49[_t54],\n            _i55 = Math.round(_r75.x * e),\n            _s31 = Math.round(_r75.y * e);\n          _r75.x = a(_i55, Na, ja), _r75.y = a(_s31, Na, ja), (_i55 < _r75.x || _i55 > _r75.x + 1 || _s31 < _r75.y || _s31 > _r75.y + 1) && d(\"Geometry exceeds allowed extent, reduce your vector tile buffer size\");\n        }\n      }\n      return r;\n    }\n    function Ka(t, e) {\n      return {\n        type: t.type,\n        id: t.id,\n        properties: t.properties,\n        geometry: e ? Za(t) : []\n      };\n    }\n    function Ga(t, e, r, n, i) {\n      t.emplaceBack(2 * e + (n + 1) / 2, 2 * r + (i + 1) / 2);\n    }\n    var Ja = /*#__PURE__*/function () {\n      function Ja(t) {\n        _classCallCheck(this, Ja);\n        this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {\n          return t.id;\n        }), this.index = t.index, this.hasPattern = !1, this.layoutVertexArray = new ta(), this.indexArray = new ha(), this.segments = new ya(), this.programConfigurations = new Ra(t.layers, t.zoom), this.stateDependentLayerIds = this.layers.filter(function (t) {\n          return t.isStateDependent();\n        }).map(function (t) {\n          return t.id;\n        });\n      }\n      _createClass(Ja, [{\n        key: \"populate\",\n        value: function populate(t, e, r) {\n          var n = this.layers[0],\n            i = [];\n          var a = null,\n            s = !1;\n          \"circle\" === n.type && (a = n.layout.get(\"circle-sort-key\"), s = !a.isConstant());\n          var _iterator53 = _createForOfIteratorHelper(t),\n            _step53;\n          try {\n            for (_iterator53.s(); !(_step53 = _iterator53.n()).done;) {\n              var _step53$value = _step53.value,\n                _e68 = _step53$value.feature,\n                _n51 = _step53$value.id,\n                _o11 = _step53$value.index,\n                _l11 = _step53$value.sourceLayerIndex;\n              var _t55 = this.layers[0]._featureFilter.needGeometry,\n                _u11 = Ka(_e68, _t55);\n              if (!this.layers[0]._featureFilter.filter(new Qn(this.zoom), _u11, r)) continue;\n              var _c5 = s ? a.evaluate(_u11, {}, r) : void 0,\n                _h3 = {\n                  id: _n51,\n                  properties: _e68.properties,\n                  type: _e68.type,\n                  sourceLayerIndex: _l11,\n                  index: _o11,\n                  geometry: _t55 ? _u11.geometry : Za(_e68),\n                  patterns: {},\n                  sortKey: _c5\n                };\n              i.push(_h3);\n            }\n          } catch (err) {\n            _iterator53.e(err);\n          } finally {\n            _iterator53.f();\n          }\n          s && i.sort(function (t, e) {\n            return t.sortKey - e.sortKey;\n          });\n          for (var _i57 = 0, _i56 = i; _i57 < _i56.length; _i57++) {\n            var _n50 = _i56[_i57];\n            var _i58 = _n50.geometry,\n              _a33 = _n50.index,\n              _s32 = _n50.sourceLayerIndex,\n              _o10 = t[_a33].feature;\n            this.addFeature(_n50, _i58, _a33, r), e.featureIndex.insert(_o10, _i58, _a33, _s32, this.index);\n          }\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, e, r) {\n          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r);\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.layoutVertexArray.length;\n        }\n      }, {\n        key: \"uploadPending\",\n        value: function uploadPending() {\n          return !this.uploaded || this.programConfigurations.needsUpload;\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, da), this.indexBuffer = t.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t), this.uploaded = !0;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());\n        }\n      }, {\n        key: \"addFeature\",\n        value: function addFeature(t, e, r, n) {\n          var _iterator54 = _createForOfIteratorHelper(e),\n            _step54;\n          try {\n            for (_iterator54.s(); !(_step54 = _iterator54.n()).done;) {\n              var _r76 = _step54.value;\n              var _iterator55 = _createForOfIteratorHelper(_r76),\n                _step55;\n              try {\n                for (_iterator55.s(); !(_step55 = _iterator55.n()).done;) {\n                  var _e69 = _step55.value;\n                  var _r77 = _e69.x,\n                    _n52 = _e69.y;\n                  if (_r77 < 0 || _r77 >= qa || _n52 < 0 || _n52 >= qa) continue;\n                  var _i59 = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray, t.sortKey),\n                    _a34 = _i59.vertexLength;\n                  Ga(this.layoutVertexArray, _r77, _n52, -1, -1), Ga(this.layoutVertexArray, _r77, _n52, 1, -1), Ga(this.layoutVertexArray, _r77, _n52, 1, 1), Ga(this.layoutVertexArray, _r77, _n52, -1, 1), this.indexArray.emplaceBack(_a34, _a34 + 1, _a34 + 2), this.indexArray.emplaceBack(_a34, _a34 + 3, _a34 + 2), _i59.vertexLength += 4, _i59.primitiveLength += 2;\n                }\n              } catch (err) {\n                _iterator55.e(err);\n              } finally {\n                _iterator55.f();\n              }\n            }\n          } catch (err) {\n            _iterator54.e(err);\n          } finally {\n            _iterator54.f();\n          }\n          this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, r, {}, n);\n        }\n      }]);\n      return Ja;\n    }();\n    function Xa(t, e) {\n      for (var _r78 = 0; _r78 < t.length; _r78++) if (is(e, t[_r78])) return !0;\n      for (var _r79 = 0; _r79 < e.length; _r79++) if (is(t, e[_r79])) return !0;\n      return !!Qa(t, e);\n    }\n    function Ya(t, e, r) {\n      return !!is(t, e) || !!es(e, t, r);\n    }\n    function Ha(t, e) {\n      if (1 === t.length) return ns(e, t[0]);\n      for (var _r80 = 0; _r80 < e.length; _r80++) {\n        var _n53 = e[_r80];\n        for (var _e70 = 0; _e70 < _n53.length; _e70++) if (is(t, _n53[_e70])) return !0;\n      }\n      for (var _r81 = 0; _r81 < t.length; _r81++) if (ns(e, t[_r81])) return !0;\n      for (var _r82 = 0; _r82 < e.length; _r82++) if (Qa(t, e[_r82])) return !0;\n      return !1;\n    }\n    function Wa(t, e, r) {\n      if (t.length > 1) {\n        if (Qa(t, e)) return !0;\n        for (var _n54 = 0; _n54 < e.length; _n54++) if (es(e[_n54], t, r)) return !0;\n      }\n      for (var _n55 = 0; _n55 < t.length; _n55++) if (es(t[_n55], e, r)) return !0;\n      return !1;\n    }\n    function Qa(t, e) {\n      if (0 === t.length || 0 === e.length) return !1;\n      for (var _r83 = 0; _r83 < t.length - 1; _r83++) {\n        var _n56 = t[_r83],\n          _i60 = t[_r83 + 1];\n        for (var _t56 = 0; _t56 < e.length - 1; _t56++) if (ts(_n56, _i60, e[_t56], e[_t56 + 1])) return !0;\n      }\n      return !1;\n    }\n    function ts(t, e, r, n) {\n      return y(t, r, n) !== y(e, r, n) && y(t, e, r) !== y(t, e, n);\n    }\n    function es(t, e, r) {\n      var n = r * r;\n      if (1 === e.length) return t.distSqr(e[0]) < n;\n      for (var _r84 = 1; _r84 < e.length; _r84++) if (rs(t, e[_r84 - 1], e[_r84]) < n) return !0;\n      return !1;\n    }\n    function rs(t, e, r) {\n      var n = e.distSqr(r);\n      if (0 === n) return t.distSqr(e);\n      var i = ((t.x - e.x) * (r.x - e.x) + (t.y - e.y) * (r.y - e.y)) / n;\n      return t.distSqr(i < 0 ? e : i > 1 ? r : r.sub(e)._mult(i)._add(e));\n    }\n    function ns(t, e) {\n      var r,\n        n,\n        i,\n        a = !1;\n      for (var _s33 = 0; _s33 < t.length; _s33++) {\n        r = t[_s33];\n        for (var _t57 = 0, _s34 = r.length - 1; _t57 < r.length; _s34 = _t57++) n = r[_t57], i = r[_s34], n.y > e.y != i.y > e.y && e.x < (i.x - n.x) * (e.y - n.y) / (i.y - n.y) + n.x && (a = !a);\n      }\n      return a;\n    }\n    function is(t, e) {\n      var r = !1;\n      for (var _n57 = 0, _i61 = t.length - 1; _n57 < t.length; _i61 = _n57++) {\n        var _a35 = t[_n57],\n          _s35 = t[_i61];\n        _a35.y > e.y != _s35.y > e.y && e.x < (_s35.x - _a35.x) * (e.y - _a35.y) / (_s35.y - _a35.y) + _a35.x && (r = !r);\n      }\n      return r;\n    }\n    function as(t, e, r) {\n      var n = r[0],\n        i = r[2];\n      if (t.x < n.x && e.x < n.x || t.x > i.x && e.x > i.x || t.y < n.y && e.y < n.y || t.y > i.y && e.y > i.y) return !1;\n      var a = y(t, e, r[0]);\n      return a !== y(t, e, r[1]) || a !== y(t, e, r[2]) || a !== y(t, e, r[3]);\n    }\n    function ss(t, e, r) {\n      var n = e.paint.get(t).value;\n      return \"constant\" === n.kind ? n.value : r.programConfigurations.get(e.id).getMaxValue(t);\n    }\n    function os(t) {\n      return Math.sqrt(t[0] * t[0] + t[1] * t[1]);\n    }\n    function ls(t, e, r, n, i) {\n      if (!e[0] && !e[1]) return t;\n      var a = S.convert(e)._mult(i);\n      \"viewport\" === r && a._rotate(-n);\n      var s = [];\n      for (var _e71 = 0; _e71 < t.length; _e71++) s.push(t[_e71].sub(a));\n      return s;\n    }\n    Mn(\"CircleBucket\", Ja, {\n      omit: [\"layers\"]\n    });\n    var us = new fi({\n      \"circle-sort-key\": new ui(nt.layout_circle[\"circle-sort-key\"])\n    });\n    var cs = {\n        paint: new fi({\n          \"circle-radius\": new ui(nt.paint_circle[\"circle-radius\"]),\n          \"circle-color\": new ui(nt.paint_circle[\"circle-color\"]),\n          \"circle-blur\": new ui(nt.paint_circle[\"circle-blur\"]),\n          \"circle-opacity\": new ui(nt.paint_circle[\"circle-opacity\"]),\n          \"circle-translate\": new li(nt.paint_circle[\"circle-translate\"]),\n          \"circle-translate-anchor\": new li(nt.paint_circle[\"circle-translate-anchor\"]),\n          \"circle-pitch-scale\": new li(nt.paint_circle[\"circle-pitch-scale\"]),\n          \"circle-pitch-alignment\": new li(nt.paint_circle[\"circle-pitch-alignment\"]),\n          \"circle-stroke-width\": new ui(nt.paint_circle[\"circle-stroke-width\"]),\n          \"circle-stroke-color\": new ui(nt.paint_circle[\"circle-stroke-color\"]),\n          \"circle-stroke-opacity\": new ui(nt.paint_circle[\"circle-stroke-opacity\"])\n        }),\n        layout: us\n      },\n      hs = 1e-6,\n      ps = \"undefined\" != typeof Float32Array ? Float32Array : Array;\n    function fs() {\n      var t = new ps(9);\n      return ps != Float32Array && (t[1] = 0, t[2] = 0, t[3] = 0, t[5] = 0, t[6] = 0, t[7] = 0), t[0] = 1, t[4] = 1, t[8] = 1, t;\n    }\n    function ds(t) {\n      return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = 1, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 1, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, t;\n    }\n    function ys(t, e, r) {\n      var n = e[0],\n        i = e[1],\n        a = e[2],\n        s = e[3],\n        o = e[4],\n        l = e[5],\n        u = e[6],\n        c = e[7],\n        h = e[8],\n        p = e[9],\n        f = e[10],\n        d = e[11],\n        y = e[12],\n        m = e[13],\n        g = e[14],\n        x = e[15],\n        v = r[0],\n        b = r[1],\n        w = r[2],\n        _ = r[3];\n      return t[0] = v * n + b * o + w * h + _ * y, t[1] = v * i + b * l + w * p + _ * m, t[2] = v * a + b * u + w * f + _ * g, t[3] = v * s + b * c + w * d + _ * x, t[4] = (v = r[4]) * n + (b = r[5]) * o + (w = r[6]) * h + (_ = r[7]) * y, t[5] = v * i + b * l + w * p + _ * m, t[6] = v * a + b * u + w * f + _ * g, t[7] = v * s + b * c + w * d + _ * x, t[8] = (v = r[8]) * n + (b = r[9]) * o + (w = r[10]) * h + (_ = r[11]) * y, t[9] = v * i + b * l + w * p + _ * m, t[10] = v * a + b * u + w * f + _ * g, t[11] = v * s + b * c + w * d + _ * x, t[12] = (v = r[12]) * n + (b = r[13]) * o + (w = r[14]) * h + (_ = r[15]) * y, t[13] = v * i + b * l + w * p + _ * m, t[14] = v * a + b * u + w * f + _ * g, t[15] = v * s + b * c + w * d + _ * x, t;\n    }\n    Math.hypot || (Math.hypot = function () {\n      for (var t = 0, e = arguments.length; e--;) t += arguments[e] * arguments[e];\n      return Math.sqrt(t);\n    });\n    var ms,\n      gs = ys;\n    function xs() {\n      var t = new ps(3);\n      return ps != Float32Array && (t[0] = 0, t[1] = 0, t[2] = 0), t;\n    }\n    function vs(t, e, r) {\n      var n = new ps(3);\n      return n[0] = t, n[1] = e, n[2] = r, n;\n    }\n    function bs(t, e, r) {\n      var n = e[0],\n        i = e[1],\n        a = e[2],\n        s = e[3];\n      return t[0] = r[0] * n + r[4] * i + r[8] * a + r[12] * s, t[1] = r[1] * n + r[5] * i + r[9] * a + r[13] * s, t[2] = r[2] * n + r[6] * i + r[10] * a + r[14] * s, t[3] = r[3] * n + r[7] * i + r[11] * a + r[15] * s, t;\n    }\n    function ws() {\n      var t = new ps(4);\n      return ps != Float32Array && (t[0] = 0, t[1] = 0, t[2] = 0), t[3] = 1, t;\n    }\n    function _s(t, e) {\n      var r = bs([], [t.x, t.y, 0, 1], e);\n      return new S(r[0] / r[3], r[1] / r[3]);\n    }\n    xs(), ms = new ps(4), ps != Float32Array && (ms[0] = 0, ms[1] = 0, ms[2] = 0, ms[3] = 0), xs(), vs(1, 0, 0), vs(0, 1, 0), ws(), ws(), fs(), function () {\n      var t;\n      t = new ps(2), ps != Float32Array && (t[0] = 0, t[1] = 0);\n    }();\n    var As = /*#__PURE__*/function (_Ja) {\n      _inherits(As, _Ja);\n      var _super55 = _createSuper(As);\n      function As() {\n        _classCallCheck(this, As);\n        return _super55.apply(this, arguments);\n      }\n      return _createClass(As);\n    }(Ja);\n    Mn(\"HeatmapBucket\", As, {\n      omit: [\"layers\"]\n    });\n    var ks = {\n      paint: new fi({\n        \"heatmap-radius\": new ui(nt.paint_heatmap[\"heatmap-radius\"]),\n        \"heatmap-weight\": new ui(nt.paint_heatmap[\"heatmap-weight\"]),\n        \"heatmap-intensity\": new li(nt.paint_heatmap[\"heatmap-intensity\"]),\n        \"heatmap-color\": new pi(nt.paint_heatmap[\"heatmap-color\"]),\n        \"heatmap-opacity\": new li(nt.paint_heatmap[\"heatmap-opacity\"])\n      })\n    };\n    function Ss(t, _ref112, n, i) {\n      var e = _ref112.width,\n        r = _ref112.height;\n      if (i) {\n        if (i instanceof Uint8ClampedArray) i = new Uint8Array(i.buffer);else if (i.length !== e * r * n) throw new RangeError(\"mismatched image size. expected: \".concat(i.length, \" but got: \").concat(e * r * n));\n      } else i = new Uint8Array(e * r * n);\n      return t.width = e, t.height = r, t.data = i, t;\n    }\n    function Is(t, _ref113, n) {\n      var e = _ref113.width,\n        r = _ref113.height;\n      if (e === t.width && r === t.height) return;\n      var i = Ss({}, {\n        width: e,\n        height: r\n      }, n);\n      Ms(t, i, {\n        x: 0,\n        y: 0\n      }, {\n        x: 0,\n        y: 0\n      }, {\n        width: Math.min(t.width, e),\n        height: Math.min(t.height, r)\n      }, n), t.width = e, t.height = r, t.data = i.data;\n    }\n    function Ms(t, e, r, n, i, a) {\n      if (0 === i.width || 0 === i.height) return e;\n      if (i.width > t.width || i.height > t.height || r.x > t.width - i.width || r.y > t.height - i.height) throw new RangeError(\"out of range source coordinates for image copy\");\n      if (i.width > e.width || i.height > e.height || n.x > e.width - i.width || n.y > e.height - i.height) throw new RangeError(\"out of range destination coordinates for image copy\");\n      var s = t.data,\n        o = e.data;\n      if (s === o) throw new Error(\"srcData equals dstData, so image is already copied\");\n      for (var _l12 = 0; _l12 < i.height; _l12++) {\n        var _u12 = ((r.y + _l12) * t.width + r.x) * a,\n          _c6 = ((n.y + _l12) * e.width + n.x) * a;\n        for (var _t58 = 0; _t58 < i.width * a; _t58++) o[_c6 + _t58] = s[_u12 + _t58];\n      }\n      return e;\n    }\n    var zs = /*#__PURE__*/function () {\n      function zs(t, e) {\n        _classCallCheck(this, zs);\n        Ss(this, t, 1, e);\n      }\n      _createClass(zs, [{\n        key: \"resize\",\n        value: function resize(t) {\n          Is(this, t, 1);\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new zs({\n            width: this.width,\n            height: this.height\n          }, new Uint8Array(this.data));\n        }\n      }], [{\n        key: \"copy\",\n        value: function copy(t, e, r, n, i) {\n          Ms(t, e, r, n, i, 1);\n        }\n      }]);\n      return zs;\n    }();\n    var Bs = /*#__PURE__*/function () {\n      function Bs(t, e) {\n        _classCallCheck(this, Bs);\n        Ss(this, t, 4, e);\n      }\n      _createClass(Bs, [{\n        key: \"resize\",\n        value: function resize(t) {\n          Is(this, t, 4);\n        }\n      }, {\n        key: \"replace\",\n        value: function replace(t, e) {\n          e ? this.data.set(t) : this.data = t instanceof Uint8ClampedArray ? new Uint8Array(t.buffer) : t;\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new Bs({\n            width: this.width,\n            height: this.height\n          }, new Uint8Array(this.data));\n        }\n      }], [{\n        key: \"copy\",\n        value: function copy(t, e, r, n, i) {\n          Ms(t, e, r, n, i, 4);\n        }\n      }]);\n      return Bs;\n    }();\n    function Cs(t) {\n      var e = {},\n        r = t.resolution || 256,\n        n = t.clips ? t.clips.length : 1,\n        i = t.image || new Bs({\n          width: r,\n          height: n\n        });\n      if (Math.log(r) / Math.LN2 % 1 != 0) throw new Error(\"width is not a power of 2 - \".concat(r));\n      var a = function a(r, n, _a36) {\n        e[t.evaluationKey] = _a36;\n        var s = t.expression.evaluate(e);\n        i.data[r + n + 0] = Math.floor(255 * s.r / s.a), i.data[r + n + 1] = Math.floor(255 * s.g / s.a), i.data[r + n + 2] = Math.floor(255 * s.b / s.a), i.data[r + n + 3] = Math.floor(255 * s.a);\n      };\n      if (t.clips) for (var _e72 = 0, _i62 = 0; _e72 < n; ++_e72, _i62 += 4 * r) for (var _n58 = 0, _s36 = 0; _n58 < r; _n58++, _s36 += 4) {\n        var _o12 = _n58 / (r - 1),\n          _t$clips$_e = t.clips[_e72],\n          _l13 = _t$clips$_e.start,\n          _u13 = _t$clips$_e.end;\n        a(_i62, _s36, _l13 * (1 - _o12) + _u13 * _o12);\n      } else for (var _t59 = 0, _e73 = 0; _t59 < r; _t59++, _e73 += 4) a(0, _e73, _t59 / (r - 1));\n      return i;\n    }\n    Mn(\"AlphaImage\", zs), Mn(\"RGBAImage\", Bs);\n    var Ps = {\n      paint: new fi({\n        \"hillshade-illumination-direction\": new li(nt.paint_hillshade[\"hillshade-illumination-direction\"]),\n        \"hillshade-illumination-anchor\": new li(nt.paint_hillshade[\"hillshade-illumination-anchor\"]),\n        \"hillshade-exaggeration\": new li(nt.paint_hillshade[\"hillshade-exaggeration\"]),\n        \"hillshade-shadow-color\": new li(nt.paint_hillshade[\"hillshade-shadow-color\"]),\n        \"hillshade-highlight-color\": new li(nt.paint_hillshade[\"hillshade-highlight-color\"]),\n        \"hillshade-accent-color\": new li(nt.paint_hillshade[\"hillshade-accent-color\"])\n      })\n    };\n    var Vs = vi([{\n        name: \"a_pos\",\n        components: 2,\n        type: \"Int16\"\n      }], 4),\n      Es = Vs.members;\n    var Fs = {\n      exports: {}\n    };\n    function Ts(t, e, r) {\n      r = r || 2;\n      var n,\n        i,\n        a,\n        s,\n        o,\n        l,\n        u,\n        c = e && e.length,\n        h = c ? e[0] * r : t.length,\n        p = Ls(t, 0, h, r, !0),\n        f = [];\n      if (!p || p.next === p.prev) return f;\n      if (c && (p = function (t, e, r, n) {\n        var i,\n          a,\n          s,\n          o = [];\n        for (i = 0, a = e.length; i < a; i++) (s = Ls(t, e[i] * n, i < a - 1 ? e[i + 1] * n : t.length, n, !1)) === s.next && (s.steiner = !0), o.push(Gs(s));\n        for (o.sort(js), i = 0; i < o.length; i++) r = Ns(o[i], r);\n        return r;\n      }(t, e, p, r)), t.length > 80 * r) {\n        n = a = t[0], i = s = t[1];\n        for (var d = r; d < h; d += r) (o = t[d]) < n && (n = o), (l = t[d + 1]) < i && (i = l), o > a && (a = o), l > s && (s = l);\n        u = 0 !== (u = Math.max(a - n, s - i)) ? 32767 / u : 0;\n      }\n      return $s(p, f, r, n, i, u, 0), f;\n    }\n    function Ls(t, e, r, n, i) {\n      var a, s;\n      if (i === so(t, e, r, n) > 0) for (a = e; a < r; a += n) s = no(a, t[a], t[a + 1], s);else for (a = r - n; a >= e; a -= n) s = no(a, t[a], t[a + 1], s);\n      return s && Hs(s, s.next) && (io(s), s = s.next), s;\n    }\n    function Ds(t, e) {\n      if (!t) return t;\n      e || (e = t);\n      var r,\n        n = t;\n      do {\n        if (r = !1, n.steiner || !Hs(n, n.next) && 0 !== Ys(n.prev, n, n.next)) n = n.next;else {\n          if (io(n), (n = e = n.prev) === n.next) break;\n          r = !0;\n        }\n      } while (r || n !== e);\n      return e;\n    }\n    function $s(t, e, r, n, i, a, s) {\n      if (t) {\n        !s && a && function (t, e, r, n) {\n          var i = t;\n          do {\n            0 === i.z && (i.z = Ks(i.x, i.y, e, r, n)), i.prevZ = i.prev, i.nextZ = i.next, i = i.next;\n          } while (i !== t);\n          i.prevZ.nextZ = null, i.prevZ = null, function (t) {\n            var e,\n              r,\n              n,\n              i,\n              a,\n              s,\n              o,\n              l,\n              u = 1;\n            do {\n              for (r = t, t = null, a = null, s = 0; r;) {\n                for (s++, n = r, o = 0, e = 0; e < u && (o++, n = n.nextZ); e++);\n                for (l = u; o > 0 || l > 0 && n;) 0 !== o && (0 === l || !n || r.z <= n.z) ? (i = r, r = r.nextZ, o--) : (i = n, n = n.nextZ, l--), a ? a.nextZ = i : t = i, i.prevZ = a, a = i;\n                r = n;\n              }\n              a.nextZ = null, u *= 2;\n            } while (s > 1);\n          }(i);\n        }(t, n, i, a);\n        for (var o, l, u = t; t.prev !== t.next;) if (o = t.prev, l = t.next, a ? Os(t, n, i, a) : Rs(t)) e.push(o.i / r | 0), e.push(t.i / r | 0), e.push(l.i / r | 0), io(t), t = l.next, u = l.next;else if ((t = l) === u) {\n          s ? 1 === s ? $s(t = Us(Ds(t), e, r), e, r, n, i, a, 2) : 2 === s && qs(t, e, r, n, i, a) : $s(Ds(t), e, r, n, i, a, 1);\n          break;\n        }\n      }\n    }\n    function Rs(t) {\n      var e = t.prev,\n        r = t,\n        n = t.next;\n      if (Ys(e, r, n) >= 0) return !1;\n      for (var i = e.x, a = r.x, s = n.x, o = e.y, l = r.y, u = n.y, c = i < a ? i < s ? i : s : a < s ? a : s, h = o < l ? o < u ? o : u : l < u ? l : u, p = i > a ? i > s ? i : s : a > s ? a : s, f = o > l ? o > u ? o : u : l > u ? l : u, d = n.next; d !== e;) {\n        if (d.x >= c && d.x <= p && d.y >= h && d.y <= f && Js(i, o, a, l, s, u, d.x, d.y) && Ys(d.prev, d, d.next) >= 0) return !1;\n        d = d.next;\n      }\n      return !0;\n    }\n    function Os(t, e, r, n) {\n      var i = t.prev,\n        a = t,\n        s = t.next;\n      if (Ys(i, a, s) >= 0) return !1;\n      for (var o = i.x, l = a.x, u = s.x, c = i.y, h = a.y, p = s.y, f = o < l ? o < u ? o : u : l < u ? l : u, d = c < h ? c < p ? c : p : h < p ? h : p, y = o > l ? o > u ? o : u : l > u ? l : u, m = c > h ? c > p ? c : p : h > p ? h : p, g = Ks(f, d, e, r, n), x = Ks(y, m, e, r, n), v = t.prevZ, b = t.nextZ; v && v.z >= g && b && b.z <= x;) {\n        if (v.x >= f && v.x <= y && v.y >= d && v.y <= m && v !== i && v !== s && Js(o, c, l, h, u, p, v.x, v.y) && Ys(v.prev, v, v.next) >= 0) return !1;\n        if (v = v.prevZ, b.x >= f && b.x <= y && b.y >= d && b.y <= m && b !== i && b !== s && Js(o, c, l, h, u, p, b.x, b.y) && Ys(b.prev, b, b.next) >= 0) return !1;\n        b = b.nextZ;\n      }\n      for (; v && v.z >= g;) {\n        if (v.x >= f && v.x <= y && v.y >= d && v.y <= m && v !== i && v !== s && Js(o, c, l, h, u, p, v.x, v.y) && Ys(v.prev, v, v.next) >= 0) return !1;\n        v = v.prevZ;\n      }\n      for (; b && b.z <= x;) {\n        if (b.x >= f && b.x <= y && b.y >= d && b.y <= m && b !== i && b !== s && Js(o, c, l, h, u, p, b.x, b.y) && Ys(b.prev, b, b.next) >= 0) return !1;\n        b = b.nextZ;\n      }\n      return !0;\n    }\n    function Us(t, e, r) {\n      var n = t;\n      do {\n        var i = n.prev,\n          a = n.next.next;\n        !Hs(i, a) && Ws(i, n, n.next, a) && eo(i, a) && eo(a, i) && (e.push(i.i / r | 0), e.push(n.i / r | 0), e.push(a.i / r | 0), io(n), io(n.next), n = t = a), n = n.next;\n      } while (n !== t);\n      return Ds(n);\n    }\n    function qs(t, e, r, n, i, a) {\n      var s = t;\n      do {\n        for (var o = s.next.next; o !== s.prev;) {\n          if (s.i !== o.i && Xs(s, o)) {\n            var l = ro(s, o);\n            return s = Ds(s, s.next), l = Ds(l, l.next), $s(s, e, r, n, i, a, 0), void $s(l, e, r, n, i, a, 0);\n          }\n          o = o.next;\n        }\n        s = s.next;\n      } while (s !== t);\n    }\n    function js(t, e) {\n      return t.x - e.x;\n    }\n    function Ns(t, e) {\n      var r = function (t, e) {\n        var r,\n          n = e,\n          i = t.x,\n          a = t.y,\n          s = -1 / 0;\n        do {\n          if (a <= n.y && a >= n.next.y && n.next.y !== n.y) {\n            var o = n.x + (a - n.y) * (n.next.x - n.x) / (n.next.y - n.y);\n            if (o <= i && o > s && (s = o, r = n.x < n.next.x ? n : n.next, o === i)) return r;\n          }\n          n = n.next;\n        } while (n !== e);\n        if (!r) return null;\n        var l,\n          u = r,\n          c = r.x,\n          h = r.y,\n          p = 1 / 0;\n        n = r;\n        do {\n          i >= n.x && n.x >= c && i !== n.x && Js(a < h ? i : s, a, c, h, a < h ? s : i, a, n.x, n.y) && (l = Math.abs(a - n.y) / (i - n.x), eo(n, t) && (l < p || l === p && (n.x > r.x || n.x === r.x && Zs(r, n))) && (r = n, p = l)), n = n.next;\n        } while (n !== u);\n        return r;\n      }(t, e);\n      if (!r) return e;\n      var n = ro(r, t);\n      return Ds(n, n.next), Ds(r, r.next);\n    }\n    function Zs(t, e) {\n      return Ys(t.prev, t, e.prev) < 0 && Ys(e.next, t, t.next) < 0;\n    }\n    function Ks(t, e, r, n, i) {\n      return (t = 1431655765 & ((t = 858993459 & ((t = 252645135 & ((t = 16711935 & ((t = (t - r) * i | 0) | t << 8)) | t << 4)) | t << 2)) | t << 1)) | (e = 1431655765 & ((e = 858993459 & ((e = 252645135 & ((e = 16711935 & ((e = (e - n) * i | 0) | e << 8)) | e << 4)) | e << 2)) | e << 1)) << 1;\n    }\n    function Gs(t) {\n      var e = t,\n        r = t;\n      do {\n        (e.x < r.x || e.x === r.x && e.y < r.y) && (r = e), e = e.next;\n      } while (e !== t);\n      return r;\n    }\n    function Js(t, e, r, n, i, a, s, o) {\n      return (i - s) * (e - o) >= (t - s) * (a - o) && (t - s) * (n - o) >= (r - s) * (e - o) && (r - s) * (a - o) >= (i - s) * (n - o);\n    }\n    function Xs(t, e) {\n      return t.next.i !== e.i && t.prev.i !== e.i && !function (t, e) {\n        var r = t;\n        do {\n          if (r.i !== t.i && r.next.i !== t.i && r.i !== e.i && r.next.i !== e.i && Ws(r, r.next, t, e)) return !0;\n          r = r.next;\n        } while (r !== t);\n        return !1;\n      }(t, e) && (eo(t, e) && eo(e, t) && function (t, e) {\n        var r = t,\n          n = !1,\n          i = (t.x + e.x) / 2,\n          a = (t.y + e.y) / 2;\n        do {\n          r.y > a != r.next.y > a && r.next.y !== r.y && i < (r.next.x - r.x) * (a - r.y) / (r.next.y - r.y) + r.x && (n = !n), r = r.next;\n        } while (r !== t);\n        return n;\n      }(t, e) && (Ys(t.prev, t, e.prev) || Ys(t, e.prev, e)) || Hs(t, e) && Ys(t.prev, t, t.next) > 0 && Ys(e.prev, e, e.next) > 0);\n    }\n    function Ys(t, e, r) {\n      return (e.y - t.y) * (r.x - e.x) - (e.x - t.x) * (r.y - e.y);\n    }\n    function Hs(t, e) {\n      return t.x === e.x && t.y === e.y;\n    }\n    function Ws(t, e, r, n) {\n      var i = to(Ys(t, e, r)),\n        a = to(Ys(t, e, n)),\n        s = to(Ys(r, n, t)),\n        o = to(Ys(r, n, e));\n      return i !== a && s !== o || !(0 !== i || !Qs(t, r, e)) || !(0 !== a || !Qs(t, n, e)) || !(0 !== s || !Qs(r, t, n)) || !(0 !== o || !Qs(r, e, n));\n    }\n    function Qs(t, e, r) {\n      return e.x <= Math.max(t.x, r.x) && e.x >= Math.min(t.x, r.x) && e.y <= Math.max(t.y, r.y) && e.y >= Math.min(t.y, r.y);\n    }\n    function to(t) {\n      return t > 0 ? 1 : t < 0 ? -1 : 0;\n    }\n    function eo(t, e) {\n      return Ys(t.prev, t, t.next) < 0 ? Ys(t, e, t.next) >= 0 && Ys(t, t.prev, e) >= 0 : Ys(t, e, t.prev) < 0 || Ys(t, t.next, e) < 0;\n    }\n    function ro(t, e) {\n      var r = new ao(t.i, t.x, t.y),\n        n = new ao(e.i, e.x, e.y),\n        i = t.next,\n        a = e.prev;\n      return t.next = e, e.prev = t, r.next = i, i.prev = r, n.next = r, r.prev = n, a.next = n, n.prev = a, n;\n    }\n    function no(t, e, r, n) {\n      var i = new ao(t, e, r);\n      return n ? (i.next = n.next, i.prev = n, n.next.prev = i, n.next = i) : (i.prev = i, i.next = i), i;\n    }\n    function io(t) {\n      t.next.prev = t.prev, t.prev.next = t.next, t.prevZ && (t.prevZ.nextZ = t.nextZ), t.nextZ && (t.nextZ.prevZ = t.prevZ);\n    }\n    function ao(t, e, r) {\n      this.i = t, this.x = e, this.y = r, this.prev = null, this.next = null, this.z = 0, this.prevZ = null, this.nextZ = null, this.steiner = !1;\n    }\n    function so(t, e, r, n) {\n      for (var i = 0, a = e, s = r - n; a < r; a += n) i += (t[s] - t[a]) * (t[a + 1] + t[s + 1]), s = a;\n      return i;\n    }\n    function oo(t, e, r, n, i) {\n      lo(t, e, r || 0, n || t.length - 1, i || co);\n    }\n    function lo(t, e, r, n, i) {\n      for (; n > r;) {\n        if (n - r > 600) {\n          var a = n - r + 1,\n            s = e - r + 1,\n            o = Math.log(a),\n            l = .5 * Math.exp(2 * o / 3),\n            u = .5 * Math.sqrt(o * l * (a - l) / a) * (s - a / 2 < 0 ? -1 : 1);\n          lo(t, e, Math.max(r, Math.floor(e - s * l / a + u)), Math.min(n, Math.floor(e + (a - s) * l / a + u)), i);\n        }\n        var c = t[e],\n          h = r,\n          p = n;\n        for (uo(t, r, e), i(t[n], c) > 0 && uo(t, r, n); h < p;) {\n          for (uo(t, h, p), h++, p--; i(t[h], c) < 0;) h++;\n          for (; i(t[p], c) > 0;) p--;\n        }\n        0 === i(t[r], c) ? uo(t, r, p) : uo(t, ++p, n), p <= e && (r = p + 1), e <= p && (n = p - 1);\n      }\n    }\n    function uo(t, e, r) {\n      var n = t[e];\n      t[e] = t[r], t[r] = n;\n    }\n    function co(t, e) {\n      return t < e ? -1 : t > e ? 1 : 0;\n    }\n    function ho(t, e) {\n      var r = t.length;\n      if (r <= 1) return [t];\n      var n = [];\n      var i, a;\n      for (var _e74 = 0; _e74 < r; _e74++) {\n        var _r85 = m(t[_e74]);\n        0 !== _r85 && (t[_e74].area = Math.abs(_r85), void 0 === a && (a = _r85 < 0), a === _r85 < 0 ? (i && n.push(i), i = [t[_e74]]) : i.push(t[_e74]));\n      }\n      if (i && n.push(i), e > 1) for (var _t60 = 0; _t60 < n.length; _t60++) n[_t60].length <= e || (oo(n[_t60], e, 1, n[_t60].length - 1, po), n[_t60] = n[_t60].slice(0, e));\n      return n;\n    }\n    function po(t, e) {\n      return e.area - t.area;\n    }\n    function fo(t, e, r) {\n      var n = r.patternDependencies;\n      var i = !1;\n      var _iterator56 = _createForOfIteratorHelper(e),\n        _step56;\n      try {\n        for (_iterator56.s(); !(_step56 = _iterator56.n()).done;) {\n          var _r86 = _step56.value;\n          var _e75 = _r86.paint.get(\"\".concat(t, \"-pattern\"));\n          _e75.isConstant() || (i = !0);\n          var _a37 = _e75.constantOr(null);\n          _a37 && (i = !0, n[_a37.to] = !0, n[_a37.from] = !0);\n        }\n      } catch (err) {\n        _iterator56.e(err);\n      } finally {\n        _iterator56.f();\n      }\n      return i;\n    }\n    function yo(t, e, r, n, i) {\n      var a = i.patternDependencies;\n      var _iterator57 = _createForOfIteratorHelper(e),\n        _step57;\n      try {\n        for (_iterator57.s(); !(_step57 = _iterator57.n()).done;) {\n          var _s37 = _step57.value;\n          var _e76 = _s37.paint.get(\"\".concat(t, \"-pattern\")).value;\n          if (\"constant\" !== _e76.kind) {\n            var _t61 = _e76.evaluate({\n                zoom: n - 1\n              }, r, {}, i.availableImages),\n              _o13 = _e76.evaluate({\n                zoom: n\n              }, r, {}, i.availableImages),\n              _l14 = _e76.evaluate({\n                zoom: n + 1\n              }, r, {}, i.availableImages);\n            _t61 = _t61 && _t61.name ? _t61.name : _t61, _o13 = _o13 && _o13.name ? _o13.name : _o13, _l14 = _l14 && _l14.name ? _l14.name : _l14, a[_t61] = !0, a[_o13] = !0, a[_l14] = !0, r.patterns[_s37.id] = {\n              min: _t61,\n              mid: _o13,\n              max: _l14\n            };\n          }\n        }\n      } catch (err) {\n        _iterator57.e(err);\n      } finally {\n        _iterator57.f();\n      }\n      return r;\n    }\n    Fs.exports = Ts, Fs.exports.default = Ts, Ts.deviation = function (t, e, r, n) {\n      var i = e && e.length,\n        a = Math.abs(so(t, 0, i ? e[0] * r : t.length, r));\n      if (i) for (var s = 0, o = e.length; s < o; s++) a -= Math.abs(so(t, e[s] * r, s < o - 1 ? e[s + 1] * r : t.length, r));\n      var l = 0;\n      for (s = 0; s < n.length; s += 3) {\n        var u = n[s] * r,\n          c = n[s + 1] * r,\n          h = n[s + 2] * r;\n        l += Math.abs((t[u] - t[h]) * (t[c + 1] - t[u + 1]) - (t[u] - t[c]) * (t[h + 1] - t[u + 1]));\n      }\n      return 0 === a && 0 === l ? 0 : Math.abs((l - a) / a);\n    }, Ts.flatten = function (t) {\n      for (var e = t[0][0].length, r = {\n          vertices: [],\n          holes: [],\n          dimensions: e\n        }, n = 0, i = 0; i < t.length; i++) {\n        for (var a = 0; a < t[i].length; a++) for (var s = 0; s < e; s++) r.vertices.push(t[i][a][s]);\n        i > 0 && r.holes.push(n += t[i - 1].length);\n      }\n      return r;\n    };\n    var mo = /*#__PURE__*/function () {\n      function mo(t) {\n        _classCallCheck(this, mo);\n        this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {\n          return t.id;\n        }), this.index = t.index, this.hasPattern = !1, this.patternFeatures = [], this.layoutVertexArray = new ea(), this.indexArray = new ha(), this.indexArray2 = new pa(), this.programConfigurations = new Ra(t.layers, t.zoom), this.segments = new ya(), this.segments2 = new ya(), this.stateDependentLayerIds = this.layers.filter(function (t) {\n          return t.isStateDependent();\n        }).map(function (t) {\n          return t.id;\n        });\n      }\n      _createClass(mo, [{\n        key: \"populate\",\n        value: function populate(t, e, r) {\n          this.hasPattern = fo(\"fill\", this.layers, e);\n          var n = this.layers[0].layout.get(\"fill-sort-key\"),\n            i = !n.isConstant(),\n            a = [];\n          var _iterator58 = _createForOfIteratorHelper(t),\n            _step58;\n          try {\n            for (_iterator58.s(); !(_step58 = _iterator58.n()).done;) {\n              var _step58$value = _step58.value,\n                _s39 = _step58$value.feature,\n                _o14 = _step58$value.id,\n                _l15 = _step58$value.index,\n                _u14 = _step58$value.sourceLayerIndex;\n              var _t63 = this.layers[0]._featureFilter.needGeometry,\n                _c7 = Ka(_s39, _t63);\n              if (!this.layers[0]._featureFilter.filter(new Qn(this.zoom), _c7, r)) continue;\n              var _h4 = i ? n.evaluate(_c7, {}, r, e.availableImages) : void 0,\n                _p2 = {\n                  id: _o14,\n                  properties: _s39.properties,\n                  type: _s39.type,\n                  sourceLayerIndex: _u14,\n                  index: _l15,\n                  geometry: _t63 ? _c7.geometry : Za(_s39),\n                  patterns: {},\n                  sortKey: _h4\n                };\n              a.push(_p2);\n            }\n          } catch (err) {\n            _iterator58.e(err);\n          } finally {\n            _iterator58.f();\n          }\n          i && a.sort(function (t, e) {\n            return t.sortKey - e.sortKey;\n          });\n          for (var _i63 = 0, _a38 = a; _i63 < _a38.length; _i63++) {\n            var _n59 = _a38[_i63];\n            var _i64 = _n59.geometry,\n              _a39 = _n59.index,\n              _s38 = _n59.sourceLayerIndex;\n            if (this.hasPattern) {\n              var _t62 = yo(\"fill\", this.layers, _n59, this.zoom, e);\n              this.patternFeatures.push(_t62);\n            } else this.addFeature(_n59, _i64, _a39, r, {});\n            e.featureIndex.insert(t[_a39].feature, _i64, _a39, _s38, this.index);\n          }\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, e, r) {\n          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r);\n        }\n      }, {\n        key: \"addFeatures\",\n        value: function addFeatures(t, e, r) {\n          var _iterator59 = _createForOfIteratorHelper(this.patternFeatures),\n            _step59;\n          try {\n            for (_iterator59.s(); !(_step59 = _iterator59.n()).done;) {\n              var _t64 = _step59.value;\n              this.addFeature(_t64, _t64.geometry, _t64.index, e, r);\n            }\n          } catch (err) {\n            _iterator59.e(err);\n          } finally {\n            _iterator59.f();\n          }\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.layoutVertexArray.length;\n        }\n      }, {\n        key: \"uploadPending\",\n        value: function uploadPending() {\n          return !this.uploaded || this.programConfigurations.needsUpload;\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, Es), this.indexBuffer = t.createIndexBuffer(this.indexArray), this.indexBuffer2 = t.createIndexBuffer(this.indexArray2)), this.programConfigurations.upload(t), this.uploaded = !0;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.indexBuffer2.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.segments2.destroy());\n        }\n      }, {\n        key: \"addFeature\",\n        value: function addFeature(t, e, r, n, i) {\n          var _iterator60 = _createForOfIteratorHelper(ho(e, 500)),\n            _step60;\n          try {\n            for (_iterator60.s(); !(_step60 = _iterator60.n()).done;) {\n              var _t65 = _step60.value;\n              var _e77 = 0;\n              var _iterator61 = _createForOfIteratorHelper(_t65),\n                _step61;\n              try {\n                for (_iterator61.s(); !(_step61 = _iterator61.n()).done;) {\n                  var _r88 = _step61.value;\n                  _e77 += _r88.length;\n                }\n              } catch (err) {\n                _iterator61.e(err);\n              } finally {\n                _iterator61.f();\n              }\n              var _r87 = this.segments.prepareSegment(_e77, this.layoutVertexArray, this.indexArray),\n                _n60 = _r87.vertexLength,\n                _i65 = [],\n                _a40 = [];\n              var _iterator62 = _createForOfIteratorHelper(_t65),\n                _step62;\n              try {\n                for (_iterator62.s(); !(_step62 = _iterator62.n()).done;) {\n                  var _e78 = _step62.value;\n                  if (0 === _e78.length) continue;\n                  _e78 !== _t65[0] && _a40.push(_i65.length / 2);\n                  var _r89 = this.segments2.prepareSegment(_e78.length, this.layoutVertexArray, this.indexArray2),\n                    _n61 = _r89.vertexLength;\n                  this.layoutVertexArray.emplaceBack(_e78[0].x, _e78[0].y), this.indexArray2.emplaceBack(_n61 + _e78.length - 1, _n61), _i65.push(_e78[0].x), _i65.push(_e78[0].y);\n                  for (var _t67 = 1; _t67 < _e78.length; _t67++) this.layoutVertexArray.emplaceBack(_e78[_t67].x, _e78[_t67].y), this.indexArray2.emplaceBack(_n61 + _t67 - 1, _n61 + _t67), _i65.push(_e78[_t67].x), _i65.push(_e78[_t67].y);\n                  _r89.vertexLength += _e78.length, _r89.primitiveLength += _e78.length;\n                }\n              } catch (err) {\n                _iterator62.e(err);\n              } finally {\n                _iterator62.f();\n              }\n              var _s40 = Fs.exports(_i65, _a40);\n              for (var _t66 = 0; _t66 < _s40.length; _t66 += 3) this.indexArray.emplaceBack(_n60 + _s40[_t66], _n60 + _s40[_t66 + 1], _n60 + _s40[_t66 + 2]);\n              _r87.vertexLength += _e77, _r87.primitiveLength += _s40.length / 3;\n            }\n          } catch (err) {\n            _iterator60.e(err);\n          } finally {\n            _iterator60.f();\n          }\n          this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, r, i, n);\n        }\n      }]);\n      return mo;\n    }();\n    Mn(\"FillBucket\", mo, {\n      omit: [\"layers\", \"patternFeatures\"]\n    });\n    var go = new fi({\n      \"fill-sort-key\": new ui(nt.layout_fill[\"fill-sort-key\"])\n    });\n    var xo = {\n      paint: new fi({\n        \"fill-antialias\": new li(nt.paint_fill[\"fill-antialias\"]),\n        \"fill-opacity\": new ui(nt.paint_fill[\"fill-opacity\"]),\n        \"fill-color\": new ui(nt.paint_fill[\"fill-color\"]),\n        \"fill-outline-color\": new ui(nt.paint_fill[\"fill-outline-color\"]),\n        \"fill-translate\": new li(nt.paint_fill[\"fill-translate\"]),\n        \"fill-translate-anchor\": new li(nt.paint_fill[\"fill-translate-anchor\"]),\n        \"fill-pattern\": new ci(nt.paint_fill[\"fill-pattern\"])\n      }),\n      layout: go\n    };\n    var vo = vi([{\n        name: \"a_pos\",\n        components: 2,\n        type: \"Int16\"\n      }, {\n        name: \"a_normal_ed\",\n        components: 4,\n        type: \"Int16\"\n      }], 4),\n      bo = vi([{\n        name: \"a_centroid\",\n        components: 2,\n        type: \"Int16\"\n      }], 4),\n      wo = vo.members;\n    var _o = {},\n      Ao = S,\n      ko = So;\n    function So(t, e, r, n, i) {\n      this.properties = {}, this.extent = r, this.type = 0, this._pbf = t, this._geometry = -1, this._keys = n, this._values = i, t.readFields(Io, this, e);\n    }\n    function Io(t, e, r) {\n      1 == t ? e.id = r.readVarint() : 2 == t ? function (t, e) {\n        for (var r = t.readVarint() + t.pos; t.pos < r;) {\n          var n = e._keys[t.readVarint()],\n            i = e._values[t.readVarint()];\n          e.properties[n] = i;\n        }\n      }(r, e) : 3 == t ? e.type = r.readVarint() : 4 == t && (e._geometry = r.pos);\n    }\n    function Mo(t) {\n      for (var e, r, n = 0, i = 0, a = t.length, s = a - 1; i < a; s = i++) n += ((r = t[s]).x - (e = t[i]).x) * (e.y + r.y);\n      return n;\n    }\n    So.types = [\"Unknown\", \"Point\", \"LineString\", \"Polygon\"], So.prototype.loadGeometry = function () {\n      var t = this._pbf;\n      t.pos = this._geometry;\n      for (var e, r = t.readVarint() + t.pos, n = 1, i = 0, a = 0, s = 0, o = []; t.pos < r;) {\n        if (i <= 0) {\n          var l = t.readVarint();\n          n = 7 & l, i = l >> 3;\n        }\n        if (i--, 1 === n || 2 === n) a += t.readSVarint(), s += t.readSVarint(), 1 === n && (e && o.push(e), e = []), e.push(new Ao(a, s));else {\n          if (7 !== n) throw new Error(\"unknown command \" + n);\n          e && e.push(e[0].clone());\n        }\n      }\n      return e && o.push(e), o;\n    }, So.prototype.bbox = function () {\n      var t = this._pbf;\n      t.pos = this._geometry;\n      for (var e = t.readVarint() + t.pos, r = 1, n = 0, i = 0, a = 0, s = 1 / 0, o = -1 / 0, l = 1 / 0, u = -1 / 0; t.pos < e;) {\n        if (n <= 0) {\n          var c = t.readVarint();\n          r = 7 & c, n = c >> 3;\n        }\n        if (n--, 1 === r || 2 === r) (i += t.readSVarint()) < s && (s = i), i > o && (o = i), (a += t.readSVarint()) < l && (l = a), a > u && (u = a);else if (7 !== r) throw new Error(\"unknown command \" + r);\n      }\n      return [s, l, o, u];\n    }, So.prototype.toGeoJSON = function (t, e, r) {\n      var n,\n        i,\n        a = this.extent * Math.pow(2, r),\n        s = this.extent * t,\n        o = this.extent * e,\n        l = this.loadGeometry(),\n        u = So.types[this.type];\n      function c(t) {\n        for (var e = 0; e < t.length; e++) {\n          var r = t[e];\n          t[e] = [360 * (r.x + s) / a - 180, 360 / Math.PI * Math.atan(Math.exp((180 - 360 * (r.y + o) / a) * Math.PI / 180)) - 90];\n        }\n      }\n      switch (this.type) {\n        case 1:\n          var h = [];\n          for (n = 0; n < l.length; n++) h[n] = l[n][0];\n          c(l = h);\n          break;\n        case 2:\n          for (n = 0; n < l.length; n++) c(l[n]);\n          break;\n        case 3:\n          for (l = function (t) {\n            var e = t.length;\n            if (e <= 1) return [t];\n            for (var r, n, i = [], a = 0; a < e; a++) {\n              var s = Mo(t[a]);\n              0 !== s && (void 0 === n && (n = s < 0), n === s < 0 ? (r && i.push(r), r = [t[a]]) : r.push(t[a]));\n            }\n            return r && i.push(r), i;\n          }(l), n = 0; n < l.length; n++) for (i = 0; i < l[n].length; i++) c(l[n][i]);\n      }\n      1 === l.length ? l = l[0] : u = \"Multi\" + u;\n      var p = {\n        type: \"Feature\",\n        geometry: {\n          type: u,\n          coordinates: l\n        },\n        properties: this.properties\n      };\n      return \"id\" in this && (p.id = this.id), p;\n    };\n    var zo = ko,\n      Bo = Co;\n    function Co(t, e) {\n      this.version = 1, this.name = null, this.extent = 4096, this.length = 0, this._pbf = t, this._keys = [], this._values = [], this._features = [], t.readFields(Po, this, e), this.length = this._features.length;\n    }\n    function Po(t, e, r) {\n      15 === t ? e.version = r.readVarint() : 1 === t ? e.name = r.readString() : 5 === t ? e.extent = r.readVarint() : 2 === t ? e._features.push(r.pos) : 3 === t ? e._keys.push(r.readString()) : 4 === t && e._values.push(function (t) {\n        for (var e = null, r = t.readVarint() + t.pos; t.pos < r;) {\n          var n = t.readVarint() >> 3;\n          e = 1 === n ? t.readString() : 2 === n ? t.readFloat() : 3 === n ? t.readDouble() : 4 === n ? t.readVarint64() : 5 === n ? t.readVarint() : 6 === n ? t.readSVarint() : 7 === n ? t.readBoolean() : null;\n        }\n        return e;\n      }(r));\n    }\n    Co.prototype.feature = function (t) {\n      if (t < 0 || t >= this._features.length) throw new Error(\"feature index out of bounds\");\n      this._pbf.pos = this._features[t];\n      var e = this._pbf.readVarint() + this._pbf.pos;\n      return new zo(this._pbf, e, this.extent, this._keys, this._values);\n    };\n    var Vo = Bo;\n    function Eo(t, e, r) {\n      if (3 === t) {\n        var n = new Vo(r, r.readVarint() + r.pos);\n        n.length && (e[n.name] = n);\n      }\n    }\n    _o.VectorTile = function (t, e) {\n      this.layers = t.readFields(Eo, {}, e);\n    }, _o.VectorTileFeature = ko, _o.VectorTileLayer = Bo;\n    var Fo = _o.VectorTileFeature.types,\n      To = Math.pow(2, 13);\n    function Lo(t, e, r, n, i, a, s, o) {\n      t.emplaceBack(e, r, 2 * Math.floor(n * To) + s, i * To * 2, a * To * 2, Math.round(o));\n    }\n    var Do = /*#__PURE__*/function () {\n      function Do(t) {\n        _classCallCheck(this, Do);\n        this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {\n          return t.id;\n        }), this.index = t.index, this.hasPattern = !1, this.layoutVertexArray = new ra(), this.centroidVertexArray = new Qi(), this.indexArray = new ha(), this.programConfigurations = new Ra(t.layers, t.zoom), this.segments = new ya(), this.stateDependentLayerIds = this.layers.filter(function (t) {\n          return t.isStateDependent();\n        }).map(function (t) {\n          return t.id;\n        });\n      }\n      _createClass(Do, [{\n        key: \"populate\",\n        value: function populate(t, e, r) {\n          this.features = [], this.hasPattern = fo(\"fill-extrusion\", this.layers, e);\n          var _iterator63 = _createForOfIteratorHelper(t),\n            _step63;\n          try {\n            for (_iterator63.s(); !(_step63 = _iterator63.n()).done;) {\n              var _step63$value = _step63.value,\n                _n62 = _step63$value.feature,\n                _i66 = _step63$value.id,\n                _a41 = _step63$value.index,\n                _s41 = _step63$value.sourceLayerIndex;\n              var _t68 = this.layers[0]._featureFilter.needGeometry,\n                _o15 = Ka(_n62, _t68);\n              if (!this.layers[0]._featureFilter.filter(new Qn(this.zoom), _o15, r)) continue;\n              var _l16 = {\n                id: _i66,\n                sourceLayerIndex: _s41,\n                index: _a41,\n                geometry: _t68 ? _o15.geometry : Za(_n62),\n                properties: _n62.properties,\n                type: _n62.type,\n                patterns: {}\n              };\n              this.hasPattern ? this.features.push(yo(\"fill-extrusion\", this.layers, _l16, this.zoom, e)) : this.addFeature(_l16, _l16.geometry, _a41, r, {}), e.featureIndex.insert(_n62, _l16.geometry, _a41, _s41, this.index, !0);\n            }\n          } catch (err) {\n            _iterator63.e(err);\n          } finally {\n            _iterator63.f();\n          }\n        }\n      }, {\n        key: \"addFeatures\",\n        value: function addFeatures(t, e, r) {\n          var _iterator64 = _createForOfIteratorHelper(this.features),\n            _step64;\n          try {\n            for (_iterator64.s(); !(_step64 = _iterator64.n()).done;) {\n              var _t69 = _step64.value;\n              var _n63 = _t69.geometry;\n              this.addFeature(_t69, _n63, _t69.index, e, r);\n            }\n          } catch (err) {\n            _iterator64.e(err);\n          } finally {\n            _iterator64.f();\n          }\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, e, r) {\n          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r);\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.layoutVertexArray.length && 0 === this.centroidVertexArray.length;\n        }\n      }, {\n        key: \"uploadPending\",\n        value: function uploadPending() {\n          return !this.uploaded || this.programConfigurations.needsUpload;\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, wo), this.centroidVertexBuffer = t.createVertexBuffer(this.centroidVertexArray, bo.members, !0), this.indexBuffer = t.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t), this.uploaded = !0;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.centroidVertexBuffer.destroy());\n        }\n      }, {\n        key: \"addFeature\",\n        value: function addFeature(t, e, r, n, i) {\n          var a = {\n            x: 0,\n            y: 0,\n            vertexCount: 0\n          };\n          var _iterator65 = _createForOfIteratorHelper(ho(e, 500)),\n            _step65;\n          try {\n            for (_iterator65.s(); !(_step65 = _iterator65.n()).done;) {\n              var _r90 = _step65.value;\n              var _e79 = 0;\n              var _iterator66 = _createForOfIteratorHelper(_r90),\n                _step66;\n              try {\n                for (_iterator66.s(); !(_step66 = _iterator66.n()).done;) {\n                  var _t72 = _step66.value;\n                  _e79 += _t72.length;\n                }\n              } catch (err) {\n                _iterator66.e(err);\n              } finally {\n                _iterator66.f();\n              }\n              var _n64 = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray);\n              var _iterator67 = _createForOfIteratorHelper(_r90),\n                _step67;\n              try {\n                for (_iterator67.s(); !(_step67 = _iterator67.n()).done;) {\n                  var _t73 = _step67.value;\n                  if (0 === _t73.length) continue;\n                  if (Ro(_t73)) continue;\n                  var _e80 = 0;\n                  for (var _r91 = 0; _r91 < _t73.length; _r91++) {\n                    var _i68 = _t73[_r91];\n                    if (_r91 >= 1) {\n                      var _s43 = _t73[_r91 - 1];\n                      if (!$o(_i68, _s43)) {\n                        _n64.vertexLength + 4 > ya.MAX_VERTEX_ARRAY_LENGTH && (_n64 = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray));\n                        var _t74 = _i68.sub(_s43)._perp()._unit(),\n                          _r92 = _s43.dist(_i68);\n                        _e80 + _r92 > 32768 && (_e80 = 0), Lo(this.layoutVertexArray, _i68.x, _i68.y, _t74.x, _t74.y, 0, 0, _e80), Lo(this.layoutVertexArray, _i68.x, _i68.y, _t74.x, _t74.y, 0, 1, _e80), a.x += 2 * _i68.x, a.y += 2 * _i68.y, a.vertexCount += 2, _e80 += _r92, Lo(this.layoutVertexArray, _s43.x, _s43.y, _t74.x, _t74.y, 0, 0, _e80), Lo(this.layoutVertexArray, _s43.x, _s43.y, _t74.x, _t74.y, 0, 1, _e80), a.x += 2 * _s43.x, a.y += 2 * _s43.y, a.vertexCount += 2;\n                        var _o17 = _n64.vertexLength;\n                        this.indexArray.emplaceBack(_o17, _o17 + 2, _o17 + 1), this.indexArray.emplaceBack(_o17 + 1, _o17 + 2, _o17 + 3), _n64.vertexLength += 4, _n64.primitiveLength += 2;\n                      }\n                    }\n                  }\n                }\n              } catch (err) {\n                _iterator67.e(err);\n              } finally {\n                _iterator67.f();\n              }\n              if (_n64.vertexLength + _e79 > ya.MAX_VERTEX_ARRAY_LENGTH && (_n64 = this.segments.prepareSegment(_e79, this.layoutVertexArray, this.indexArray)), \"Polygon\" !== Fo[t.type]) continue;\n              var _i67 = [],\n                _s42 = [],\n                _o16 = _n64.vertexLength;\n              var _iterator68 = _createForOfIteratorHelper(_r90),\n                _step68;\n              try {\n                for (_iterator68.s(); !(_step68 = _iterator68.n()).done;) {\n                  var _t75 = _step68.value;\n                  if (0 !== _t75.length) {\n                    _t75 !== _r90[0] && _s42.push(_i67.length / 2);\n                    for (var _e81 = 0; _e81 < _t75.length; _e81++) {\n                      var _r93 = _t75[_e81];\n                      Lo(this.layoutVertexArray, _r93.x, _r93.y, 0, 0, 1, 1, 0), a.x += _r93.x, a.y += _r93.y, a.vertexCount += 1, _i67.push(_r93.x), _i67.push(_r93.y);\n                    }\n                  }\n                }\n              } catch (err) {\n                _iterator68.e(err);\n              } finally {\n                _iterator68.f();\n              }\n              var _l17 = Fs.exports(_i67, _s42);\n              for (var _t71 = 0; _t71 < _l17.length; _t71 += 3) this.indexArray.emplaceBack(_o16 + _l17[_t71], _o16 + _l17[_t71 + 2], _o16 + _l17[_t71 + 1]);\n              _n64.primitiveLength += _l17.length / 3, _n64.vertexLength += _e79;\n            }\n          } catch (err) {\n            _iterator65.e(err);\n          } finally {\n            _iterator65.f();\n          }\n          for (var _t70 = 0; _t70 < a.vertexCount; _t70++) this.centroidVertexArray.emplaceBack(Math.floor(a.x / a.vertexCount), Math.floor(a.y / a.vertexCount));\n          this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, r, i, n);\n        }\n      }]);\n      return Do;\n    }();\n    function $o(t, e) {\n      return t.x === e.x && (t.x < 0 || t.x > qa) || t.y === e.y && (t.y < 0 || t.y > qa);\n    }\n    function Ro(t) {\n      return t.every(function (t) {\n        return t.x < 0;\n      }) || t.every(function (t) {\n        return t.x > qa;\n      }) || t.every(function (t) {\n        return t.y < 0;\n      }) || t.every(function (t) {\n        return t.y > qa;\n      });\n    }\n    Mn(\"FillExtrusionBucket\", Do, {\n      omit: [\"layers\", \"features\"]\n    });\n    var Oo = {\n      paint: new fi({\n        \"fill-extrusion-opacity\": new li(nt[\"paint_fill-extrusion\"][\"fill-extrusion-opacity\"]),\n        \"fill-extrusion-color\": new ui(nt[\"paint_fill-extrusion\"][\"fill-extrusion-color\"]),\n        \"fill-extrusion-translate\": new li(nt[\"paint_fill-extrusion\"][\"fill-extrusion-translate\"]),\n        \"fill-extrusion-translate-anchor\": new li(nt[\"paint_fill-extrusion\"][\"fill-extrusion-translate-anchor\"]),\n        \"fill-extrusion-pattern\": new ci(nt[\"paint_fill-extrusion\"][\"fill-extrusion-pattern\"]),\n        \"fill-extrusion-height\": new ui(nt[\"paint_fill-extrusion\"][\"fill-extrusion-height\"]),\n        \"fill-extrusion-base\": new ui(nt[\"paint_fill-extrusion\"][\"fill-extrusion-base\"]),\n        \"fill-extrusion-vertical-gradient\": new li(nt[\"paint_fill-extrusion\"][\"fill-extrusion-vertical-gradient\"])\n      })\n    };\n    function Uo(t, e) {\n      return t.x * e.x + t.y * e.y;\n    }\n    function qo(t, e) {\n      if (1 === t.length) {\n        var _r94 = 0;\n        var _n65 = e[_r94++];\n        var _i69;\n        for (; !_i69 || _n65.equals(_i69);) if (_i69 = e[_r94++], !_i69) return 1 / 0;\n        for (; _r94 < e.length; _r94++) {\n          var _a42 = e[_r94],\n            _s44 = t[0],\n            _o18 = _i69.sub(_n65),\n            _l18 = _a42.sub(_n65),\n            _u15 = _s44.sub(_n65),\n            _c8 = Uo(_o18, _o18),\n            _h5 = Uo(_o18, _l18),\n            _p3 = Uo(_l18, _l18),\n            _f = Uo(_u15, _o18),\n            _d = Uo(_u15, _l18),\n            _y = _c8 * _p3 - _h5 * _h5,\n            _m = (_p3 * _f - _h5 * _d) / _y,\n            _g = (_c8 * _d - _h5 * _f) / _y,\n            _x = _n65.z * (1 - _m - _g) + _i69.z * _m + _a42.z * _g;\n          if (isFinite(_x)) return _x;\n        }\n        return 1 / 0;\n      }\n      {\n        var _t76 = 1 / 0;\n        var _iterator69 = _createForOfIteratorHelper(e),\n          _step69;\n        try {\n          for (_iterator69.s(); !(_step69 = _iterator69.n()).done;) {\n            var _r95 = _step69.value;\n            _t76 = Math.min(_t76, _r95.z);\n          }\n        } catch (err) {\n          _iterator69.e(err);\n        } finally {\n          _iterator69.f();\n        }\n        return _t76;\n      }\n    }\n    var jo = vi([{\n        name: \"a_pos_normal\",\n        components: 2,\n        type: \"Int16\"\n      }, {\n        name: \"a_data\",\n        components: 4,\n        type: \"Uint8\"\n      }], 4),\n      No = jo.members,\n      Zo = vi([{\n        name: \"a_uv_x\",\n        components: 1,\n        type: \"Float32\"\n      }, {\n        name: \"a_split_index\",\n        components: 1,\n        type: \"Float32\"\n      }]),\n      Ko = Zo.members,\n      Go = _o.VectorTileFeature.types,\n      Jo = Math.cos(Math.PI / 180 * 37.5),\n      Xo = Math.pow(2, 14) / .5;\n    var Yo = /*#__PURE__*/function () {\n      function Yo(t) {\n        var _this7 = this;\n        _classCallCheck(this, Yo);\n        this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {\n          return t.id;\n        }), this.index = t.index, this.hasPattern = !1, this.patternFeatures = [], this.lineClipsArray = [], this.gradients = {}, this.layers.forEach(function (t) {\n          _this7.gradients[t.id] = {};\n        }), this.layoutVertexArray = new na(), this.layoutVertexArray2 = new ia(), this.indexArray = new ha(), this.programConfigurations = new Ra(t.layers, t.zoom), this.segments = new ya(), this.maxLineLength = 0, this.stateDependentLayerIds = this.layers.filter(function (t) {\n          return t.isStateDependent();\n        }).map(function (t) {\n          return t.id;\n        });\n      }\n      _createClass(Yo, [{\n        key: \"populate\",\n        value: function populate(t, e, r) {\n          this.hasPattern = fo(\"line\", this.layers, e);\n          var n = this.layers[0].layout.get(\"line-sort-key\"),\n            i = !n.isConstant(),\n            a = [];\n          var _iterator70 = _createForOfIteratorHelper(t),\n            _step70;\n          try {\n            for (_iterator70.s(); !(_step70 = _iterator70.n()).done;) {\n              var _step70$value = _step70.value,\n                _e82 = _step70$value.feature,\n                _s46 = _step70$value.id,\n                _o19 = _step70$value.index,\n                _l19 = _step70$value.sourceLayerIndex;\n              var _t78 = this.layers[0]._featureFilter.needGeometry,\n                _u16 = Ka(_e82, _t78);\n              if (!this.layers[0]._featureFilter.filter(new Qn(this.zoom), _u16, r)) continue;\n              var _c9 = i ? n.evaluate(_u16, {}, r) : void 0,\n                _h6 = {\n                  id: _s46,\n                  properties: _e82.properties,\n                  type: _e82.type,\n                  sourceLayerIndex: _l19,\n                  index: _o19,\n                  geometry: _t78 ? _u16.geometry : Za(_e82),\n                  patterns: {},\n                  sortKey: _c9\n                };\n              a.push(_h6);\n            }\n          } catch (err) {\n            _iterator70.e(err);\n          } finally {\n            _iterator70.f();\n          }\n          i && a.sort(function (t, e) {\n            return t.sortKey - e.sortKey;\n          });\n          for (var _i70 = 0, _a43 = a; _i70 < _a43.length; _i70++) {\n            var _n66 = _a43[_i70];\n            var _i71 = _n66.geometry,\n              _a44 = _n66.index,\n              _s45 = _n66.sourceLayerIndex;\n            if (this.hasPattern) {\n              var _t77 = yo(\"line\", this.layers, _n66, this.zoom, e);\n              this.patternFeatures.push(_t77);\n            } else this.addFeature(_n66, _i71, _a44, r, {});\n            e.featureIndex.insert(t[_a44].feature, _i71, _a44, _s45, this.index);\n          }\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, e, r) {\n          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r);\n        }\n      }, {\n        key: \"addFeatures\",\n        value: function addFeatures(t, e, r) {\n          var _iterator71 = _createForOfIteratorHelper(this.patternFeatures),\n            _step71;\n          try {\n            for (_iterator71.s(); !(_step71 = _iterator71.n()).done;) {\n              var _t79 = _step71.value;\n              this.addFeature(_t79, _t79.geometry, _t79.index, e, r);\n            }\n          } catch (err) {\n            _iterator71.e(err);\n          } finally {\n            _iterator71.f();\n          }\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.layoutVertexArray.length;\n        }\n      }, {\n        key: \"uploadPending\",\n        value: function uploadPending() {\n          return !this.uploaded || this.programConfigurations.needsUpload;\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.uploaded || (0 !== this.layoutVertexArray2.length && (this.layoutVertexBuffer2 = t.createVertexBuffer(this.layoutVertexArray2, Ko)), this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, No), this.indexBuffer = t.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t), this.uploaded = !0;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());\n        }\n      }, {\n        key: \"lineFeatureClips\",\n        value: function lineFeatureClips(t) {\n          if (t.properties && Object.prototype.hasOwnProperty.call(t.properties, \"mapbox_clip_start\") && Object.prototype.hasOwnProperty.call(t.properties, \"mapbox_clip_end\")) return {\n            start: +t.properties.mapbox_clip_start,\n            end: +t.properties.mapbox_clip_end\n          };\n        }\n      }, {\n        key: \"addFeature\",\n        value: function addFeature(t, e, r, n, i) {\n          var a = this.layers[0].layout,\n            s = a.get(\"line-join\").evaluate(t, {}),\n            o = a.get(\"line-cap\"),\n            l = a.get(\"line-miter-limit\"),\n            u = a.get(\"line-round-limit\");\n          this.lineClips = this.lineFeatureClips(t);\n          var _iterator72 = _createForOfIteratorHelper(e),\n            _step72;\n          try {\n            for (_iterator72.s(); !(_step72 = _iterator72.n()).done;) {\n              var _r96 = _step72.value;\n              this.addLine(_r96, t, s, o, l, u);\n            }\n          } catch (err) {\n            _iterator72.e(err);\n          } finally {\n            _iterator72.f();\n          }\n          this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, r, i, n);\n        }\n      }, {\n        key: \"addLine\",\n        value: function addLine(t, e, r, n, i, a) {\n          if (this.distance = 0, this.scaledDistance = 0, this.totalDistance = 0, this.lineClips) {\n            this.lineClipsArray.push(this.lineClips);\n            for (var _e83 = 0; _e83 < t.length - 1; _e83++) this.totalDistance += t[_e83].dist(t[_e83 + 1]);\n            this.updateScaledDistance(), this.maxLineLength = Math.max(this.maxLineLength, this.totalDistance);\n          }\n          var s = \"Polygon\" === Go[e.type];\n          var o = t.length;\n          for (; o >= 2 && t[o - 1].equals(t[o - 2]);) o--;\n          var l = 0;\n          for (; l < o - 1 && t[l].equals(t[l + 1]);) l++;\n          if (o < (s ? 3 : 2)) return;\n          \"bevel\" === r && (i = 1.05);\n          var u = this.overscaling <= 16 ? 122880 / (512 * this.overscaling) : 0,\n            c = this.segments.prepareSegment(10 * o, this.layoutVertexArray, this.indexArray);\n          var h, p, f, d, y;\n          this.e1 = this.e2 = -1, s && (h = t[o - 2], y = t[l].sub(h)._unit()._perp());\n          for (var _e84 = l; _e84 < o; _e84++) {\n            if (f = _e84 === o - 1 ? s ? t[l + 1] : void 0 : t[_e84 + 1], f && t[_e84].equals(f)) continue;\n            y && (d = y), h && (p = h), h = t[_e84], y = f ? f.sub(h)._unit()._perp() : d, d = d || y;\n            var _m2 = d.add(y);\n            0 === _m2.x && 0 === _m2.y || _m2._unit();\n            var _g2 = d.x * y.x + d.y * y.y,\n              _x2 = _m2.x * y.x + _m2.y * y.y,\n              _v = 0 !== _x2 ? 1 / _x2 : 1 / 0,\n              _b = 2 * Math.sqrt(2 - 2 * _x2),\n              _w = _x2 < Jo && p && f,\n              _2 = d.x * y.y - d.y * y.x > 0;\n            if (_w && _e84 > l) {\n              var _t80 = h.dist(p);\n              if (_t80 > 2 * u) {\n                var _e85 = h.sub(h.sub(p)._mult(u / _t80)._round());\n                this.updateDistance(p, _e85), this.addCurrentVertex(_e85, d, 0, 0, c), p = _e85;\n              }\n            }\n            var _A = p && f;\n            var _k = _A ? r : s ? \"butt\" : n;\n            if (_A && \"round\" === _k && (_v < a ? _k = \"miter\" : _v <= 2 && (_k = \"fakeround\")), \"miter\" === _k && _v > i && (_k = \"bevel\"), \"bevel\" === _k && (_v > 2 && (_k = \"flipbevel\"), _v < i && (_k = \"miter\")), p && this.updateDistance(p, h), \"miter\" === _k) _m2._mult(_v), this.addCurrentVertex(h, _m2, 0, 0, c);else if (\"flipbevel\" === _k) {\n              if (_v > 100) _m2 = y.mult(-1);else {\n                var _t81 = _v * d.add(y).mag() / d.sub(y).mag();\n                _m2._perp()._mult(_t81 * (_2 ? -1 : 1));\n              }\n              this.addCurrentVertex(h, _m2, 0, 0, c), this.addCurrentVertex(h, _m2.mult(-1), 0, 0, c);\n            } else if (\"bevel\" === _k || \"fakeround\" === _k) {\n              var _t82 = -Math.sqrt(_v * _v - 1),\n                _e86 = _2 ? _t82 : 0,\n                _r97 = _2 ? 0 : _t82;\n              if (p && this.addCurrentVertex(h, d, _e86, _r97, c), \"fakeround\" === _k) {\n                var _t83 = Math.round(180 * _b / Math.PI / 20);\n                for (var _e87 = 1; _e87 < _t83; _e87++) {\n                  var _r98 = _e87 / _t83;\n                  if (.5 !== _r98) {\n                    var _t84 = _r98 - .5;\n                    _r98 += _r98 * _t84 * (_r98 - 1) * ((1.0904 + _g2 * (_g2 * (3.55645 - 1.43519 * _g2) - 3.2452)) * _t84 * _t84 + (.848013 + _g2 * (.215638 * _g2 - 1.06021)));\n                  }\n                  var _n67 = y.sub(d)._mult(_r98)._add(d)._unit()._mult(_2 ? -1 : 1);\n                  this.addHalfVertex(h, _n67.x, _n67.y, !1, _2, 0, c);\n                }\n              }\n              f && this.addCurrentVertex(h, y, -_e86, -_r97, c);\n            } else if (\"butt\" === _k) this.addCurrentVertex(h, _m2, 0, 0, c);else if (\"square\" === _k) {\n              var _t85 = p ? 1 : -1;\n              this.addCurrentVertex(h, _m2, _t85, _t85, c);\n            } else \"round\" === _k && (p && (this.addCurrentVertex(h, d, 0, 0, c), this.addCurrentVertex(h, d, 1, 1, c, !0)), f && (this.addCurrentVertex(h, y, -1, -1, c, !0), this.addCurrentVertex(h, y, 0, 0, c)));\n            if (_w && _e84 < o - 1) {\n              var _t86 = h.dist(f);\n              if (_t86 > 2 * u) {\n                var _e88 = h.add(f.sub(h)._mult(u / _t86)._round());\n                this.updateDistance(h, _e88), this.addCurrentVertex(_e88, y, 0, 0, c), h = _e88;\n              }\n            }\n          }\n        }\n      }, {\n        key: \"addCurrentVertex\",\n        value: function addCurrentVertex(t, e, r, n, i) {\n          var a = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : !1;\n          var s = e.y * n - e.x,\n            o = -e.y - e.x * n;\n          this.addHalfVertex(t, e.x + e.y * r, e.y - e.x * r, a, !1, r, i), this.addHalfVertex(t, s, o, a, !0, -n, i), this.distance > Xo / 2 && 0 === this.totalDistance && (this.distance = 0, this.addCurrentVertex(t, e, r, n, i, a));\n        }\n      }, {\n        key: \"addHalfVertex\",\n        value: function addHalfVertex(_ref114, r, n, i, a, s, o) {\n          var t = _ref114.x,\n            e = _ref114.y;\n          var l = .5 * (this.lineClips ? this.scaledDistance * (Xo - 1) : this.scaledDistance);\n          this.layoutVertexArray.emplaceBack((t << 1) + (i ? 1 : 0), (e << 1) + (a ? 1 : 0), Math.round(63 * r) + 128, Math.round(63 * n) + 128, 1 + (0 === s ? 0 : s < 0 ? -1 : 1) | (63 & l) << 2, l >> 6), this.lineClips && this.layoutVertexArray2.emplaceBack((this.scaledDistance - this.lineClips.start) / (this.lineClips.end - this.lineClips.start), this.lineClipsArray.length);\n          var u = o.vertexLength++;\n          this.e1 >= 0 && this.e2 >= 0 && (this.indexArray.emplaceBack(this.e1, this.e2, u), o.primitiveLength++), a ? this.e2 = u : this.e1 = u;\n        }\n      }, {\n        key: \"updateScaledDistance\",\n        value: function updateScaledDistance() {\n          this.scaledDistance = this.lineClips ? this.lineClips.start + (this.lineClips.end - this.lineClips.start) * this.distance / this.totalDistance : this.distance;\n        }\n      }, {\n        key: \"updateDistance\",\n        value: function updateDistance(t, e) {\n          this.distance += t.dist(e), this.updateScaledDistance();\n        }\n      }]);\n      return Yo;\n    }();\n    Mn(\"LineBucket\", Yo, {\n      omit: [\"layers\", \"patternFeatures\"]\n    });\n    var Ho = new fi({\n      \"line-cap\": new li(nt.layout_line[\"line-cap\"]),\n      \"line-join\": new ui(nt.layout_line[\"line-join\"]),\n      \"line-miter-limit\": new li(nt.layout_line[\"line-miter-limit\"]),\n      \"line-round-limit\": new li(nt.layout_line[\"line-round-limit\"]),\n      \"line-sort-key\": new ui(nt.layout_line[\"line-sort-key\"])\n    });\n    var Wo = {\n      paint: new fi({\n        \"line-opacity\": new ui(nt.paint_line[\"line-opacity\"]),\n        \"line-color\": new ui(nt.paint_line[\"line-color\"]),\n        \"line-translate\": new li(nt.paint_line[\"line-translate\"]),\n        \"line-translate-anchor\": new li(nt.paint_line[\"line-translate-anchor\"]),\n        \"line-width\": new ui(nt.paint_line[\"line-width\"]),\n        \"line-gap-width\": new ui(nt.paint_line[\"line-gap-width\"]),\n        \"line-offset\": new ui(nt.paint_line[\"line-offset\"]),\n        \"line-blur\": new ui(nt.paint_line[\"line-blur\"]),\n        \"line-dasharray\": new hi(nt.paint_line[\"line-dasharray\"]),\n        \"line-pattern\": new ci(nt.paint_line[\"line-pattern\"]),\n        \"line-gradient\": new pi(nt.paint_line[\"line-gradient\"])\n      }),\n      layout: Ho\n    };\n    var Qo = new ( /*#__PURE__*/function (_ui2) {\n      _inherits(_class, _ui2);\n      var _super56 = _createSuper(_class);\n      function _class() {\n        _classCallCheck(this, _class);\n        return _super56.apply(this, arguments);\n      }\n      _createClass(_class, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e) {\n          return e = new Qn(Math.floor(e.zoom), {\n            now: e.now,\n            fadeDuration: e.fadeDuration,\n            zoomHistory: e.zoomHistory,\n            transition: e.transition\n          }), _get(_getPrototypeOf(_class.prototype), \"possiblyEvaluate\", this).call(this, t, e);\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, n) {\n          return e = o({}, e, {\n            zoom: Math.floor(e.zoom)\n          }), _get(_getPrototypeOf(_class.prototype), \"evaluate\", this).call(this, t, e, r, n);\n        }\n      }]);\n      return _class;\n    }(ui))(Wo.paint.properties[\"line-width\"].specification);\n    function tl(t, e) {\n      return e > 0 ? e + 2 * t : t;\n    }\n    Qo.useIntegerZoom = !0;\n    var el = vi([{\n        name: \"a_pos_offset\",\n        components: 4,\n        type: \"Int16\"\n      }, {\n        name: \"a_data\",\n        components: 4,\n        type: \"Uint16\"\n      }, {\n        name: \"a_pixeloffset\",\n        components: 4,\n        type: \"Int16\"\n      }], 4),\n      rl = vi([{\n        name: \"a_projected_pos\",\n        components: 3,\n        type: \"Float32\"\n      }], 4);\n    vi([{\n      name: \"a_fade_opacity\",\n      components: 1,\n      type: \"Uint32\"\n    }], 4);\n    var nl = vi([{\n      name: \"a_placed\",\n      components: 2,\n      type: \"Uint8\"\n    }, {\n      name: \"a_shift\",\n      components: 2,\n      type: \"Float32\"\n    }]);\n    vi([{\n      type: \"Int16\",\n      name: \"anchorPointX\"\n    }, {\n      type: \"Int16\",\n      name: \"anchorPointY\"\n    }, {\n      type: \"Int16\",\n      name: \"x1\"\n    }, {\n      type: \"Int16\",\n      name: \"y1\"\n    }, {\n      type: \"Int16\",\n      name: \"x2\"\n    }, {\n      type: \"Int16\",\n      name: \"y2\"\n    }, {\n      type: \"Uint32\",\n      name: \"featureIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"sourceLayerIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"bucketIndex\"\n    }]);\n    var il = vi([{\n        name: \"a_pos\",\n        components: 2,\n        type: \"Int16\"\n      }, {\n        name: \"a_anchor_pos\",\n        components: 2,\n        type: \"Int16\"\n      }, {\n        name: \"a_extrude\",\n        components: 2,\n        type: \"Int16\"\n      }], 4),\n      al = vi([{\n        name: \"a_pos\",\n        components: 2,\n        type: \"Float32\"\n      }, {\n        name: \"a_radius\",\n        components: 1,\n        type: \"Float32\"\n      }, {\n        name: \"a_flags\",\n        components: 2,\n        type: \"Int16\"\n      }], 4);\n    function sl(t, e, r) {\n      return t.sections.forEach(function (t) {\n        t.text = function (t, e, r) {\n          var n = e.layout.get(\"text-transform\").evaluate(r, {});\n          return \"uppercase\" === n ? t = t.toLocaleUpperCase() : \"lowercase\" === n && (t = t.toLocaleLowerCase()), Wn.applyArabicShaping && (t = Wn.applyArabicShaping(t)), t;\n        }(t.text, e, r);\n      }), t;\n    }\n    vi([{\n      name: \"triangle\",\n      components: 3,\n      type: \"Uint16\"\n    }]), vi([{\n      type: \"Int16\",\n      name: \"anchorX\"\n    }, {\n      type: \"Int16\",\n      name: \"anchorY\"\n    }, {\n      type: \"Uint16\",\n      name: \"glyphStartIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"numGlyphs\"\n    }, {\n      type: \"Uint32\",\n      name: \"vertexStartIndex\"\n    }, {\n      type: \"Uint32\",\n      name: \"lineStartIndex\"\n    }, {\n      type: \"Uint32\",\n      name: \"lineLength\"\n    }, {\n      type: \"Uint16\",\n      name: \"segment\"\n    }, {\n      type: \"Uint16\",\n      name: \"lowerSize\"\n    }, {\n      type: \"Uint16\",\n      name: \"upperSize\"\n    }, {\n      type: \"Float32\",\n      name: \"lineOffsetX\"\n    }, {\n      type: \"Float32\",\n      name: \"lineOffsetY\"\n    }, {\n      type: \"Uint8\",\n      name: \"writingMode\"\n    }, {\n      type: \"Uint8\",\n      name: \"placedOrientation\"\n    }, {\n      type: \"Uint8\",\n      name: \"hidden\"\n    }, {\n      type: \"Uint32\",\n      name: \"crossTileID\"\n    }, {\n      type: \"Int16\",\n      name: \"associatedIconIndex\"\n    }]), vi([{\n      type: \"Int16\",\n      name: \"anchorX\"\n    }, {\n      type: \"Int16\",\n      name: \"anchorY\"\n    }, {\n      type: \"Int16\",\n      name: \"rightJustifiedTextSymbolIndex\"\n    }, {\n      type: \"Int16\",\n      name: \"centerJustifiedTextSymbolIndex\"\n    }, {\n      type: \"Int16\",\n      name: \"leftJustifiedTextSymbolIndex\"\n    }, {\n      type: \"Int16\",\n      name: \"verticalPlacedTextSymbolIndex\"\n    }, {\n      type: \"Int16\",\n      name: \"placedIconSymbolIndex\"\n    }, {\n      type: \"Int16\",\n      name: \"verticalPlacedIconSymbolIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"key\"\n    }, {\n      type: \"Uint16\",\n      name: \"textBoxStartIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"textBoxEndIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"verticalTextBoxStartIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"verticalTextBoxEndIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"iconBoxStartIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"iconBoxEndIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"verticalIconBoxStartIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"verticalIconBoxEndIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"featureIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"numHorizontalGlyphVertices\"\n    }, {\n      type: \"Uint16\",\n      name: \"numVerticalGlyphVertices\"\n    }, {\n      type: \"Uint16\",\n      name: \"numIconVertices\"\n    }, {\n      type: \"Uint16\",\n      name: \"numVerticalIconVertices\"\n    }, {\n      type: \"Uint16\",\n      name: \"useRuntimeCollisionCircles\"\n    }, {\n      type: \"Uint32\",\n      name: \"crossTileID\"\n    }, {\n      type: \"Float32\",\n      name: \"textBoxScale\"\n    }, {\n      type: \"Float32\",\n      components: 2,\n      name: \"textOffset\"\n    }, {\n      type: \"Float32\",\n      name: \"collisionCircleDiameter\"\n    }]), vi([{\n      type: \"Float32\",\n      name: \"offsetX\"\n    }]), vi([{\n      type: \"Int16\",\n      name: \"x\"\n    }, {\n      type: \"Int16\",\n      name: \"y\"\n    }, {\n      type: \"Int16\",\n      name: \"tileUnitDistanceFromAnchor\"\n    }]);\n    var ol = {\n      \"!\": \"︕\",\n      \"#\": \"＃\",\n      $: \"＄\",\n      \"%\": \"％\",\n      \"&\": \"＆\",\n      \"(\": \"︵\",\n      \")\": \"︶\",\n      \"*\": \"＊\",\n      \"+\": \"＋\",\n      \",\": \"︐\",\n      \"-\": \"︲\",\n      \".\": \"・\",\n      \"/\": \"／\",\n      \":\": \"︓\",\n      \";\": \"︔\",\n      \"<\": \"︿\",\n      \"=\": \"＝\",\n      \">\": \"﹀\",\n      \"?\": \"︖\",\n      \"@\": \"＠\",\n      \"[\": \"﹇\",\n      \"\\\\\": \"＼\",\n      \"]\": \"﹈\",\n      \"^\": \"＾\",\n      _: \"︳\",\n      \"`\": \"｀\",\n      \"{\": \"︷\",\n      \"|\": \"―\",\n      \"}\": \"︸\",\n      \"~\": \"～\",\n      \"¢\": \"￠\",\n      \"£\": \"￡\",\n      \"¥\": \"￥\",\n      \"¦\": \"￤\",\n      \"¬\": \"￢\",\n      \"¯\": \"￣\",\n      \"–\": \"︲\",\n      \"—\": \"︱\",\n      \"‘\": \"﹃\",\n      \"’\": \"﹄\",\n      \"“\": \"﹁\",\n      \"”\": \"﹂\",\n      \"…\": \"︙\",\n      \"‧\": \"・\",\n      \"₩\": \"￦\",\n      \"、\": \"︑\",\n      \"。\": \"︒\",\n      \"〈\": \"︿\",\n      \"〉\": \"﹀\",\n      \"《\": \"︽\",\n      \"》\": \"︾\",\n      \"「\": \"﹁\",\n      \"」\": \"﹂\",\n      \"『\": \"﹃\",\n      \"』\": \"﹄\",\n      \"【\": \"︻\",\n      \"】\": \"︼\",\n      \"〔\": \"︹\",\n      \"〕\": \"︺\",\n      \"〖\": \"︗\",\n      \"〗\": \"︘\",\n      \"！\": \"︕\",\n      \"（\": \"︵\",\n      \"）\": \"︶\",\n      \"，\": \"︐\",\n      \"－\": \"︲\",\n      \"．\": \"・\",\n      \"：\": \"︓\",\n      \"；\": \"︔\",\n      \"＜\": \"︿\",\n      \"＞\": \"﹀\",\n      \"？\": \"︖\",\n      \"［\": \"﹇\",\n      \"］\": \"﹈\",\n      \"＿\": \"︳\",\n      \"｛\": \"︷\",\n      \"｜\": \"―\",\n      \"｝\": \"︸\",\n      \"｟\": \"︵\",\n      \"｠\": \"︶\",\n      \"｡\": \"︒\",\n      \"｢\": \"﹁\",\n      \"｣\": \"﹂\"\n    };\n    var ll = 24,\n      ul = pl,\n      cl = function cl(t, e, r, n, i) {\n        var a,\n          s,\n          o = 8 * i - n - 1,\n          l = (1 << o) - 1,\n          u = l >> 1,\n          c = -7,\n          h = r ? i - 1 : 0,\n          p = r ? -1 : 1,\n          f = t[e + h];\n        for (h += p, a = f & (1 << -c) - 1, f >>= -c, c += o; c > 0; a = 256 * a + t[e + h], h += p, c -= 8);\n        for (s = a & (1 << -c) - 1, a >>= -c, c += n; c > 0; s = 256 * s + t[e + h], h += p, c -= 8);\n        if (0 === a) a = 1 - u;else {\n          if (a === l) return s ? NaN : 1 / 0 * (f ? -1 : 1);\n          s += Math.pow(2, n), a -= u;\n        }\n        return (f ? -1 : 1) * s * Math.pow(2, a - n);\n      },\n      hl = function hl(t, e, r, n, i, a) {\n        var s,\n          o,\n          l,\n          u = 8 * a - i - 1,\n          c = (1 << u) - 1,\n          h = c >> 1,\n          p = 23 === i ? Math.pow(2, -24) - Math.pow(2, -77) : 0,\n          f = n ? 0 : a - 1,\n          d = n ? 1 : -1,\n          y = e < 0 || 0 === e && 1 / e < 0 ? 1 : 0;\n        for (e = Math.abs(e), isNaN(e) || e === 1 / 0 ? (o = isNaN(e) ? 1 : 0, s = c) : (s = Math.floor(Math.log(e) / Math.LN2), e * (l = Math.pow(2, -s)) < 1 && (s--, l *= 2), (e += s + h >= 1 ? p / l : p * Math.pow(2, 1 - h)) * l >= 2 && (s++, l /= 2), s + h >= c ? (o = 0, s = c) : s + h >= 1 ? (o = (e * l - 1) * Math.pow(2, i), s += h) : (o = e * Math.pow(2, h - 1) * Math.pow(2, i), s = 0)); i >= 8; t[r + f] = 255 & o, f += d, o /= 256, i -= 8);\n        for (s = s << i | o, u += i; u > 0; t[r + f] = 255 & s, f += d, s /= 256, u -= 8);\n        t[r + f - d] |= 128 * y;\n      };\n    function pl(t) {\n      this.buf = ArrayBuffer.isView && ArrayBuffer.isView(t) ? t : new Uint8Array(t || 0), this.pos = 0, this.type = 0, this.length = this.buf.length;\n    }\n    pl.Varint = 0, pl.Fixed64 = 1, pl.Bytes = 2, pl.Fixed32 = 5;\n    var fl,\n      dl = 4294967296,\n      yl = 1 / dl,\n      ml = \"undefined\" == typeof TextDecoder ? null : new TextDecoder(\"utf8\");\n    function gl(t) {\n      return t.type === pl.Bytes ? t.readVarint() + t.pos : t.pos + 1;\n    }\n    function xl(t, e, r) {\n      return r ? 4294967296 * e + (t >>> 0) : 4294967296 * (e >>> 0) + (t >>> 0);\n    }\n    function vl(t, e, r) {\n      var n = e <= 16383 ? 1 : e <= 2097151 ? 2 : e <= 268435455 ? 3 : Math.floor(Math.log(e) / (7 * Math.LN2));\n      r.realloc(n);\n      for (var i = r.pos - 1; i >= t; i--) r.buf[i + n] = r.buf[i];\n    }\n    function bl(t, e) {\n      for (var r = 0; r < t.length; r++) e.writeVarint(t[r]);\n    }\n    function wl(t, e) {\n      for (var r = 0; r < t.length; r++) e.writeSVarint(t[r]);\n    }\n    function _l(t, e) {\n      for (var r = 0; r < t.length; r++) e.writeFloat(t[r]);\n    }\n    function Al(t, e) {\n      for (var r = 0; r < t.length; r++) e.writeDouble(t[r]);\n    }\n    function kl(t, e) {\n      for (var r = 0; r < t.length; r++) e.writeBoolean(t[r]);\n    }\n    function Sl(t, e) {\n      for (var r = 0; r < t.length; r++) e.writeFixed32(t[r]);\n    }\n    function Il(t, e) {\n      for (var r = 0; r < t.length; r++) e.writeSFixed32(t[r]);\n    }\n    function Ml(t, e) {\n      for (var r = 0; r < t.length; r++) e.writeFixed64(t[r]);\n    }\n    function zl(t, e) {\n      for (var r = 0; r < t.length; r++) e.writeSFixed64(t[r]);\n    }\n    function Bl(t, e) {\n      return (t[e] | t[e + 1] << 8 | t[e + 2] << 16) + 16777216 * t[e + 3];\n    }\n    function Cl(t, e, r) {\n      t[r] = e, t[r + 1] = e >>> 8, t[r + 2] = e >>> 16, t[r + 3] = e >>> 24;\n    }\n    function Pl(t, e) {\n      return (t[e] | t[e + 1] << 8 | t[e + 2] << 16) + (t[e + 3] << 24);\n    }\n    function Vl(t, e, r) {\n      1 === t && r.readMessage(El, e);\n    }\n    function El(t, e, r) {\n      if (3 === t) {\n        var _r$readMessage = r.readMessage(Fl, {}),\n          _t87 = _r$readMessage.id,\n          _n68 = _r$readMessage.bitmap,\n          _i72 = _r$readMessage.width,\n          _a45 = _r$readMessage.height,\n          _s47 = _r$readMessage.left,\n          _o20 = _r$readMessage.top,\n          _l20 = _r$readMessage.advance;\n        e.push({\n          id: _t87,\n          bitmap: new zs({\n            width: _i72 + 6,\n            height: _a45 + 6\n          }, _n68),\n          metrics: {\n            width: _i72,\n            height: _a45,\n            left: _s47,\n            top: _o20,\n            advance: _l20\n          }\n        });\n      }\n    }\n    function Fl(t, e, r) {\n      1 === t ? e.id = r.readVarint() : 2 === t ? e.bitmap = r.readBytes() : 3 === t ? e.width = r.readVarint() : 4 === t ? e.height = r.readVarint() : 5 === t ? e.left = r.readSVarint() : 6 === t ? e.top = r.readSVarint() : 7 === t && (e.advance = r.readVarint());\n    }\n    function Tl(t) {\n      var e = 0,\n        r = 0;\n      var _iterator73 = _createForOfIteratorHelper(t),\n        _step73;\n      try {\n        for (_iterator73.s(); !(_step73 = _iterator73.n()).done;) {\n          var _n69 = _step73.value;\n          e += _n69.w * _n69.h, r = Math.max(r, _n69.w);\n        }\n      } catch (err) {\n        _iterator73.e(err);\n      } finally {\n        _iterator73.f();\n      }\n      t.sort(function (t, e) {\n        return e.h - t.h;\n      });\n      var n = [{\n        x: 0,\n        y: 0,\n        w: Math.max(Math.ceil(Math.sqrt(e / .95)), r),\n        h: 1 / 0\n      }];\n      var i = 0,\n        a = 0;\n      var _iterator74 = _createForOfIteratorHelper(t),\n        _step74;\n      try {\n        for (_iterator74.s(); !(_step74 = _iterator74.n()).done;) {\n          var _e89 = _step74.value;\n          for (var _t88 = n.length - 1; _t88 >= 0; _t88--) {\n            var _r99 = n[_t88];\n            if (!(_e89.w > _r99.w || _e89.h > _r99.h)) {\n              if (_e89.x = _r99.x, _e89.y = _r99.y, a = Math.max(a, _e89.y + _e89.h), i = Math.max(i, _e89.x + _e89.w), _e89.w === _r99.w && _e89.h === _r99.h) {\n                var _e90 = n.pop();\n                _t88 < n.length && (n[_t88] = _e90);\n              } else _e89.h === _r99.h ? (_r99.x += _e89.w, _r99.w -= _e89.w) : _e89.w === _r99.w ? (_r99.y += _e89.h, _r99.h -= _e89.h) : (n.push({\n                x: _r99.x + _e89.w,\n                y: _r99.y,\n                w: _r99.w - _e89.w,\n                h: _e89.h\n              }), _r99.y += _e89.h, _r99.h -= _e89.h);\n              break;\n            }\n          }\n        }\n      } catch (err) {\n        _iterator74.e(err);\n      } finally {\n        _iterator74.f();\n      }\n      return {\n        w: i,\n        h: a,\n        fill: e / (i * a) || 0\n      };\n    }\n    pl.prototype = {\n      destroy: function destroy() {\n        this.buf = null;\n      },\n      readFields: function readFields(t, e, r) {\n        for (r = r || this.length; this.pos < r;) {\n          var n = this.readVarint(),\n            i = n >> 3,\n            a = this.pos;\n          this.type = 7 & n, t(i, e, this), this.pos === a && this.skip(n);\n        }\n        return e;\n      },\n      readMessage: function readMessage(t, e) {\n        return this.readFields(t, e, this.readVarint() + this.pos);\n      },\n      readFixed32: function readFixed32() {\n        var t = Bl(this.buf, this.pos);\n        return this.pos += 4, t;\n      },\n      readSFixed32: function readSFixed32() {\n        var t = Pl(this.buf, this.pos);\n        return this.pos += 4, t;\n      },\n      readFixed64: function readFixed64() {\n        var t = Bl(this.buf, this.pos) + Bl(this.buf, this.pos + 4) * dl;\n        return this.pos += 8, t;\n      },\n      readSFixed64: function readSFixed64() {\n        var t = Bl(this.buf, this.pos) + Pl(this.buf, this.pos + 4) * dl;\n        return this.pos += 8, t;\n      },\n      readFloat: function readFloat() {\n        var t = cl(this.buf, this.pos, !0, 23, 4);\n        return this.pos += 4, t;\n      },\n      readDouble: function readDouble() {\n        var t = cl(this.buf, this.pos, !0, 52, 8);\n        return this.pos += 8, t;\n      },\n      readVarint: function readVarint(t) {\n        var e,\n          r,\n          n = this.buf;\n        return e = 127 & (r = n[this.pos++]), r < 128 ? e : (e |= (127 & (r = n[this.pos++])) << 7, r < 128 ? e : (e |= (127 & (r = n[this.pos++])) << 14, r < 128 ? e : (e |= (127 & (r = n[this.pos++])) << 21, r < 128 ? e : function (t, e, r) {\n          var n,\n            i,\n            a = r.buf;\n          if (n = (112 & (i = a[r.pos++])) >> 4, i < 128) return xl(t, n, e);\n          if (n |= (127 & (i = a[r.pos++])) << 3, i < 128) return xl(t, n, e);\n          if (n |= (127 & (i = a[r.pos++])) << 10, i < 128) return xl(t, n, e);\n          if (n |= (127 & (i = a[r.pos++])) << 17, i < 128) return xl(t, n, e);\n          if (n |= (127 & (i = a[r.pos++])) << 24, i < 128) return xl(t, n, e);\n          if (n |= (1 & (i = a[r.pos++])) << 31, i < 128) return xl(t, n, e);\n          throw new Error(\"Expected varint not more than 10 bytes\");\n        }(e |= (15 & (r = n[this.pos])) << 28, t, this))));\n      },\n      readVarint64: function readVarint64() {\n        return this.readVarint(!0);\n      },\n      readSVarint: function readSVarint() {\n        var t = this.readVarint();\n        return t % 2 == 1 ? (t + 1) / -2 : t / 2;\n      },\n      readBoolean: function readBoolean() {\n        return Boolean(this.readVarint());\n      },\n      readString: function readString() {\n        var t = this.readVarint() + this.pos,\n          e = this.pos;\n        return this.pos = t, t - e >= 12 && ml ? function (t, e, r) {\n          return ml.decode(t.subarray(e, r));\n        }(this.buf, e, t) : function (t, e, r) {\n          for (var n = \"\", i = e; i < r;) {\n            var a,\n              s,\n              o,\n              l = t[i],\n              u = null,\n              c = l > 239 ? 4 : l > 223 ? 3 : l > 191 ? 2 : 1;\n            if (i + c > r) break;\n            1 === c ? l < 128 && (u = l) : 2 === c ? 128 == (192 & (a = t[i + 1])) && (u = (31 & l) << 6 | 63 & a) <= 127 && (u = null) : 3 === c ? (s = t[i + 2], 128 == (192 & (a = t[i + 1])) && 128 == (192 & s) && ((u = (15 & l) << 12 | (63 & a) << 6 | 63 & s) <= 2047 || u >= 55296 && u <= 57343) && (u = null)) : 4 === c && (s = t[i + 2], o = t[i + 3], 128 == (192 & (a = t[i + 1])) && 128 == (192 & s) && 128 == (192 & o) && ((u = (15 & l) << 18 | (63 & a) << 12 | (63 & s) << 6 | 63 & o) <= 65535 || u >= 1114112) && (u = null)), null === u ? (u = 65533, c = 1) : u > 65535 && (u -= 65536, n += String.fromCharCode(u >>> 10 & 1023 | 55296), u = 56320 | 1023 & u), n += String.fromCharCode(u), i += c;\n          }\n          return n;\n        }(this.buf, e, t);\n      },\n      readBytes: function readBytes() {\n        var t = this.readVarint() + this.pos,\n          e = this.buf.subarray(this.pos, t);\n        return this.pos = t, e;\n      },\n      readPackedVarint: function readPackedVarint(t, e) {\n        if (this.type !== pl.Bytes) return t.push(this.readVarint(e));\n        var r = gl(this);\n        for (t = t || []; this.pos < r;) t.push(this.readVarint(e));\n        return t;\n      },\n      readPackedSVarint: function readPackedSVarint(t) {\n        if (this.type !== pl.Bytes) return t.push(this.readSVarint());\n        var e = gl(this);\n        for (t = t || []; this.pos < e;) t.push(this.readSVarint());\n        return t;\n      },\n      readPackedBoolean: function readPackedBoolean(t) {\n        if (this.type !== pl.Bytes) return t.push(this.readBoolean());\n        var e = gl(this);\n        for (t = t || []; this.pos < e;) t.push(this.readBoolean());\n        return t;\n      },\n      readPackedFloat: function readPackedFloat(t) {\n        if (this.type !== pl.Bytes) return t.push(this.readFloat());\n        var e = gl(this);\n        for (t = t || []; this.pos < e;) t.push(this.readFloat());\n        return t;\n      },\n      readPackedDouble: function readPackedDouble(t) {\n        if (this.type !== pl.Bytes) return t.push(this.readDouble());\n        var e = gl(this);\n        for (t = t || []; this.pos < e;) t.push(this.readDouble());\n        return t;\n      },\n      readPackedFixed32: function readPackedFixed32(t) {\n        if (this.type !== pl.Bytes) return t.push(this.readFixed32());\n        var e = gl(this);\n        for (t = t || []; this.pos < e;) t.push(this.readFixed32());\n        return t;\n      },\n      readPackedSFixed32: function readPackedSFixed32(t) {\n        if (this.type !== pl.Bytes) return t.push(this.readSFixed32());\n        var e = gl(this);\n        for (t = t || []; this.pos < e;) t.push(this.readSFixed32());\n        return t;\n      },\n      readPackedFixed64: function readPackedFixed64(t) {\n        if (this.type !== pl.Bytes) return t.push(this.readFixed64());\n        var e = gl(this);\n        for (t = t || []; this.pos < e;) t.push(this.readFixed64());\n        return t;\n      },\n      readPackedSFixed64: function readPackedSFixed64(t) {\n        if (this.type !== pl.Bytes) return t.push(this.readSFixed64());\n        var e = gl(this);\n        for (t = t || []; this.pos < e;) t.push(this.readSFixed64());\n        return t;\n      },\n      skip: function skip(t) {\n        var e = 7 & t;\n        if (e === pl.Varint) for (; this.buf[this.pos++] > 127;);else if (e === pl.Bytes) this.pos = this.readVarint() + this.pos;else if (e === pl.Fixed32) this.pos += 4;else {\n          if (e !== pl.Fixed64) throw new Error(\"Unimplemented type: \" + e);\n          this.pos += 8;\n        }\n      },\n      writeTag: function writeTag(t, e) {\n        this.writeVarint(t << 3 | e);\n      },\n      realloc: function realloc(t) {\n        for (var e = this.length || 16; e < this.pos + t;) e *= 2;\n        if (e !== this.length) {\n          var r = new Uint8Array(e);\n          r.set(this.buf), this.buf = r, this.length = e;\n        }\n      },\n      finish: function finish() {\n        return this.length = this.pos, this.pos = 0, this.buf.subarray(0, this.length);\n      },\n      writeFixed32: function writeFixed32(t) {\n        this.realloc(4), Cl(this.buf, t, this.pos), this.pos += 4;\n      },\n      writeSFixed32: function writeSFixed32(t) {\n        this.realloc(4), Cl(this.buf, t, this.pos), this.pos += 4;\n      },\n      writeFixed64: function writeFixed64(t) {\n        this.realloc(8), Cl(this.buf, -1 & t, this.pos), Cl(this.buf, Math.floor(t * yl), this.pos + 4), this.pos += 8;\n      },\n      writeSFixed64: function writeSFixed64(t) {\n        this.realloc(8), Cl(this.buf, -1 & t, this.pos), Cl(this.buf, Math.floor(t * yl), this.pos + 4), this.pos += 8;\n      },\n      writeVarint: function writeVarint(t) {\n        (t = +t || 0) > 268435455 || t < 0 ? function (t, e) {\n          var r, n;\n          if (t >= 0 ? (r = t % 4294967296 | 0, n = t / 4294967296 | 0) : (n = ~(-t / 4294967296), 4294967295 ^ (r = ~(-t % 4294967296)) ? r = r + 1 | 0 : (r = 0, n = n + 1 | 0)), t >= 0x10000000000000000 || t < -0x10000000000000000) throw new Error(\"Given varint doesn't fit into 10 bytes\");\n          e.realloc(10), function (t, e, r) {\n            r.buf[r.pos++] = 127 & t | 128, t >>>= 7, r.buf[r.pos++] = 127 & t | 128, t >>>= 7, r.buf[r.pos++] = 127 & t | 128, t >>>= 7, r.buf[r.pos++] = 127 & t | 128, r.buf[r.pos] = 127 & (t >>>= 7);\n          }(r, 0, e), function (t, e) {\n            var r = (7 & t) << 4;\n            e.buf[e.pos++] |= r | ((t >>>= 3) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t)))));\n          }(n, e);\n        }(t, this) : (this.realloc(4), this.buf[this.pos++] = 127 & t | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = 127 & (t >>>= 7) | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = 127 & (t >>>= 7) | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = t >>> 7 & 127))));\n      },\n      writeSVarint: function writeSVarint(t) {\n        this.writeVarint(t < 0 ? 2 * -t - 1 : 2 * t);\n      },\n      writeBoolean: function writeBoolean(t) {\n        this.writeVarint(Boolean(t));\n      },\n      writeString: function writeString(t) {\n        t = String(t), this.realloc(4 * t.length), this.pos++;\n        var e = this.pos;\n        this.pos = function (t, e, r) {\n          for (var n, i, a = 0; a < e.length; a++) {\n            if ((n = e.charCodeAt(a)) > 55295 && n < 57344) {\n              if (!i) {\n                n > 56319 || a + 1 === e.length ? (t[r++] = 239, t[r++] = 191, t[r++] = 189) : i = n;\n                continue;\n              }\n              if (n < 56320) {\n                t[r++] = 239, t[r++] = 191, t[r++] = 189, i = n;\n                continue;\n              }\n              n = i - 55296 << 10 | n - 56320 | 65536, i = null;\n            } else i && (t[r++] = 239, t[r++] = 191, t[r++] = 189, i = null);\n            n < 128 ? t[r++] = n : (n < 2048 ? t[r++] = n >> 6 | 192 : (n < 65536 ? t[r++] = n >> 12 | 224 : (t[r++] = n >> 18 | 240, t[r++] = n >> 12 & 63 | 128), t[r++] = n >> 6 & 63 | 128), t[r++] = 63 & n | 128);\n          }\n          return r;\n        }(this.buf, t, this.pos);\n        var r = this.pos - e;\n        r >= 128 && vl(e, r, this), this.pos = e - 1, this.writeVarint(r), this.pos += r;\n      },\n      writeFloat: function writeFloat(t) {\n        this.realloc(4), hl(this.buf, t, this.pos, !0, 23, 4), this.pos += 4;\n      },\n      writeDouble: function writeDouble(t) {\n        this.realloc(8), hl(this.buf, t, this.pos, !0, 52, 8), this.pos += 8;\n      },\n      writeBytes: function writeBytes(t) {\n        var e = t.length;\n        this.writeVarint(e), this.realloc(e);\n        for (var r = 0; r < e; r++) this.buf[this.pos++] = t[r];\n      },\n      writeRawMessage: function writeRawMessage(t, e) {\n        this.pos++;\n        var r = this.pos;\n        t(e, this);\n        var n = this.pos - r;\n        n >= 128 && vl(r, n, this), this.pos = r - 1, this.writeVarint(n), this.pos += n;\n      },\n      writeMessage: function writeMessage(t, e, r) {\n        this.writeTag(t, pl.Bytes), this.writeRawMessage(e, r);\n      },\n      writePackedVarint: function writePackedVarint(t, e) {\n        e.length && this.writeMessage(t, bl, e);\n      },\n      writePackedSVarint: function writePackedSVarint(t, e) {\n        e.length && this.writeMessage(t, wl, e);\n      },\n      writePackedBoolean: function writePackedBoolean(t, e) {\n        e.length && this.writeMessage(t, kl, e);\n      },\n      writePackedFloat: function writePackedFloat(t, e) {\n        e.length && this.writeMessage(t, _l, e);\n      },\n      writePackedDouble: function writePackedDouble(t, e) {\n        e.length && this.writeMessage(t, Al, e);\n      },\n      writePackedFixed32: function writePackedFixed32(t, e) {\n        e.length && this.writeMessage(t, Sl, e);\n      },\n      writePackedSFixed32: function writePackedSFixed32(t, e) {\n        e.length && this.writeMessage(t, Il, e);\n      },\n      writePackedFixed64: function writePackedFixed64(t, e) {\n        e.length && this.writeMessage(t, Ml, e);\n      },\n      writePackedSFixed64: function writePackedSFixed64(t, e) {\n        e.length && this.writeMessage(t, zl, e);\n      },\n      writeBytesField: function writeBytesField(t, e) {\n        this.writeTag(t, pl.Bytes), this.writeBytes(e);\n      },\n      writeFixed32Field: function writeFixed32Field(t, e) {\n        this.writeTag(t, pl.Fixed32), this.writeFixed32(e);\n      },\n      writeSFixed32Field: function writeSFixed32Field(t, e) {\n        this.writeTag(t, pl.Fixed32), this.writeSFixed32(e);\n      },\n      writeFixed64Field: function writeFixed64Field(t, e) {\n        this.writeTag(t, pl.Fixed64), this.writeFixed64(e);\n      },\n      writeSFixed64Field: function writeSFixed64Field(t, e) {\n        this.writeTag(t, pl.Fixed64), this.writeSFixed64(e);\n      },\n      writeVarintField: function writeVarintField(t, e) {\n        this.writeTag(t, pl.Varint), this.writeVarint(e);\n      },\n      writeSVarintField: function writeSVarintField(t, e) {\n        this.writeTag(t, pl.Varint), this.writeSVarint(e);\n      },\n      writeStringField: function writeStringField(t, e) {\n        this.writeTag(t, pl.Bytes), this.writeString(e);\n      },\n      writeFloatField: function writeFloatField(t, e) {\n        this.writeTag(t, pl.Fixed32), this.writeFloat(e);\n      },\n      writeDoubleField: function writeDoubleField(t, e) {\n        this.writeTag(t, pl.Fixed64), this.writeDouble(e);\n      },\n      writeBooleanField: function writeBooleanField(t, e) {\n        this.writeVarintField(t, Boolean(e));\n      }\n    };\n    var Ll = /*#__PURE__*/function () {\n      function Ll(t, _ref115) {\n        var e = _ref115.pixelRatio,\n          r = _ref115.version,\n          n = _ref115.stretchX,\n          i = _ref115.stretchY,\n          a = _ref115.content;\n        _classCallCheck(this, Ll);\n        this.paddedRect = t, this.pixelRatio = e, this.stretchX = n, this.stretchY = i, this.content = a, this.version = r;\n      }\n      _createClass(Ll, [{\n        key: \"tl\",\n        get: function get() {\n          return [this.paddedRect.x + 1, this.paddedRect.y + 1];\n        }\n      }, {\n        key: \"br\",\n        get: function get() {\n          return [this.paddedRect.x + this.paddedRect.w - 1, this.paddedRect.y + this.paddedRect.h - 1];\n        }\n      }, {\n        key: \"tlbr\",\n        get: function get() {\n          return this.tl.concat(this.br);\n        }\n      }, {\n        key: \"displaySize\",\n        get: function get() {\n          return [(this.paddedRect.w - 2) / this.pixelRatio, (this.paddedRect.h - 2) / this.pixelRatio];\n        }\n      }]);\n      return Ll;\n    }();\n    var Dl = /*#__PURE__*/function () {\n      function Dl(t, e) {\n        _classCallCheck(this, Dl);\n        var r = {},\n          n = {};\n        this.haveRenderCallbacks = [];\n        var i = [];\n        this.addImages(t, r, i), this.addImages(e, n, i);\n        var _Tl = Tl(i),\n          a = _Tl.w,\n          s = _Tl.h,\n          o = new Bs({\n            width: a || 1,\n            height: s || 1\n          });\n        for (var _e91 in t) {\n          var _n70 = t[_e91],\n            _i73 = r[_e91].paddedRect;\n          Bs.copy(_n70.data, o, {\n            x: 0,\n            y: 0\n          }, {\n            x: _i73.x + 1,\n            y: _i73.y + 1\n          }, _n70.data);\n        }\n        for (var _t89 in e) {\n          var _r100 = e[_t89],\n            _i74 = n[_t89].paddedRect,\n            _a46 = _i74.x + 1,\n            _s48 = _i74.y + 1,\n            _l21 = _r100.data.width,\n            _u17 = _r100.data.height;\n          Bs.copy(_r100.data, o, {\n            x: 0,\n            y: 0\n          }, {\n            x: _a46,\n            y: _s48\n          }, _r100.data), Bs.copy(_r100.data, o, {\n            x: 0,\n            y: _u17 - 1\n          }, {\n            x: _a46,\n            y: _s48 - 1\n          }, {\n            width: _l21,\n            height: 1\n          }), Bs.copy(_r100.data, o, {\n            x: 0,\n            y: 0\n          }, {\n            x: _a46,\n            y: _s48 + _u17\n          }, {\n            width: _l21,\n            height: 1\n          }), Bs.copy(_r100.data, o, {\n            x: _l21 - 1,\n            y: 0\n          }, {\n            x: _a46 - 1,\n            y: _s48\n          }, {\n            width: 1,\n            height: _u17\n          }), Bs.copy(_r100.data, o, {\n            x: 0,\n            y: 0\n          }, {\n            x: _a46 + _l21,\n            y: _s48\n          }, {\n            width: 1,\n            height: _u17\n          });\n        }\n        this.image = o, this.iconPositions = r, this.patternPositions = n;\n      }\n      _createClass(Dl, [{\n        key: \"addImages\",\n        value: function addImages(t, e, r) {\n          for (var _n71 in t) {\n            var _i75 = t[_n71],\n              _a47 = {\n                x: 0,\n                y: 0,\n                w: _i75.data.width + 2,\n                h: _i75.data.height + 2\n              };\n            r.push(_a47), e[_n71] = new Ll(_a47, _i75), _i75.hasRenderCallback && this.haveRenderCallbacks.push(_n71);\n          }\n        }\n      }, {\n        key: \"patchUpdatedImages\",\n        value: function patchUpdatedImages(t, e) {\n          t.dispatchRenderCallbacks(this.haveRenderCallbacks);\n          for (var _r101 in t.updatedImages) this.patchUpdatedImage(this.iconPositions[_r101], t.getImage(_r101), e), this.patchUpdatedImage(this.patternPositions[_r101], t.getImage(_r101), e);\n        }\n      }, {\n        key: \"patchUpdatedImage\",\n        value: function patchUpdatedImage(t, e, r) {\n          if (!t || !e) return;\n          if (t.version === e.version) return;\n          t.version = e.version;\n          var _t$tl = _slicedToArray(t.tl, 2),\n            n = _t$tl[0],\n            i = _t$tl[1];\n          r.update(e.data, void 0, {\n            x: n,\n            y: i\n          });\n        }\n      }]);\n      return Dl;\n    }();\n    Mn(\"ImagePosition\", Ll), Mn(\"ImageAtlas\", Dl), t.WritingMode = void 0, (fl = t.WritingMode || (t.WritingMode = {}))[fl.none = 0] = \"none\", fl[fl.horizontal = 1] = \"horizontal\", fl[fl.vertical = 2] = \"vertical\", fl[fl.horizontalOnly = 3] = \"horizontalOnly\";\n    var $l = -17;\n    var Rl = /*#__PURE__*/function () {\n      function Rl() {\n        _classCallCheck(this, Rl);\n        this.scale = 1, this.fontStack = \"\", this.imageName = null;\n      }\n      _createClass(Rl, null, [{\n        key: \"forText\",\n        value: function forText(t, e) {\n          var r = new Rl();\n          return r.scale = t || 1, r.fontStack = e, r;\n        }\n      }, {\n        key: \"forImage\",\n        value: function forImage(t) {\n          var e = new Rl();\n          return e.imageName = t, e;\n        }\n      }]);\n      return Rl;\n    }();\n    var Ol = /*#__PURE__*/function () {\n      function Ol() {\n        _classCallCheck(this, Ol);\n        this.text = \"\", this.sectionIndex = [], this.sections = [], this.imageSectionID = null;\n      }\n      _createClass(Ol, [{\n        key: \"length\",\n        value: function length() {\n          return this.text.length;\n        }\n      }, {\n        key: \"getSection\",\n        value: function getSection(t) {\n          return this.sections[this.sectionIndex[t]];\n        }\n      }, {\n        key: \"getSectionIndex\",\n        value: function getSectionIndex(t) {\n          return this.sectionIndex[t];\n        }\n      }, {\n        key: \"getCharCode\",\n        value: function getCharCode(t) {\n          return this.text.charCodeAt(t);\n        }\n      }, {\n        key: \"verticalizePunctuation\",\n        value: function verticalizePunctuation() {\n          this.text = function (t) {\n            var e = \"\";\n            for (var _r102 = 0; _r102 < t.length; _r102++) {\n              var _n72 = t.charCodeAt(_r102 + 1) || null,\n                _i76 = t.charCodeAt(_r102 - 1) || null;\n              e += _n72 && Dn(_n72) && !ol[t[_r102 + 1]] || _i76 && Dn(_i76) && !ol[t[_r102 - 1]] || !ol[t[_r102]] ? t[_r102] : ol[t[_r102]];\n            }\n            return e;\n          }(this.text);\n        }\n      }, {\n        key: \"trim\",\n        value: function trim() {\n          var t = 0;\n          for (var _e92 = 0; _e92 < this.text.length && ql[this.text.charCodeAt(_e92)]; _e92++) t++;\n          var e = this.text.length;\n          for (var _r103 = this.text.length - 1; _r103 >= 0 && _r103 >= t && ql[this.text.charCodeAt(_r103)]; _r103--) e--;\n          this.text = this.text.substring(t, e), this.sectionIndex = this.sectionIndex.slice(t, e);\n        }\n      }, {\n        key: \"substring\",\n        value: function substring(t, e) {\n          var r = new Ol();\n          return r.text = this.text.substring(t, e), r.sectionIndex = this.sectionIndex.slice(t, e), r.sections = this.sections, r;\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          return this.text;\n        }\n      }, {\n        key: \"getMaxScale\",\n        value: function getMaxScale() {\n          var _this8 = this;\n          return this.sectionIndex.reduce(function (t, e) {\n            return Math.max(t, _this8.sections[e].scale);\n          }, 0);\n        }\n      }, {\n        key: \"addTextSection\",\n        value: function addTextSection(t, e) {\n          this.text += t.text, this.sections.push(Rl.forText(t.scale, t.fontStack || e));\n          var r = this.sections.length - 1;\n          for (var _e93 = 0; _e93 < t.text.length; ++_e93) this.sectionIndex.push(r);\n        }\n      }, {\n        key: \"addImageSection\",\n        value: function addImageSection(t) {\n          var e = t.image ? t.image.name : \"\";\n          if (0 === e.length) return void d(\"Can't add FormattedSection with an empty image.\");\n          var r = this.getNextImageSectionCharCode();\n          r ? (this.text += String.fromCharCode(r), this.sections.push(Rl.forImage(e)), this.sectionIndex.push(this.sections.length - 1)) : d(\"Reached maximum number of images 6401\");\n        }\n      }, {\n        key: \"getNextImageSectionCharCode\",\n        value: function getNextImageSectionCharCode() {\n          return this.imageSectionID ? this.imageSectionID >= 63743 ? null : ++this.imageSectionID : (this.imageSectionID = 57344, this.imageSectionID);\n        }\n      }], [{\n        key: \"fromFeature\",\n        value: function fromFeature(t, e) {\n          var r = new Ol();\n          for (var _n73 = 0; _n73 < t.sections.length; _n73++) {\n            var _i77 = t.sections[_n73];\n            _i77.image ? r.addImageSection(_i77) : r.addTextSection(_i77, e);\n          }\n          return r;\n        }\n      }]);\n      return Ol;\n    }();\n    function Ul(e, r, n, i, a, s, o, l, u, c, h, p, f, d, y, m) {\n      var g = Ol.fromFeature(e, a);\n      var x;\n      p === t.WritingMode.vertical && g.verticalizePunctuation();\n      var v = Wn.processBidirectionalText,\n        b = Wn.processStyledBidirectionalText;\n      if (v && 1 === g.sections.length) {\n        x = [];\n        var _t90 = v(g.toString(), Xl(g, c, s, r, i, d, y));\n        var _iterator75 = _createForOfIteratorHelper(_t90),\n          _step75;\n        try {\n          for (_iterator75.s(); !(_step75 = _iterator75.n()).done;) {\n            var _e94 = _step75.value;\n            var _t91 = new Ol();\n            _t91.text = _e94, _t91.sections = g.sections;\n            for (var _r104 = 0; _r104 < _e94.length; _r104++) _t91.sectionIndex.push(0);\n            x.push(_t91);\n          }\n        } catch (err) {\n          _iterator75.e(err);\n        } finally {\n          _iterator75.f();\n        }\n      } else if (b) {\n        x = [];\n        var _t92 = b(g.text, g.sectionIndex, Xl(g, c, s, r, i, d, y));\n        var _iterator76 = _createForOfIteratorHelper(_t92),\n          _step76;\n        try {\n          for (_iterator76.s(); !(_step76 = _iterator76.n()).done;) {\n            var _e95 = _step76.value;\n            var _t93 = new Ol();\n            _t93.text = _e95[0], _t93.sectionIndex = _e95[1], _t93.sections = g.sections, x.push(_t93);\n          }\n        } catch (err) {\n          _iterator76.e(err);\n        } finally {\n          _iterator76.f();\n        }\n      } else x = function (t, e) {\n        var r = [],\n          n = t.text;\n        var i = 0;\n        var _iterator77 = _createForOfIteratorHelper(e),\n          _step77;\n        try {\n          for (_iterator77.s(); !(_step77 = _iterator77.n()).done;) {\n            var _n74 = _step77.value;\n            r.push(t.substring(i, _n74)), i = _n74;\n          }\n        } catch (err) {\n          _iterator77.e(err);\n        } finally {\n          _iterator77.f();\n        }\n        return i < n.length && r.push(t.substring(i, n.length)), r;\n      }(g, Xl(g, c, s, r, i, d, y));\n      var w = [],\n        _ = {\n          positionedLines: w,\n          text: g.toString(),\n          top: h[1],\n          bottom: h[1],\n          left: h[0],\n          right: h[0],\n          writingMode: p,\n          iconsInText: !1,\n          verticalizable: !1\n        };\n      return function (e, r, n, i, a, s, o, l, u, c, h, p) {\n        var f = 0,\n          d = $l,\n          y = 0,\n          m = 0;\n        var g = \"right\" === l ? 1 : \"left\" === l ? 0 : .5;\n        var x = 0;\n        var _iterator78 = _createForOfIteratorHelper(a),\n          _step78;\n        try {\n          for (_iterator78.s(); !(_step78 = _iterator78.n()).done;) {\n            var _o21 = _step78.value;\n            _o21.trim();\n            var _a48 = _o21.getMaxScale(),\n              _l22 = (_a48 - 1) * ll,\n              _b2 = {\n                positionedGlyphs: [],\n                lineOffset: 0\n              };\n            e.positionedLines[x] = _b2;\n            var _w2 = _b2.positionedGlyphs;\n            var _3 = 0;\n            if (!_o21.length()) {\n              d += s, ++x;\n              continue;\n            }\n            for (var _s49 = 0; _s49 < _o21.length(); _s49++) {\n              var _y2 = _o21.getSection(_s49),\n                _m3 = _o21.getSectionIndex(_s49),\n                _g3 = _o21.getCharCode(_s49);\n              var _x3 = 0,\n                _b3 = null,\n                _A2 = null,\n                _k2 = null,\n                _S = ll;\n              var _I = !(u === t.WritingMode.horizontal || !h && !Ln(_g3) || h && (ql[_g3] || (v = _g3, Vn.Arabic(v) || Vn[\"Arabic Supplement\"](v) || Vn[\"Arabic Extended-A\"](v) || Vn[\"Arabic Presentation Forms-A\"](v) || Vn[\"Arabic Presentation Forms-B\"](v))));\n              if (_y2.imageName) {\n                var _t95 = i[_y2.imageName];\n                if (!_t95) continue;\n                _k2 = _y2.imageName, e.iconsInText = e.iconsInText || !0, _A2 = _t95.paddedRect;\n                var _r105 = _t95.displaySize;\n                _y2.scale = _y2.scale * ll / p, _b3 = {\n                  width: _r105[0],\n                  height: _r105[1],\n                  left: 1,\n                  top: -3,\n                  advance: _I ? _r105[1] : _r105[0]\n                }, _x3 = _l22 + (ll - _r105[1] * _y2.scale), _S = _b3.advance;\n                var _n75 = _I ? _r105[0] * _y2.scale - ll * _a48 : _r105[1] * _y2.scale - ll * _a48;\n                _n75 > 0 && _n75 > _3 && (_3 = _n75);\n              } else {\n                var _t96 = n[_y2.fontStack],\n                  _e97 = _t96 && _t96[_g3];\n                if (_e97 && _e97.rect) _A2 = _e97.rect, _b3 = _e97.metrics;else {\n                  var _t97 = r[_y2.fontStack],\n                    _e98 = _t97 && _t97[_g3];\n                  if (!_e98) continue;\n                  _b3 = _e98.metrics;\n                }\n                _x3 = (_a48 - _y2.scale) * ll;\n              }\n              _I ? (e.verticalizable = !0, _w2.push({\n                glyph: _g3,\n                imageName: _k2,\n                x: f,\n                y: d + _x3,\n                vertical: _I,\n                scale: _y2.scale,\n                fontStack: _y2.fontStack,\n                sectionIndex: _m3,\n                metrics: _b3,\n                rect: _A2\n              }), f += _S * _y2.scale + c) : (_w2.push({\n                glyph: _g3,\n                imageName: _k2,\n                x: f,\n                y: d + _x3,\n                vertical: _I,\n                scale: _y2.scale,\n                fontStack: _y2.fontStack,\n                sectionIndex: _m3,\n                metrics: _b3,\n                rect: _A2\n              }), f += _b3.advance * _y2.scale + c);\n            }\n            0 !== _w2.length && (y = Math.max(f - c, y), Hl(_w2, 0, _w2.length - 1, g, _3)), f = 0;\n            var _A3 = s * _a48 + _3;\n            _b2.lineOffset = Math.max(_3, _l22), d += _A3, m = Math.max(_A3, m), ++x;\n          }\n        } catch (err) {\n          _iterator78.e(err);\n        } finally {\n          _iterator78.f();\n        }\n        var v;\n        var b = d - $l,\n          _Yl = Yl(o),\n          w = _Yl.horizontalAlign,\n          _ = _Yl.verticalAlign;\n        (function (t, e, r, n, i, a, s, o, l) {\n          var u = (e - r) * i;\n          var c = 0;\n          c = a !== s ? -o * n - $l : (-n * l + .5) * s;\n          var _iterator79 = _createForOfIteratorHelper(t),\n            _step79;\n          try {\n            for (_iterator79.s(); !(_step79 = _iterator79.n()).done;) {\n              var _e96 = _step79.value;\n              var _iterator80 = _createForOfIteratorHelper(_e96.positionedGlyphs),\n                _step80;\n              try {\n                for (_iterator80.s(); !(_step80 = _iterator80.n()).done;) {\n                  var _t94 = _step80.value;\n                  _t94.x += u, _t94.y += c;\n                }\n              } catch (err) {\n                _iterator80.e(err);\n              } finally {\n                _iterator80.f();\n              }\n            }\n          } catch (err) {\n            _iterator79.e(err);\n          } finally {\n            _iterator79.f();\n          }\n        })(e.positionedLines, g, w, _, y, m, s, b, a.length), e.top += -_ * b, e.bottom = e.top + b, e.left += -w * y, e.right = e.left + y;\n      }(_, r, n, i, x, o, l, u, p, c, f, m), !function (t) {\n        var _iterator81 = _createForOfIteratorHelper(t),\n          _step81;\n        try {\n          for (_iterator81.s(); !(_step81 = _iterator81.n()).done;) {\n            var _e99 = _step81.value;\n            if (0 !== _e99.positionedGlyphs.length) return !1;\n          }\n        } catch (err) {\n          _iterator81.e(err);\n        } finally {\n          _iterator81.f();\n        }\n        return !0;\n      }(w) && _;\n    }\n    var ql = {\n        9: !0,\n        10: !0,\n        11: !0,\n        12: !0,\n        13: !0,\n        32: !0\n      },\n      jl = {\n        10: !0,\n        32: !0,\n        38: !0,\n        40: !0,\n        41: !0,\n        43: !0,\n        45: !0,\n        47: !0,\n        173: !0,\n        183: !0,\n        8203: !0,\n        8208: !0,\n        8211: !0,\n        8231: !0\n      };\n    function Nl(t, e, r, n, i, a) {\n      if (e.imageName) {\n        var _t98 = n[e.imageName];\n        return _t98 ? _t98.displaySize[0] * e.scale * ll / a + i : 0;\n      }\n      {\n        var _n76 = r[e.fontStack],\n          _a49 = _n76 && _n76[t];\n        return _a49 ? _a49.metrics.advance * e.scale + i : 0;\n      }\n    }\n    function Zl(t, e, r, n) {\n      var i = Math.pow(t - e, 2);\n      return n ? t < e ? i / 2 : 2 * i : i + Math.abs(r) * r;\n    }\n    function Kl(t, e, r) {\n      var n = 0;\n      return 10 === t && (n -= 1e4), r && (n += 150), 40 !== t && 65288 !== t || (n += 50), 41 !== e && 65289 !== e || (n += 50), n;\n    }\n    function Gl(t, e, r, n, i, a) {\n      var s = null,\n        o = Zl(e, r, i, a);\n      var _iterator82 = _createForOfIteratorHelper(n),\n        _step82;\n      try {\n        for (_iterator82.s(); !(_step82 = _iterator82.n()).done;) {\n          var _t99 = _step82.value;\n          var _n77 = Zl(e - _t99.x, r, i, a) + _t99.badness;\n          _n77 <= o && (s = _t99, o = _n77);\n        }\n      } catch (err) {\n        _iterator82.e(err);\n      } finally {\n        _iterator82.f();\n      }\n      return {\n        index: t,\n        x: e,\n        priorBreak: s,\n        badness: o\n      };\n    }\n    function Jl(t) {\n      return t ? Jl(t.priorBreak).concat(t.index) : [];\n    }\n    function Xl(t, e, r, n, i, a, s) {\n      if (\"point\" !== a) return [];\n      if (!t) return [];\n      var o = [],\n        l = function (t, e, r, n, i, a) {\n          var s = 0;\n          for (var _r106 = 0; _r106 < t.length(); _r106++) {\n            var _o22 = t.getSection(_r106);\n            s += Nl(t.getCharCode(_r106), _o22, n, i, e, a);\n          }\n          return s / Math.max(1, Math.ceil(s / r));\n        }(t, e, r, n, i, s),\n        u = t.text.indexOf(\"​\") >= 0;\n      var c = 0;\n      for (var _r107 = 0; _r107 < t.length(); _r107++) {\n        var _a50 = t.getSection(_r107),\n          _p4 = t.getCharCode(_r107);\n        if (ql[_p4] || (c += Nl(_p4, _a50, n, i, e, s)), _r107 < t.length() - 1) {\n          var _e100 = !((h = _p4) < 11904 || !(Vn[\"Bopomofo Extended\"](h) || Vn.Bopomofo(h) || Vn[\"CJK Compatibility Forms\"](h) || Vn[\"CJK Compatibility Ideographs\"](h) || Vn[\"CJK Compatibility\"](h) || Vn[\"CJK Radicals Supplement\"](h) || Vn[\"CJK Strokes\"](h) || Vn[\"CJK Symbols and Punctuation\"](h) || Vn[\"CJK Unified Ideographs Extension A\"](h) || Vn[\"CJK Unified Ideographs\"](h) || Vn[\"Enclosed CJK Letters and Months\"](h) || Vn[\"Halfwidth and Fullwidth Forms\"](h) || Vn.Hiragana(h) || Vn[\"Ideographic Description Characters\"](h) || Vn[\"Kangxi Radicals\"](h) || Vn[\"Katakana Phonetic Extensions\"](h) || Vn.Katakana(h) || Vn[\"Vertical Forms\"](h) || Vn[\"Yi Radicals\"](h) || Vn[\"Yi Syllables\"](h)));\n          (jl[_p4] || _e100 || _a50.imageName) && o.push(Gl(_r107 + 1, c, l, o, Kl(_p4, t.getCharCode(_r107 + 1), _e100 && u), !1));\n        }\n      }\n      var h;\n      return Jl(Gl(t.length(), c, l, o, 0, !0));\n    }\n    function Yl(t) {\n      var e = .5,\n        r = .5;\n      switch (t) {\n        case \"right\":\n        case \"top-right\":\n        case \"bottom-right\":\n          e = 1;\n          break;\n        case \"left\":\n        case \"top-left\":\n        case \"bottom-left\":\n          e = 0;\n      }\n      switch (t) {\n        case \"bottom\":\n        case \"bottom-right\":\n        case \"bottom-left\":\n          r = 1;\n          break;\n        case \"top\":\n        case \"top-right\":\n        case \"top-left\":\n          r = 0;\n      }\n      return {\n        horizontalAlign: e,\n        verticalAlign: r\n      };\n    }\n    function Hl(t, e, r, n, i) {\n      if (!n && !i) return;\n      var a = t[r],\n        s = (t[r].x + a.metrics.advance * a.scale) * n;\n      for (var _n78 = e; _n78 <= r; _n78++) t[_n78].x -= s, t[_n78].y += i;\n    }\n    function Wl(t, e, r) {\n      var _Yl2 = Yl(r),\n        n = _Yl2.horizontalAlign,\n        i = _Yl2.verticalAlign,\n        a = e[0] - t.displaySize[0] * n,\n        s = e[1] - t.displaySize[1] * i;\n      return {\n        image: t,\n        top: s,\n        bottom: s + t.displaySize[1],\n        left: a,\n        right: a + t.displaySize[0]\n      };\n    }\n    function Ql(t, e, r, n, i, a) {\n      var s = t.image;\n      var o;\n      if (s.content) {\n        var _t100 = s.content,\n          _e101 = s.pixelRatio || 1;\n        o = [_t100[0] / _e101, _t100[1] / _e101, s.displaySize[0] - _t100[2] / _e101, s.displaySize[1] - _t100[3] / _e101];\n      }\n      var l = e.left * a,\n        u = e.right * a;\n      var c, h, p, f;\n      \"width\" === r || \"both\" === r ? (f = i[0] + l - n[3], h = i[0] + u + n[1]) : (f = i[0] + (l + u - s.displaySize[0]) / 2, h = f + s.displaySize[0]);\n      var d = e.top * a,\n        y = e.bottom * a;\n      return \"height\" === r || \"both\" === r ? (c = i[1] + d - n[0], p = i[1] + y + n[2]) : (c = i[1] + (d + y - s.displaySize[1]) / 2, p = c + s.displaySize[1]), {\n        image: s,\n        top: c,\n        right: h,\n        bottom: p,\n        left: f,\n        collisionPadding: o\n      };\n    }\n    var tu = 128;\n    function eu(t, e) {\n      var r = e.expression;\n      if (\"constant\" === r.kind) return {\n        kind: \"constant\",\n        layoutSize: r.evaluate(new Qn(t + 1))\n      };\n      if (\"source\" === r.kind) return {\n        kind: \"source\"\n      };\n      {\n        var _e102 = r.zoomStops,\n          _n79 = r.interpolationType;\n        var _i78 = 0;\n        for (; _i78 < _e102.length && _e102[_i78] <= t;) _i78++;\n        _i78 = Math.max(0, _i78 - 1);\n        var _a51 = _i78;\n        for (; _a51 < _e102.length && _e102[_a51] < t + 1;) _a51++;\n        _a51 = Math.min(_e102.length - 1, _a51);\n        var _s50 = _e102[_i78],\n          _o23 = _e102[_a51];\n        return \"composite\" === r.kind ? {\n          kind: \"composite\",\n          minZoom: _s50,\n          maxZoom: _o23,\n          interpolationType: _n79\n        } : {\n          kind: \"camera\",\n          minZoom: _s50,\n          maxZoom: _o23,\n          minSize: r.evaluate(new Qn(_s50)),\n          maxSize: r.evaluate(new Qn(_o23)),\n          interpolationType: _n79\n        };\n      }\n    }\n    var ru = /*#__PURE__*/function (_S2) {\n      _inherits(ru, _S2);\n      var _super57 = _createSuper(ru);\n      function ru(t, e, r, n) {\n        var _this9;\n        _classCallCheck(this, ru);\n        _this9 = _super57.call(this, t, e), _this9.angle = r, void 0 !== n && (_this9.segment = n);\n        return _this9;\n      }\n      _createClass(ru, [{\n        key: \"clone\",\n        value: function clone() {\n          return new ru(this.x, this.y, this.angle, this.segment);\n        }\n      }]);\n      return ru;\n    }(S);\n    function nu(t, e, r, n, i) {\n      if (void 0 === e.segment) return !0;\n      var a = e,\n        s = e.segment + 1,\n        o = 0;\n      for (; o > -r / 2;) {\n        if (s--, s < 0) return !1;\n        o -= t[s].dist(a), a = t[s];\n      }\n      o += t[s].dist(t[s + 1]), s++;\n      var l = [];\n      var u = 0;\n      for (; o < r / 2;) {\n        var _e103 = t[s],\n          _r108 = t[s + 1];\n        if (!_r108) return !1;\n        var _a52 = t[s - 1].angleTo(_e103) - _e103.angleTo(_r108);\n        for (_a52 = Math.abs((_a52 + 3 * Math.PI) % (2 * Math.PI) - Math.PI), l.push({\n          distance: o,\n          angleDelta: _a52\n        }), u += _a52; o - l[0].distance > n;) u -= l.shift().angleDelta;\n        if (u > i) return !1;\n        s++, o += _e103.dist(_r108);\n      }\n      return !0;\n    }\n    function iu(t) {\n      var e = 0;\n      for (var _r109 = 0; _r109 < t.length - 1; _r109++) e += t[_r109].dist(t[_r109 + 1]);\n      return e;\n    }\n    function au(t, e, r) {\n      return t ? .6 * e * r : 0;\n    }\n    function su(t, e) {\n      return Math.max(t ? t.right - t.left : 0, e ? e.right - e.left : 0);\n    }\n    function ou(t, e, r, n, i, a) {\n      var s = au(r, i, a),\n        o = su(r, n) * a;\n      var l = 0;\n      var u = iu(t) / 2;\n      for (var _r110 = 0; _r110 < t.length - 1; _r110++) {\n        var _n80 = t[_r110],\n          _i79 = t[_r110 + 1],\n          _a53 = _n80.dist(_i79);\n        if (l + _a53 > u) {\n          var _c10 = (u - l) / _a53,\n            _h7 = Se(_n80.x, _i79.x, _c10),\n            _p5 = Se(_n80.y, _i79.y, _c10),\n            _f2 = new ru(_h7, _p5, _i79.angleTo(_n80), _r110);\n          return _f2._round(), !s || nu(t, _f2, o, s, e) ? _f2 : void 0;\n        }\n        l += _a53;\n      }\n    }\n    function lu(t, e, r, n, i, a, s, o, l) {\n      var u = au(n, a, s),\n        c = su(n, i),\n        h = c * s,\n        p = 0 === t[0].x || t[0].x === l || 0 === t[0].y || t[0].y === l;\n      return e - h < e / 4 && (e = h + e / 4), uu(t, p ? e / 2 * o % e : (c / 2 + 2 * a) * s * o % e, e, u, r, h, p, !1, l);\n    }\n    function uu(t, e, r, n, i, a, s, o, l) {\n      var u = a / 2,\n        c = iu(t);\n      var h = 0,\n        p = e - r,\n        f = [];\n      for (var _e104 = 0; _e104 < t.length - 1; _e104++) {\n        var _s51 = t[_e104],\n          _o24 = t[_e104 + 1],\n          _d2 = _s51.dist(_o24),\n          _y3 = _o24.angleTo(_s51);\n        for (; p + r < h + _d2;) {\n          p += r;\n          var _m4 = (p - h) / _d2,\n            _g4 = Se(_s51.x, _o24.x, _m4),\n            _x4 = Se(_s51.y, _o24.y, _m4);\n          if (_g4 >= 0 && _g4 < l && _x4 >= 0 && _x4 < l && p - u >= 0 && p + u <= c) {\n            var _r111 = new ru(_g4, _x4, _y3, _e104);\n            _r111._round(), n && !nu(t, _r111, a, n, i) || f.push(_r111);\n          }\n        }\n        h += _d2;\n      }\n      return o || f.length || s || (f = uu(t, h / 2, r, n, i, a, s, !0, l)), f;\n    }\n    function cu(t, e, r, n, i) {\n      var a = [];\n      for (var _s52 = 0; _s52 < t.length; _s52++) {\n        var _o25 = t[_s52];\n        var _l23 = void 0;\n        for (var _t101 = 0; _t101 < _o25.length - 1; _t101++) {\n          var _s53 = _o25[_t101],\n            _u18 = _o25[_t101 + 1];\n          _s53.x < e && _u18.x < e || (_s53.x < e ? _s53 = new S(e, _s53.y + (e - _s53.x) / (_u18.x - _s53.x) * (_u18.y - _s53.y))._round() : _u18.x < e && (_u18 = new S(e, _s53.y + (e - _s53.x) / (_u18.x - _s53.x) * (_u18.y - _s53.y))._round()), _s53.y < r && _u18.y < r || (_s53.y < r ? _s53 = new S(_s53.x + (r - _s53.y) / (_u18.y - _s53.y) * (_u18.x - _s53.x), r)._round() : _u18.y < r && (_u18 = new S(_s53.x + (r - _s53.y) / (_u18.y - _s53.y) * (_u18.x - _s53.x), r)._round()), _s53.x >= n && _u18.x >= n || (_s53.x >= n ? _s53 = new S(n, _s53.y + (n - _s53.x) / (_u18.x - _s53.x) * (_u18.y - _s53.y))._round() : _u18.x >= n && (_u18 = new S(n, _s53.y + (n - _s53.x) / (_u18.x - _s53.x) * (_u18.y - _s53.y))._round()), _s53.y >= i && _u18.y >= i || (_s53.y >= i ? _s53 = new S(_s53.x + (i - _s53.y) / (_u18.y - _s53.y) * (_u18.x - _s53.x), i)._round() : _u18.y >= i && (_u18 = new S(_s53.x + (i - _s53.y) / (_u18.y - _s53.y) * (_u18.x - _s53.x), i)._round()), _l23 && _s53.equals(_l23[_l23.length - 1]) || (_l23 = [_s53], a.push(_l23)), _l23.push(_u18)))));\n        }\n      }\n      return a;\n    }\n    function hu(t, e, r, n) {\n      var i = [],\n        a = t.image,\n        s = a.pixelRatio,\n        o = a.paddedRect.w - 2,\n        l = a.paddedRect.h - 2,\n        u = t.right - t.left,\n        c = t.bottom - t.top,\n        h = a.stretchX || [[0, o]],\n        p = a.stretchY || [[0, l]],\n        f = function f(t, e) {\n          return t + e[1] - e[0];\n        },\n        d = h.reduce(f, 0),\n        y = p.reduce(f, 0),\n        m = o - d,\n        g = l - y;\n      var x = 0,\n        v = d,\n        b = 0,\n        w = y,\n        _ = 0,\n        A = m,\n        k = 0,\n        I = g;\n      if (a.content && n) {\n        var _t102 = a.content;\n        x = pu(h, 0, _t102[0]), b = pu(p, 0, _t102[1]), v = pu(h, _t102[0], _t102[2]), w = pu(p, _t102[1], _t102[3]), _ = _t102[0] - x, k = _t102[1] - b, A = _t102[2] - _t102[0] - v, I = _t102[3] - _t102[1] - w;\n      }\n      var M = function M(n, i, o, l) {\n        var h = du(n.stretch - x, v, u, t.left),\n          p = yu(n.fixed - _, A, n.stretch, d),\n          f = du(i.stretch - b, w, c, t.top),\n          m = yu(i.fixed - k, I, i.stretch, y),\n          g = du(o.stretch - x, v, u, t.left),\n          M = yu(o.fixed - _, A, o.stretch, d),\n          z = du(l.stretch - b, w, c, t.top),\n          B = yu(l.fixed - k, I, l.stretch, y),\n          C = new S(h, f),\n          P = new S(g, f),\n          V = new S(g, z),\n          E = new S(h, z),\n          F = new S(p / s, m / s),\n          T = new S(M / s, B / s),\n          L = e * Math.PI / 180;\n        if (L) {\n          var _t103 = Math.sin(L),\n            _e105 = Math.cos(L),\n            _r112 = [_e105, -_t103, _t103, _e105];\n          C._matMult(_r112), P._matMult(_r112), E._matMult(_r112), V._matMult(_r112);\n        }\n        var D = n.stretch + n.fixed,\n          $ = i.stretch + i.fixed;\n        return {\n          tl: C,\n          tr: P,\n          bl: E,\n          br: V,\n          tex: {\n            x: a.paddedRect.x + 1 + D,\n            y: a.paddedRect.y + 1 + $,\n            w: o.stretch + o.fixed - D,\n            h: l.stretch + l.fixed - $\n          },\n          writingMode: void 0,\n          glyphOffset: [0, 0],\n          sectionIndex: 0,\n          pixelOffsetTL: F,\n          pixelOffsetBR: T,\n          minFontScaleX: A / s / u,\n          minFontScaleY: I / s / c,\n          isSDF: r\n        };\n      };\n      if (n && (a.stretchX || a.stretchY)) {\n        var _t104 = fu(h, m, d),\n          _e106 = fu(p, g, y);\n        for (var _r113 = 0; _r113 < _t104.length - 1; _r113++) {\n          var _n81 = _t104[_r113],\n            _a54 = _t104[_r113 + 1];\n          for (var _t105 = 0; _t105 < _e106.length - 1; _t105++) i.push(M(_n81, _e106[_t105], _a54, _e106[_t105 + 1]));\n        }\n      } else i.push(M({\n        fixed: 0,\n        stretch: -1\n      }, {\n        fixed: 0,\n        stretch: -1\n      }, {\n        fixed: 0,\n        stretch: o + 1\n      }, {\n        fixed: 0,\n        stretch: l + 1\n      }));\n      return i;\n    }\n    function pu(t, e, r) {\n      var n = 0;\n      var _iterator83 = _createForOfIteratorHelper(t),\n        _step83;\n      try {\n        for (_iterator83.s(); !(_step83 = _iterator83.n()).done;) {\n          var _i80 = _step83.value;\n          n += Math.max(e, Math.min(r, _i80[1])) - Math.max(e, Math.min(r, _i80[0]));\n        }\n      } catch (err) {\n        _iterator83.e(err);\n      } finally {\n        _iterator83.f();\n      }\n      return n;\n    }\n    function fu(t, e, r) {\n      var n = [{\n        fixed: -1,\n        stretch: 0\n      }];\n      var _iterator84 = _createForOfIteratorHelper(t),\n        _step84;\n      try {\n        for (_iterator84.s(); !(_step84 = _iterator84.n()).done;) {\n          var _step84$value = _slicedToArray(_step84.value, 2),\n            _e107 = _step84$value[0],\n            _r114 = _step84$value[1];\n          var _t106 = n[n.length - 1];\n          n.push({\n            fixed: _e107 - _t106.stretch,\n            stretch: _t106.stretch\n          }), n.push({\n            fixed: _e107 - _t106.stretch,\n            stretch: _t106.stretch + (_r114 - _e107)\n          });\n        }\n      } catch (err) {\n        _iterator84.e(err);\n      } finally {\n        _iterator84.f();\n      }\n      return n.push({\n        fixed: e + 1,\n        stretch: r\n      }), n;\n    }\n    function du(t, e, r, n) {\n      return t / e * r + n;\n    }\n    function yu(t, e, r, n) {\n      return t - e * r / n;\n    }\n    Mn(\"Anchor\", ru);\n    var mu = /*#__PURE__*/_createClass(function mu(t, e, r, n, i, a, s, o, l, u) {\n      _classCallCheck(this, mu);\n      if (this.boxStartIndex = t.length, l) {\n        var _t107 = a.top,\n          _e108 = a.bottom;\n        var _r115 = a.collisionPadding;\n        _r115 && (_t107 -= _r115[1], _e108 += _r115[3]);\n        var _n82 = _e108 - _t107;\n        _n82 > 0 && (_n82 = Math.max(10, _n82), this.circleDiameter = _n82);\n      } else {\n        var _l24 = a.top * s - o[0],\n          _c11 = a.bottom * s + o[2],\n          _h8 = a.left * s - o[3],\n          _p6 = a.right * s + o[1];\n        var _f3 = a.collisionPadding;\n        if (_f3 && (_h8 -= _f3[0] * s, _l24 -= _f3[1] * s, _p6 += _f3[2] * s, _c11 += _f3[3] * s), u) {\n          var _t108 = new S(_h8, _l24),\n            _e109 = new S(_p6, _l24),\n            _r116 = new S(_h8, _c11),\n            _n83 = new S(_p6, _c11),\n            _i81 = u * Math.PI / 180;\n          _t108._rotate(_i81), _e109._rotate(_i81), _r116._rotate(_i81), _n83._rotate(_i81), _h8 = Math.min(_t108.x, _e109.x, _r116.x, _n83.x), _p6 = Math.max(_t108.x, _e109.x, _r116.x, _n83.x), _l24 = Math.min(_t108.y, _e109.y, _r116.y, _n83.y), _c11 = Math.max(_t108.y, _e109.y, _r116.y, _n83.y);\n        }\n        t.emplaceBack(e.x, e.y, _h8, _l24, _p6, _c11, r, n, i);\n      }\n      this.boxEndIndex = t.length;\n    });\n    var gu = /*#__PURE__*/function () {\n      function gu() {\n        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : xu;\n        _classCallCheck(this, gu);\n        if (this.data = t, this.length = this.data.length, this.compare = e, this.length > 0) for (var _t109 = (this.length >> 1) - 1; _t109 >= 0; _t109--) this._down(_t109);\n      }\n      _createClass(gu, [{\n        key: \"push\",\n        value: function push(t) {\n          this.data.push(t), this.length++, this._up(this.length - 1);\n        }\n      }, {\n        key: \"pop\",\n        value: function pop() {\n          if (0 === this.length) return;\n          var t = this.data[0],\n            e = this.data.pop();\n          return this.length--, this.length > 0 && (this.data[0] = e, this._down(0)), t;\n        }\n      }, {\n        key: \"peek\",\n        value: function peek() {\n          return this.data[0];\n        }\n      }, {\n        key: \"_up\",\n        value: function _up(t) {\n          var e = this.data,\n            r = this.compare,\n            n = e[t];\n          for (; t > 0;) {\n            var _i82 = t - 1 >> 1,\n              _a55 = e[_i82];\n            if (r(n, _a55) >= 0) break;\n            e[t] = _a55, t = _i82;\n          }\n          e[t] = n;\n        }\n      }, {\n        key: \"_down\",\n        value: function _down(t) {\n          var e = this.data,\n            r = this.compare,\n            n = this.length >> 1,\n            i = e[t];\n          for (; t < n;) {\n            var _n84 = 1 + (t << 1),\n              _a56 = e[_n84];\n            var _s54 = _n84 + 1;\n            if (_s54 < this.length && r(e[_s54], _a56) < 0 && (_n84 = _s54, _a56 = e[_s54]), r(_a56, i) >= 0) break;\n            e[t] = _a56, t = _n84;\n          }\n          e[t] = i;\n        }\n      }]);\n      return gu;\n    }();\n    function xu(t, e) {\n      return t < e ? -1 : t > e ? 1 : 0;\n    }\n    function vu(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n      var n = 1 / 0,\n        i = 1 / 0,\n        a = -1 / 0,\n        s = -1 / 0;\n      var o = t[0];\n      for (var _t110 = 0; _t110 < o.length; _t110++) {\n        var _e110 = o[_t110];\n        (!_t110 || _e110.x < n) && (n = _e110.x), (!_t110 || _e110.y < i) && (i = _e110.y), (!_t110 || _e110.x > a) && (a = _e110.x), (!_t110 || _e110.y > s) && (s = _e110.y);\n      }\n      var l = Math.min(a - n, s - i);\n      var u = l / 2;\n      var c = new gu([], bu);\n      if (0 === l) return new S(n, i);\n      for (var _e111 = n; _e111 < a; _e111 += l) for (var _r117 = i; _r117 < s; _r117 += l) c.push(new wu(_e111 + u, _r117 + u, u, t));\n      var h = function (t) {\n          var e = 0,\n            r = 0,\n            n = 0;\n          var i = t[0];\n          for (var _t111 = 0, _a57 = i.length, _s55 = _a57 - 1; _t111 < _a57; _s55 = _t111++) {\n            var _a58 = i[_t111],\n              _o26 = i[_s55],\n              _l25 = _a58.x * _o26.y - _o26.x * _a58.y;\n            r += (_a58.x + _o26.x) * _l25, n += (_a58.y + _o26.y) * _l25, e += 3 * _l25;\n          }\n          return new wu(r / e, n / e, 0, t);\n        }(t),\n        p = c.length;\n      for (; c.length;) {\n        var _n85 = c.pop();\n        (_n85.d > h.d || !h.d) && (h = _n85, r && console.log(\"found best %d after %d probes\", Math.round(1e4 * _n85.d) / 1e4, p)), _n85.max - h.d <= e || (u = _n85.h / 2, c.push(new wu(_n85.p.x - u, _n85.p.y - u, u, t)), c.push(new wu(_n85.p.x + u, _n85.p.y - u, u, t)), c.push(new wu(_n85.p.x - u, _n85.p.y + u, u, t)), c.push(new wu(_n85.p.x + u, _n85.p.y + u, u, t)), p += 4);\n      }\n      return r && (console.log(\"num probes: \".concat(p)), console.log(\"best distance: \".concat(h.d))), h.p;\n    }\n    function bu(t, e) {\n      return e.max - t.max;\n    }\n    function wu(t, e, r, n) {\n      this.p = new S(t, e), this.h = r, this.d = function (t, e) {\n        var r = !1,\n          n = 1 / 0;\n        for (var _i83 = 0; _i83 < e.length; _i83++) {\n          var _a59 = e[_i83];\n          for (var _e112 = 0, _i84 = _a59.length, _s56 = _i84 - 1; _e112 < _i84; _s56 = _e112++) {\n            var _i85 = _a59[_e112],\n              _o27 = _a59[_s56];\n            _i85.y > t.y != _o27.y > t.y && t.x < (_o27.x - _i85.x) * (t.y - _i85.y) / (_o27.y - _i85.y) + _i85.x && (r = !r), n = Math.min(n, rs(t, _i85, _o27));\n          }\n        }\n        return (r ? 1 : -1) * Math.sqrt(n);\n      }(this.p, n), this.max = this.d + this.h * Math.SQRT2;\n    }\n    var _u = Number.POSITIVE_INFINITY;\n    function Au(t, e) {\n      return e[1] !== _u ? function (t, e, r) {\n        var n = 0,\n          i = 0;\n        switch (e = Math.abs(e), r = Math.abs(r), t) {\n          case \"top-right\":\n          case \"top-left\":\n          case \"top\":\n            i = r - 7;\n            break;\n          case \"bottom-right\":\n          case \"bottom-left\":\n          case \"bottom\":\n            i = 7 - r;\n        }\n        switch (t) {\n          case \"top-right\":\n          case \"bottom-right\":\n          case \"right\":\n            n = -e;\n            break;\n          case \"top-left\":\n          case \"bottom-left\":\n          case \"left\":\n            n = e;\n        }\n        return [n, i];\n      }(t, e[0], e[1]) : function (t, e) {\n        var r = 0,\n          n = 0;\n        e < 0 && (e = 0);\n        var i = e / Math.sqrt(2);\n        switch (t) {\n          case \"top-right\":\n          case \"top-left\":\n            n = i - 7;\n            break;\n          case \"bottom-right\":\n          case \"bottom-left\":\n            n = 7 - i;\n            break;\n          case \"bottom\":\n            n = 7 - e;\n            break;\n          case \"top\":\n            n = e - 7;\n        }\n        switch (t) {\n          case \"top-right\":\n          case \"bottom-right\":\n            r = -i;\n            break;\n          case \"top-left\":\n          case \"bottom-left\":\n            r = i;\n            break;\n          case \"left\":\n            r = e;\n            break;\n          case \"right\":\n            r = -e;\n        }\n        return [r, n];\n      }(t, e[0]);\n    }\n    function ku(t) {\n      switch (t) {\n        case \"right\":\n        case \"top-right\":\n        case \"bottom-right\":\n          return \"right\";\n        case \"left\":\n        case \"top-left\":\n        case \"bottom-left\":\n          return \"left\";\n      }\n      return \"center\";\n    }\n    function Su(e, r, n, i, a, s, o, l, u, c, h) {\n      var p = s.textMaxSize.evaluate(r, {});\n      void 0 === p && (p = o);\n      var f = e.layers[0].layout,\n        y = f.get(\"icon-offset\").evaluate(r, {}, h),\n        m = zu(n.horizontal),\n        g = o / 24,\n        x = e.tilePixelRatio * g,\n        v = e.tilePixelRatio * p / 24,\n        b = e.tilePixelRatio * l,\n        w = e.tilePixelRatio * f.get(\"symbol-spacing\"),\n        _ = f.get(\"text-padding\") * e.tilePixelRatio,\n        A = function (t, e, r) {\n          var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n          var i = t.get(\"icon-padding\").evaluate(e, {}, r),\n            a = i && i.values;\n          return [a[0] * n, a[1] * n, a[2] * n, a[3] * n];\n        }(f, r, h, e.tilePixelRatio),\n        k = f.get(\"text-max-angle\") / 180 * Math.PI,\n        S = \"viewport\" !== f.get(\"text-rotation-alignment\") && \"point\" !== f.get(\"symbol-placement\"),\n        I = \"map\" === f.get(\"icon-rotation-alignment\") && \"point\" !== f.get(\"symbol-placement\"),\n        M = f.get(\"symbol-placement\"),\n        z = w / 2,\n        B = f.get(\"icon-text-fit\");\n      var C;\n      i && \"none\" !== B && (e.allowVerticalPlacement && n.vertical && (C = Ql(i, n.vertical, B, f.get(\"icon-text-fit-padding\"), y, g)), m && (i = Ql(i, m, B, f.get(\"icon-text-fit-padding\"), y, g)));\n      var P = function P(l, p) {\n        p.x < 0 || p.x >= qa || p.y < 0 || p.y >= qa || function (e, r, n, i, a, s, o, l, u, c, h, p, f, y, m, g, x, v, b, w, _, A, k, S, I) {\n          var _l$layout$get$evaluat, _l$layout$get$evaluat2;\n          var M = e.addToLineVertexArray(r, n);\n          var z,\n            B,\n            C,\n            P,\n            V = 0,\n            E = 0,\n            F = 0,\n            T = 0,\n            L = -1,\n            D = -1;\n          var $ = {};\n          var R = xa.exports(\"\"),\n            O = 0,\n            U = 0;\n          if (void 0 === l._unevaluatedLayout.getValue(\"text-radial-offset\") ? (_l$layout$get$evaluat = l.layout.get(\"text-offset\").evaluate(_, {}, S).map(function (t) {\n            return t * ll;\n          }), _l$layout$get$evaluat2 = _slicedToArray(_l$layout$get$evaluat, 2), O = _l$layout$get$evaluat2[0], U = _l$layout$get$evaluat2[1], _l$layout$get$evaluat) : (O = l.layout.get(\"text-radial-offset\").evaluate(_, {}, S) * ll, U = _u), e.allowVerticalPlacement && i.vertical) {\n            var _t112 = l.layout.get(\"text-rotate\").evaluate(_, {}, S) + 90;\n            C = new mu(u, r, c, h, p, i.vertical, f, y, m, _t112), o && (P = new mu(u, r, c, h, p, o, x, v, m, _t112));\n          }\n          if (a) {\n            var _n86 = l.layout.get(\"icon-rotate\").evaluate(_, {}),\n              _i86 = \"none\" !== l.layout.get(\"icon-text-fit\"),\n              _s57 = hu(a, _n86, k, _i86),\n              _f4 = o ? hu(o, _n86, k, _i86) : void 0;\n            B = new mu(u, r, c, h, p, a, x, v, !1, _n86), V = 4 * _s57.length;\n            var _y4 = e.iconSizeData;\n            var _m5 = null;\n            \"source\" === _y4.kind ? (_m5 = [tu * l.layout.get(\"icon-size\").evaluate(_, {})], _m5[0] > Iu && d(\"\".concat(e.layerIds[0], \": Value for \\\"icon-size\\\" is >= 255. Reduce your \\\"icon-size\\\".\"))) : \"composite\" === _y4.kind && (_m5 = [tu * A.compositeIconSizes[0].evaluate(_, {}, S), tu * A.compositeIconSizes[1].evaluate(_, {}, S)], (_m5[0] > Iu || _m5[1] > Iu) && d(\"\".concat(e.layerIds[0], \": Value for \\\"icon-size\\\" is >= 255. Reduce your \\\"icon-size\\\".\"))), e.addSymbols(e.icon, _s57, _m5, w, b, _, t.WritingMode.none, r, M.lineStartIndex, M.lineLength, -1, S), L = e.icon.placedSymbolArray.length - 1, _f4 && (E = 4 * _f4.length, e.addSymbols(e.icon, _f4, _m5, w, b, _, t.WritingMode.vertical, r, M.lineStartIndex, M.lineLength, -1, S), D = e.icon.placedSymbolArray.length - 1);\n          }\n          var q = Object.keys(i.horizontal);\n          for (var _i87 = 0, _q = q; _i87 < _q.length; _i87++) {\n            var _n87 = _q[_i87];\n            var _a60 = i.horizontal[_n87];\n            if (!z) {\n              R = xa.exports(_a60.text);\n              var _t113 = l.layout.get(\"text-rotate\").evaluate(_, {}, S);\n              z = new mu(u, r, c, h, p, _a60, f, y, m, _t113);\n            }\n            var _o28 = 1 === _a60.positionedLines.length;\n            if (F += Mu(e, r, _a60, s, l, m, _, g, M, i.vertical ? t.WritingMode.horizontal : t.WritingMode.horizontalOnly, _o28 ? q : [_n87], $, L, A, S), _o28) break;\n          }\n          i.vertical && (T += Mu(e, r, i.vertical, s, l, m, _, g, M, t.WritingMode.vertical, [\"vertical\"], $, D, A, S));\n          var j = z ? z.boxStartIndex : e.collisionBoxArray.length,\n            N = z ? z.boxEndIndex : e.collisionBoxArray.length,\n            Z = C ? C.boxStartIndex : e.collisionBoxArray.length,\n            K = C ? C.boxEndIndex : e.collisionBoxArray.length,\n            G = B ? B.boxStartIndex : e.collisionBoxArray.length,\n            J = B ? B.boxEndIndex : e.collisionBoxArray.length,\n            X = P ? P.boxStartIndex : e.collisionBoxArray.length,\n            Y = P ? P.boxEndIndex : e.collisionBoxArray.length;\n          var H = -1;\n          var W = function W(t, e) {\n            return t && t.circleDiameter ? Math.max(t.circleDiameter, e) : e;\n          };\n          H = W(z, H), H = W(C, H), H = W(B, H), H = W(P, H);\n          var Q = H > -1 ? 1 : 0;\n          Q && (H *= I / ll), e.glyphOffsetArray.length >= Du.MAX_GLYPHS && d(\"Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907\"), void 0 !== _.sortKey && e.addToSortKeyRanges(e.symbolInstances.length, _.sortKey), e.symbolInstances.emplaceBack(r.x, r.y, $.right >= 0 ? $.right : -1, $.center >= 0 ? $.center : -1, $.left >= 0 ? $.left : -1, $.vertical || -1, L, D, R, j, N, Z, K, G, J, X, Y, c, F, T, V, E, Q, 0, f, O, U, H);\n        }(e, p, l, n, i, a, C, e.layers[0], e.collisionBoxArray, r.index, r.sourceLayerIndex, e.index, x, [_, _, _, _], S, u, b, A, I, y, r, s, c, h, o);\n      };\n      if (\"line\" === M) {\n        var _iterator85 = _createForOfIteratorHelper(cu(r.geometry, 0, 0, qa, qa)),\n          _step85;\n        try {\n          for (_iterator85.s(); !(_step85 = _iterator85.n()).done;) {\n            var _t114 = _step85.value;\n            var _r118 = lu(_t114, w, k, n.vertical || m, i, 24, v, e.overscaling, qa);\n            var _iterator86 = _createForOfIteratorHelper(_r118),\n              _step86;\n            try {\n              for (_iterator86.s(); !(_step86 = _iterator86.n()).done;) {\n                var _n88 = _step86.value;\n                var _r119 = m;\n                _r119 && Bu(e, _r119.text, z, _n88) || P(_t114, _n88);\n              }\n            } catch (err) {\n              _iterator86.e(err);\n            } finally {\n              _iterator86.f();\n            }\n          }\n        } catch (err) {\n          _iterator85.e(err);\n        } finally {\n          _iterator85.f();\n        }\n      } else if (\"line-center\" === M) {\n        var _iterator87 = _createForOfIteratorHelper(r.geometry),\n          _step87;\n        try {\n          for (_iterator87.s(); !(_step87 = _iterator87.n()).done;) {\n            var _t115 = _step87.value;\n            if (_t115.length > 1) {\n              var _e113 = ou(_t115, k, n.vertical || m, i, 24, v);\n              _e113 && P(_t115, _e113);\n            }\n          }\n        } catch (err) {\n          _iterator87.e(err);\n        } finally {\n          _iterator87.f();\n        }\n      } else if (\"Polygon\" === r.type) {\n        var _iterator88 = _createForOfIteratorHelper(ho(r.geometry, 0)),\n          _step88;\n        try {\n          for (_iterator88.s(); !(_step88 = _iterator88.n()).done;) {\n            var _t116 = _step88.value;\n            var _e114 = vu(_t116, 16);\n            P(_t116[0], new ru(_e114.x, _e114.y, 0));\n          }\n        } catch (err) {\n          _iterator88.e(err);\n        } finally {\n          _iterator88.f();\n        }\n      } else if (\"LineString\" === r.type) {\n        var _iterator89 = _createForOfIteratorHelper(r.geometry),\n          _step89;\n        try {\n          for (_iterator89.s(); !(_step89 = _iterator89.n()).done;) {\n            var _t117 = _step89.value;\n            P(_t117, new ru(_t117[0].x, _t117[0].y, 0));\n          }\n        } catch (err) {\n          _iterator89.e(err);\n        } finally {\n          _iterator89.f();\n        }\n      } else if (\"Point\" === r.type) {\n        var _iterator90 = _createForOfIteratorHelper(r.geometry),\n          _step90;\n        try {\n          for (_iterator90.s(); !(_step90 = _iterator90.n()).done;) {\n            var _t118 = _step90.value;\n            var _iterator91 = _createForOfIteratorHelper(_t118),\n              _step91;\n            try {\n              for (_iterator91.s(); !(_step91 = _iterator91.n()).done;) {\n                var _e115 = _step91.value;\n                P([_e115], new ru(_e115.x, _e115.y, 0));\n              }\n            } catch (err) {\n              _iterator91.e(err);\n            } finally {\n              _iterator91.f();\n            }\n          }\n        } catch (err) {\n          _iterator90.e(err);\n        } finally {\n          _iterator90.f();\n        }\n      }\n    }\n    var Iu = 32640;\n    function Mu(t, e, r, n, i, a, s, o, l, u, c, h, p, f, y) {\n      var m = function (t, e, r, n, i, a, s, o) {\n          var l = n.layout.get(\"text-rotate\").evaluate(a, {}) * Math.PI / 180,\n            u = [];\n          var _iterator92 = _createForOfIteratorHelper(e.positionedLines),\n            _step92;\n          try {\n            for (_iterator92.s(); !(_step92 = _iterator92.n()).done;) {\n              var _t119 = _step92.value;\n              var _iterator93 = _createForOfIteratorHelper(_t119.positionedGlyphs),\n                _step93;\n              try {\n                for (_iterator93.s(); !(_step93 = _iterator93.n()).done;) {\n                  var _n89 = _step93.value;\n                  if (!_n89.rect) continue;\n                  var _a61 = _n89.rect || {};\n                  var _c12 = 4,\n                    _h9 = !0,\n                    _p7 = 1,\n                    _f5 = 0;\n                  var _d3 = (i || o) && _n89.vertical,\n                    _y5 = _n89.metrics.advance * _n89.scale / 2;\n                  if (o && e.verticalizable) {\n                    var _e116 = (_n89.scale - 1) * ll,\n                      _r120 = (ll - _n89.metrics.width * _n89.scale) / 2;\n                    _f5 = _t119.lineOffset / 2 - (_n89.imageName ? -_r120 : _e116);\n                  }\n                  if (_n89.imageName) {\n                    var _t120 = s[_n89.imageName];\n                    _h9 = _t120.sdf, _p7 = _t120.pixelRatio, _c12 = 1 / _p7;\n                  }\n                  var _m6 = i ? [_n89.x + _y5, _n89.y] : [0, 0];\n                  var _g5 = i ? [0, 0] : [_n89.x + _y5 + r[0], _n89.y + r[1] - _f5],\n                    _x5 = [0, 0];\n                  _d3 && (_x5 = _g5, _g5 = [0, 0]);\n                  var _v2 = (_n89.metrics.left - _c12) * _n89.scale - _y5 + _g5[0],\n                    _b4 = (-_n89.metrics.top - _c12) * _n89.scale + _g5[1],\n                    _w3 = _v2 + _a61.w * _n89.scale / _p7,\n                    _4 = _b4 + _a61.h * _n89.scale / _p7,\n                    _A4 = new S(_v2, _b4),\n                    _k3 = new S(_w3, _b4),\n                    _I2 = new S(_v2, _4),\n                    _M = new S(_w3, _4);\n                  if (_d3) {\n                    var _t121 = new S(-_y5, _y5 - $l),\n                      _e117 = -Math.PI / 2,\n                      _r121 = 12 - _y5,\n                      _i88 = new S(22 - _r121, -(_n89.imageName ? _r121 : 0)),\n                      _a62 = _construct(S, _toConsumableArray(_x5));\n                    _A4._rotateAround(_e117, _t121)._add(_i88)._add(_a62), _k3._rotateAround(_e117, _t121)._add(_i88)._add(_a62), _I2._rotateAround(_e117, _t121)._add(_i88)._add(_a62), _M._rotateAround(_e117, _t121)._add(_i88)._add(_a62);\n                  }\n                  if (l) {\n                    var _t122 = Math.sin(l),\n                      _e118 = Math.cos(l),\n                      _r122 = [_e118, -_t122, _t122, _e118];\n                    _A4._matMult(_r122), _k3._matMult(_r122), _I2._matMult(_r122), _M._matMult(_r122);\n                  }\n                  var _z = new S(0, 0),\n                    _B = new S(0, 0);\n                  u.push({\n                    tl: _A4,\n                    tr: _k3,\n                    bl: _I2,\n                    br: _M,\n                    tex: _a61,\n                    writingMode: e.writingMode,\n                    glyphOffset: _m6,\n                    sectionIndex: _n89.sectionIndex,\n                    isSDF: _h9,\n                    pixelOffsetTL: _z,\n                    pixelOffsetBR: _B,\n                    minFontScaleX: 0,\n                    minFontScaleY: 0\n                  });\n                }\n              } catch (err) {\n                _iterator93.e(err);\n              } finally {\n                _iterator93.f();\n              }\n            }\n          } catch (err) {\n            _iterator92.e(err);\n          } finally {\n            _iterator92.f();\n          }\n          return u;\n        }(0, r, o, i, a, s, n, t.allowVerticalPlacement),\n        g = t.textSizeData;\n      var x = null;\n      \"source\" === g.kind ? (x = [tu * i.layout.get(\"text-size\").evaluate(s, {})], x[0] > Iu && d(\"\".concat(t.layerIds[0], \": Value for \\\"text-size\\\" is >= 255. Reduce your \\\"text-size\\\".\"))) : \"composite\" === g.kind && (x = [tu * f.compositeTextSizes[0].evaluate(s, {}, y), tu * f.compositeTextSizes[1].evaluate(s, {}, y)], (x[0] > Iu || x[1] > Iu) && d(\"\".concat(t.layerIds[0], \": Value for \\\"text-size\\\" is >= 255. Reduce your \\\"text-size\\\".\"))), t.addSymbols(t.text, m, x, o, a, s, u, e, l.lineStartIndex, l.lineLength, p, y);\n      var _iterator94 = _createForOfIteratorHelper(c),\n        _step94;\n      try {\n        for (_iterator94.s(); !(_step94 = _iterator94.n()).done;) {\n          var _e119 = _step94.value;\n          h[_e119] = t.text.placedSymbolArray.length - 1;\n        }\n      } catch (err) {\n        _iterator94.e(err);\n      } finally {\n        _iterator94.f();\n      }\n      return 4 * m.length;\n    }\n    function zu(t) {\n      for (var _e120 in t) return t[_e120];\n      return null;\n    }\n    function Bu(t, e, r, n) {\n      var i = t.compareText;\n      if (e in i) {\n        var _t123 = i[e];\n        for (var _e121 = _t123.length - 1; _e121 >= 0; _e121--) if (n.dist(_t123[_e121]) < r) return !0;\n      } else i[e] = [];\n      return i[e].push(n), !1;\n    }\n    var Cu = _o.VectorTileFeature.types,\n      Pu = [{\n        name: \"a_fade_opacity\",\n        components: 1,\n        type: \"Uint8\",\n        offset: 0\n      }];\n    function Vu(t, e, r, n, i, a, s, o, l, u, c, h, p) {\n      var f = o ? Math.min(Iu, Math.round(o[0])) : 0,\n        d = o ? Math.min(Iu, Math.round(o[1])) : 0;\n      t.emplaceBack(e, r, Math.round(32 * n), Math.round(32 * i), a, s, (f << 1) + (l ? 1 : 0), d, 16 * u, 16 * c, 256 * h, 256 * p);\n    }\n    function Eu(t, e, r) {\n      t.emplaceBack(e.x, e.y, r), t.emplaceBack(e.x, e.y, r), t.emplaceBack(e.x, e.y, r), t.emplaceBack(e.x, e.y, r);\n    }\n    function Fu(t) {\n      var _iterator95 = _createForOfIteratorHelper(t.sections),\n        _step95;\n      try {\n        for (_iterator95.s(); !(_step95 = _iterator95.n()).done;) {\n          var _e122 = _step95.value;\n          if (On(_e122.text)) return !0;\n        }\n      } catch (err) {\n        _iterator95.e(err);\n      } finally {\n        _iterator95.f();\n      }\n      return !1;\n    }\n    var Tu = /*#__PURE__*/function () {\n      function Tu(t) {\n        _classCallCheck(this, Tu);\n        this.layoutVertexArray = new sa(), this.indexArray = new ha(), this.programConfigurations = t, this.segments = new ya(), this.dynamicLayoutVertexArray = new oa(), this.opacityVertexArray = new la(), this.placedSymbolArray = new Ki();\n      }\n      _createClass(Tu, [{\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.layoutVertexArray.length && 0 === this.indexArray.length && 0 === this.dynamicLayoutVertexArray.length && 0 === this.opacityVertexArray.length;\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t, e, r, n) {\n          this.isEmpty() || (r && (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, el.members), this.indexBuffer = t.createIndexBuffer(this.indexArray, e), this.dynamicLayoutVertexBuffer = t.createVertexBuffer(this.dynamicLayoutVertexArray, rl.members, !0), this.opacityVertexBuffer = t.createVertexBuffer(this.opacityVertexArray, Pu, !0), this.opacityVertexBuffer.itemSize = 1), (r || n) && this.programConfigurations.upload(t));\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.dynamicLayoutVertexBuffer.destroy(), this.opacityVertexBuffer.destroy());\n        }\n      }]);\n      return Tu;\n    }();\n    Mn(\"SymbolBuffers\", Tu);\n    var Lu = /*#__PURE__*/function () {\n      function Lu(t, e, r) {\n        _classCallCheck(this, Lu);\n        this.layoutVertexArray = new t(), this.layoutAttributes = e, this.indexArray = new r(), this.segments = new ya(), this.collisionVertexArray = new ca();\n      }\n      _createClass(Lu, [{\n        key: \"upload\",\n        value: function upload(t) {\n          this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, this.layoutAttributes), this.indexBuffer = t.createIndexBuffer(this.indexArray), this.collisionVertexBuffer = t.createVertexBuffer(this.collisionVertexArray, nl.members, !0);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.segments.destroy(), this.collisionVertexBuffer.destroy());\n        }\n      }]);\n      return Lu;\n    }();\n    Mn(\"CollisionBuffers\", Lu);\n    var Du = /*#__PURE__*/function () {\n      function Du(e) {\n        _classCallCheck(this, Du);\n        this.collisionBoxArray = e.collisionBoxArray, this.zoom = e.zoom, this.overscaling = e.overscaling, this.layers = e.layers, this.layerIds = this.layers.map(function (t) {\n          return t.id;\n        }), this.index = e.index, this.pixelRatio = e.pixelRatio, this.sourceLayerIndex = e.sourceLayerIndex, this.hasPattern = !1, this.hasRTLText = !1, this.sortKeyRanges = [], this.collisionCircleArray = [], this.placementInvProjMatrix = ds([]), this.placementViewportMatrix = ds([]);\n        var r = this.layers[0]._unevaluatedLayout._values;\n        this.textSizeData = eu(this.zoom, r[\"text-size\"]), this.iconSizeData = eu(this.zoom, r[\"icon-size\"]);\n        var n = this.layers[0].layout,\n          i = n.get(\"symbol-sort-key\"),\n          a = n.get(\"symbol-z-order\");\n        this.canOverlap = \"never\" !== qu(n, \"text-overlap\", \"text-allow-overlap\") || \"never\" !== qu(n, \"icon-overlap\", \"icon-allow-overlap\") || n.get(\"text-ignore-placement\") || n.get(\"icon-ignore-placement\"), this.sortFeaturesByKey = \"viewport-y\" !== a && !i.isConstant(), this.sortFeaturesByY = (\"viewport-y\" === a || \"auto\" === a && !this.sortFeaturesByKey) && this.canOverlap, \"point\" === n.get(\"symbol-placement\") && (this.writingModes = n.get(\"text-writing-mode\").map(function (e) {\n          return t.WritingMode[e];\n        })), this.stateDependentLayerIds = this.layers.filter(function (t) {\n          return t.isStateDependent();\n        }).map(function (t) {\n          return t.id;\n        }), this.sourceID = e.sourceID;\n      }\n      _createClass(Du, [{\n        key: \"createArrays\",\n        value: function createArrays() {\n          this.text = new Tu(new Ra(this.layers, this.zoom, function (t) {\n            return /^text/.test(t);\n          })), this.icon = new Tu(new Ra(this.layers, this.zoom, function (t) {\n            return /^icon/.test(t);\n          })), this.glyphOffsetArray = new Xi(), this.lineVertexArray = new Yi(), this.symbolInstances = new Ji();\n        }\n      }, {\n        key: \"calculateGlyphDependencies\",\n        value: function calculateGlyphDependencies(t, e, r, n, i) {\n          for (var _a63 = 0; _a63 < t.length; _a63++) if (e[t.charCodeAt(_a63)] = !0, (r || n) && i) {\n            var _r123 = ol[t.charAt(_a63)];\n            _r123 && (e[_r123.charCodeAt(0)] = !0);\n          }\n        }\n      }, {\n        key: \"populate\",\n        value: function populate(e, r, n) {\n          var i = this.layers[0],\n            a = i.layout,\n            s = a.get(\"text-font\"),\n            o = a.get(\"text-field\"),\n            l = a.get(\"icon-image\"),\n            u = (\"constant\" !== o.value.kind || o.value.value instanceof Dt && !o.value.value.isEmpty() || o.value.value.toString().length > 0) && (\"constant\" !== s.value.kind || s.value.value.length > 0),\n            c = \"constant\" !== l.value.kind || !!l.value.value || Object.keys(l.parameters).length > 0,\n            h = a.get(\"symbol-sort-key\");\n          if (this.features = [], !u && !c) return;\n          var p = r.iconDependencies,\n            f = r.glyphDependencies,\n            d = r.availableImages,\n            y = new Qn(this.zoom);\n          var _iterator96 = _createForOfIteratorHelper(e),\n            _step96;\n          try {\n            for (_iterator96.s(); !(_step96 = _iterator96.n()).done;) {\n              var _step96$value = _step96.value,\n                _r124 = _step96$value.feature,\n                _o29 = _step96$value.id,\n                _l26 = _step96$value.index,\n                _m7 = _step96$value.sourceLayerIndex;\n              var _e123 = i._featureFilter.needGeometry,\n                _g6 = Ka(_r124, _e123);\n              if (!i._featureFilter.filter(y, _g6, n)) continue;\n              var _x6 = void 0,\n                _v3 = void 0;\n              if (_e123 || (_g6.geometry = Za(_r124)), u) {\n                var _t125 = i.getValueAndResolveTokens(\"text-field\", _g6, n, d),\n                  _e124 = Dt.factory(_t125);\n                Fu(_e124) && (this.hasRTLText = !0), (!this.hasRTLText || \"unavailable\" === Yn() || this.hasRTLText && Wn.isParsed()) && (_x6 = sl(_e124, i, _g6));\n              }\n              if (c) {\n                var _t126 = i.getValueAndResolveTokens(\"icon-image\", _g6, n, d);\n                _v3 = _t126 instanceof Rt ? _t126 : Rt.fromString(_t126);\n              }\n              if (!_x6 && !_v3) continue;\n              var _b5 = this.sortFeaturesByKey ? h.evaluate(_g6, {}, n) : void 0;\n              if (this.features.push({\n                id: _o29,\n                text: _x6,\n                icon: _v3,\n                index: _l26,\n                sourceLayerIndex: _m7,\n                geometry: _g6.geometry,\n                properties: _r124.properties,\n                type: Cu[_r124.type],\n                sortKey: _b5\n              }), _v3 && (p[_v3.name] = !0), _x6) {\n                var _e125 = s.evaluate(_g6, {}, n).join(\",\"),\n                  _r125 = \"viewport\" !== a.get(\"text-rotation-alignment\") && \"point\" !== a.get(\"symbol-placement\");\n                this.allowVerticalPlacement = this.writingModes && this.writingModes.indexOf(t.WritingMode.vertical) >= 0;\n                var _iterator97 = _createForOfIteratorHelper(_x6.sections),\n                  _step97;\n                try {\n                  for (_iterator97.s(); !(_step97 = _iterator97.n()).done;) {\n                    var _t127 = _step97.value;\n                    if (_t127.image) p[_t127.image.name] = !0;else {\n                      var _n90 = En(_x6.toString()),\n                        _i90 = _t127.fontStack || _e125,\n                        _a64 = f[_i90] = f[_i90] || {};\n                      this.calculateGlyphDependencies(_t127.text, _a64, _r125, this.allowVerticalPlacement, _n90);\n                    }\n                  }\n                } catch (err) {\n                  _iterator97.e(err);\n                } finally {\n                  _iterator97.f();\n                }\n              }\n            }\n          } catch (err) {\n            _iterator96.e(err);\n          } finally {\n            _iterator96.f();\n          }\n          \"line\" === a.get(\"symbol-placement\") && (this.features = function (t) {\n            var e = {},\n              r = {},\n              n = [];\n            var i = 0;\n            function a(e) {\n              n.push(t[e]), i++;\n            }\n            function s(t, e, i) {\n              var a = r[t];\n              return delete r[t], r[e] = a, n[a].geometry[0].pop(), n[a].geometry[0] = n[a].geometry[0].concat(i[0]), a;\n            }\n            function o(t, r, i) {\n              var a = e[r];\n              return delete e[r], e[t] = a, n[a].geometry[0].shift(), n[a].geometry[0] = i[0].concat(n[a].geometry[0]), a;\n            }\n            function l(t, e, r) {\n              var n = r ? e[0][e[0].length - 1] : e[0][0];\n              return \"\".concat(t, \":\").concat(n.x, \":\").concat(n.y);\n            }\n            for (var _u19 = 0; _u19 < t.length; _u19++) {\n              var _c13 = t[_u19],\n                _h10 = _c13.geometry,\n                _p8 = _c13.text ? _c13.text.toString() : null;\n              if (!_p8) {\n                a(_u19);\n                continue;\n              }\n              var _f6 = l(_p8, _h10),\n                _d4 = l(_p8, _h10, !0);\n              if (_f6 in r && _d4 in e && r[_f6] !== e[_d4]) {\n                var _t124 = o(_f6, _d4, _h10),\n                  _i89 = s(_f6, _d4, n[_t124].geometry);\n                delete e[_f6], delete r[_d4], r[l(_p8, n[_i89].geometry, !0)] = _i89, n[_t124].geometry = null;\n              } else _f6 in r ? s(_f6, _d4, _h10) : _d4 in e ? o(_f6, _d4, _h10) : (a(_u19), e[_f6] = i - 1, r[_d4] = i - 1);\n            }\n            return n.filter(function (t) {\n              return t.geometry;\n            });\n          }(this.features)), this.sortFeaturesByKey && this.features.sort(function (t, e) {\n            return t.sortKey - e.sortKey;\n          });\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, e, r) {\n          this.stateDependentLayers.length && (this.text.programConfigurations.updatePaintArrays(t, e, this.layers, r), this.icon.programConfigurations.updatePaintArrays(t, e, this.layers, r));\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.symbolInstances.length && !this.hasRTLText;\n        }\n      }, {\n        key: \"uploadPending\",\n        value: function uploadPending() {\n          return !this.uploaded || this.text.programConfigurations.needsUpload || this.icon.programConfigurations.needsUpload;\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          !this.uploaded && this.hasDebugData() && (this.textCollisionBox.upload(t), this.iconCollisionBox.upload(t)), this.text.upload(t, this.sortFeaturesByY, !this.uploaded, this.text.programConfigurations.needsUpload), this.icon.upload(t, this.sortFeaturesByY, !this.uploaded, this.icon.programConfigurations.needsUpload), this.uploaded = !0;\n        }\n      }, {\n        key: \"destroyDebugData\",\n        value: function destroyDebugData() {\n          this.textCollisionBox.destroy(), this.iconCollisionBox.destroy();\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.text.destroy(), this.icon.destroy(), this.hasDebugData() && this.destroyDebugData();\n        }\n      }, {\n        key: \"addToLineVertexArray\",\n        value: function addToLineVertexArray(t, e) {\n          var r = this.lineVertexArray.length;\n          if (void 0 !== t.segment) {\n            var _r126 = t.dist(e[t.segment + 1]),\n              _n91 = t.dist(e[t.segment]);\n            var _i91 = {};\n            for (var _n92 = t.segment + 1; _n92 < e.length; _n92++) _i91[_n92] = {\n              x: e[_n92].x,\n              y: e[_n92].y,\n              tileUnitDistanceFromAnchor: _r126\n            }, _n92 < e.length - 1 && (_r126 += e[_n92 + 1].dist(e[_n92]));\n            for (var _r127 = t.segment || 0; _r127 >= 0; _r127--) _i91[_r127] = {\n              x: e[_r127].x,\n              y: e[_r127].y,\n              tileUnitDistanceFromAnchor: _n91\n            }, _r127 > 0 && (_n91 += e[_r127 - 1].dist(e[_r127]));\n            for (var _t128 = 0; _t128 < e.length; _t128++) {\n              var _e126 = _i91[_t128];\n              this.lineVertexArray.emplaceBack(_e126.x, _e126.y, _e126.tileUnitDistanceFromAnchor);\n            }\n          }\n          return {\n            lineStartIndex: r,\n            lineLength: this.lineVertexArray.length - r\n          };\n        }\n      }, {\n        key: \"addSymbols\",\n        value: function addSymbols(e, r, n, i, a, s, o, l, u, c, h, p) {\n          var f = e.indexArray,\n            d = e.layoutVertexArray,\n            y = e.segments.prepareSegment(4 * r.length, d, f, this.canOverlap ? s.sortKey : void 0),\n            m = this.glyphOffsetArray.length,\n            g = y.vertexLength,\n            x = this.allowVerticalPlacement && o === t.WritingMode.vertical ? Math.PI / 2 : 0,\n            v = s.text && s.text.sections;\n          for (var _t129 = 0; _t129 < r.length; _t129++) {\n            var _r$_t = r[_t129],\n              _i92 = _r$_t.tl,\n              _a65 = _r$_t.tr,\n              _o30 = _r$_t.bl,\n              _u20 = _r$_t.br,\n              _c14 = _r$_t.tex,\n              _h11 = _r$_t.pixelOffsetTL,\n              _m8 = _r$_t.pixelOffsetBR,\n              _g7 = _r$_t.minFontScaleX,\n              _b6 = _r$_t.minFontScaleY,\n              _w4 = _r$_t.glyphOffset,\n              _5 = _r$_t.isSDF,\n              _A5 = _r$_t.sectionIndex,\n              _k4 = y.vertexLength,\n              _S3 = _w4[1];\n            Vu(d, l.x, l.y, _i92.x, _S3 + _i92.y, _c14.x, _c14.y, n, _5, _h11.x, _h11.y, _g7, _b6), Vu(d, l.x, l.y, _a65.x, _S3 + _a65.y, _c14.x + _c14.w, _c14.y, n, _5, _m8.x, _h11.y, _g7, _b6), Vu(d, l.x, l.y, _o30.x, _S3 + _o30.y, _c14.x, _c14.y + _c14.h, n, _5, _h11.x, _m8.y, _g7, _b6), Vu(d, l.x, l.y, _u20.x, _S3 + _u20.y, _c14.x + _c14.w, _c14.y + _c14.h, n, _5, _m8.x, _m8.y, _g7, _b6), Eu(e.dynamicLayoutVertexArray, l, x), f.emplaceBack(_k4, _k4 + 1, _k4 + 2), f.emplaceBack(_k4 + 1, _k4 + 2, _k4 + 3), y.vertexLength += 4, y.primitiveLength += 2, this.glyphOffsetArray.emplaceBack(_w4[0]), _t129 !== r.length - 1 && _A5 === r[_t129 + 1].sectionIndex || e.programConfigurations.populatePaintArrays(d.length, s, s.index, {}, p, v && v[_A5]);\n          }\n          e.placedSymbolArray.emplaceBack(l.x, l.y, m, this.glyphOffsetArray.length - m, g, u, c, l.segment, n ? n[0] : 0, n ? n[1] : 0, i[0], i[1], o, 0, !1, 0, h);\n        }\n      }, {\n        key: \"_addCollisionDebugVertex\",\n        value: function _addCollisionDebugVertex(t, e, r, n, i, a) {\n          return e.emplaceBack(0, 0), t.emplaceBack(r.x, r.y, n, i, Math.round(a.x), Math.round(a.y));\n        }\n      }, {\n        key: \"addCollisionDebugVertices\",\n        value: function addCollisionDebugVertices(t, e, r, n, i, a, s) {\n          var o = i.segments.prepareSegment(4, i.layoutVertexArray, i.indexArray),\n            l = o.vertexLength,\n            u = i.layoutVertexArray,\n            c = i.collisionVertexArray,\n            h = s.anchorX,\n            p = s.anchorY;\n          this._addCollisionDebugVertex(u, c, a, h, p, new S(t, e)), this._addCollisionDebugVertex(u, c, a, h, p, new S(r, e)), this._addCollisionDebugVertex(u, c, a, h, p, new S(r, n)), this._addCollisionDebugVertex(u, c, a, h, p, new S(t, n)), o.vertexLength += 4;\n          var f = i.indexArray;\n          f.emplaceBack(l, l + 1), f.emplaceBack(l + 1, l + 2), f.emplaceBack(l + 2, l + 3), f.emplaceBack(l + 3, l), o.primitiveLength += 4;\n        }\n      }, {\n        key: \"addDebugCollisionBoxes\",\n        value: function addDebugCollisionBoxes(t, e, r, n) {\n          for (var _i93 = t; _i93 < e; _i93++) {\n            var _t130 = this.collisionBoxArray.get(_i93);\n            this.addCollisionDebugVertices(_t130.x1, _t130.y1, _t130.x2, _t130.y2, n ? this.textCollisionBox : this.iconCollisionBox, _t130.anchorPoint, r);\n          }\n        }\n      }, {\n        key: \"generateCollisionDebugBuffers\",\n        value: function generateCollisionDebugBuffers() {\n          this.hasDebugData() && this.destroyDebugData(), this.textCollisionBox = new Lu(ua, il.members, pa), this.iconCollisionBox = new Lu(ua, il.members, pa);\n          for (var _t131 = 0; _t131 < this.symbolInstances.length; _t131++) {\n            var _e127 = this.symbolInstances.get(_t131);\n            this.addDebugCollisionBoxes(_e127.textBoxStartIndex, _e127.textBoxEndIndex, _e127, !0), this.addDebugCollisionBoxes(_e127.verticalTextBoxStartIndex, _e127.verticalTextBoxEndIndex, _e127, !0), this.addDebugCollisionBoxes(_e127.iconBoxStartIndex, _e127.iconBoxEndIndex, _e127, !1), this.addDebugCollisionBoxes(_e127.verticalIconBoxStartIndex, _e127.verticalIconBoxEndIndex, _e127, !1);\n          }\n        }\n      }, {\n        key: \"_deserializeCollisionBoxesForSymbol\",\n        value: function _deserializeCollisionBoxesForSymbol(t, e, r, n, i, a, s, o, l) {\n          var u = {};\n          for (var _n93 = e; _n93 < r; _n93++) {\n            var _e128 = t.get(_n93);\n            u.textBox = {\n              x1: _e128.x1,\n              y1: _e128.y1,\n              x2: _e128.x2,\n              y2: _e128.y2,\n              anchorPointX: _e128.anchorPointX,\n              anchorPointY: _e128.anchorPointY\n            }, u.textFeatureIndex = _e128.featureIndex;\n            break;\n          }\n          for (var _e129 = n; _e129 < i; _e129++) {\n            var _r128 = t.get(_e129);\n            u.verticalTextBox = {\n              x1: _r128.x1,\n              y1: _r128.y1,\n              x2: _r128.x2,\n              y2: _r128.y2,\n              anchorPointX: _r128.anchorPointX,\n              anchorPointY: _r128.anchorPointY\n            }, u.verticalTextFeatureIndex = _r128.featureIndex;\n            break;\n          }\n          for (var _e130 = a; _e130 < s; _e130++) {\n            var _r129 = t.get(_e130);\n            u.iconBox = {\n              x1: _r129.x1,\n              y1: _r129.y1,\n              x2: _r129.x2,\n              y2: _r129.y2,\n              anchorPointX: _r129.anchorPointX,\n              anchorPointY: _r129.anchorPointY\n            }, u.iconFeatureIndex = _r129.featureIndex;\n            break;\n          }\n          for (var _e131 = o; _e131 < l; _e131++) {\n            var _r130 = t.get(_e131);\n            u.verticalIconBox = {\n              x1: _r130.x1,\n              y1: _r130.y1,\n              x2: _r130.x2,\n              y2: _r130.y2,\n              anchorPointX: _r130.anchorPointX,\n              anchorPointY: _r130.anchorPointY\n            }, u.verticalIconFeatureIndex = _r130.featureIndex;\n            break;\n          }\n          return u;\n        }\n      }, {\n        key: \"deserializeCollisionBoxes\",\n        value: function deserializeCollisionBoxes(t) {\n          this.collisionArrays = [];\n          for (var _e132 = 0; _e132 < this.symbolInstances.length; _e132++) {\n            var _r131 = this.symbolInstances.get(_e132);\n            this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t, _r131.textBoxStartIndex, _r131.textBoxEndIndex, _r131.verticalTextBoxStartIndex, _r131.verticalTextBoxEndIndex, _r131.iconBoxStartIndex, _r131.iconBoxEndIndex, _r131.verticalIconBoxStartIndex, _r131.verticalIconBoxEndIndex));\n          }\n        }\n      }, {\n        key: \"hasTextData\",\n        value: function hasTextData() {\n          return this.text.segments.get().length > 0;\n        }\n      }, {\n        key: \"hasIconData\",\n        value: function hasIconData() {\n          return this.icon.segments.get().length > 0;\n        }\n      }, {\n        key: \"hasDebugData\",\n        value: function hasDebugData() {\n          return this.textCollisionBox && this.iconCollisionBox;\n        }\n      }, {\n        key: \"hasTextCollisionBoxData\",\n        value: function hasTextCollisionBoxData() {\n          return this.hasDebugData() && this.textCollisionBox.segments.get().length > 0;\n        }\n      }, {\n        key: \"hasIconCollisionBoxData\",\n        value: function hasIconCollisionBoxData() {\n          return this.hasDebugData() && this.iconCollisionBox.segments.get().length > 0;\n        }\n      }, {\n        key: \"addIndicesForPlacedSymbol\",\n        value: function addIndicesForPlacedSymbol(t, e) {\n          var r = t.placedSymbolArray.get(e),\n            n = r.vertexStartIndex + 4 * r.numGlyphs;\n          for (var _e133 = r.vertexStartIndex; _e133 < n; _e133 += 4) t.indexArray.emplaceBack(_e133, _e133 + 1, _e133 + 2), t.indexArray.emplaceBack(_e133 + 1, _e133 + 2, _e133 + 3);\n        }\n      }, {\n        key: \"getSortedSymbolIndexes\",\n        value: function getSortedSymbolIndexes(t) {\n          if (this.sortedAngle === t && void 0 !== this.symbolInstanceIndexes) return this.symbolInstanceIndexes;\n          var e = Math.sin(t),\n            r = Math.cos(t),\n            n = [],\n            i = [],\n            a = [];\n          for (var _t132 = 0; _t132 < this.symbolInstances.length; ++_t132) {\n            a.push(_t132);\n            var _s58 = this.symbolInstances.get(_t132);\n            n.push(0 | Math.round(e * _s58.anchorX + r * _s58.anchorY)), i.push(_s58.featureIndex);\n          }\n          return a.sort(function (t, e) {\n            return n[t] - n[e] || i[e] - i[t];\n          }), a;\n        }\n      }, {\n        key: \"addToSortKeyRanges\",\n        value: function addToSortKeyRanges(t, e) {\n          var r = this.sortKeyRanges[this.sortKeyRanges.length - 1];\n          r && r.sortKey === e ? r.symbolInstanceEnd = t + 1 : this.sortKeyRanges.push({\n            sortKey: e,\n            symbolInstanceStart: t,\n            symbolInstanceEnd: t + 1\n          });\n        }\n      }, {\n        key: \"sortFeatures\",\n        value: function sortFeatures(t) {\n          var _this10 = this;\n          if (this.sortFeaturesByY && this.sortedAngle !== t && !(this.text.segments.get().length > 1 || this.icon.segments.get().length > 1)) {\n            this.symbolInstanceIndexes = this.getSortedSymbolIndexes(t), this.sortedAngle = t, this.text.indexArray.clear(), this.icon.indexArray.clear(), this.featureSortOrder = [];\n            var _iterator98 = _createForOfIteratorHelper(this.symbolInstanceIndexes),\n              _step98;\n            try {\n              for (_iterator98.s(); !(_step98 = _iterator98.n()).done;) {\n                var _t133 = _step98.value;\n                var _e134 = this.symbolInstances.get(_t133);\n                this.featureSortOrder.push(_e134.featureIndex), [_e134.rightJustifiedTextSymbolIndex, _e134.centerJustifiedTextSymbolIndex, _e134.leftJustifiedTextSymbolIndex].forEach(function (t, e, r) {\n                  t >= 0 && r.indexOf(t) === e && _this10.addIndicesForPlacedSymbol(_this10.text, t);\n                }), _e134.verticalPlacedTextSymbolIndex >= 0 && this.addIndicesForPlacedSymbol(this.text, _e134.verticalPlacedTextSymbolIndex), _e134.placedIconSymbolIndex >= 0 && this.addIndicesForPlacedSymbol(this.icon, _e134.placedIconSymbolIndex), _e134.verticalPlacedIconSymbolIndex >= 0 && this.addIndicesForPlacedSymbol(this.icon, _e134.verticalPlacedIconSymbolIndex);\n              }\n            } catch (err) {\n              _iterator98.e(err);\n            } finally {\n              _iterator98.f();\n            }\n            this.text.indexBuffer && this.text.indexBuffer.updateData(this.text.indexArray), this.icon.indexBuffer && this.icon.indexBuffer.updateData(this.icon.indexArray);\n          }\n        }\n      }]);\n      return Du;\n    }();\n    Mn(\"SymbolBucket\", Du, {\n      omit: [\"layers\", \"collisionBoxArray\", \"features\", \"compareText\"]\n    }), Du.MAX_GLYPHS = 65535, Du.addDynamicAttributes = Eu;\n    var $u = new fi({\n      \"symbol-placement\": new li(nt.layout_symbol[\"symbol-placement\"]),\n      \"symbol-spacing\": new li(nt.layout_symbol[\"symbol-spacing\"]),\n      \"symbol-avoid-edges\": new li(nt.layout_symbol[\"symbol-avoid-edges\"]),\n      \"symbol-sort-key\": new ui(nt.layout_symbol[\"symbol-sort-key\"]),\n      \"symbol-z-order\": new li(nt.layout_symbol[\"symbol-z-order\"]),\n      \"icon-allow-overlap\": new li(nt.layout_symbol[\"icon-allow-overlap\"]),\n      \"icon-overlap\": new li(nt.layout_symbol[\"icon-overlap\"]),\n      \"icon-ignore-placement\": new li(nt.layout_symbol[\"icon-ignore-placement\"]),\n      \"icon-optional\": new li(nt.layout_symbol[\"icon-optional\"]),\n      \"icon-rotation-alignment\": new li(nt.layout_symbol[\"icon-rotation-alignment\"]),\n      \"icon-size\": new ui(nt.layout_symbol[\"icon-size\"]),\n      \"icon-text-fit\": new li(nt.layout_symbol[\"icon-text-fit\"]),\n      \"icon-text-fit-padding\": new li(nt.layout_symbol[\"icon-text-fit-padding\"]),\n      \"icon-image\": new ui(nt.layout_symbol[\"icon-image\"]),\n      \"icon-rotate\": new ui(nt.layout_symbol[\"icon-rotate\"]),\n      \"icon-padding\": new ui(nt.layout_symbol[\"icon-padding\"]),\n      \"icon-keep-upright\": new li(nt.layout_symbol[\"icon-keep-upright\"]),\n      \"icon-offset\": new ui(nt.layout_symbol[\"icon-offset\"]),\n      \"icon-anchor\": new ui(nt.layout_symbol[\"icon-anchor\"]),\n      \"icon-pitch-alignment\": new li(nt.layout_symbol[\"icon-pitch-alignment\"]),\n      \"text-pitch-alignment\": new li(nt.layout_symbol[\"text-pitch-alignment\"]),\n      \"text-rotation-alignment\": new li(nt.layout_symbol[\"text-rotation-alignment\"]),\n      \"text-field\": new ui(nt.layout_symbol[\"text-field\"]),\n      \"text-font\": new ui(nt.layout_symbol[\"text-font\"]),\n      \"text-size\": new ui(nt.layout_symbol[\"text-size\"]),\n      \"text-max-width\": new ui(nt.layout_symbol[\"text-max-width\"]),\n      \"text-line-height\": new li(nt.layout_symbol[\"text-line-height\"]),\n      \"text-letter-spacing\": new ui(nt.layout_symbol[\"text-letter-spacing\"]),\n      \"text-justify\": new ui(nt.layout_symbol[\"text-justify\"]),\n      \"text-radial-offset\": new ui(nt.layout_symbol[\"text-radial-offset\"]),\n      \"text-variable-anchor\": new li(nt.layout_symbol[\"text-variable-anchor\"]),\n      \"text-anchor\": new ui(nt.layout_symbol[\"text-anchor\"]),\n      \"text-max-angle\": new li(nt.layout_symbol[\"text-max-angle\"]),\n      \"text-writing-mode\": new li(nt.layout_symbol[\"text-writing-mode\"]),\n      \"text-rotate\": new ui(nt.layout_symbol[\"text-rotate\"]),\n      \"text-padding\": new li(nt.layout_symbol[\"text-padding\"]),\n      \"text-keep-upright\": new li(nt.layout_symbol[\"text-keep-upright\"]),\n      \"text-transform\": new ui(nt.layout_symbol[\"text-transform\"]),\n      \"text-offset\": new ui(nt.layout_symbol[\"text-offset\"]),\n      \"text-allow-overlap\": new li(nt.layout_symbol[\"text-allow-overlap\"]),\n      \"text-overlap\": new li(nt.layout_symbol[\"text-overlap\"]),\n      \"text-ignore-placement\": new li(nt.layout_symbol[\"text-ignore-placement\"]),\n      \"text-optional\": new li(nt.layout_symbol[\"text-optional\"])\n    });\n    var Ru = {\n      paint: new fi({\n        \"icon-opacity\": new ui(nt.paint_symbol[\"icon-opacity\"]),\n        \"icon-color\": new ui(nt.paint_symbol[\"icon-color\"]),\n        \"icon-halo-color\": new ui(nt.paint_symbol[\"icon-halo-color\"]),\n        \"icon-halo-width\": new ui(nt.paint_symbol[\"icon-halo-width\"]),\n        \"icon-halo-blur\": new ui(nt.paint_symbol[\"icon-halo-blur\"]),\n        \"icon-translate\": new li(nt.paint_symbol[\"icon-translate\"]),\n        \"icon-translate-anchor\": new li(nt.paint_symbol[\"icon-translate-anchor\"]),\n        \"text-opacity\": new ui(nt.paint_symbol[\"text-opacity\"]),\n        \"text-color\": new ui(nt.paint_symbol[\"text-color\"], {\n          runtimeType: yt,\n          getOverride: function getOverride(t) {\n            return t.textColor;\n          },\n          hasOverride: function hasOverride(t) {\n            return !!t.textColor;\n          }\n        }),\n        \"text-halo-color\": new ui(nt.paint_symbol[\"text-halo-color\"]),\n        \"text-halo-width\": new ui(nt.paint_symbol[\"text-halo-width\"]),\n        \"text-halo-blur\": new ui(nt.paint_symbol[\"text-halo-blur\"]),\n        \"text-translate\": new li(nt.paint_symbol[\"text-translate\"]),\n        \"text-translate-anchor\": new li(nt.paint_symbol[\"text-translate-anchor\"])\n      }),\n      layout: $u\n    };\n    var Ou = /*#__PURE__*/function () {\n      function Ou(t) {\n        _classCallCheck(this, Ou);\n        if (void 0 === t.property.overrides) throw new Error(\"overrides must be provided to instantiate FormatSectionOverride class\");\n        this.type = t.property.overrides ? t.property.overrides.runtimeType : ht, this.defaultValue = t;\n      }\n      _createClass(Ou, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          if (t.formattedSection) {\n            var _e135 = this.defaultValue.property.overrides;\n            if (_e135 && _e135.hasOverride(t.formattedSection)) return _e135.getOverride(t.formattedSection);\n          }\n          return t.feature && t.featureState ? this.defaultValue.evaluate(t.feature, t.featureState) : this.defaultValue.property.specification.default;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          this.defaultValue.isConstant() || t(this.defaultValue.value._styleExpression.expression);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return null;\n        }\n      }]);\n      return Ou;\n    }();\n    Mn(\"FormatSectionOverride\", Ou, {\n      omit: [\"defaultValue\"]\n    });\n    var Uu = /*#__PURE__*/function (_yi) {\n      _inherits(Uu, _yi);\n      var _super58 = _createSuper(Uu);\n      function Uu(t) {\n        _classCallCheck(this, Uu);\n        return _super58.call(this, t, Ru);\n      }\n      _createClass(Uu, [{\n        key: \"recalculate\",\n        value: function recalculate(t, e) {\n          if (_get(_getPrototypeOf(Uu.prototype), \"recalculate\", this).call(this, t, e), \"auto\" === this.layout.get(\"icon-rotation-alignment\") && (this.layout._values[\"icon-rotation-alignment\"] = \"point\" !== this.layout.get(\"symbol-placement\") ? \"map\" : \"viewport\"), \"auto\" === this.layout.get(\"text-rotation-alignment\") && (this.layout._values[\"text-rotation-alignment\"] = \"point\" !== this.layout.get(\"symbol-placement\") ? \"map\" : \"viewport\"), \"auto\" === this.layout.get(\"text-pitch-alignment\") && (this.layout._values[\"text-pitch-alignment\"] = \"map\" === this.layout.get(\"text-rotation-alignment\") ? \"map\" : \"viewport\"), \"auto\" === this.layout.get(\"icon-pitch-alignment\") && (this.layout._values[\"icon-pitch-alignment\"] = this.layout.get(\"icon-rotation-alignment\")), \"point\" === this.layout.get(\"symbol-placement\")) {\n            var _t134 = this.layout.get(\"text-writing-mode\");\n            if (_t134) {\n              var _e136 = [];\n              var _iterator99 = _createForOfIteratorHelper(_t134),\n                _step99;\n              try {\n                for (_iterator99.s(); !(_step99 = _iterator99.n()).done;) {\n                  var _r132 = _step99.value;\n                  _e136.indexOf(_r132) < 0 && _e136.push(_r132);\n                }\n              } catch (err) {\n                _iterator99.e(err);\n              } finally {\n                _iterator99.f();\n              }\n              this.layout._values[\"text-writing-mode\"] = _e136;\n            } else this.layout._values[\"text-writing-mode\"] = [\"horizontal\"];\n          }\n          this._setPaintOverrides();\n        }\n      }, {\n        key: \"getValueAndResolveTokens\",\n        value: function getValueAndResolveTokens(t, e, r, n) {\n          var i = this.layout.get(t).evaluate(e, {}, r, n),\n            a = this._unevaluatedLayout._values[t];\n          return a.isDataDriven() || Er(a.value) || !i ? i : function (t, e) {\n            return e.replace(/{([^{}]+)}/g, function (e, r) {\n              return r in t ? String(t[r]) : \"\";\n            });\n          }(e.properties, i);\n        }\n      }, {\n        key: \"createBucket\",\n        value: function createBucket(t) {\n          return new Du(t);\n        }\n      }, {\n        key: \"queryRadius\",\n        value: function queryRadius() {\n          return 0;\n        }\n      }, {\n        key: \"queryIntersectsFeature\",\n        value: function queryIntersectsFeature() {\n          throw new Error(\"Should take a different path in FeatureIndex\");\n        }\n      }, {\n        key: \"_setPaintOverrides\",\n        value: function _setPaintOverrides() {\n          var _iterator100 = _createForOfIteratorHelper(Ru.paint.overridableProperties),\n            _step100;\n          try {\n            for (_iterator100.s(); !(_step100 = _iterator100.n()).done;) {\n              var _t135 = _step100.value;\n              if (!Uu.hasPaintOverride(this.layout, _t135)) continue;\n              var _e137 = this.paint.get(_t135),\n                _r133 = new Ou(_e137),\n                _n94 = new Vr(_r133, _e137.property.specification);\n              var _i94 = null;\n              _i94 = \"constant\" === _e137.value.kind || \"source\" === _e137.value.kind ? new Tr(\"source\", _n94) : new Lr(\"composite\", _n94, _e137.value.zoomStops), this.paint._values[_t135] = new si(_e137.property, _i94, _e137.parameters);\n            }\n          } catch (err) {\n            _iterator100.e(err);\n          } finally {\n            _iterator100.f();\n          }\n        }\n      }, {\n        key: \"_handleOverridablePaintPropertyUpdate\",\n        value: function _handleOverridablePaintPropertyUpdate(t, e, r) {\n          return !(!this.layout || e.isDataDriven() || r.isDataDriven()) && Uu.hasPaintOverride(this.layout, t);\n        }\n      }], [{\n        key: \"hasPaintOverride\",\n        value: function hasPaintOverride(t, e) {\n          var r = t.get(\"text-field\"),\n            n = Ru.paint.properties[e];\n          var i = !1;\n          var a = function a(t) {\n            var _iterator101 = _createForOfIteratorHelper(t),\n              _step101;\n            try {\n              for (_iterator101.s(); !(_step101 = _iterator101.n()).done;) {\n                var _e138 = _step101.value;\n                if (n.overrides && n.overrides.hasOverride(_e138)) return void (i = !0);\n              }\n            } catch (err) {\n              _iterator101.e(err);\n            } finally {\n              _iterator101.f();\n            }\n          };\n          if (\"constant\" === r.value.kind && r.value.value instanceof Dt) a(r.value.value.sections);else if (\"source\" === r.value.kind) {\n            var _t136 = function _t136(e) {\n                i || (e instanceof Nt && qt(e.value) === vt ? a(e.value.sections) : e instanceof cr ? a(e.sections) : e.eachChild(_t136));\n              },\n              _e139 = r.value;\n            _e139._styleExpression && _t136(_e139._styleExpression.expression);\n          }\n          return i;\n        }\n      }]);\n      return Uu;\n    }(yi);\n    function qu(t, e, r) {\n      var n = \"never\";\n      var i = t.get(e);\n      return i ? n = i : t.get(r) && (n = \"always\"), n;\n    }\n    var ju = {\n        paint: new fi({\n          \"background-color\": new li(nt.paint_background[\"background-color\"]),\n          \"background-pattern\": new hi(nt.paint_background[\"background-pattern\"]),\n          \"background-opacity\": new li(nt.paint_background[\"background-opacity\"])\n        })\n      },\n      Nu = {\n        paint: new fi({\n          \"raster-opacity\": new li(nt.paint_raster[\"raster-opacity\"]),\n          \"raster-hue-rotate\": new li(nt.paint_raster[\"raster-hue-rotate\"]),\n          \"raster-brightness-min\": new li(nt.paint_raster[\"raster-brightness-min\"]),\n          \"raster-brightness-max\": new li(nt.paint_raster[\"raster-brightness-max\"]),\n          \"raster-saturation\": new li(nt.paint_raster[\"raster-saturation\"]),\n          \"raster-contrast\": new li(nt.paint_raster[\"raster-contrast\"]),\n          \"raster-resampling\": new li(nt.paint_raster[\"raster-resampling\"]),\n          \"raster-fade-duration\": new li(nt.paint_raster[\"raster-fade-duration\"])\n        })\n      };\n    var Zu = /*#__PURE__*/function (_yi2) {\n      _inherits(Zu, _yi2);\n      var _super59 = _createSuper(Zu);\n      function Zu(t) {\n        var _this11;\n        _classCallCheck(this, Zu);\n        _this11 = _super59.call(this, t, {}), _this11.onAdd = function (t) {\n          _this11.implementation.onAdd && _this11.implementation.onAdd(t, t.painter.context.gl);\n        }, _this11.onRemove = function (t) {\n          _this11.implementation.onRemove && _this11.implementation.onRemove(t, t.painter.context.gl);\n        }, _this11.implementation = t;\n        return _this11;\n      }\n      _createClass(Zu, [{\n        key: \"is3D\",\n        value: function is3D() {\n          return \"3d\" === this.implementation.renderingMode;\n        }\n      }, {\n        key: \"hasOffscreenPass\",\n        value: function hasOffscreenPass() {\n          return void 0 !== this.implementation.prerender;\n        }\n      }, {\n        key: \"recalculate\",\n        value: function recalculate() {}\n      }, {\n        key: \"updateTransitions\",\n        value: function updateTransitions() {}\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          throw new Error(\"Custom layers cannot be serialized\");\n        }\n      }]);\n      return Zu;\n    }(yi);\n    var Ku = {\n      circle: /*#__PURE__*/function (_yi3) {\n        _inherits(circle, _yi3);\n        var _super60 = _createSuper(circle);\n        function circle(t) {\n          _classCallCheck(this, circle);\n          return _super60.call(this, t, cs);\n        }\n        _createClass(circle, [{\n          key: \"createBucket\",\n          value: function createBucket(t) {\n            return new Ja(t);\n          }\n        }, {\n          key: \"queryRadius\",\n          value: function queryRadius(t) {\n            var e = t;\n            return ss(\"circle-radius\", this, e) + ss(\"circle-stroke-width\", this, e) + os(this.paint.get(\"circle-translate\"));\n          }\n        }, {\n          key: \"queryIntersectsFeature\",\n          value: function queryIntersectsFeature(t, e, r, n, i, a, s, o) {\n            var l = ls(t, this.paint.get(\"circle-translate\"), this.paint.get(\"circle-translate-anchor\"), a.angle, s),\n              u = this.paint.get(\"circle-radius\").evaluate(e, r) + this.paint.get(\"circle-stroke-width\").evaluate(e, r),\n              c = \"map\" === this.paint.get(\"circle-pitch-alignment\"),\n              h = c ? l : function (t, e) {\n                return t.map(function (t) {\n                  return _s(t, e);\n                });\n              }(l, o),\n              p = c ? u * s : u;\n            var _iterator102 = _createForOfIteratorHelper(n),\n              _step102;\n            try {\n              for (_iterator102.s(); !(_step102 = _iterator102.n()).done;) {\n                var _t137 = _step102.value;\n                var _iterator103 = _createForOfIteratorHelper(_t137),\n                  _step103;\n                try {\n                  for (_iterator103.s(); !(_step103 = _iterator103.n()).done;) {\n                    var _e140 = _step103.value;\n                    var _t138 = c ? _e140 : _s(_e140, o);\n                    var _r134 = p;\n                    var _n95 = bs([], [_e140.x, _e140.y, 0, 1], o);\n                    if (\"viewport\" === this.paint.get(\"circle-pitch-scale\") && \"map\" === this.paint.get(\"circle-pitch-alignment\") ? _r134 *= _n95[3] / a.cameraToCenterDistance : \"map\" === this.paint.get(\"circle-pitch-scale\") && \"viewport\" === this.paint.get(\"circle-pitch-alignment\") && (_r134 *= a.cameraToCenterDistance / _n95[3]), Ya(h, _t138, _r134)) return !0;\n                  }\n                } catch (err) {\n                  _iterator103.e(err);\n                } finally {\n                  _iterator103.f();\n                }\n              }\n            } catch (err) {\n              _iterator102.e(err);\n            } finally {\n              _iterator102.f();\n            }\n            return !1;\n          }\n        }]);\n        return circle;\n      }(yi),\n      heatmap: /*#__PURE__*/function (_yi4) {\n        _inherits(heatmap, _yi4);\n        var _super61 = _createSuper(heatmap);\n        function heatmap(t) {\n          var _this12;\n          _classCallCheck(this, heatmap);\n          _this12 = _super61.call(this, t, ks), _this12._updateColorRamp();\n          return _this12;\n        }\n        _createClass(heatmap, [{\n          key: \"createBucket\",\n          value: function createBucket(t) {\n            return new As(t);\n          }\n        }, {\n          key: \"_handleSpecialPaintPropertyUpdate\",\n          value: function _handleSpecialPaintPropertyUpdate(t) {\n            \"heatmap-color\" === t && this._updateColorRamp();\n          }\n        }, {\n          key: \"_updateColorRamp\",\n          value: function _updateColorRamp() {\n            this.colorRamp = Cs({\n              expression: this._transitionablePaint._values[\"heatmap-color\"].value.expression,\n              evaluationKey: \"heatmapDensity\",\n              image: this.colorRamp\n            }), this.colorRampTexture = null;\n          }\n        }, {\n          key: \"resize\",\n          value: function resize() {\n            this.heatmapFbo && (this.heatmapFbo.destroy(), this.heatmapFbo = null);\n          }\n        }, {\n          key: \"queryRadius\",\n          value: function queryRadius() {\n            return 0;\n          }\n        }, {\n          key: \"queryIntersectsFeature\",\n          value: function queryIntersectsFeature() {\n            return !1;\n          }\n        }, {\n          key: \"hasOffscreenPass\",\n          value: function hasOffscreenPass() {\n            return 0 !== this.paint.get(\"heatmap-opacity\") && \"none\" !== this.visibility;\n          }\n        }]);\n        return heatmap;\n      }(yi),\n      hillshade: /*#__PURE__*/function (_yi5) {\n        _inherits(hillshade, _yi5);\n        var _super62 = _createSuper(hillshade);\n        function hillshade(t) {\n          _classCallCheck(this, hillshade);\n          return _super62.call(this, t, Ps);\n        }\n        _createClass(hillshade, [{\n          key: \"hasOffscreenPass\",\n          value: function hasOffscreenPass() {\n            return 0 !== this.paint.get(\"hillshade-exaggeration\") && \"none\" !== this.visibility;\n          }\n        }]);\n        return hillshade;\n      }(yi),\n      fill: /*#__PURE__*/function (_yi6) {\n        _inherits(fill, _yi6);\n        var _super63 = _createSuper(fill);\n        function fill(t) {\n          _classCallCheck(this, fill);\n          return _super63.call(this, t, xo);\n        }\n        _createClass(fill, [{\n          key: \"recalculate\",\n          value: function recalculate(t, e) {\n            _get(_getPrototypeOf(fill.prototype), \"recalculate\", this).call(this, t, e);\n            var r = this.paint._values[\"fill-outline-color\"];\n            \"constant\" === r.value.kind && void 0 === r.value.value && (this.paint._values[\"fill-outline-color\"] = this.paint._values[\"fill-color\"]);\n          }\n        }, {\n          key: \"createBucket\",\n          value: function createBucket(t) {\n            return new mo(t);\n          }\n        }, {\n          key: \"queryRadius\",\n          value: function queryRadius() {\n            return os(this.paint.get(\"fill-translate\"));\n          }\n        }, {\n          key: \"queryIntersectsFeature\",\n          value: function queryIntersectsFeature(t, e, r, n, i, a, s) {\n            return Ha(ls(t, this.paint.get(\"fill-translate\"), this.paint.get(\"fill-translate-anchor\"), a.angle, s), n);\n          }\n        }, {\n          key: \"isTileClipped\",\n          value: function isTileClipped() {\n            return !0;\n          }\n        }]);\n        return fill;\n      }(yi),\n      \"fill-extrusion\": /*#__PURE__*/function (_yi7) {\n        _inherits(fillExtrusion, _yi7);\n        var _super64 = _createSuper(fillExtrusion);\n        function fillExtrusion(t) {\n          _classCallCheck(this, fillExtrusion);\n          return _super64.call(this, t, Oo);\n        }\n        _createClass(fillExtrusion, [{\n          key: \"createBucket\",\n          value: function createBucket(t) {\n            return new Do(t);\n          }\n        }, {\n          key: \"queryRadius\",\n          value: function queryRadius() {\n            return os(this.paint.get(\"fill-extrusion-translate\"));\n          }\n        }, {\n          key: \"is3D\",\n          value: function is3D() {\n            return !0;\n          }\n        }, {\n          key: \"queryIntersectsFeature\",\n          value: function queryIntersectsFeature(t, e, r, n, i, a, s, o) {\n            var l = ls(t, this.paint.get(\"fill-extrusion-translate\"), this.paint.get(\"fill-extrusion-translate-anchor\"), a.angle, s),\n              u = this.paint.get(\"fill-extrusion-height\").evaluate(e, r),\n              c = this.paint.get(\"fill-extrusion-base\").evaluate(e, r),\n              h = function (t, e, r, n) {\n                var i = [];\n                var _iterator104 = _createForOfIteratorHelper(t),\n                  _step104;\n                try {\n                  for (_iterator104.s(); !(_step104 = _iterator104.n()).done;) {\n                    var _r135 = _step104.value;\n                    var _t139 = [_r135.x, _r135.y, 0, 1];\n                    bs(_t139, _t139, e), i.push(new S(_t139[0] / _t139[3], _t139[1] / _t139[3]));\n                  }\n                } catch (err) {\n                  _iterator104.e(err);\n                } finally {\n                  _iterator104.f();\n                }\n                return i;\n              }(l, o),\n              p = function (t, e, r, n) {\n                var i = [],\n                  a = [],\n                  s = n[8] * e,\n                  o = n[9] * e,\n                  l = n[10] * e,\n                  u = n[11] * e,\n                  c = n[8] * r,\n                  h = n[9] * r,\n                  p = n[10] * r,\n                  f = n[11] * r;\n                var _iterator105 = _createForOfIteratorHelper(t),\n                  _step105;\n                try {\n                  for (_iterator105.s(); !(_step105 = _iterator105.n()).done;) {\n                    var _e141 = _step105.value;\n                    var _t140 = [],\n                      _r136 = [];\n                    var _iterator106 = _createForOfIteratorHelper(_e141),\n                      _step106;\n                    try {\n                      for (_iterator106.s(); !(_step106 = _iterator106.n()).done;) {\n                        var _i95 = _step106.value;\n                        var _e142 = _i95.x,\n                          _a66 = _i95.y,\n                          _d5 = n[0] * _e142 + n[4] * _a66 + n[12],\n                          _y6 = n[1] * _e142 + n[5] * _a66 + n[13],\n                          _m9 = n[2] * _e142 + n[6] * _a66 + n[14],\n                          _g8 = n[3] * _e142 + n[7] * _a66 + n[15],\n                          _x7 = _m9 + l,\n                          _v4 = _g8 + u,\n                          _b7 = _d5 + c,\n                          _w5 = _y6 + h,\n                          _6 = _m9 + p,\n                          _A6 = _g8 + f,\n                          _k5 = new S((_d5 + s) / _v4, (_y6 + o) / _v4);\n                        _k5.z = _x7 / _v4, _t140.push(_k5);\n                        var _I3 = new S(_b7 / _A6, _w5 / _A6);\n                        _I3.z = _6 / _A6, _r136.push(_I3);\n                      }\n                    } catch (err) {\n                      _iterator106.e(err);\n                    } finally {\n                      _iterator106.f();\n                    }\n                    i.push(_t140), a.push(_r136);\n                  }\n                } catch (err) {\n                  _iterator105.e(err);\n                } finally {\n                  _iterator105.f();\n                }\n                return [i, a];\n              }(n, c, u, o);\n            return function (t, e, r) {\n              var n = 1 / 0;\n              Ha(r, e) && (n = qo(r, e[0]));\n              for (var _i96 = 0; _i96 < e.length; _i96++) {\n                var _a67 = e[_i96],\n                  _s59 = t[_i96];\n                for (var _t141 = 0; _t141 < _a67.length - 1; _t141++) {\n                  var _e143 = _a67[_t141],\n                    _i97 = [_e143, _a67[_t141 + 1], _s59[_t141 + 1], _s59[_t141], _e143];\n                  Xa(r, _i97) && (n = Math.min(n, qo(r, _i97)));\n                }\n              }\n              return n !== 1 / 0 && n;\n            }(p[0], p[1], h);\n          }\n        }]);\n        return fillExtrusion;\n      }(yi),\n      line: /*#__PURE__*/function (_yi8) {\n        _inherits(line, _yi8);\n        var _super65 = _createSuper(line);\n        function line(t) {\n          var _this13;\n          _classCallCheck(this, line);\n          _this13 = _super65.call(this, t, Wo), _this13.gradientVersion = 0;\n          return _this13;\n        }\n        _createClass(line, [{\n          key: \"_handleSpecialPaintPropertyUpdate\",\n          value: function _handleSpecialPaintPropertyUpdate(t) {\n            \"line-gradient\" === t && (this.stepInterpolant = this._transitionablePaint._values[\"line-gradient\"].value.expression._styleExpression.expression instanceof ke, this.gradientVersion = (this.gradientVersion + 1) % Number.MAX_SAFE_INTEGER);\n          }\n        }, {\n          key: \"gradientExpression\",\n          value: function gradientExpression() {\n            return this._transitionablePaint._values[\"line-gradient\"].value.expression;\n          }\n        }, {\n          key: \"recalculate\",\n          value: function recalculate(t, e) {\n            _get(_getPrototypeOf(line.prototype), \"recalculate\", this).call(this, t, e), this.paint._values[\"line-floorwidth\"] = Qo.possiblyEvaluate(this._transitioningPaint._values[\"line-width\"].value, t);\n          }\n        }, {\n          key: \"createBucket\",\n          value: function createBucket(t) {\n            return new Yo(t);\n          }\n        }, {\n          key: \"queryRadius\",\n          value: function queryRadius(t) {\n            var e = t,\n              r = tl(ss(\"line-width\", this, e), ss(\"line-gap-width\", this, e)),\n              n = ss(\"line-offset\", this, e);\n            return r / 2 + Math.abs(n) + os(this.paint.get(\"line-translate\"));\n          }\n        }, {\n          key: \"queryIntersectsFeature\",\n          value: function queryIntersectsFeature(t, e, r, n, i, a, s) {\n            var o = ls(t, this.paint.get(\"line-translate\"), this.paint.get(\"line-translate-anchor\"), a.angle, s),\n              l = s / 2 * tl(this.paint.get(\"line-width\").evaluate(e, r), this.paint.get(\"line-gap-width\").evaluate(e, r)),\n              u = this.paint.get(\"line-offset\").evaluate(e, r);\n            return u && (n = function (t, e) {\n              var r = [];\n              for (var _n96 = 0; _n96 < t.length; _n96++) {\n                var _i98 = t[_n96],\n                  _a68 = [];\n                for (var _t142 = 0; _t142 < _i98.length; _t142++) {\n                  var _r137 = _i98[_t142 - 1],\n                    _n97 = _i98[_t142],\n                    _s60 = _i98[_t142 + 1],\n                    _o31 = 0 === _t142 ? new S(0, 0) : _n97.sub(_r137)._unit()._perp(),\n                    _l27 = _t142 === _i98.length - 1 ? new S(0, 0) : _s60.sub(_n97)._unit()._perp(),\n                    _u21 = _o31._add(_l27)._unit(),\n                    _c15 = _u21.x * _l27.x + _u21.y * _l27.y;\n                  0 !== _c15 && _u21._mult(1 / _c15), _a68.push(_u21._mult(e)._add(_n97));\n                }\n                r.push(_a68);\n              }\n              return r;\n            }(n, u * s)), function (t, e, r) {\n              for (var _n98 = 0; _n98 < e.length; _n98++) {\n                var _i99 = e[_n98];\n                if (t.length >= 3) for (var _e144 = 0; _e144 < _i99.length; _e144++) if (is(t, _i99[_e144])) return !0;\n                if (Wa(t, _i99, r)) return !0;\n              }\n              return !1;\n            }(o, n, l);\n          }\n        }, {\n          key: \"isTileClipped\",\n          value: function isTileClipped() {\n            return !0;\n          }\n        }]);\n        return line;\n      }(yi),\n      symbol: Uu,\n      background: /*#__PURE__*/function (_yi9) {\n        _inherits(background, _yi9);\n        var _super66 = _createSuper(background);\n        function background(t) {\n          _classCallCheck(this, background);\n          return _super66.call(this, t, ju);\n        }\n        return _createClass(background);\n      }(yi),\n      raster: /*#__PURE__*/function (_yi10) {\n        _inherits(raster, _yi10);\n        var _super67 = _createSuper(raster);\n        function raster(t) {\n          _classCallCheck(this, raster);\n          return _super67.call(this, t, Nu);\n        }\n        return _createClass(raster);\n      }(yi)\n    };\n    var Gu = /*#__PURE__*/function () {\n      function Gu(t) {\n        var _this14 = this;\n        _classCallCheck(this, Gu);\n        this._callback = t, this._triggered = !1, \"undefined\" != typeof MessageChannel && (this._channel = new MessageChannel(), this._channel.port2.onmessage = function () {\n          _this14._triggered = !1, _this14._callback();\n        });\n      }\n      _createClass(Gu, [{\n        key: \"trigger\",\n        value: function trigger() {\n          var _this15 = this;\n          this._triggered || (this._triggered = !0, this._channel ? this._channel.port1.postMessage(!0) : setTimeout(function () {\n            _this15._triggered = !1, _this15._callback();\n          }, 0));\n        }\n      }, {\n        key: \"remove\",\n        value: function remove() {\n          delete this._channel, this._callback = function () {};\n        }\n      }]);\n      return Gu;\n    }();\n    var Ju = 6371008.8;\n    var Xu = /*#__PURE__*/function () {\n      function Xu(t, e) {\n        _classCallCheck(this, Xu);\n        if (isNaN(t) || isNaN(e)) throw new Error(\"Invalid LngLat object: (\".concat(t, \", \").concat(e, \")\"));\n        if (this.lng = +t, this.lat = +e, this.lat > 90 || this.lat < -90) throw new Error(\"Invalid LngLat latitude value: must be between -90 and 90\");\n      }\n      _createClass(Xu, [{\n        key: \"wrap\",\n        value: function wrap() {\n          return new Xu(s(this.lng, -180, 180), this.lat);\n        }\n      }, {\n        key: \"toArray\",\n        value: function toArray() {\n          return [this.lng, this.lat];\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          return \"LngLat(\".concat(this.lng, \", \").concat(this.lat, \")\");\n        }\n      }, {\n        key: \"distanceTo\",\n        value: function distanceTo(t) {\n          var e = Math.PI / 180,\n            r = this.lat * e,\n            n = t.lat * e,\n            i = Math.sin(r) * Math.sin(n) + Math.cos(r) * Math.cos(n) * Math.cos((t.lng - this.lng) * e);\n          return Ju * Math.acos(Math.min(i, 1));\n        }\n      }, {\n        key: \"toBounds\",\n        value: function toBounds() {\n          var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var e = 360 * t / 40075017,\n            r = e / Math.cos(Math.PI / 180 * this.lat);\n          return new Yu(new Xu(this.lng - r, this.lat - e), new Xu(this.lng + r, this.lat + e));\n        }\n      }], [{\n        key: \"convert\",\n        value: function convert(t) {\n          if (t instanceof Xu) return t;\n          if (Array.isArray(t) && (2 === t.length || 3 === t.length)) return new Xu(Number(t[0]), Number(t[1]));\n          if (!Array.isArray(t) && \"object\" == typeof t && null !== t) return new Xu(Number(\"lng\" in t ? t.lng : t.lon), Number(t.lat));\n          throw new Error(\"`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]\");\n        }\n      }]);\n      return Xu;\n    }();\n    var Yu = /*#__PURE__*/function () {\n      function Yu(t, e) {\n        _classCallCheck(this, Yu);\n        t && (e ? this.setSouthWest(t).setNorthEast(e) : 4 === t.length ? this.setSouthWest([t[0], t[1]]).setNorthEast([t[2], t[3]]) : this.setSouthWest(t[0]).setNorthEast(t[1]));\n      }\n      _createClass(Yu, [{\n        key: \"setNorthEast\",\n        value: function setNorthEast(t) {\n          return this._ne = t instanceof Xu ? new Xu(t.lng, t.lat) : Xu.convert(t), this;\n        }\n      }, {\n        key: \"setSouthWest\",\n        value: function setSouthWest(t) {\n          return this._sw = t instanceof Xu ? new Xu(t.lng, t.lat) : Xu.convert(t), this;\n        }\n      }, {\n        key: \"extend\",\n        value: function extend(t) {\n          var e = this._sw,\n            r = this._ne;\n          var n, i;\n          if (t instanceof Xu) n = t, i = t;else {\n            if (!(t instanceof Yu)) return Array.isArray(t) ? 4 === t.length || t.every(Array.isArray) ? this.extend(Yu.convert(t)) : this.extend(Xu.convert(t)) : this;\n            if (n = t._sw, i = t._ne, !n || !i) return this;\n          }\n          return e || r ? (e.lng = Math.min(n.lng, e.lng), e.lat = Math.min(n.lat, e.lat), r.lng = Math.max(i.lng, r.lng), r.lat = Math.max(i.lat, r.lat)) : (this._sw = new Xu(n.lng, n.lat), this._ne = new Xu(i.lng, i.lat)), this;\n        }\n      }, {\n        key: \"getCenter\",\n        value: function getCenter() {\n          return new Xu((this._sw.lng + this._ne.lng) / 2, (this._sw.lat + this._ne.lat) / 2);\n        }\n      }, {\n        key: \"getSouthWest\",\n        value: function getSouthWest() {\n          return this._sw;\n        }\n      }, {\n        key: \"getNorthEast\",\n        value: function getNorthEast() {\n          return this._ne;\n        }\n      }, {\n        key: \"getNorthWest\",\n        value: function getNorthWest() {\n          return new Xu(this.getWest(), this.getNorth());\n        }\n      }, {\n        key: \"getSouthEast\",\n        value: function getSouthEast() {\n          return new Xu(this.getEast(), this.getSouth());\n        }\n      }, {\n        key: \"getWest\",\n        value: function getWest() {\n          return this._sw.lng;\n        }\n      }, {\n        key: \"getSouth\",\n        value: function getSouth() {\n          return this._sw.lat;\n        }\n      }, {\n        key: \"getEast\",\n        value: function getEast() {\n          return this._ne.lng;\n        }\n      }, {\n        key: \"getNorth\",\n        value: function getNorth() {\n          return this._ne.lat;\n        }\n      }, {\n        key: \"toArray\",\n        value: function toArray() {\n          return [this._sw.toArray(), this._ne.toArray()];\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          return \"LngLatBounds(\".concat(this._sw.toString(), \", \").concat(this._ne.toString(), \")\");\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return !(this._sw && this._ne);\n        }\n      }, {\n        key: \"contains\",\n        value: function contains(t) {\n          var _Xu$convert = Xu.convert(t),\n            e = _Xu$convert.lng,\n            r = _Xu$convert.lat;\n          var n = this._sw.lng <= e && e <= this._ne.lng;\n          return this._sw.lng > this._ne.lng && (n = this._sw.lng >= e && e >= this._ne.lng), this._sw.lat <= r && r <= this._ne.lat && n;\n        }\n      }], [{\n        key: \"convert\",\n        value: function convert(t) {\n          return t instanceof Yu ? t : t ? new Yu(t) : t;\n        }\n      }]);\n      return Yu;\n    }();\n    var Hu = 2 * Math.PI * Ju;\n    function Wu(t) {\n      return Hu * Math.cos(t * Math.PI / 180);\n    }\n    function Qu(t) {\n      return (180 + t) / 360;\n    }\n    function tc(t) {\n      return (180 - 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + t * Math.PI / 360))) / 360;\n    }\n    function ec(t, e) {\n      return t / Wu(e);\n    }\n    function rc(t) {\n      return 360 / Math.PI * Math.atan(Math.exp((180 - 360 * t) * Math.PI / 180)) - 90;\n    }\n    var nc = /*#__PURE__*/function () {\n      function nc(t, e) {\n        var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        _classCallCheck(this, nc);\n        this.x = +t, this.y = +e, this.z = +r;\n      }\n      _createClass(nc, [{\n        key: \"toLngLat\",\n        value: function toLngLat() {\n          return new Xu(360 * this.x - 180, rc(this.y));\n        }\n      }, {\n        key: \"toAltitude\",\n        value: function toAltitude() {\n          return this.z * Wu(rc(this.y));\n        }\n      }, {\n        key: \"meterInMercatorCoordinateUnits\",\n        value: function meterInMercatorCoordinateUnits() {\n          return 1 / Hu * (t = rc(this.y), 1 / Math.cos(t * Math.PI / 180));\n          var t;\n        }\n      }], [{\n        key: \"fromLngLat\",\n        value: function fromLngLat(t) {\n          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n          var r = Xu.convert(t);\n          return new nc(Qu(r.lng), tc(r.lat), ec(e, r.lat));\n        }\n      }]);\n      return nc;\n    }();\n    function ic(t, e, r) {\n      var n = 2 * Math.PI * 6378137 / 256 / Math.pow(2, r);\n      return [t * n - 2 * Math.PI * 6378137 / 2, e * n - 2 * Math.PI * 6378137 / 2];\n    }\n    var ac = /*#__PURE__*/function () {\n      function ac(t, e, r) {\n        _classCallCheck(this, ac);\n        if (t < 0 || t > 25 || r < 0 || r >= Math.pow(2, t) || e < 0 || e >= Math.pow(2, t)) throw new Error(\"x=\".concat(e, \", y=\").concat(r, \", z=\").concat(t, \" outside of bounds. 0<=x<\").concat(Math.pow(2, t), \", 0<=y<\").concat(Math.pow(2, t), \" 0<=z<=25 \"));\n        this.z = t, this.x = e, this.y = r, this.key = lc(0, t, t, e, r);\n      }\n      _createClass(ac, [{\n        key: \"equals\",\n        value: function equals(t) {\n          return this.z === t.z && this.x === t.x && this.y === t.y;\n        }\n      }, {\n        key: \"url\",\n        value: function url(t, e, r) {\n          var n = (a = this.y, s = this.z, o = ic(256 * (i = this.x), 256 * (a = Math.pow(2, s) - a - 1), s), l = ic(256 * (i + 1), 256 * (a + 1), s), o[0] + \",\" + o[1] + \",\" + l[0] + \",\" + l[1]);\n          var i, a, s, o, l;\n          var u = function (t, e, r) {\n            var n,\n              i = \"\";\n            for (var _a69 = t; _a69 > 0; _a69--) n = 1 << _a69 - 1, i += (e & n ? 1 : 0) + (r & n ? 2 : 0);\n            return i;\n          }(this.z, this.x, this.y);\n          return t[(this.x + this.y) % t.length].replace(/{prefix}/g, (this.x % 16).toString(16) + (this.y % 16).toString(16)).replace(/{z}/g, String(this.z)).replace(/{x}/g, String(this.x)).replace(/{y}/g, String(\"tms\" === r ? Math.pow(2, this.z) - this.y - 1 : this.y)).replace(/{ratio}/g, e > 1 ? \"@2x\" : \"\").replace(/{quadkey}/g, u).replace(/{bbox-epsg-3857}/g, n);\n        }\n      }, {\n        key: \"isChildOf\",\n        value: function isChildOf(t) {\n          var e = this.z - t.z;\n          return e > 0 && t.x === this.x >> e && t.y === this.y >> e;\n        }\n      }, {\n        key: \"getTilePoint\",\n        value: function getTilePoint(t) {\n          var e = Math.pow(2, this.z);\n          return new S((t.x * e - this.x) * qa, (t.y * e - this.y) * qa);\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          return \"\".concat(this.z, \"/\").concat(this.x, \"/\").concat(this.y);\n        }\n      }]);\n      return ac;\n    }();\n    var sc = /*#__PURE__*/_createClass(function sc(t, e) {\n      _classCallCheck(this, sc);\n      this.wrap = t, this.canonical = e, this.key = lc(t, e.z, e.z, e.x, e.y);\n    });\n    var oc = /*#__PURE__*/function () {\n      function oc(t, e, r, n, i) {\n        _classCallCheck(this, oc);\n        if (t < r) throw new Error(\"overscaledZ should be >= z; overscaledZ = \".concat(t, \"; z = \").concat(r));\n        this.overscaledZ = t, this.wrap = e, this.canonical = new ac(r, +n, +i), this.key = lc(e, t, r, n, i);\n      }\n      _createClass(oc, [{\n        key: \"clone\",\n        value: function clone() {\n          return new oc(this.overscaledZ, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y);\n        }\n      }, {\n        key: \"equals\",\n        value: function equals(t) {\n          return this.overscaledZ === t.overscaledZ && this.wrap === t.wrap && this.canonical.equals(t.canonical);\n        }\n      }, {\n        key: \"scaledTo\",\n        value: function scaledTo(t) {\n          if (t > this.overscaledZ) throw new Error(\"targetZ > this.overscaledZ; targetZ = \".concat(t, \"; overscaledZ = \").concat(this.overscaledZ));\n          var e = this.canonical.z - t;\n          return t > this.canonical.z ? new oc(t, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y) : new oc(t, this.wrap, t, this.canonical.x >> e, this.canonical.y >> e);\n        }\n      }, {\n        key: \"calculateScaledKey\",\n        value: function calculateScaledKey(t, e) {\n          if (t > this.overscaledZ) throw new Error(\"targetZ > this.overscaledZ; targetZ = \".concat(t, \"; overscaledZ = \").concat(this.overscaledZ));\n          var r = this.canonical.z - t;\n          return t > this.canonical.z ? lc(this.wrap * +e, t, this.canonical.z, this.canonical.x, this.canonical.y) : lc(this.wrap * +e, t, t, this.canonical.x >> r, this.canonical.y >> r);\n        }\n      }, {\n        key: \"isChildOf\",\n        value: function isChildOf(t) {\n          if (t.wrap !== this.wrap) return !1;\n          var e = this.canonical.z - t.canonical.z;\n          return 0 === t.overscaledZ || t.overscaledZ < this.overscaledZ && t.canonical.x === this.canonical.x >> e && t.canonical.y === this.canonical.y >> e;\n        }\n      }, {\n        key: \"children\",\n        value: function children(t) {\n          if (this.overscaledZ >= t) return [new oc(this.overscaledZ + 1, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y)];\n          var e = this.canonical.z + 1,\n            r = 2 * this.canonical.x,\n            n = 2 * this.canonical.y;\n          return [new oc(e, this.wrap, e, r, n), new oc(e, this.wrap, e, r + 1, n), new oc(e, this.wrap, e, r, n + 1), new oc(e, this.wrap, e, r + 1, n + 1)];\n        }\n      }, {\n        key: \"isLessThan\",\n        value: function isLessThan(t) {\n          return this.wrap < t.wrap || !(this.wrap > t.wrap) && (this.overscaledZ < t.overscaledZ || !(this.overscaledZ > t.overscaledZ) && (this.canonical.x < t.canonical.x || !(this.canonical.x > t.canonical.x) && this.canonical.y < t.canonical.y));\n        }\n      }, {\n        key: \"wrapped\",\n        value: function wrapped() {\n          return new oc(this.overscaledZ, 0, this.canonical.z, this.canonical.x, this.canonical.y);\n        }\n      }, {\n        key: \"unwrapTo\",\n        value: function unwrapTo(t) {\n          return new oc(this.overscaledZ, t, this.canonical.z, this.canonical.x, this.canonical.y);\n        }\n      }, {\n        key: \"overscaleFactor\",\n        value: function overscaleFactor() {\n          return Math.pow(2, this.overscaledZ - this.canonical.z);\n        }\n      }, {\n        key: \"toUnwrapped\",\n        value: function toUnwrapped() {\n          return new sc(this.wrap, this.canonical);\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          return \"\".concat(this.overscaledZ, \"/\").concat(this.canonical.x, \"/\").concat(this.canonical.y);\n        }\n      }, {\n        key: \"getTilePoint\",\n        value: function getTilePoint(t) {\n          return this.canonical.getTilePoint(new nc(t.x - this.wrap, t.y));\n        }\n      }]);\n      return oc;\n    }();\n    function lc(t, e, r, n, i) {\n      (t *= 2) < 0 && (t = -1 * t - 1);\n      var a = 1 << r;\n      return (a * a * t + a * i + n).toString(36) + r.toString(36) + e.toString(36);\n    }\n    Mn(\"CanonicalTileID\", ac), Mn(\"OverscaledTileID\", oc, {\n      omit: [\"posMatrix\"]\n    });\n    var uc = /*#__PURE__*/function () {\n      function uc(t, e, r) {\n        _classCallCheck(this, uc);\n        if (this.uid = t, e.height !== e.width) throw new RangeError(\"DEM tiles must be square\");\n        if (r && \"mapbox\" !== r && \"terrarium\" !== r) return void d(\"\\\"\".concat(r, \"\\\" is not a valid encoding type. Valid types include \\\"mapbox\\\" and \\\"terrarium\\\".\"));\n        this.stride = e.height;\n        var n = this.dim = e.height - 2;\n        this.data = new Uint32Array(e.data.buffer), this.encoding = r || \"mapbox\";\n        for (var _t143 = 0; _t143 < n; _t143++) this.data[this._idx(-1, _t143)] = this.data[this._idx(0, _t143)], this.data[this._idx(n, _t143)] = this.data[this._idx(n - 1, _t143)], this.data[this._idx(_t143, -1)] = this.data[this._idx(_t143, 0)], this.data[this._idx(_t143, n)] = this.data[this._idx(_t143, n - 1)];\n        this.data[this._idx(-1, -1)] = this.data[this._idx(0, 0)], this.data[this._idx(n, -1)] = this.data[this._idx(n - 1, 0)], this.data[this._idx(-1, n)] = this.data[this._idx(0, n - 1)], this.data[this._idx(n, n)] = this.data[this._idx(n - 1, n - 1)], this.min = Number.MAX_SAFE_INTEGER, this.max = Number.MIN_SAFE_INTEGER;\n        for (var _t144 = 0; _t144 < n; _t144++) for (var _e145 = 0; _e145 < n; _e145++) {\n          var _r138 = this.get(_t144, _e145);\n          _r138 > this.max && (this.max = _r138), _r138 < this.min && (this.min = _r138);\n        }\n      }\n      _createClass(uc, [{\n        key: \"get\",\n        value: function get(t, e) {\n          var r = new Uint8Array(this.data.buffer),\n            n = 4 * this._idx(t, e);\n          return (\"terrarium\" === this.encoding ? this._unpackTerrarium : this._unpackMapbox)(r[n], r[n + 1], r[n + 2]);\n        }\n      }, {\n        key: \"getUnpackVector\",\n        value: function getUnpackVector() {\n          return \"terrarium\" === this.encoding ? [256, 1, 1 / 256, 32768] : [6553.6, 25.6, .1, 1e4];\n        }\n      }, {\n        key: \"_idx\",\n        value: function _idx(t, e) {\n          if (t < -1 || t >= this.dim + 1 || e < -1 || e >= this.dim + 1) throw new RangeError(\"out of range source coordinates for DEM data\");\n          return (e + 1) * this.stride + (t + 1);\n        }\n      }, {\n        key: \"_unpackMapbox\",\n        value: function _unpackMapbox(t, e, r) {\n          return (256 * t * 256 + 256 * e + r) / 10 - 1e4;\n        }\n      }, {\n        key: \"_unpackTerrarium\",\n        value: function _unpackTerrarium(t, e, r) {\n          return 256 * t + e + r / 256 - 32768;\n        }\n      }, {\n        key: \"getPixels\",\n        value: function getPixels() {\n          return new Bs({\n            width: this.stride,\n            height: this.stride\n          }, new Uint8Array(this.data.buffer));\n        }\n      }, {\n        key: \"backfillBorder\",\n        value: function backfillBorder(t, e, r) {\n          if (this.dim !== t.dim) throw new Error(\"dem dimension mismatch\");\n          var n = e * this.dim,\n            i = e * this.dim + this.dim,\n            a = r * this.dim,\n            s = r * this.dim + this.dim;\n          switch (e) {\n            case -1:\n              n = i - 1;\n              break;\n            case 1:\n              i = n + 1;\n          }\n          switch (r) {\n            case -1:\n              a = s - 1;\n              break;\n            case 1:\n              s = a + 1;\n          }\n          var o = -e * this.dim,\n            l = -r * this.dim;\n          for (var _e146 = a; _e146 < s; _e146++) for (var _r139 = n; _r139 < i; _r139++) this.data[this._idx(_r139, _e146)] = t.data[this._idx(_r139 + o, _e146 + l)];\n        }\n      }]);\n      return uc;\n    }();\n    Mn(\"DEMData\", uc);\n    var cc = /*#__PURE__*/function () {\n      function cc(t) {\n        _classCallCheck(this, cc);\n        this._stringToNumber = {}, this._numberToString = [];\n        for (var _e147 = 0; _e147 < t.length; _e147++) {\n          var _r140 = t[_e147];\n          this._stringToNumber[_r140] = _e147, this._numberToString[_e147] = _r140;\n        }\n      }\n      _createClass(cc, [{\n        key: \"encode\",\n        value: function encode(t) {\n          return this._stringToNumber[t];\n        }\n      }, {\n        key: \"decode\",\n        value: function decode(t) {\n          if (t >= this._numberToString.length) throw new Error(\"Out of bounds. Index requested n=\".concat(t, \" can't be >= this._numberToString.length \").concat(this._numberToString.length));\n          return this._numberToString[t];\n        }\n      }]);\n      return cc;\n    }();\n    var hc = /*#__PURE__*/function () {\n      function hc(t, e, r, n, i) {\n        _classCallCheck(this, hc);\n        this.type = \"Feature\", this._vectorTileFeature = t, t._z = e, t._x = r, t._y = n, this.properties = t.properties, this.id = i;\n      }\n      _createClass(hc, [{\n        key: \"geometry\",\n        get: function get() {\n          return void 0 === this._geometry && (this._geometry = this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x, this._vectorTileFeature._y, this._vectorTileFeature._z).geometry), this._geometry;\n        },\n        set: function set(t) {\n          this._geometry = t;\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          var t = {\n            geometry: this.geometry\n          };\n          for (var _e148 in this) \"_geometry\" !== _e148 && \"_vectorTileFeature\" !== _e148 && (t[_e148] = this[_e148]);\n          return t;\n        }\n      }]);\n      return hc;\n    }();\n    var pc = /*#__PURE__*/function () {\n      function pc(t, e) {\n        _classCallCheck(this, pc);\n        this.tileID = t, this.x = t.canonical.x, this.y = t.canonical.y, this.z = t.canonical.z, this.grid = new Sn(qa, 16, 0), this.grid3D = new Sn(qa, 16, 0), this.featureIndexArray = new Wi(), this.promoteId = e;\n      }\n      _createClass(pc, [{\n        key: \"insert\",\n        value: function insert(t, e, r, n, i, a) {\n          var s = this.featureIndexArray.length;\n          this.featureIndexArray.emplaceBack(r, n, i);\n          var o = a ? this.grid3D : this.grid;\n          for (var _t145 = 0; _t145 < e.length; _t145++) {\n            var _r141 = e[_t145],\n              _n99 = [1 / 0, 1 / 0, -1 / 0, -1 / 0];\n            for (var _t146 = 0; _t146 < _r141.length; _t146++) {\n              var _e149 = _r141[_t146];\n              _n99[0] = Math.min(_n99[0], _e149.x), _n99[1] = Math.min(_n99[1], _e149.y), _n99[2] = Math.max(_n99[2], _e149.x), _n99[3] = Math.max(_n99[3], _e149.y);\n            }\n            _n99[0] < qa && _n99[1] < qa && _n99[2] >= 0 && _n99[3] >= 0 && o.insert(s, _n99[0], _n99[1], _n99[2], _n99[3]);\n          }\n        }\n      }, {\n        key: \"loadVTLayers\",\n        value: function loadVTLayers() {\n          return this.vtLayers || (this.vtLayers = new _o.VectorTile(new ul(this.rawTileData)).layers, this.sourceLayerCoder = new cc(this.vtLayers ? Object.keys(this.vtLayers).sort() : [\"_geojsonTileLayer\"])), this.vtLayers;\n        }\n      }, {\n        key: \"query\",\n        value: function query(t, e, r, n) {\n          var _this16 = this;\n          this.loadVTLayers();\n          var i = t.params || {},\n            a = qa / t.tileSize / t.scale,\n            s = Jr(i.filter),\n            o = t.queryGeometry,\n            l = t.queryPadding * a,\n            u = dc(o),\n            c = this.grid.query(u.minX - l, u.minY - l, u.maxX + l, u.maxY + l),\n            h = dc(t.cameraQueryGeometry),\n            p = this.grid3D.query(h.minX - l, h.minY - l, h.maxX + l, h.maxY + l, function (e, r, n, i) {\n              return function (t, e, r, n, i) {\n                var _iterator107 = _createForOfIteratorHelper(t),\n                  _step107;\n                try {\n                  for (_iterator107.s(); !(_step107 = _iterator107.n()).done;) {\n                    var _a70 = _step107.value;\n                    if (e <= _a70.x && r <= _a70.y && n >= _a70.x && i >= _a70.y) return !0;\n                  }\n                } catch (err) {\n                  _iterator107.e(err);\n                } finally {\n                  _iterator107.f();\n                }\n                var a = [new S(e, r), new S(e, i), new S(n, i), new S(n, r)];\n                if (t.length > 2) {\n                  var _iterator108 = _createForOfIteratorHelper(a),\n                    _step108;\n                  try {\n                    for (_iterator108.s(); !(_step108 = _iterator108.n()).done;) {\n                      var _e150 = _step108.value;\n                      if (is(t, _e150)) return !0;\n                    }\n                  } catch (err) {\n                    _iterator108.e(err);\n                  } finally {\n                    _iterator108.f();\n                  }\n                }\n                for (var _e151 = 0; _e151 < t.length - 1; _e151++) if (as(t[_e151], t[_e151 + 1], a)) return !0;\n                return !1;\n              }(t.cameraQueryGeometry, e - l, r - l, n + l, i + l);\n            });\n          var _iterator109 = _createForOfIteratorHelper(p),\n            _step109;\n          try {\n            for (_iterator109.s(); !(_step109 = _iterator109.n()).done;) {\n              var _t147 = _step109.value;\n              c.push(_t147);\n            }\n          } catch (err) {\n            _iterator109.e(err);\n          } finally {\n            _iterator109.f();\n          }\n          c.sort(yc);\n          var f = {};\n          var d;\n          var _loop = function _loop() {\n            var u = c[_l28];\n            if (u === d) return \"continue\";\n            d = u;\n            var h = _this16.featureIndexArray.get(u);\n            var p = null;\n            _this16.loadMatchingFeature(f, h.bucketIndex, h.sourceLayerIndex, h.featureIndex, s, i.layers, i.availableImages, e, r, n, function (e, r, n) {\n              return p || (p = Za(e)), r.queryIntersectsFeature(o, e, n, p, _this16.z, t.transform, a, t.pixelPosMatrix);\n            });\n          };\n          for (var _l28 = 0; _l28 < c.length; _l28++) {\n            var _ret = _loop();\n            if (_ret === \"continue\") continue;\n          }\n          return f;\n        }\n      }, {\n        key: \"loadMatchingFeature\",\n        value: function loadMatchingFeature(t, e, r, n, i, a, s, l, u, c, h) {\n          var p = this.bucketLayerIDs[e];\n          if (a && !function (t, e) {\n            for (var _r142 = 0; _r142 < t.length; _r142++) if (e.indexOf(t[_r142]) >= 0) return !0;\n            return !1;\n          }(a, p)) return;\n          var f = this.sourceLayerCoder.decode(r),\n            d = this.vtLayers[f].feature(n);\n          if (i.needGeometry) {\n            var _t148 = Ka(d, !0);\n            if (!i.filter(new Qn(this.tileID.overscaledZ), _t148, this.tileID.canonical)) return;\n          } else if (!i.filter(new Qn(this.tileID.overscaledZ), d)) return;\n          var y = this.getId(d, f);\n          for (var _e152 = 0; _e152 < p.length; _e152++) {\n            var _r143 = p[_e152];\n            if (a && a.indexOf(_r143) < 0) continue;\n            var _i100 = l[_r143];\n            if (!_i100) continue;\n            var _f7 = {};\n            y && c && (_f7 = c.getState(_i100.sourceLayer || \"_geojsonTileLayer\", y));\n            var _m10 = o({}, u[_r143]);\n            _m10.paint = fc(_m10.paint, _i100.paint, d, _f7, s), _m10.layout = fc(_m10.layout, _i100.layout, d, _f7, s);\n            var _g9 = !h || h(d, _i100, _f7);\n            if (!_g9) continue;\n            var _x8 = new hc(d, this.z, this.x, this.y, y);\n            _x8.layer = _m10;\n            var _v5 = t[_r143];\n            void 0 === _v5 && (_v5 = t[_r143] = []), _v5.push({\n              featureIndex: n,\n              feature: _x8,\n              intersectionZ: _g9\n            });\n          }\n        }\n      }, {\n        key: \"lookupSymbolFeatures\",\n        value: function lookupSymbolFeatures(t, e, r, n, i, a, s, o) {\n          var l = {};\n          this.loadVTLayers();\n          var u = Jr(i);\n          var _iterator110 = _createForOfIteratorHelper(t),\n            _step110;\n          try {\n            for (_iterator110.s(); !(_step110 = _iterator110.n()).done;) {\n              var _i101 = _step110.value;\n              this.loadMatchingFeature(l, r, n, _i101, u, a, s, o, e);\n            }\n          } catch (err) {\n            _iterator110.e(err);\n          } finally {\n            _iterator110.f();\n          }\n          return l;\n        }\n      }, {\n        key: \"hasLayer\",\n        value: function hasLayer(t) {\n          var _iterator111 = _createForOfIteratorHelper(this.bucketLayerIDs),\n            _step111;\n          try {\n            for (_iterator111.s(); !(_step111 = _iterator111.n()).done;) {\n              var _e153 = _step111.value;\n              var _iterator112 = _createForOfIteratorHelper(_e153),\n                _step112;\n              try {\n                for (_iterator112.s(); !(_step112 = _iterator112.n()).done;) {\n                  var _r144 = _step112.value;\n                  if (t === _r144) return !0;\n                }\n              } catch (err) {\n                _iterator112.e(err);\n              } finally {\n                _iterator112.f();\n              }\n            }\n          } catch (err) {\n            _iterator111.e(err);\n          } finally {\n            _iterator111.f();\n          }\n          return !1;\n        }\n      }, {\n        key: \"getId\",\n        value: function getId(t, e) {\n          var r = t.id;\n          return this.promoteId && (r = t.properties[\"string\" == typeof this.promoteId ? this.promoteId : this.promoteId[e]], \"boolean\" == typeof r && (r = Number(r))), r;\n        }\n      }]);\n      return pc;\n    }();\n    function fc(t, e, r, n, i) {\n      return c(t, function (t, a) {\n        var s = e instanceof oi ? e.get(a) : null;\n        return s && s.evaluate ? s.evaluate(r, n, i) : s;\n      });\n    }\n    function dc(t) {\n      var e = 1 / 0,\n        r = 1 / 0,\n        n = -1 / 0,\n        i = -1 / 0;\n      var _iterator113 = _createForOfIteratorHelper(t),\n        _step113;\n      try {\n        for (_iterator113.s(); !(_step113 = _iterator113.n()).done;) {\n          var _a71 = _step113.value;\n          e = Math.min(e, _a71.x), r = Math.min(r, _a71.y), n = Math.max(n, _a71.x), i = Math.max(i, _a71.y);\n        }\n      } catch (err) {\n        _iterator113.e(err);\n      } finally {\n        _iterator113.f();\n      }\n      return {\n        minX: e,\n        minY: r,\n        maxX: n,\n        maxY: i\n      };\n    }\n    function yc(t, e) {\n      return e - t;\n    }\n    var mc;\n    Mn(\"FeatureIndex\", pc, {\n      omit: [\"rawTileData\", \"sourceLayerCoder\"]\n    }), t.PerformanceMarkers = void 0, (mc = t.PerformanceMarkers || (t.PerformanceMarkers = {})).create = \"create\", mc.load = \"load\", mc.fullLoad = \"fullLoad\";\n    var gc = null,\n      xc = [];\n    var vc = 1e3 / 30,\n      bc = {\n        mark: function mark(t) {\n          performance.mark(t);\n        },\n        frame: function frame(t) {\n          var e = t;\n          null != gc && xc.push(e - gc), gc = e;\n        },\n        clearMetrics: function clearMetrics() {\n          gc = null, xc = [], performance.clearMeasures(\"loadTime\"), performance.clearMeasures(\"fullLoadTime\");\n          for (var _e154 in t.PerformanceMarkers) performance.clearMarks(t.PerformanceMarkers[_e154]);\n        },\n        getPerformanceMetrics: function getPerformanceMetrics() {\n          performance.measure(\"loadTime\", t.PerformanceMarkers.create, t.PerformanceMarkers.load), performance.measure(\"fullLoadTime\", t.PerformanceMarkers.create, t.PerformanceMarkers.fullLoad);\n          var e = performance.getEntriesByName(\"loadTime\")[0].duration,\n            r = performance.getEntriesByName(\"fullLoadTime\")[0].duration,\n            n = xc.length,\n            i = 1 / (xc.reduce(function (t, e) {\n              return t + e;\n            }, 0) / n / 1e3),\n            a = xc.filter(function (t) {\n              return t > vc;\n            }).reduce(function (t, e) {\n              return t + (e - vc) / vc;\n            }, 0);\n          return {\n            loadTime: e,\n            fullLoadTime: r,\n            fps: i,\n            percentDroppedFrames: a / (n + a) * 100\n          };\n        }\n      };\n    t.AJAXError = q, t.ARRAY_TYPE = ps, t.Actor = /*#__PURE__*/function () {\n      function _class2(t, e, r) {\n        _classCallCheck(this, _class2);\n        this.target = t, this.parent = e, this.mapId = r, this.callbacks = {}, this.tasks = {}, this.taskQueue = [], this.cancelCallbacks = {}, u([\"receive\", \"process\"], this), this.invoker = new Gu(this.process), this.target.addEventListener(\"message\", this.receive, !1), this.globalScope = g() ? t : window;\n      }\n      _createClass(_class2, [{\n        key: \"send\",\n        value: function send(t, e, r, n) {\n          var _this17 = this;\n          var i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !1;\n          var a = Math.round(1e18 * Math.random()).toString(36).substring(0, 10);\n          r && (this.callbacks[a] = r);\n          var s = _(this.globalScope) ? void 0 : [];\n          return this.target.postMessage({\n            id: a,\n            type: t,\n            hasCallback: !!r,\n            targetMapId: n,\n            mustQueue: i,\n            sourceMapId: this.mapId,\n            data: Bn(e, s)\n          }, s), {\n            cancel: function cancel() {\n              r && delete _this17.callbacks[a], _this17.target.postMessage({\n                id: a,\n                type: \"<cancel>\",\n                targetMapId: n,\n                sourceMapId: _this17.mapId\n              });\n            }\n          };\n        }\n      }, {\n        key: \"receive\",\n        value: function receive(t) {\n          var e = t.data,\n            r = e.id;\n          if (r && (!e.targetMapId || this.mapId === e.targetMapId)) if (\"<cancel>\" === e.type) {\n            delete this.tasks[r];\n            var _t149 = this.cancelCallbacks[r];\n            delete this.cancelCallbacks[r], _t149 && _t149();\n          } else g() || e.mustQueue ? (this.tasks[r] = e, this.taskQueue.push(r), this.invoker.trigger()) : this.processTask(r, e);\n        }\n      }, {\n        key: \"process\",\n        value: function process() {\n          if (!this.taskQueue.length) return;\n          var t = this.taskQueue.shift(),\n            e = this.tasks[t];\n          delete this.tasks[t], this.taskQueue.length && this.invoker.trigger(), e && this.processTask(t, e);\n        }\n      }, {\n        key: \"processTask\",\n        value: function processTask(t, e) {\n          var _this18 = this;\n          if (\"<response>\" === e.type) {\n            var _r145 = this.callbacks[t];\n            delete this.callbacks[t], _r145 && (e.error ? _r145(Cn(e.error)) : _r145(null, Cn(e.data)));\n          } else {\n            var _r146 = !1;\n            var _n100 = _(this.globalScope) ? void 0 : [],\n              _i102 = e.hasCallback ? function (e, i) {\n                _r146 = !0, delete _this18.cancelCallbacks[t], _this18.target.postMessage({\n                  id: t,\n                  type: \"<response>\",\n                  sourceMapId: _this18.mapId,\n                  error: e ? Bn(e) : null,\n                  data: Bn(i, _n100)\n                }, _n100);\n              } : function (t) {\n                _r146 = !0;\n              };\n            var _a72 = null;\n            var _s61 = Cn(e.data);\n            if (this.parent[e.type]) _a72 = this.parent[e.type](e.sourceMapId, _s61, _i102);else if (this.parent.getWorkerSource) {\n              var _t150 = e.type.split(\".\");\n              _a72 = this.parent.getWorkerSource(e.sourceMapId, _t150[0], _s61.source)[_t150[1]](_s61, _i102);\n            } else _i102(new Error(\"Could not find function \".concat(e.type)));\n            !_r146 && _a72 && _a72.cancel && (this.cancelCallbacks[t] = _a72.cancel);\n          }\n        }\n      }, {\n        key: \"remove\",\n        value: function remove() {\n          this.invoker.remove(), this.target.removeEventListener(\"message\", this.receive, !1);\n        }\n      }]);\n      return _class2;\n    }(), t.AlphaImage = zs, t.CanonicalTileID = ac, t.CollisionBoxArray = Ni, t.CollisionCircleLayoutArray = /*#__PURE__*/function (_Vi) {\n      _inherits(_class3, _Vi);\n      var _super68 = _createSuper(_class3);\n      function _class3() {\n        _classCallCheck(this, _class3);\n        return _super68.apply(this, arguments);\n      }\n      return _createClass(_class3);\n    }(Vi), t.Color = Ft, t.DEMData = uc, t.DataConstantProperty = li, t.DictionaryCoder = cc, t.EXTENT = qa, t.ErrorEvent = et, t.EvaluationParameters = Qn, t.Event = tt, t.Evented = rt, t.FeatureIndex = pc, t.FillBucket = mo, t.FillExtrusionBucket = Do, t.GeoJSONFeature = hc, t.ImageAtlas = Dl, t.ImagePosition = Ll, t.LineBucket = Yo, t.LineStripIndexArray = /*#__PURE__*/function (_Ui) {\n      _inherits(_class4, _Ui);\n      var _super69 = _createSuper(_class4);\n      function _class4() {\n        _classCallCheck(this, _class4);\n        return _super69.apply(this, arguments);\n      }\n      return _createClass(_class4);\n    }(Ui), t.LngLat = Xu, t.LngLatBounds = Yu, t.MercatorCoordinate = nc, t.ONE_EM = ll, t.OverscaledTileID = oc, t.PerformanceUtils = bc, t.PosArray = Qi, t.Properties = fi, t.QuadTriangleArray = /*#__PURE__*/function (_Fi2) {\n      _inherits(_class5, _Fi2);\n      var _super70 = _createSuper(_class5);\n      function _class5() {\n        _classCallCheck(this, _class5);\n        return _super70.apply(this, arguments);\n      }\n      return _createClass(_class5);\n    }(Fi), t.RGBAImage = Bs, t.RasterBoundsArray = /*#__PURE__*/function (_i103) {\n      _inherits(_class6, _i103);\n      var _super71 = _createSuper(_class6);\n      function _class6() {\n        _classCallCheck(this, _class6);\n        return _super71.apply(this, arguments);\n      }\n      return _createClass(_class6);\n    }(_i), t.RequestPerformance = /*#__PURE__*/function () {\n      function _class7(t) {\n        _classCallCheck(this, _class7);\n        this._marks = {\n          start: [t.url, \"start\"].join(\"#\"),\n          end: [t.url, \"end\"].join(\"#\"),\n          measure: t.url.toString()\n        }, performance.mark(this._marks.start);\n      }\n      _createClass(_class7, [{\n        key: \"finish\",\n        value: function finish() {\n          performance.mark(this._marks.end);\n          var t = performance.getEntriesByName(this._marks.measure);\n          return 0 === t.length && (performance.measure(this._marks.measure, this._marks.start, this._marks.end), t = performance.getEntriesByName(this._marks.measure), performance.clearMarks(this._marks.start), performance.clearMarks(this._marks.end), performance.clearMeasures(this._marks.measure)), t;\n        }\n      }]);\n      return _class7;\n    }(), t.ResourceType = U, t.SegmentVector = ya, t.SymbolBucket = Du, t.Transitionable = ri, t.TriangleIndexArray = ha, t.Uniform1f = za, t.Uniform1i = /*#__PURE__*/function (_Ma4) {\n      _inherits(_class8, _Ma4);\n      var _super72 = _createSuper(_class8);\n      function _class8(t, e) {\n        var _this19;\n        _classCallCheck(this, _class8);\n        _this19 = _super72.call(this, t, e), _this19.current = 0;\n        return _this19;\n      }\n      _createClass(_class8, [{\n        key: \"set\",\n        value: function set(t) {\n          this.current !== t && (this.current = t, this.gl.uniform1i(this.location, t));\n        }\n      }]);\n      return _class8;\n    }(Ma), t.Uniform2f = /*#__PURE__*/function (_Ma5) {\n      _inherits(_class9, _Ma5);\n      var _super73 = _createSuper(_class9);\n      function _class9(t, e) {\n        var _this20;\n        _classCallCheck(this, _class9);\n        _this20 = _super73.call(this, t, e), _this20.current = [0, 0];\n        return _this20;\n      }\n      _createClass(_class9, [{\n        key: \"set\",\n        value: function set(t) {\n          t[0] === this.current[0] && t[1] === this.current[1] || (this.current = t, this.gl.uniform2f(this.location, t[0], t[1]));\n        }\n      }]);\n      return _class9;\n    }(Ma), t.Uniform3f = /*#__PURE__*/function (_Ma6) {\n      _inherits(_class10, _Ma6);\n      var _super74 = _createSuper(_class10);\n      function _class10(t, e) {\n        var _this21;\n        _classCallCheck(this, _class10);\n        _this21 = _super74.call(this, t, e), _this21.current = [0, 0, 0];\n        return _this21;\n      }\n      _createClass(_class10, [{\n        key: \"set\",\n        value: function set(t) {\n          t[0] === this.current[0] && t[1] === this.current[1] && t[2] === this.current[2] || (this.current = t, this.gl.uniform3f(this.location, t[0], t[1], t[2]));\n        }\n      }]);\n      return _class10;\n    }(Ma), t.Uniform4f = Ba, t.UniformColor = Ca, t.UniformMatrix4f = /*#__PURE__*/function (_Ma7) {\n      _inherits(_class11, _Ma7);\n      var _super75 = _createSuper(_class11);\n      function _class11(t, e) {\n        var _this22;\n        _classCallCheck(this, _class11);\n        _this22 = _super75.call(this, t, e), _this22.current = Pa;\n        return _this22;\n      }\n      _createClass(_class11, [{\n        key: \"set\",\n        value: function set(t) {\n          if (t[12] !== this.current[12] || t[0] !== this.current[0]) return this.current = t, void this.gl.uniformMatrix4fv(this.location, !1, t);\n          for (var _e155 = 1; _e155 < 16; _e155++) if (t[_e155] !== this.current[_e155]) {\n            this.current = t, this.gl.uniformMatrix4fv(this.location, !1, t);\n            break;\n          }\n        }\n      }]);\n      return _class11;\n    }(Ma), t.UnwrappedTileID = sc, t.ValidationError = it, t.ZoomHistory = Pn, t.add = function (t, e, r) {\n      return t[0] = e[0] + r[0], t[1] = e[1] + r[1], t[2] = e[2] + r[2], t;\n    }, t.addDynamicAttributes = Eu, t.asyncAll = function (t, e, r) {\n      if (!t.length) return r(null, []);\n      var n = t.length;\n      var i = new Array(t.length);\n      var a = null;\n      t.forEach(function (t, s) {\n        e(t, function (t, e) {\n          t && (a = t), i[s] = e, 0 == --n && r(a, i);\n        });\n      });\n    }, t.bezier = n, t.bindAll = u, t.cacheEntryPossiblyAdded = function (t) {\n      F++, F > V && (t.getActor().send(\"enforceCacheSizeLimit\", P), F = 0);\n    }, t.clamp = a, t.clearTileCache = function (t) {\n      var e = caches.delete(z);\n      t && e.catch(t).then(function () {\n        return t();\n      });\n    }, t.clipLine = cu, t.clone = function (t) {\n      var e = new ps(16);\n      return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e[4] = t[4], e[5] = t[5], e[6] = t[6], e[7] = t[7], e[8] = t[8], e[9] = t[9], e[10] = t[10], e[11] = t[11], e[12] = t[12], e[13] = t[13], e[14] = t[14], e[15] = t[15], e;\n    }, t.clone$1 = p, t.clone$2 = function (t) {\n      var e = new ps(3);\n      return e[0] = t[0], e[1] = t[1], e[2] = t[2], e;\n    }, t.collisionCircleLayout = al, t.config = M, t.copy = function (t, e) {\n      return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t[4] = e[4], t[5] = e[5], t[6] = e[6], t[7] = e[7], t[8] = e[8], t[9] = e[9], t[10] = e[10], t[11] = e[11], t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15], t;\n    }, t.create = function () {\n      var t = new ps(16);\n      return ps != Float32Array && (t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0), t[0] = 1, t[5] = 1, t[10] = 1, t[15] = 1, t;\n    }, t.create$1 = fs, t.createExpression = Fr, t.createFilter = Jr, t.createLayout = vi, t.createStyleLayer = function (t) {\n      return \"custom\" === t.type ? new Zu(t) : new Ku[t.type](t);\n    }, t.cross = function (t, e, r) {\n      var n = e[0],\n        i = e[1],\n        a = e[2],\n        s = r[0],\n        o = r[1],\n        l = r[2];\n      return t[0] = i * l - a * o, t[1] = a * s - n * l, t[2] = n * o - i * s, t;\n    }, t.dot = function (t, e) {\n      return t[0] * e[0] + t[1] * e[1] + t[2] * e[2];\n    }, t.dot$1 = function (t, e) {\n      return t[0] * e[0] + t[1] * e[1] + t[2] * e[2] + t[3] * e[3];\n    }, t.ease = i, t.emitValidationErrors = kn, t.enforceCacheSizeLimit = function (t) {\n      E(), B && B.then(function (e) {\n        e.keys().then(function (r) {\n          for (var _n101 = 0; _n101 < r.length - t; _n101++) e.delete(r[_n101]);\n        });\n      });\n    }, t.equals = function (t, e) {\n      var r = t[0],\n        n = t[1],\n        i = t[2],\n        a = t[3],\n        s = t[4],\n        o = t[5],\n        l = t[6],\n        u = t[7],\n        c = t[8],\n        h = t[9],\n        p = t[10],\n        f = t[11],\n        d = t[12],\n        y = t[13],\n        m = t[14],\n        g = t[15],\n        x = e[0],\n        v = e[1],\n        b = e[2],\n        w = e[3],\n        _ = e[4],\n        A = e[5],\n        k = e[6],\n        S = e[7],\n        I = e[8],\n        M = e[9],\n        z = e[10],\n        B = e[11],\n        C = e[12],\n        P = e[13],\n        V = e[14],\n        E = e[15];\n      return Math.abs(r - x) <= hs * Math.max(1, Math.abs(r), Math.abs(x)) && Math.abs(n - v) <= hs * Math.max(1, Math.abs(n), Math.abs(v)) && Math.abs(i - b) <= hs * Math.max(1, Math.abs(i), Math.abs(b)) && Math.abs(a - w) <= hs * Math.max(1, Math.abs(a), Math.abs(w)) && Math.abs(s - _) <= hs * Math.max(1, Math.abs(s), Math.abs(_)) && Math.abs(o - A) <= hs * Math.max(1, Math.abs(o), Math.abs(A)) && Math.abs(l - k) <= hs * Math.max(1, Math.abs(l), Math.abs(k)) && Math.abs(u - S) <= hs * Math.max(1, Math.abs(u), Math.abs(S)) && Math.abs(c - I) <= hs * Math.max(1, Math.abs(c), Math.abs(I)) && Math.abs(h - M) <= hs * Math.max(1, Math.abs(h), Math.abs(M)) && Math.abs(p - z) <= hs * Math.max(1, Math.abs(p), Math.abs(z)) && Math.abs(f - B) <= hs * Math.max(1, Math.abs(f), Math.abs(B)) && Math.abs(d - C) <= hs * Math.max(1, Math.abs(d), Math.abs(C)) && Math.abs(y - P) <= hs * Math.max(1, Math.abs(y), Math.abs(P)) && Math.abs(m - V) <= hs * Math.max(1, Math.abs(m), Math.abs(V)) && Math.abs(g - E) <= hs * Math.max(1, Math.abs(g), Math.abs(E));\n    }, t.evaluateSizeForFeature = function (t, _ref116, _ref117) {\n      var e = _ref116.uSize,\n        r = _ref116.uSizeT;\n      var n = _ref117.lowerSize,\n        i = _ref117.upperSize;\n      return \"source\" === t.kind ? n / tu : \"composite\" === t.kind ? Se(n / tu, i / tu, r) : e;\n    }, t.evaluateSizeForZoom = function (t, e) {\n      var r = 0,\n        n = 0;\n      if (\"constant\" === t.kind) n = t.layoutSize;else if (\"source\" !== t.kind) {\n        var _i104 = t.interpolationType,\n          _s62 = t.minZoom,\n          _o32 = t.maxZoom,\n          _l29 = _i104 ? a(Ne.interpolationFactor(_i104, e, _s62, _o32), 0, 1) : 0;\n        \"camera\" === t.kind ? n = Se(t.minSize, t.maxSize, _l29) : r = _l29;\n      }\n      return {\n        uSizeT: r,\n        uSize: n\n      };\n    }, t.evaluateVariableOffset = Au, t.evented = Xn, t.exported = k, t.exported$1 = T, t.extend = o, t.filterObject = h, t.fromRotation = function (t, e) {\n      var r = Math.sin(e),\n        n = Math.cos(e);\n      return t[0] = n, t[1] = r, t[2] = 0, t[3] = -r, t[4] = n, t[5] = 0, t[6] = 0, t[7] = 0, t[8] = 1, t;\n    }, t.fromScaling = function (t, e) {\n      return t[0] = e[0], t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = e[1], t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = e[2], t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, t;\n    }, t.getAnchorAlignment = Yl, t.getAnchorJustification = ku, t.getArrayBuffer = K, t.getImage = H, t.getJSON = function (t, e) {\n      return Z(o(t, {\n        type: \"json\"\n      }), e);\n    }, t.getOverlapMode = qu, t.getRTLTextPluginStatus = Yn, t.getReferrer = j, t.getVideo = function (t, e) {\n      var r = window.document.createElement(\"video\");\n      r.muted = !0, r.onloadstart = function () {\n        e(null, r);\n      };\n      for (var _e156 = 0; _e156 < t.length; _e156++) {\n        var _n102 = window.document.createElement(\"source\");\n        G(t[_e156]) || (r.crossOrigin = \"Anonymous\"), _n102.src = t[_e156], r.appendChild(_n102);\n      }\n      return {\n        cancel: function cancel() {}\n      };\n    }, t.identity = ds, t.invert = function (t, e) {\n      var r = e[0],\n        n = e[1],\n        i = e[2],\n        a = e[3],\n        s = e[4],\n        o = e[5],\n        l = e[6],\n        u = e[7],\n        c = e[8],\n        h = e[9],\n        p = e[10],\n        f = e[11],\n        d = e[12],\n        y = e[13],\n        m = e[14],\n        g = e[15],\n        x = r * o - n * s,\n        v = r * l - i * s,\n        b = r * u - a * s,\n        w = n * l - i * o,\n        _ = n * u - a * o,\n        A = i * u - a * l,\n        k = c * y - h * d,\n        S = c * m - p * d,\n        I = c * g - f * d,\n        M = h * m - p * y,\n        z = h * g - f * y,\n        B = p * g - f * m,\n        C = x * B - v * z + b * M + w * I - _ * S + A * k;\n      return C ? (t[0] = (o * B - l * z + u * M) * (C = 1 / C), t[1] = (i * z - n * B - a * M) * C, t[2] = (y * A - m * _ + g * w) * C, t[3] = (p * _ - h * A - f * w) * C, t[4] = (l * I - s * B - u * S) * C, t[5] = (r * B - i * I + a * S) * C, t[6] = (m * b - d * A - g * v) * C, t[7] = (c * A - p * b + f * v) * C, t[8] = (s * z - o * I + u * k) * C, t[9] = (n * I - r * z - a * k) * C, t[10] = (d * _ - y * b + g * x) * C, t[11] = (h * b - c * _ - f * x) * C, t[12] = (o * S - s * M - l * k) * C, t[13] = (r * M - n * S + i * k) * C, t[14] = (y * v - d * w - m * x) * C, t[15] = (c * w - h * v + p * x) * C, t) : null;\n    }, t.isImageBitmap = A, t.isSafari = _, t.isWorker = g, t.keysDifference = function (t, e) {\n      var r = [];\n      for (var _n103 in t) _n103 in e || r.push(_n103);\n      return r;\n    }, t.lazyLoadRTLTextPlugin = function () {\n      Wn.isLoading() || Wn.isLoaded() || \"deferred\" !== Yn() || Hn();\n    }, t.makeRequest = Z, t.mapObject = c, t.mercatorXfromLng = Qu, t.mercatorYfromLat = tc, t.mercatorZfromAltitude = ec, t.mul = gs, t.mul$1 = function (t, e, r) {\n      return t[0] = e[0] * r[0], t[1] = e[1] * r[1], t[2] = e[2] * r[2], t[3] = e[3] * r[3], t;\n    }, t.multiply = ys, t.nextPowerOfTwo = function (t) {\n      return t <= 1 ? 1 : Math.pow(2, Math.ceil(Math.log(t) / Math.LN2));\n    }, t.normalize = function (t, e) {\n      var r = e[0],\n        n = e[1],\n        i = e[2],\n        a = r * r + n * n + i * i;\n      return a > 0 && (a = 1 / Math.sqrt(a)), t[0] = e[0] * a, t[1] = e[1] * a, t[2] = e[2] * a, t;\n    }, t.number = Se, t.ortho = function (t, e, r, n, i, a, s) {\n      var o = 1 / (e - r),\n        l = 1 / (n - i),\n        u = 1 / (a - s);\n      return t[0] = -2 * o, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = -2 * l, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 2 * u, t[11] = 0, t[12] = (e + r) * o, t[13] = (i + n) * l, t[14] = (s + a) * u, t[15] = 1, t;\n    }, t.parseCacheControl = x, t.parseGlyphPbf = function (t) {\n      return new ul(t).readFields(Vl, []);\n    }, t.pbf = ul, t.performSymbolLayout = function (e) {\n      e.bucket.createArrays(), e.bucket.tilePixelRatio = qa / (512 * e.bucket.overscaling), e.bucket.compareText = {}, e.bucket.iconsNeedLinear = !1;\n      var r = e.bucket.layers[0].layout,\n        n = e.bucket.layers[0]._unevaluatedLayout._values,\n        i = {\n          layoutIconSize: n[\"icon-size\"].possiblyEvaluate(new Qn(e.bucket.zoom + 1), e.canonical),\n          layoutTextSize: n[\"text-size\"].possiblyEvaluate(new Qn(e.bucket.zoom + 1), e.canonical),\n          textMaxSize: n[\"text-size\"].possiblyEvaluate(new Qn(18))\n        };\n      if (\"composite\" === e.bucket.textSizeData.kind) {\n        var _e$bucket$textSizeDat = e.bucket.textSizeData,\n          _t151 = _e$bucket$textSizeDat.minZoom,\n          _r147 = _e$bucket$textSizeDat.maxZoom;\n        i.compositeTextSizes = [n[\"text-size\"].possiblyEvaluate(new Qn(_t151), e.canonical), n[\"text-size\"].possiblyEvaluate(new Qn(_r147), e.canonical)];\n      }\n      if (\"composite\" === e.bucket.iconSizeData.kind) {\n        var _e$bucket$iconSizeDat = e.bucket.iconSizeData,\n          _t152 = _e$bucket$iconSizeDat.minZoom,\n          _r148 = _e$bucket$iconSizeDat.maxZoom;\n        i.compositeIconSizes = [n[\"icon-size\"].possiblyEvaluate(new Qn(_t152), e.canonical), n[\"icon-size\"].possiblyEvaluate(new Qn(_r148), e.canonical)];\n      }\n      var a = r.get(\"text-line-height\") * ll,\n        s = \"viewport\" !== r.get(\"text-rotation-alignment\") && \"point\" !== r.get(\"symbol-placement\"),\n        o = r.get(\"text-keep-upright\"),\n        l = r.get(\"text-size\");\n      var _iterator114 = _createForOfIteratorHelper(e.bucket.features),\n        _step114;\n      try {\n        var _loop2 = function _loop2() {\n          var n = _step114.value;\n          var u = r.get(\"text-font\").evaluate(n, {}, e.canonical).join(\",\"),\n            c = l.evaluate(n, {}, e.canonical),\n            h = i.layoutTextSize.evaluate(n, {}, e.canonical),\n            p = i.layoutIconSize.evaluate(n, {}, e.canonical),\n            f = {\n              horizontal: {},\n              vertical: void 0\n            },\n            y = n.text;\n          var m,\n            g = [0, 0];\n          if (y) {\n            var _i105 = y.toString(),\n              _l30 = r.get(\"text-letter-spacing\").evaluate(n, {}, e.canonical) * ll,\n              _p9 = Fn(_i105) ? _l30 : 0,\n              _d6 = r.get(\"text-anchor\").evaluate(n, {}, e.canonical),\n              _m11 = r.get(\"text-variable-anchor\");\n            if (!_m11) {\n              var _t153 = r.get(\"text-radial-offset\").evaluate(n, {}, e.canonical);\n              g = _t153 ? Au(_d6, [_t153 * ll, _u]) : r.get(\"text-offset\").evaluate(n, {}, e.canonical).map(function (t) {\n                return t * ll;\n              });\n            }\n            var _x9 = s ? \"center\" : r.get(\"text-justify\").evaluate(n, {}, e.canonical);\n            var _v6 = r.get(\"symbol-placement\"),\n              _b8 = \"point\" === _v6 ? r.get(\"text-max-width\").evaluate(n, {}, e.canonical) * ll : 0,\n              _w6 = function _w6() {\n                e.bucket.allowVerticalPlacement && En(_i105) && (f.vertical = Ul(y, e.glyphMap, e.glyphPositions, e.imagePositions, u, _b8, a, _d6, \"left\", _p9, g, t.WritingMode.vertical, !0, _v6, h, c));\n              };\n            if (!s && _m11) {\n              var _r149 = \"auto\" === _x9 ? _m11.map(function (t) {\n                return ku(t);\n              }) : [_x9];\n              var _n104 = !1;\n              for (var _i106 = 0; _i106 < _r149.length; _i106++) {\n                var _s63 = _r149[_i106];\n                if (!f.horizontal[_s63]) if (_n104) f.horizontal[_s63] = f.horizontal[0];else {\n                  var _r150 = Ul(y, e.glyphMap, e.glyphPositions, e.imagePositions, u, _b8, a, \"center\", _s63, _p9, g, t.WritingMode.horizontal, !1, _v6, h, c);\n                  _r150 && (f.horizontal[_s63] = _r150, _n104 = 1 === _r150.positionedLines.length);\n                }\n              }\n              _w6();\n            } else {\n              \"auto\" === _x9 && (_x9 = ku(_d6));\n              var _r151 = Ul(y, e.glyphMap, e.glyphPositions, e.imagePositions, u, _b8, a, _d6, _x9, _p9, g, t.WritingMode.horizontal, !1, _v6, h, c);\n              _r151 && (f.horizontal[_x9] = _r151), _w6(), En(_i105) && s && o && (f.vertical = Ul(y, e.glyphMap, e.glyphPositions, e.imagePositions, u, _b8, a, _d6, _x9, _p9, g, t.WritingMode.vertical, !1, _v6, h, c));\n            }\n          }\n          var x = !1;\n          if (n.icon && n.icon.name) {\n            var _t154 = e.imageMap[n.icon.name];\n            _t154 && (m = Wl(e.imagePositions[n.icon.name], r.get(\"icon-offset\").evaluate(n, {}, e.canonical), r.get(\"icon-anchor\").evaluate(n, {}, e.canonical)), x = !!_t154.sdf, void 0 === e.bucket.sdfIcons ? e.bucket.sdfIcons = x : e.bucket.sdfIcons !== x && d(\"Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer\"), (_t154.pixelRatio !== e.bucket.pixelRatio || 0 !== r.get(\"icon-rotate\").constantOr(1)) && (e.bucket.iconsNeedLinear = !0));\n          }\n          var v = zu(f.horizontal) || f.vertical;\n          e.bucket.iconsInText = !!v && v.iconsInText, (v || m) && Su(e.bucket, n, f, m, e.imageMap, i, h, p, g, x, e.canonical);\n        };\n        for (_iterator114.s(); !(_step114 = _iterator114.n()).done;) {\n          _loop2();\n        }\n      } catch (err) {\n        _iterator114.e(err);\n      } finally {\n        _iterator114.f();\n      }\n      e.showCollisionBoxes && e.bucket.generateCollisionDebugBuffers();\n    }, t.perspective = function (t, e, r, n, i) {\n      var a,\n        s = 1 / Math.tan(e / 2);\n      return t[0] = s / r, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = s, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[11] = -1, t[12] = 0, t[13] = 0, t[15] = 0, null != i && i !== 1 / 0 ? (t[10] = (i + n) * (a = 1 / (n - i)), t[14] = 2 * i * n * a) : (t[10] = -1, t[14] = -2 * n), t;\n    }, t.pick = function (t, e) {\n      var r = {};\n      for (var _n105 = 0; _n105 < e.length; _n105++) {\n        var _i107 = e[_n105];\n        _i107 in t && (r[_i107] = t[_i107]);\n      }\n      return r;\n    }, t.plugin = Wn, t.pointGeometry = S, t.polygonIntersectsPolygon = Xa, t.potpack = Tl, t.refProperties = [\"type\", \"source\", \"source-layer\", \"minzoom\", \"maxzoom\", \"filter\", \"layout\"], t.register = Mn, t.registerForPluginStateChange = function (t) {\n      return t({\n        pluginStatus: Zn,\n        pluginURL: Kn\n      }), Xn.on(\"pluginStateChange\", t), t;\n    }, t.renderColorRamp = Cs, t.rotateX = function (t, e, r) {\n      var n = Math.sin(r),\n        i = Math.cos(r),\n        a = e[4],\n        s = e[5],\n        o = e[6],\n        l = e[7],\n        u = e[8],\n        c = e[9],\n        h = e[10],\n        p = e[11];\n      return e !== t && (t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15]), t[4] = a * i + u * n, t[5] = s * i + c * n, t[6] = o * i + h * n, t[7] = l * i + p * n, t[8] = u * i - a * n, t[9] = c * i - s * n, t[10] = h * i - o * n, t[11] = p * i - l * n, t;\n    }, t.rotateZ = function (t, e, r) {\n      var n = Math.sin(r),\n        i = Math.cos(r),\n        a = e[0],\n        s = e[1],\n        o = e[2],\n        l = e[3],\n        u = e[4],\n        c = e[5],\n        h = e[6],\n        p = e[7];\n      return e !== t && (t[8] = e[8], t[9] = e[9], t[10] = e[10], t[11] = e[11], t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15]), t[0] = a * i + u * n, t[1] = s * i + c * n, t[2] = o * i + h * n, t[3] = l * i + p * n, t[4] = u * i - a * n, t[5] = c * i - s * n, t[6] = h * i - o * n, t[7] = p * i - l * n, t;\n    }, t.scale = function (t, e, r) {\n      var n = r[0],\n        i = r[1],\n        a = r[2];\n      return t[0] = e[0] * n, t[1] = e[1] * n, t[2] = e[2] * n, t[3] = e[3] * n, t[4] = e[4] * i, t[5] = e[5] * i, t[6] = e[6] * i, t[7] = e[7] * i, t[8] = e[8] * a, t[9] = e[9] * a, t[10] = e[10] * a, t[11] = e[11] * a, t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15], t;\n    }, t.scale$1 = function (t, e, r) {\n      return t[0] = e[0] * r, t[1] = e[1] * r, t[2] = e[2] * r, t;\n    }, t.setCacheLimits = function (t, e) {\n      P = t, V = e;\n    }, t.setRTLTextPlugin = function (t, e) {\n      var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n      if (Zn === Un || Zn === qn || Zn === jn) throw new Error(\"setRTLTextPlugin cannot be called multiple times.\");\n      Kn = k.resolveURL(t), Zn = Un, Nn = e, Jn(), r || Hn();\n    }, t.spec = nt, t.sphericalToCartesian = function (_ref118) {\n      var _ref119 = _slicedToArray(_ref118, 3),\n        t = _ref119[0],\n        e = _ref119[1],\n        r = _ref119[2];\n      return e += 90, e *= Math.PI / 180, r *= Math.PI / 180, {\n        x: t * Math.cos(e) * Math.sin(r),\n        y: t * Math.sin(e) * Math.sin(r),\n        z: t * Math.cos(r)\n      };\n    }, t.sqrLen = function (t) {\n      var e = t[0],\n        r = t[1];\n      return e * e + r * r;\n    }, t.sub = function (t, e, r) {\n      return t[0] = e[0] - r[0], t[1] = e[1] - r[1], t[2] = e[2] - r[2], t;\n    }, t.toEvaluationFeature = Ka, t.transformMat3 = function (t, e, r) {\n      var n = e[0],\n        i = e[1],\n        a = e[2];\n      return t[0] = n * r[0] + i * r[3] + a * r[6], t[1] = n * r[1] + i * r[4] + a * r[7], t[2] = n * r[2] + i * r[5] + a * r[8], t;\n    }, t.transformMat4 = bs, t.transformMat4$1 = function (t, e, r) {\n      var n = e[0],\n        i = e[1];\n      return t[0] = r[0] * n + r[4] * i + r[12], t[1] = r[1] * n + r[5] * i + r[13], t;\n    }, t.translate = function (t, e, r) {\n      var n,\n        i,\n        a,\n        s,\n        o,\n        l,\n        u,\n        c,\n        h,\n        p,\n        f,\n        d,\n        y = r[0],\n        m = r[1],\n        g = r[2];\n      return e === t ? (t[12] = e[0] * y + e[4] * m + e[8] * g + e[12], t[13] = e[1] * y + e[5] * m + e[9] * g + e[13], t[14] = e[2] * y + e[6] * m + e[10] * g + e[14], t[15] = e[3] * y + e[7] * m + e[11] * g + e[15]) : (i = e[1], a = e[2], s = e[3], o = e[4], l = e[5], u = e[6], c = e[7], h = e[8], p = e[9], f = e[10], d = e[11], t[0] = n = e[0], t[1] = i, t[2] = a, t[3] = s, t[4] = o, t[5] = l, t[6] = u, t[7] = c, t[8] = h, t[9] = p, t[10] = f, t[11] = d, t[12] = n * y + o * m + h * g + e[12], t[13] = i * y + l * m + p * g + e[13], t[14] = a * y + u * m + f * g + e[14], t[15] = s * y + c * m + d * g + e[15]), t;\n    }, t.triggerPluginCompletionEvent = Gn, t.unicodeBlockLookup = Vn, t.uniqueId = function () {\n      return l++;\n    }, t.validateCustomStyleLayer = function (t) {\n      var e = [],\n        r = t.id;\n      return void 0 === r && e.push({\n        message: \"layers.\".concat(r, \": missing required property \\\"id\\\"\")\n      }), void 0 === t.render && e.push({\n        message: \"layers.\".concat(r, \": missing required method \\\"render\\\"\")\n      }), t.renderingMode && \"2d\" !== t.renderingMode && \"3d\" !== t.renderingMode && e.push({\n        message: \"layers.\".concat(r, \": property \\\"renderingMode\\\" must be either \\\"2d\\\" or \\\"3d\\\"\")\n      }), e;\n    }, t.validateLight = wn, t.validateStyle = bn, t.vectorTile = _o, t.warnOnce = d, t.wrap = s;\n  });\n  define([\"./shared\"], function (e) {\n    \"use strict\";\n\n    function t(e) {\n      var o = typeof e;\n      if (\"number\" === o || \"boolean\" === o || \"string\" === o || null == e) return JSON.stringify(e);\n      if (Array.isArray(e)) {\n        var _o33 = \"[\";\n        var _iterator115 = _createForOfIteratorHelper(e),\n          _step115;\n        try {\n          for (_iterator115.s(); !(_step115 = _iterator115.n()).done;) {\n            var _i108 = _step115.value;\n            _o33 += \"\".concat(t(_i108), \",\");\n          }\n        } catch (err) {\n          _iterator115.e(err);\n        } finally {\n          _iterator115.f();\n        }\n        return \"\".concat(_o33, \"]\");\n      }\n      var i = Object.keys(e).sort();\n      var r = \"{\";\n      for (var _o34 = 0; _o34 < i.length; _o34++) r += \"\".concat(JSON.stringify(i[_o34]), \":\").concat(t(e[i[_o34]]), \",\");\n      return \"\".concat(r, \"}\");\n    }\n    function o(o) {\n      var i = \"\";\n      var _iterator116 = _createForOfIteratorHelper(e.refProperties),\n        _step116;\n      try {\n        for (_iterator116.s(); !(_step116 = _iterator116.n()).done;) {\n          var _r152 = _step116.value;\n          i += \"/\".concat(t(o[_r152]));\n        }\n      } catch (err) {\n        _iterator116.e(err);\n      } finally {\n        _iterator116.f();\n      }\n      return i;\n    }\n    var i = /*#__PURE__*/function () {\n      function i(e) {\n        _classCallCheck(this, i);\n        this.keyCache = {}, e && this.replace(e);\n      }\n      _createClass(i, [{\n        key: \"replace\",\n        value: function replace(e) {\n          this._layerConfigs = {}, this._layers = {}, this.update(e, []);\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, _i109) {\n          var _this23 = this;\n          var _iterator117 = _createForOfIteratorHelper(t),\n            _step117;\n          try {\n            for (_iterator117.s(); !(_step117 = _iterator117.n()).done;) {\n              var _o35 = _step117.value;\n              this._layerConfigs[_o35.id] = _o35;\n              var _t155 = this._layers[_o35.id] = e.createStyleLayer(_o35);\n              _t155._featureFilter = e.createFilter(_t155.filter), this.keyCache[_o35.id] && delete this.keyCache[_o35.id];\n            }\n          } catch (err) {\n            _iterator117.e(err);\n          } finally {\n            _iterator117.f();\n          }\n          var _iterator118 = _createForOfIteratorHelper(_i109),\n            _step118;\n          try {\n            for (_iterator118.s(); !(_step118 = _iterator118.n()).done;) {\n              var _e158 = _step118.value;\n              delete this.keyCache[_e158], delete this._layerConfigs[_e158], delete this._layers[_e158];\n            }\n          } catch (err) {\n            _iterator118.e(err);\n          } finally {\n            _iterator118.f();\n          }\n          this.familiesBySource = {};\n          var r = function (e, t) {\n            var i = {};\n            for (var _r153 = 0; _r153 < e.length; _r153++) {\n              var _n106 = t && t[e[_r153].id] || o(e[_r153]);\n              t && (t[e[_r153].id] = _n106);\n              var _s64 = i[_n106];\n              _s64 || (_s64 = i[_n106] = []), _s64.push(e[_r153]);\n            }\n            var r = [];\n            for (var _e157 in i) r.push(i[_e157]);\n            return r;\n          }(Object.values(this._layerConfigs), this.keyCache);\n          var _iterator119 = _createForOfIteratorHelper(r),\n            _step119;\n          try {\n            for (_iterator119.s(); !(_step119 = _iterator119.n()).done;) {\n              var _e159 = _step119.value;\n              var _t156 = _e159.map(function (e) {\n                  return _this23._layers[e.id];\n                }),\n                _o36 = _t156[0];\n              if (\"none\" === _o36.visibility) continue;\n              var _i110 = _o36.source || \"\";\n              var _r154 = this.familiesBySource[_i110];\n              _r154 || (_r154 = this.familiesBySource[_i110] = {});\n              var _n107 = _o36.sourceLayer || \"_geojsonTileLayer\";\n              var _s65 = _r154[_n107];\n              _s65 || (_s65 = _r154[_n107] = []), _s65.push(_t156);\n            }\n          } catch (err) {\n            _iterator119.e(err);\n          } finally {\n            _iterator119.f();\n          }\n        }\n      }]);\n      return i;\n    }();\n    var r = /*#__PURE__*/_createClass(function r(t) {\n      _classCallCheck(this, r);\n      var o = {},\n        i = [];\n      for (var _e160 in t) {\n        var _r156 = t[_e160],\n          _n108 = o[_e160] = {};\n        for (var _e161 in _r156) {\n          var _t157 = _r156[+_e161];\n          if (!_t157 || 0 === _t157.bitmap.width || 0 === _t157.bitmap.height) continue;\n          var _o37 = {\n            x: 0,\n            y: 0,\n            w: _t157.bitmap.width + 2,\n            h: _t157.bitmap.height + 2\n          };\n          i.push(_o37), _n108[_e161] = {\n            rect: _o37,\n            metrics: _t157.metrics\n          };\n        }\n      }\n      var _e$potpack = e.potpack(i),\n        _r155 = _e$potpack.w,\n        n = _e$potpack.h,\n        s = new e.AlphaImage({\n          width: _r155 || 1,\n          height: n || 1\n        });\n      for (var _i111 in t) {\n        var _r157 = t[_i111];\n        for (var _t158 in _r157) {\n          var _n109 = _r157[+_t158];\n          if (!_n109 || 0 === _n109.bitmap.width || 0 === _n109.bitmap.height) continue;\n          var _a73 = o[_i111][_t158].rect;\n          e.AlphaImage.copy(_n109.bitmap, s, {\n            x: 0,\n            y: 0\n          }, {\n            x: _a73.x + 1,\n            y: _a73.y + 1\n          }, _n109.bitmap);\n        }\n      }\n      this.image = s, this.positions = o;\n    });\n    e.register(\"GlyphAtlas\", r);\n    var n = /*#__PURE__*/function () {\n      function n(t) {\n        _classCallCheck(this, n);\n        this.tileID = new e.OverscaledTileID(t.tileID.overscaledZ, t.tileID.wrap, t.tileID.canonical.z, t.tileID.canonical.x, t.tileID.canonical.y), this.uid = t.uid, this.zoom = t.zoom, this.pixelRatio = t.pixelRatio, this.tileSize = t.tileSize, this.source = t.source, this.overscaling = this.tileID.overscaleFactor(), this.showCollisionBoxes = t.showCollisionBoxes, this.collectResourceTiming = !!t.collectResourceTiming, this.returnDependencies = !!t.returnDependencies, this.promoteId = t.promoteId;\n      }\n      _createClass(n, [{\n        key: \"parse\",\n        value: function parse(t, o, i, _n110, a) {\n          var _this24 = this;\n          this.status = \"parsing\", this.data = t, this.collisionBoxArray = new e.CollisionBoxArray();\n          var l = new e.DictionaryCoder(Object.keys(t.layers).sort()),\n            c = new e.FeatureIndex(this.tileID, this.promoteId);\n          c.bucketLayerIDs = [];\n          var u = {},\n            h = {\n              featureIndex: c,\n              iconDependencies: {},\n              patternDependencies: {},\n              glyphDependencies: {},\n              availableImages: i\n            },\n            p = o.familiesBySource[this.source];\n          for (var _o38 in p) {\n            var _r158 = t.layers[_o38];\n            if (!_r158) continue;\n            1 === _r158.version && e.warnOnce(\"Vector tile source \\\"\".concat(this.source, \"\\\" layer \\\"\").concat(_o38, \"\\\" does not use vector tile spec v2 and therefore may have some rendering errors.\"));\n            var _n111 = l.encode(_o38),\n              _a74 = [];\n            for (var _e162 = 0; _e162 < _r158.length; _e162++) {\n              var _t159 = _r158.feature(_e162),\n                _i112 = c.getId(_t159, _o38);\n              _a74.push({\n                feature: _t159,\n                id: _i112,\n                index: _e162,\n                sourceLayerIndex: _n111\n              });\n            }\n            var _iterator120 = _createForOfIteratorHelper(p[_o38]),\n              _step120;\n            try {\n              for (_iterator120.s(); !(_step120 = _iterator120.n()).done;) {\n                var _t160 = _step120.value;\n                var _o39 = _t160[0];\n                _o39.source !== this.source && e.warnOnce(\"layer.source = \".concat(_o39.source, \" does not equal this.source = \").concat(this.source)), _o39.minzoom && this.zoom < Math.floor(_o39.minzoom) || _o39.maxzoom && this.zoom >= _o39.maxzoom || \"none\" !== _o39.visibility && (s(_t160, this.zoom, i), (u[_o39.id] = _o39.createBucket({\n                  index: c.bucketLayerIDs.length,\n                  layers: _t160,\n                  zoom: this.zoom,\n                  pixelRatio: this.pixelRatio,\n                  overscaling: this.overscaling,\n                  collisionBoxArray: this.collisionBoxArray,\n                  sourceLayerIndex: _n111,\n                  sourceID: this.source\n                })).populate(_a74, h, this.tileID.canonical), c.bucketLayerIDs.push(_t160.map(function (e) {\n                  return e.id;\n                })));\n              }\n            } catch (err) {\n              _iterator120.e(err);\n            } finally {\n              _iterator120.f();\n            }\n          }\n          var f, d, g, m;\n          var y = e.mapObject(h.glyphDependencies, function (e) {\n            return Object.keys(e).map(Number);\n          });\n          Object.keys(y).length ? _n110.send(\"getGlyphs\", {\n            uid: this.uid,\n            stacks: y\n          }, function (e, t) {\n            f || (f = e, d = t, w.call(_this24));\n          }) : d = {};\n          var v = Object.keys(h.iconDependencies);\n          v.length ? _n110.send(\"getImages\", {\n            icons: v,\n            source: this.source,\n            tileID: this.tileID,\n            type: \"icons\"\n          }, function (e, t) {\n            f || (f = e, g = t, w.call(_this24));\n          }) : g = {};\n          var x = Object.keys(h.patternDependencies);\n          function w() {\n            if (f) return a(f);\n            if (d && g && m) {\n              var _t161 = new r(d),\n                _o40 = new e.ImageAtlas(g, m);\n              for (var _r159 in u) {\n                var _n112 = u[_r159];\n                _n112 instanceof e.SymbolBucket ? (s(_n112.layers, this.zoom, i), e.performSymbolLayout({\n                  bucket: _n112,\n                  glyphMap: d,\n                  glyphPositions: _t161.positions,\n                  imageMap: g,\n                  imagePositions: _o40.iconPositions,\n                  showCollisionBoxes: this.showCollisionBoxes,\n                  canonical: this.tileID.canonical\n                })) : _n112.hasPattern && (_n112 instanceof e.LineBucket || _n112 instanceof e.FillBucket || _n112 instanceof e.FillExtrusionBucket) && (s(_n112.layers, this.zoom, i), _n112.addFeatures(h, this.tileID.canonical, _o40.patternPositions));\n              }\n              this.status = \"done\", a(null, {\n                buckets: Object.values(u).filter(function (e) {\n                  return !e.isEmpty();\n                }),\n                featureIndex: c,\n                collisionBoxArray: this.collisionBoxArray,\n                glyphAtlasImage: _t161.image,\n                imageAtlas: _o40,\n                glyphMap: this.returnDependencies ? d : null,\n                iconMap: this.returnDependencies ? g : null,\n                glyphPositions: this.returnDependencies ? _t161.positions : null\n              });\n            }\n          }\n          x.length ? _n110.send(\"getImages\", {\n            icons: x,\n            source: this.source,\n            tileID: this.tileID,\n            type: \"patterns\"\n          }, function (e, t) {\n            f || (f = e, m = t, w.call(_this24));\n          }) : m = {}, w.call(this);\n        }\n      }]);\n      return n;\n    }();\n    function s(t, o, i) {\n      var r = new e.EvaluationParameters(o);\n      var _iterator121 = _createForOfIteratorHelper(t),\n        _step121;\n      try {\n        for (_iterator121.s(); !(_step121 = _iterator121.n()).done;) {\n          var _e163 = _step121.value;\n          _e163.recalculate(r, i);\n        }\n      } catch (err) {\n        _iterator121.e(err);\n      } finally {\n        _iterator121.f();\n      }\n    }\n    function a(t, o) {\n      var i = e.getArrayBuffer(t.request, function (t, i, r, n) {\n        t ? o(t) : i && o(null, {\n          vectorTile: new e.vectorTile.VectorTile(new e.pbf(i)),\n          rawData: i,\n          cacheControl: r,\n          expires: n\n        });\n      });\n      return function () {\n        i.cancel(), o();\n      };\n    }\n    var l = /*#__PURE__*/function () {\n      function l(e, t, o, i) {\n        _classCallCheck(this, l);\n        this.actor = e, this.layerIndex = t, this.availableImages = o, this.loadVectorData = i || a, this.loading = {}, this.loaded = {};\n      }\n      _createClass(l, [{\n        key: \"loadTile\",\n        value: function loadTile(t, o) {\n          var _this25 = this;\n          var i = t.uid;\n          this.loading || (this.loading = {});\n          var r = !!(t && t.request && t.request.collectResourceTiming) && new e.RequestPerformance(t.request),\n            s = this.loading[i] = new n(t);\n          s.abort = this.loadVectorData(t, function (t, n) {\n            if (delete _this25.loading[i], t || !n) return s.status = \"done\", _this25.loaded[i] = s, o(t);\n            var a = n.rawData,\n              _l31 = {};\n            n.expires && (_l31.expires = n.expires), n.cacheControl && (_l31.cacheControl = n.cacheControl);\n            var c = {};\n            if (r) {\n              var _e164 = r.finish();\n              _e164 && (c.resourceTiming = JSON.parse(JSON.stringify(_e164)));\n            }\n            s.vectorTile = n.vectorTile, s.parse(n.vectorTile, _this25.layerIndex, _this25.availableImages, _this25.actor, function (t, i) {\n              if (t || !i) return o(t);\n              o(null, e.extend({\n                rawTileData: a.slice(0)\n              }, i, _l31, c));\n            }), _this25.loaded = _this25.loaded || {}, _this25.loaded[i] = s;\n          });\n        }\n      }, {\n        key: \"reloadTile\",\n        value: function reloadTile(e, t) {\n          var _this26 = this;\n          var o = this.loaded,\n            i = e.uid,\n            r = this;\n          if (o && o[i]) {\n            var _n113 = o[i];\n            _n113.showCollisionBoxes = e.showCollisionBoxes;\n            var _s66 = function _s66(e, o) {\n              var i = _n113.reloadCallback;\n              i && (delete _n113.reloadCallback, _n113.parse(_n113.vectorTile, r.layerIndex, _this26.availableImages, r.actor, i)), t(e, o);\n            };\n            \"parsing\" === _n113.status ? _n113.reloadCallback = _s66 : \"done\" === _n113.status && (_n113.vectorTile ? _n113.parse(_n113.vectorTile, this.layerIndex, this.availableImages, this.actor, _s66) : _s66());\n          }\n        }\n      }, {\n        key: \"abortTile\",\n        value: function abortTile(e, t) {\n          var o = this.loading,\n            i = e.uid;\n          o && o[i] && o[i].abort && (o[i].abort(), delete o[i]), t();\n        }\n      }, {\n        key: \"removeTile\",\n        value: function removeTile(e, t) {\n          var o = this.loaded,\n            i = e.uid;\n          o && o[i] && delete o[i], t();\n        }\n      }]);\n      return l;\n    }();\n    var c = /*#__PURE__*/function () {\n      function c() {\n        _classCallCheck(this, c);\n        this.loaded = {};\n      }\n      _createClass(c, [{\n        key: \"loadTile\",\n        value: function loadTile(t, o) {\n          var i = t.uid,\n            r = t.encoding,\n            n = t.rawImageData,\n            s = e.isImageBitmap(n) ? this.getImageData(n) : n,\n            a = new e.DEMData(i, s, r);\n          this.loaded = this.loaded || {}, this.loaded[i] = a, o(null, a);\n        }\n      }, {\n        key: \"getImageData\",\n        value: function getImageData(t) {\n          this.offscreenCanvas && this.offscreenCanvasContext || (this.offscreenCanvas = new OffscreenCanvas(t.width, t.height), this.offscreenCanvasContext = this.offscreenCanvas.getContext(\"2d\")), this.offscreenCanvas.width = t.width, this.offscreenCanvas.height = t.height, this.offscreenCanvasContext.drawImage(t, 0, 0, t.width, t.height);\n          var o = this.offscreenCanvasContext.getImageData(-1, -1, t.width + 2, t.height + 2);\n          return this.offscreenCanvasContext.clearRect(0, 0, this.offscreenCanvas.width, this.offscreenCanvas.height), new e.RGBAImage({\n            width: o.width,\n            height: o.height\n          }, o.data);\n        }\n      }, {\n        key: \"removeTile\",\n        value: function removeTile(e) {\n          var t = this.loaded,\n            o = e.uid;\n          t && t[o] && delete t[o];\n        }\n      }]);\n      return c;\n    }();\n    var u = function e(t, o) {\n      var i,\n        r = t && t.type;\n      if (\"FeatureCollection\" === r) for (i = 0; i < t.features.length; i++) e(t.features[i], o);else if (\"GeometryCollection\" === r) for (i = 0; i < t.geometries.length; i++) e(t.geometries[i], o);else if (\"Feature\" === r) e(t.geometry, o);else if (\"Polygon\" === r) h(t.coordinates, o);else if (\"MultiPolygon\" === r) for (i = 0; i < t.coordinates.length; i++) h(t.coordinates[i], o);\n      return t;\n    };\n    function h(e, t) {\n      if (0 !== e.length) {\n        p(e[0], t);\n        for (var o = 1; o < e.length; o++) p(e[o], !t);\n      }\n    }\n    function p(e, t) {\n      for (var o = 0, i = 0, r = 0, n = e.length, s = n - 1; r < n; s = r++) {\n        var a = (e[r][0] - e[s][0]) * (e[s][1] + e[r][1]),\n          l = o + a;\n        i += Math.abs(o) >= Math.abs(a) ? o - l + a : a - l + o, o = l;\n      }\n      o + i >= 0 != !!t && e.reverse();\n    }\n    var f = e.vectorTile.VectorTileFeature.prototype.toGeoJSON;\n    var d = /*#__PURE__*/function () {\n      function d(t) {\n        _classCallCheck(this, d);\n        this._feature = t, this.extent = e.EXTENT, this.type = t.type, this.properties = t.tags, \"id\" in t && !isNaN(t.id) && (this.id = parseInt(t.id, 10));\n      }\n      _createClass(d, [{\n        key: \"loadGeometry\",\n        value: function loadGeometry() {\n          if (1 === this._feature.type) {\n            var _t162 = [];\n            var _iterator122 = _createForOfIteratorHelper(this._feature.geometry),\n              _step122;\n            try {\n              for (_iterator122.s(); !(_step122 = _iterator122.n()).done;) {\n                var _o41 = _step122.value;\n                _t162.push([new e.pointGeometry(_o41[0], _o41[1])]);\n              }\n            } catch (err) {\n              _iterator122.e(err);\n            } finally {\n              _iterator122.f();\n            }\n            return _t162;\n          }\n          {\n            var _t163 = [];\n            var _iterator123 = _createForOfIteratorHelper(this._feature.geometry),\n              _step123;\n            try {\n              for (_iterator123.s(); !(_step123 = _iterator123.n()).done;) {\n                var _o42 = _step123.value;\n                var _i113 = [];\n                var _iterator124 = _createForOfIteratorHelper(_o42),\n                  _step124;\n                try {\n                  for (_iterator124.s(); !(_step124 = _iterator124.n()).done;) {\n                    var _t164 = _step124.value;\n                    _i113.push(new e.pointGeometry(_t164[0], _t164[1]));\n                  }\n                } catch (err) {\n                  _iterator124.e(err);\n                } finally {\n                  _iterator124.f();\n                }\n                _t163.push(_i113);\n              }\n            } catch (err) {\n              _iterator123.e(err);\n            } finally {\n              _iterator123.f();\n            }\n            return _t163;\n          }\n        }\n      }, {\n        key: \"toGeoJSON\",\n        value: function toGeoJSON(e, t, o) {\n          return f.call(this, e, t, o);\n        }\n      }]);\n      return d;\n    }();\n    var g = /*#__PURE__*/function () {\n      function g(t) {\n        _classCallCheck(this, g);\n        this.layers = {\n          _geojsonTileLayer: this\n        }, this.name = \"_geojsonTileLayer\", this.extent = e.EXTENT, this.length = t.length, this._features = t;\n      }\n      _createClass(g, [{\n        key: \"feature\",\n        value: function feature(e) {\n          return new d(this._features[e]);\n        }\n      }]);\n      return g;\n    }();\n    var m = {\n        exports: {}\n      },\n      y = e.pointGeometry,\n      v = e.vectorTile.VectorTileFeature,\n      x = w;\n    function w(e, t) {\n      this.options = t || {}, this.features = e, this.length = e.length;\n    }\n    function S(e, t) {\n      this.id = \"number\" == typeof e.id ? e.id : void 0, this.type = e.type, this.rawGeometry = 1 === e.type ? [e.geometry] : e.geometry, this.properties = e.tags, this.extent = t || 4096;\n    }\n    w.prototype.feature = function (e) {\n      return new S(this.features[e], this.options.extent);\n    }, S.prototype.loadGeometry = function () {\n      var e = this.rawGeometry;\n      this.geometry = [];\n      for (var t = 0; t < e.length; t++) {\n        for (var o = e[t], i = [], r = 0; r < o.length; r++) i.push(new y(o[r][0], o[r][1]));\n        this.geometry.push(i);\n      }\n      return this.geometry;\n    }, S.prototype.bbox = function () {\n      this.geometry || this.loadGeometry();\n      for (var e = this.geometry, t = 1 / 0, o = -1 / 0, i = 1 / 0, r = -1 / 0, n = 0; n < e.length; n++) for (var s = e[n], a = 0; a < s.length; a++) {\n        var l = s[a];\n        t = Math.min(t, l.x), o = Math.max(o, l.x), i = Math.min(i, l.y), r = Math.max(r, l.y);\n      }\n      return [t, i, o, r];\n    }, S.prototype.toGeoJSON = v.prototype.toGeoJSON;\n    var M = e.pbf,\n      I = x;\n    function b(e) {\n      var t = new M();\n      return function (e, t) {\n        for (var o in e.layers) t.writeMessage(3, k, e.layers[o]);\n      }(e, t), t.finish();\n    }\n    function k(e, t) {\n      var o;\n      t.writeVarintField(15, e.version || 1), t.writeStringField(1, e.name || \"\"), t.writeVarintField(5, e.extent || 4096);\n      var i = {\n        keys: [],\n        values: [],\n        keycache: {},\n        valuecache: {}\n      };\n      for (o = 0; o < e.length; o++) i.feature = e.feature(o), t.writeMessage(2, P, i);\n      var r = i.keys;\n      for (o = 0; o < r.length; o++) t.writeStringField(3, r[o]);\n      var n = i.values;\n      for (o = 0; o < n.length; o++) t.writeMessage(4, L, n[o]);\n    }\n    function P(e, t) {\n      var o = e.feature;\n      void 0 !== o.id && t.writeVarintField(1, o.id), t.writeMessage(2, T, e), t.writeVarintField(3, o.type), t.writeMessage(4, D, o);\n    }\n    function T(e, t) {\n      var o = e.feature,\n        i = e.keys,\n        r = e.values,\n        n = e.keycache,\n        s = e.valuecache;\n      for (var a in o.properties) {\n        var l = o.properties[a],\n          c = n[a];\n        if (null !== l) {\n          void 0 === c && (i.push(a), n[a] = c = i.length - 1), t.writeVarint(c);\n          var u = typeof l;\n          \"string\" !== u && \"boolean\" !== u && \"number\" !== u && (l = JSON.stringify(l));\n          var h = u + \":\" + l,\n            p = s[h];\n          void 0 === p && (r.push(l), s[h] = p = r.length - 1), t.writeVarint(p);\n        }\n      }\n    }\n    function C(e, t) {\n      return (t << 3) + (7 & e);\n    }\n    function _(e) {\n      return e << 1 ^ e >> 31;\n    }\n    function D(e, t) {\n      for (var o = e.loadGeometry(), i = e.type, r = 0, n = 0, s = o.length, a = 0; a < s; a++) {\n        var l = o[a],\n          c = 1;\n        1 === i && (c = l.length), t.writeVarint(C(1, c));\n        for (var u = 3 === i ? l.length - 1 : l.length, h = 0; h < u; h++) {\n          1 === h && 1 !== i && t.writeVarint(C(2, u - 1));\n          var p = l[h].x - r,\n            f = l[h].y - n;\n          t.writeVarint(_(p)), t.writeVarint(_(f)), r += p, n += f;\n        }\n        3 === i && t.writeVarint(C(7, 1));\n      }\n    }\n    function L(e, t) {\n      var o = typeof e;\n      \"string\" === o ? t.writeStringField(1, e) : \"boolean\" === o ? t.writeBooleanField(7, e) : \"number\" === o && (e % 1 != 0 ? t.writeDoubleField(3, e) : e < 0 ? t.writeSVarintField(6, e) : t.writeVarintField(5, e));\n    }\n    function z(e, t, o, i, r, n) {\n      if (r - i <= o) return;\n      var s = i + r >> 1;\n      O(e, t, s, i, r, n % 2), z(e, t, o, i, s - 1, n + 1), z(e, t, o, s + 1, r, n + 1);\n    }\n    function O(e, t, o, i, r, n) {\n      for (; r > i;) {\n        if (r - i > 600) {\n          var _s67 = r - i + 1,\n            _a75 = o - i + 1,\n            _l32 = Math.log(_s67),\n            _c16 = .5 * Math.exp(2 * _l32 / 3),\n            _u22 = .5 * Math.sqrt(_l32 * _c16 * (_s67 - _c16) / _s67) * (_a75 - _s67 / 2 < 0 ? -1 : 1);\n          O(e, t, o, Math.max(i, Math.floor(o - _a75 * _c16 / _s67 + _u22)), Math.min(r, Math.floor(o + (_s67 - _a75) * _c16 / _s67 + _u22)), n);\n        }\n        var _s68 = t[2 * o + n];\n        var _a76 = i,\n          _l33 = r;\n        for (E(e, t, i, o), t[2 * r + n] > _s68 && E(e, t, i, r); _a76 < _l33;) {\n          for (E(e, t, _a76, _l33), _a76++, _l33--; t[2 * _a76 + n] < _s68;) _a76++;\n          for (; t[2 * _l33 + n] > _s68;) _l33--;\n        }\n        t[2 * i + n] === _s68 ? E(e, t, i, _l33) : (_l33++, E(e, t, _l33, r)), _l33 <= o && (i = _l33 + 1), o <= _l33 && (r = _l33 - 1);\n      }\n    }\n    function E(e, t, o, i) {\n      F(e, o, i), F(t, 2 * o, 2 * i), F(t, 2 * o + 1, 2 * i + 1);\n    }\n    function F(e, t, o) {\n      var i = e[t];\n      e[t] = e[o], e[o] = i;\n    }\n    function N(e, t, o, i) {\n      var r = e - o,\n        n = t - i;\n      return r * r + n * n;\n    }\n    m.exports = b, m.exports.fromVectorTileJs = b, m.exports.fromGeojsonVt = function (e, t) {\n      t = t || {};\n      var o = {};\n      for (var i in e) o[i] = new I(e[i].features, t), o[i].name = i, o[i].version = t.version, o[i].extent = t.extent;\n      return b({\n        layers: o\n      });\n    }, m.exports.GeoJSONWrapper = I;\n    var A = function A(e) {\n        return e[0];\n      },\n      B = function B(e) {\n        return e[1];\n      };\n    var J = /*#__PURE__*/function () {\n      function J(e) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : A;\n        var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : B;\n        var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 64;\n        var r = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : Float64Array;\n        _classCallCheck(this, J);\n        this.nodeSize = i, this.points = e;\n        var n = e.length < 65536 ? Uint16Array : Uint32Array,\n          s = this.ids = new n(e.length),\n          a = this.coords = new r(2 * e.length);\n        for (var _i114 = 0; _i114 < e.length; _i114++) s[_i114] = _i114, a[2 * _i114] = t(e[_i114]), a[2 * _i114 + 1] = o(e[_i114]);\n        z(s, a, i, 0, s.length - 1, 0);\n      }\n      _createClass(J, [{\n        key: \"range\",\n        value: function range(e, t, o, i) {\n          return function (e, t, o, i, r, n, s) {\n            var a = [0, e.length - 1, 0],\n              l = [];\n            var c, u;\n            for (; a.length;) {\n              var _h12 = a.pop(),\n                _p10 = a.pop(),\n                _f8 = a.pop();\n              if (_p10 - _f8 <= s) {\n                for (var _s69 = _f8; _s69 <= _p10; _s69++) c = t[2 * _s69], u = t[2 * _s69 + 1], c >= o && c <= r && u >= i && u <= n && l.push(e[_s69]);\n                continue;\n              }\n              var _d7 = Math.floor((_f8 + _p10) / 2);\n              c = t[2 * _d7], u = t[2 * _d7 + 1], c >= o && c <= r && u >= i && u <= n && l.push(e[_d7]);\n              var _g10 = (_h12 + 1) % 2;\n              (0 === _h12 ? o <= c : i <= u) && (a.push(_f8), a.push(_d7 - 1), a.push(_g10)), (0 === _h12 ? r >= c : n >= u) && (a.push(_d7 + 1), a.push(_p10), a.push(_g10));\n            }\n            return l;\n          }(this.ids, this.coords, e, t, o, i, this.nodeSize);\n        }\n      }, {\n        key: \"within\",\n        value: function within(e, t, o) {\n          return function (e, t, o, i, r, n) {\n            var s = [0, e.length - 1, 0],\n              a = [],\n              l = r * r;\n            for (; s.length;) {\n              var _c17 = s.pop(),\n                _u23 = s.pop(),\n                _h13 = s.pop();\n              if (_u23 - _h13 <= n) {\n                for (var _r160 = _h13; _r160 <= _u23; _r160++) N(t[2 * _r160], t[2 * _r160 + 1], o, i) <= l && a.push(e[_r160]);\n                continue;\n              }\n              var _p11 = Math.floor((_h13 + _u23) / 2),\n                _f9 = t[2 * _p11],\n                _d8 = t[2 * _p11 + 1];\n              N(_f9, _d8, o, i) <= l && a.push(e[_p11]);\n              var _g11 = (_c17 + 1) % 2;\n              (0 === _c17 ? o - r <= _f9 : i - r <= _d8) && (s.push(_h13), s.push(_p11 - 1), s.push(_g11)), (0 === _c17 ? o + r >= _f9 : i + r >= _d8) && (s.push(_p11 + 1), s.push(_u23), s.push(_g11));\n            }\n            return a;\n          }(this.ids, this.coords, e, t, o, this.nodeSize);\n        }\n      }]);\n      return J;\n    }();\n    var Z = {\n        minZoom: 0,\n        maxZoom: 16,\n        minPoints: 2,\n        radius: 40,\n        extent: 512,\n        nodeSize: 64,\n        log: !1,\n        generateId: !1,\n        reduce: null,\n        map: function map(e) {\n          return e;\n        }\n      },\n      G = Math.fround || (j = new Float32Array(1), function (e) {\n        return j[0] = +e, j[0];\n      });\n    var j;\n    var Y = /*#__PURE__*/function () {\n      function Y(e) {\n        _classCallCheck(this, Y);\n        this.options = H(Object.create(Z), e), this.trees = new Array(this.options.maxZoom + 1);\n      }\n      _createClass(Y, [{\n        key: \"load\",\n        value: function load(e) {\n          var _this$options = this.options,\n            t = _this$options.log,\n            o = _this$options.minZoom,\n            i = _this$options.maxZoom,\n            r = _this$options.nodeSize;\n          t && console.time(\"total time\");\n          var n = \"prepare \".concat(e.length, \" points\");\n          t && console.time(n), this.points = e;\n          var s = [];\n          for (var _t165 = 0; _t165 < e.length; _t165++) e[_t165].geometry && s.push(X(e[_t165], _t165));\n          this.trees[i + 1] = new J(s, K, Q, r, Float32Array), t && console.timeEnd(n);\n          for (var _e165 = i; _e165 >= o; _e165--) {\n            var _o43 = +Date.now();\n            s = this._cluster(s, _e165), this.trees[_e165] = new J(s, K, Q, r, Float32Array), t && console.log(\"z%d: %d clusters in %dms\", _e165, s.length, +Date.now() - _o43);\n          }\n          return t && console.timeEnd(\"total time\"), this;\n        }\n      }, {\n        key: \"getClusters\",\n        value: function getClusters(e, t) {\n          var o = ((e[0] + 180) % 360 + 360) % 360 - 180;\n          var i = Math.max(-90, Math.min(90, e[1]));\n          var r = 180 === e[2] ? 180 : ((e[2] + 180) % 360 + 360) % 360 - 180;\n          var n = Math.max(-90, Math.min(90, e[3]));\n          if (e[2] - e[0] >= 360) o = -180, r = 180;else if (o > r) {\n            var _e166 = this.getClusters([o, i, 180, n], t),\n              _s70 = this.getClusters([-180, i, r, n], t);\n            return _e166.concat(_s70);\n          }\n          var s = this.trees[this._limitZoom(t)],\n            a = s.range($(o), q(n), $(r), q(i)),\n            l = [];\n          var _iterator125 = _createForOfIteratorHelper(a),\n            _step125;\n          try {\n            for (_iterator125.s(); !(_step125 = _iterator125.n()).done;) {\n              var _e167 = _step125.value;\n              var _t166 = s.points[_e167];\n              l.push(_t166.numPoints ? R(_t166) : this.points[_t166.index]);\n            }\n          } catch (err) {\n            _iterator125.e(err);\n          } finally {\n            _iterator125.f();\n          }\n          return l;\n        }\n      }, {\n        key: \"getChildren\",\n        value: function getChildren(e) {\n          var t = this._getOriginId(e),\n            o = this._getOriginZoom(e),\n            i = \"No cluster with the specified id.\",\n            r = this.trees[o];\n          if (!r) throw new Error(i);\n          var n = r.points[t];\n          if (!n) throw new Error(i);\n          var s = this.options.radius / (this.options.extent * Math.pow(2, o - 1)),\n            a = r.within(n.x, n.y, s),\n            l = [];\n          var _iterator126 = _createForOfIteratorHelper(a),\n            _step126;\n          try {\n            for (_iterator126.s(); !(_step126 = _iterator126.n()).done;) {\n              var _t167 = _step126.value;\n              var _o44 = r.points[_t167];\n              _o44.parentId === e && l.push(_o44.numPoints ? R(_o44) : this.points[_o44.index]);\n            }\n          } catch (err) {\n            _iterator126.e(err);\n          } finally {\n            _iterator126.f();\n          }\n          if (0 === l.length) throw new Error(i);\n          return l;\n        }\n      }, {\n        key: \"getLeaves\",\n        value: function getLeaves(e, t, o) {\n          var i = [];\n          return this._appendLeaves(i, e, t = t || 10, o = o || 0, 0), i;\n        }\n      }, {\n        key: \"getTile\",\n        value: function getTile(e, t, o) {\n          var i = this.trees[this._limitZoom(e)],\n            r = Math.pow(2, e),\n            _this$options2 = this.options,\n            n = _this$options2.extent,\n            s = _this$options2.radius,\n            a = s / n,\n            l = (o - a) / r,\n            c = (o + 1 + a) / r,\n            u = {\n              features: []\n            };\n          return this._addTileFeatures(i.range((t - a) / r, l, (t + 1 + a) / r, c), i.points, t, o, r, u), 0 === t && this._addTileFeatures(i.range(1 - a / r, l, 1, c), i.points, r, o, r, u), t === r - 1 && this._addTileFeatures(i.range(0, l, a / r, c), i.points, -1, o, r, u), u.features.length ? u : null;\n        }\n      }, {\n        key: \"getClusterExpansionZoom\",\n        value: function getClusterExpansionZoom(e) {\n          var t = this._getOriginZoom(e) - 1;\n          for (; t <= this.options.maxZoom;) {\n            var _o45 = this.getChildren(e);\n            if (t++, 1 !== _o45.length) break;\n            e = _o45[0].properties.cluster_id;\n          }\n          return t;\n        }\n      }, {\n        key: \"_appendLeaves\",\n        value: function _appendLeaves(e, t, o, i, r) {\n          var n = this.getChildren(t);\n          var _iterator127 = _createForOfIteratorHelper(n),\n            _step127;\n          try {\n            for (_iterator127.s(); !(_step127 = _iterator127.n()).done;) {\n              var _t168 = _step127.value;\n              var _n114 = _t168.properties;\n              if (_n114 && _n114.cluster ? r + _n114.point_count <= i ? r += _n114.point_count : r = this._appendLeaves(e, _n114.cluster_id, o, i, r) : r < i ? r++ : e.push(_t168), e.length === o) break;\n            }\n          } catch (err) {\n            _iterator127.e(err);\n          } finally {\n            _iterator127.f();\n          }\n          return r;\n        }\n      }, {\n        key: \"_addTileFeatures\",\n        value: function _addTileFeatures(e, t, o, i, r, n) {\n          var _iterator128 = _createForOfIteratorHelper(e),\n            _step128;\n          try {\n            for (_iterator128.s(); !(_step128 = _iterator128.n()).done;) {\n              var _s71 = _step128.value;\n              var _e168 = t[_s71],\n                _a77 = _e168.numPoints;\n              var _l34 = void 0,\n                _c18 = void 0,\n                _u24 = void 0;\n              if (_a77) _l34 = W(_e168), _c18 = _e168.x, _u24 = _e168.y;else {\n                var _t169 = this.points[_e168.index];\n                _l34 = _t169.properties, _c18 = $(_t169.geometry.coordinates[0]), _u24 = q(_t169.geometry.coordinates[1]);\n              }\n              var _h14 = {\n                type: 1,\n                geometry: [[Math.round(this.options.extent * (_c18 * r - o)), Math.round(this.options.extent * (_u24 * r - i))]],\n                tags: _l34\n              };\n              var _p12 = void 0;\n              _a77 ? _p12 = _e168.id : this.options.generateId ? _p12 = _e168.index : this.points[_e168.index].id && (_p12 = this.points[_e168.index].id), void 0 !== _p12 && (_h14.id = _p12), n.features.push(_h14);\n            }\n          } catch (err) {\n            _iterator128.e(err);\n          } finally {\n            _iterator128.f();\n          }\n        }\n      }, {\n        key: \"_limitZoom\",\n        value: function _limitZoom(e) {\n          return Math.max(this.options.minZoom, Math.min(Math.floor(+e), this.options.maxZoom + 1));\n        }\n      }, {\n        key: \"_cluster\",\n        value: function _cluster(e, t) {\n          var o = [],\n            _this$options3 = this.options,\n            i = _this$options3.radius,\n            r = _this$options3.extent,\n            n = _this$options3.reduce,\n            s = _this$options3.minPoints,\n            a = i / (r * Math.pow(2, t));\n          for (var _i115 = 0; _i115 < e.length; _i115++) {\n            var _r161 = e[_i115];\n            if (_r161.zoom <= t) continue;\n            _r161.zoom = t;\n            var _l35 = this.trees[t + 1],\n              _c19 = _l35.within(_r161.x, _r161.y, a),\n              _u25 = _r161.numPoints || 1;\n            var _h15 = _u25;\n            var _iterator129 = _createForOfIteratorHelper(_c19),\n              _step129;\n            try {\n              for (_iterator129.s(); !(_step129 = _iterator129.n()).done;) {\n                var _e171 = _step129.value;\n                var _o47 = _l35.points[_e171];\n                _o47.zoom > t && (_h15 += _o47.numPoints || 1);\n              }\n            } catch (err) {\n              _iterator129.e(err);\n            } finally {\n              _iterator129.f();\n            }\n            if (_h15 > _u25 && _h15 >= s) {\n              var _e169 = _r161.x * _u25,\n                _s72 = _r161.y * _u25,\n                _a78 = n && _u25 > 1 ? this._map(_r161, !0) : null;\n              var _p13 = (_i115 << 5) + (t + 1) + this.points.length;\n              var _iterator130 = _createForOfIteratorHelper(_c19),\n                _step130;\n              try {\n                for (_iterator130.s(); !(_step130 = _iterator130.n()).done;) {\n                  var _o46 = _step130.value;\n                  var _i116 = _l35.points[_o46];\n                  if (_i116.zoom <= t) continue;\n                  _i116.zoom = t;\n                  var _c20 = _i116.numPoints || 1;\n                  _e169 += _i116.x * _c20, _s72 += _i116.y * _c20, _i116.parentId = _p13, n && (_a78 || (_a78 = this._map(_r161, !0)), n(_a78, this._map(_i116)));\n                }\n              } catch (err) {\n                _iterator130.e(err);\n              } finally {\n                _iterator130.f();\n              }\n              _r161.parentId = _p13, o.push(V(_e169 / _h15, _s72 / _h15, _p13, _h15, _a78));\n            } else if (o.push(_r161), _h15 > 1) {\n              var _iterator131 = _createForOfIteratorHelper(_c19),\n                _step131;\n              try {\n                for (_iterator131.s(); !(_step131 = _iterator131.n()).done;) {\n                  var _e170 = _step131.value;\n                  var _i117 = _l35.points[_e170];\n                  _i117.zoom <= t || (_i117.zoom = t, o.push(_i117));\n                }\n              } catch (err) {\n                _iterator131.e(err);\n              } finally {\n                _iterator131.f();\n              }\n            }\n          }\n          return o;\n        }\n      }, {\n        key: \"_getOriginId\",\n        value: function _getOriginId(e) {\n          return e - this.points.length >> 5;\n        }\n      }, {\n        key: \"_getOriginZoom\",\n        value: function _getOriginZoom(e) {\n          return (e - this.points.length) % 32;\n        }\n      }, {\n        key: \"_map\",\n        value: function _map(e, t) {\n          if (e.numPoints) return t ? H({}, e.properties) : e.properties;\n          var o = this.points[e.index].properties,\n            i = this.options.map(o);\n          return t && i === o ? H({}, i) : i;\n        }\n      }]);\n      return Y;\n    }();\n    function V(e, t, o, i, r) {\n      return {\n        x: G(e),\n        y: G(t),\n        zoom: 1 / 0,\n        id: o,\n        parentId: -1,\n        numPoints: i,\n        properties: r\n      };\n    }\n    function X(e, t) {\n      var _e$geometry$coordinat = _slicedToArray(e.geometry.coordinates, 2),\n        o = _e$geometry$coordinat[0],\n        i = _e$geometry$coordinat[1];\n      return {\n        x: G($(o)),\n        y: G(q(i)),\n        zoom: 1 / 0,\n        index: t,\n        parentId: -1\n      };\n    }\n    function R(e) {\n      return {\n        type: \"Feature\",\n        id: e.id,\n        properties: W(e),\n        geometry: {\n          type: \"Point\",\n          coordinates: [(t = e.x, 360 * (t - .5)), U(e.y)]\n        }\n      };\n      var t;\n    }\n    function W(e) {\n      var t = e.numPoints,\n        o = t >= 1e4 ? \"\".concat(Math.round(t / 1e3), \"k\") : t >= 1e3 ? Math.round(t / 100) / 10 + \"k\" : t;\n      return H(H({}, e.properties), {\n        cluster: !0,\n        cluster_id: e.id,\n        point_count: t,\n        point_count_abbreviated: o\n      });\n    }\n    function $(e) {\n      return e / 360 + .5;\n    }\n    function q(e) {\n      var t = Math.sin(e * Math.PI / 180),\n        o = .5 - .25 * Math.log((1 + t) / (1 - t)) / Math.PI;\n      return o < 0 ? 0 : o > 1 ? 1 : o;\n    }\n    function U(e) {\n      var t = (180 - 360 * e) * Math.PI / 180;\n      return 360 * Math.atan(Math.exp(t)) / Math.PI - 90;\n    }\n    function H(e, t) {\n      for (var _o48 in t) e[_o48] = t[_o48];\n      return e;\n    }\n    function K(e) {\n      return e.x;\n    }\n    function Q(e) {\n      return e.y;\n    }\n    function ee(e, t, o, i) {\n      for (var r, n = i, s = o - t >> 1, a = o - t, l = e[t], c = e[t + 1], u = e[o], h = e[o + 1], p = t + 3; p < o; p += 3) {\n        var f = te(e[p], e[p + 1], l, c, u, h);\n        if (f > n) r = p, n = f;else if (f === n) {\n          var d = Math.abs(p - s);\n          d < a && (r = p, a = d);\n        }\n      }\n      n > i && (r - t > 3 && ee(e, t, r, i), e[r + 2] = n, o - r > 3 && ee(e, r, o, i));\n    }\n    function te(e, t, o, i, r, n) {\n      var s = r - o,\n        a = n - i;\n      if (0 !== s || 0 !== a) {\n        var l = ((e - o) * s + (t - i) * a) / (s * s + a * a);\n        l > 1 ? (o = r, i = n) : l > 0 && (o += s * l, i += a * l);\n      }\n      return (s = e - o) * s + (a = t - i) * a;\n    }\n    function oe(e, t, o, i) {\n      var r = {\n        id: void 0 === e ? null : e,\n        type: t,\n        geometry: o,\n        tags: i,\n        minX: 1 / 0,\n        minY: 1 / 0,\n        maxX: -1 / 0,\n        maxY: -1 / 0\n      };\n      return function (e) {\n        var t = e.geometry,\n          o = e.type;\n        if (\"Point\" === o || \"MultiPoint\" === o || \"LineString\" === o) ie(e, t);else if (\"Polygon\" === o || \"MultiLineString\" === o) for (var i = 0; i < t.length; i++) ie(e, t[i]);else if (\"MultiPolygon\" === o) for (i = 0; i < t.length; i++) for (var r = 0; r < t[i].length; r++) ie(e, t[i][r]);\n      }(r), r;\n    }\n    function ie(e, t) {\n      for (var o = 0; o < t.length; o += 3) e.minX = Math.min(e.minX, t[o]), e.minY = Math.min(e.minY, t[o + 1]), e.maxX = Math.max(e.maxX, t[o]), e.maxY = Math.max(e.maxY, t[o + 1]);\n    }\n    function re(e, t, o, i) {\n      if (t.geometry) {\n        var r = t.geometry.coordinates,\n          n = t.geometry.type,\n          s = Math.pow(o.tolerance / ((1 << o.maxZoom) * o.extent), 2),\n          a = [],\n          l = t.id;\n        if (o.promoteId ? l = t.properties[o.promoteId] : o.generateId && (l = i || 0), \"Point\" === n) ne(r, a);else if (\"MultiPoint\" === n) for (var c = 0; c < r.length; c++) ne(r[c], a);else if (\"LineString\" === n) se(r, a, s, !1);else if (\"MultiLineString\" === n) {\n          if (o.lineMetrics) {\n            for (c = 0; c < r.length; c++) se(r[c], a = [], s, !1), e.push(oe(l, \"LineString\", a, t.properties));\n            return;\n          }\n          ae(r, a, s, !1);\n        } else if (\"Polygon\" === n) ae(r, a, s, !0);else {\n          if (\"MultiPolygon\" !== n) {\n            if (\"GeometryCollection\" === n) {\n              for (c = 0; c < t.geometry.geometries.length; c++) re(e, {\n                id: l,\n                geometry: t.geometry.geometries[c],\n                properties: t.properties\n              }, o, i);\n              return;\n            }\n            throw new Error(\"Input data is not a valid GeoJSON object.\");\n          }\n          for (c = 0; c < r.length; c++) {\n            var u = [];\n            ae(r[c], u, s, !0), a.push(u);\n          }\n        }\n        e.push(oe(l, n, a, t.properties));\n      }\n    }\n    function ne(e, t) {\n      t.push(le(e[0])), t.push(ce(e[1])), t.push(0);\n    }\n    function se(e, t, o, i) {\n      for (var r, n, s = 0, a = 0; a < e.length; a++) {\n        var l = le(e[a][0]),\n          c = ce(e[a][1]);\n        t.push(l), t.push(c), t.push(0), a > 0 && (s += i ? (r * c - l * n) / 2 : Math.sqrt(Math.pow(l - r, 2) + Math.pow(c - n, 2))), r = l, n = c;\n      }\n      var u = t.length - 3;\n      t[2] = 1, ee(t, 0, u, o), t[u + 2] = 1, t.size = Math.abs(s), t.start = 0, t.end = t.size;\n    }\n    function ae(e, t, o, i) {\n      for (var r = 0; r < e.length; r++) {\n        var n = [];\n        se(e[r], n, o, i), t.push(n);\n      }\n    }\n    function le(e) {\n      return e / 360 + .5;\n    }\n    function ce(e) {\n      var t = Math.sin(e * Math.PI / 180),\n        o = .5 - .25 * Math.log((1 + t) / (1 - t)) / Math.PI;\n      return o < 0 ? 0 : o > 1 ? 1 : o;\n    }\n    function ue(e, t, o, i, r, n, s, a) {\n      if (i /= t, n >= (o /= t) && s < i) return e;\n      if (s < o || n >= i) return null;\n      for (var l = [], c = 0; c < e.length; c++) {\n        var u = e[c],\n          h = u.geometry,\n          p = u.type,\n          f = 0 === r ? u.minX : u.minY,\n          d = 0 === r ? u.maxX : u.maxY;\n        if (f >= o && d < i) l.push(u);else if (!(d < o || f >= i)) {\n          var g = [];\n          if (\"Point\" === p || \"MultiPoint\" === p) he(h, g, o, i, r);else if (\"LineString\" === p) pe(h, g, o, i, r, !1, a.lineMetrics);else if (\"MultiLineString\" === p) de(h, g, o, i, r, !1);else if (\"Polygon\" === p) de(h, g, o, i, r, !0);else if (\"MultiPolygon\" === p) for (var m = 0; m < h.length; m++) {\n            var y = [];\n            de(h[m], y, o, i, r, !0), y.length && g.push(y);\n          }\n          if (g.length) {\n            if (a.lineMetrics && \"LineString\" === p) {\n              for (m = 0; m < g.length; m++) l.push(oe(u.id, p, g[m], u.tags));\n              continue;\n            }\n            \"LineString\" !== p && \"MultiLineString\" !== p || (1 === g.length ? (p = \"LineString\", g = g[0]) : p = \"MultiLineString\"), \"Point\" !== p && \"MultiPoint\" !== p || (p = 3 === g.length ? \"Point\" : \"MultiPoint\"), l.push(oe(u.id, p, g, u.tags));\n          }\n        }\n      }\n      return l.length ? l : null;\n    }\n    function he(e, t, o, i, r) {\n      for (var n = 0; n < e.length; n += 3) {\n        var s = e[n + r];\n        s >= o && s <= i && (t.push(e[n]), t.push(e[n + 1]), t.push(e[n + 2]));\n      }\n    }\n    function pe(e, t, o, i, r, n, s) {\n      for (var a, l, c = fe(e), u = 0 === r ? me : ye, h = e.start, p = 0; p < e.length - 3; p += 3) {\n        var f = e[p],\n          d = e[p + 1],\n          g = e[p + 2],\n          m = e[p + 3],\n          y = e[p + 4],\n          v = 0 === r ? f : d,\n          x = 0 === r ? m : y,\n          w = !1;\n        s && (a = Math.sqrt(Math.pow(f - m, 2) + Math.pow(d - y, 2))), v < o ? x > o && (l = u(c, f, d, m, y, o), s && (c.start = h + a * l)) : v > i ? x < i && (l = u(c, f, d, m, y, i), s && (c.start = h + a * l)) : ge(c, f, d, g), x < o && v >= o && (l = u(c, f, d, m, y, o), w = !0), x > i && v <= i && (l = u(c, f, d, m, y, i), w = !0), !n && w && (s && (c.end = h + a * l), t.push(c), c = fe(e)), s && (h += a);\n      }\n      var S = e.length - 3;\n      f = e[S], d = e[S + 1], g = e[S + 2], (v = 0 === r ? f : d) >= o && v <= i && ge(c, f, d, g), S = c.length - 3, n && S >= 3 && (c[S] !== c[0] || c[S + 1] !== c[1]) && ge(c, c[0], c[1], c[2]), c.length && t.push(c);\n    }\n    function fe(e) {\n      var t = [];\n      return t.size = e.size, t.start = e.start, t.end = e.end, t;\n    }\n    function de(e, t, o, i, r, n) {\n      for (var s = 0; s < e.length; s++) pe(e[s], t, o, i, r, n, !1);\n    }\n    function ge(e, t, o, i) {\n      e.push(t), e.push(o), e.push(i);\n    }\n    function me(e, t, o, i, r, n) {\n      var s = (n - t) / (i - t);\n      return e.push(n), e.push(o + (r - o) * s), e.push(1), s;\n    }\n    function ye(e, t, o, i, r, n) {\n      var s = (n - o) / (r - o);\n      return e.push(t + (i - t) * s), e.push(n), e.push(1), s;\n    }\n    function ve(e, t) {\n      for (var o = [], i = 0; i < e.length; i++) {\n        var r,\n          n = e[i],\n          s = n.type;\n        if (\"Point\" === s || \"MultiPoint\" === s || \"LineString\" === s) r = xe(n.geometry, t);else if (\"MultiLineString\" === s || \"Polygon\" === s) {\n          r = [];\n          for (var a = 0; a < n.geometry.length; a++) r.push(xe(n.geometry[a], t));\n        } else if (\"MultiPolygon\" === s) for (r = [], a = 0; a < n.geometry.length; a++) {\n          for (var l = [], c = 0; c < n.geometry[a].length; c++) l.push(xe(n.geometry[a][c], t));\n          r.push(l);\n        }\n        o.push(oe(n.id, s, r, n.tags));\n      }\n      return o;\n    }\n    function xe(e, t) {\n      var o = [];\n      o.size = e.size, void 0 !== e.start && (o.start = e.start, o.end = e.end);\n      for (var i = 0; i < e.length; i += 3) o.push(e[i] + t, e[i + 1], e[i + 2]);\n      return o;\n    }\n    function we(e, t) {\n      if (e.transformed) return e;\n      var o,\n        i,\n        r,\n        n = 1 << e.z,\n        s = e.x,\n        a = e.y;\n      for (o = 0; o < e.features.length; o++) {\n        var l = e.features[o],\n          c = l.geometry,\n          u = l.type;\n        if (l.geometry = [], 1 === u) for (i = 0; i < c.length; i += 2) l.geometry.push(Se(c[i], c[i + 1], t, n, s, a));else for (i = 0; i < c.length; i++) {\n          var h = [];\n          for (r = 0; r < c[i].length; r += 2) h.push(Se(c[i][r], c[i][r + 1], t, n, s, a));\n          l.geometry.push(h);\n        }\n      }\n      return e.transformed = !0, e;\n    }\n    function Se(e, t, o, i, r, n) {\n      return [Math.round(o * (e * i - r)), Math.round(o * (t * i - n))];\n    }\n    function Me(e, t, o, i, r) {\n      for (var n = t === r.maxZoom ? 0 : r.tolerance / ((1 << t) * r.extent), s = {\n          features: [],\n          numPoints: 0,\n          numSimplified: 0,\n          numFeatures: 0,\n          source: null,\n          x: o,\n          y: i,\n          z: t,\n          transformed: !1,\n          minX: 2,\n          minY: 1,\n          maxX: -1,\n          maxY: 0\n        }, a = 0; a < e.length; a++) {\n        s.numFeatures++, Ie(s, e[a], n, r);\n        var l = e[a].minX,\n          c = e[a].minY,\n          u = e[a].maxX,\n          h = e[a].maxY;\n        l < s.minX && (s.minX = l), c < s.minY && (s.minY = c), u > s.maxX && (s.maxX = u), h > s.maxY && (s.maxY = h);\n      }\n      return s;\n    }\n    function Ie(e, t, o, i) {\n      var r = t.geometry,\n        n = t.type,\n        s = [];\n      if (\"Point\" === n || \"MultiPoint\" === n) for (var a = 0; a < r.length; a += 3) s.push(r[a]), s.push(r[a + 1]), e.numPoints++, e.numSimplified++;else if (\"LineString\" === n) be(s, r, e, o, !1, !1);else if (\"MultiLineString\" === n || \"Polygon\" === n) for (a = 0; a < r.length; a++) be(s, r[a], e, o, \"Polygon\" === n, 0 === a);else if (\"MultiPolygon\" === n) for (var l = 0; l < r.length; l++) {\n        var c = r[l];\n        for (a = 0; a < c.length; a++) be(s, c[a], e, o, !0, 0 === a);\n      }\n      if (s.length) {\n        var u = t.tags || null;\n        if (\"LineString\" === n && i.lineMetrics) {\n          for (var h in u = {}, t.tags) u[h] = t.tags[h];\n          u.mapbox_clip_start = r.start / r.size, u.mapbox_clip_end = r.end / r.size;\n        }\n        var p = {\n          geometry: s,\n          type: \"Polygon\" === n || \"MultiPolygon\" === n ? 3 : \"LineString\" === n || \"MultiLineString\" === n ? 2 : 1,\n          tags: u\n        };\n        null !== t.id && (p.id = t.id), e.features.push(p);\n      }\n    }\n    function be(e, t, o, i, r, n) {\n      var s = i * i;\n      if (i > 0 && t.size < (r ? s : i)) o.numPoints += t.length / 3;else {\n        for (var a = [], l = 0; l < t.length; l += 3) (0 === i || t[l + 2] > s) && (o.numSimplified++, a.push(t[l]), a.push(t[l + 1])), o.numPoints++;\n        r && function (e, t) {\n          for (var o = 0, i = 0, r = e.length, n = r - 2; i < r; n = i, i += 2) o += (e[i] - e[n]) * (e[i + 1] + e[n + 1]);\n          if (o > 0 === t) for (i = 0, r = e.length; i < r / 2; i += 2) {\n            var s = e[i],\n              a = e[i + 1];\n            e[i] = e[r - 2 - i], e[i + 1] = e[r - 1 - i], e[r - 2 - i] = s, e[r - 1 - i] = a;\n          }\n        }(a, n), e.push(a);\n      }\n    }\n    function ke(e, t) {\n      var o = (t = this.options = function (e, t) {\n        for (var o in t) e[o] = t[o];\n        return e;\n      }(Object.create(this.options), t)).debug;\n      if (o && console.time(\"preprocess data\"), t.maxZoom < 0 || t.maxZoom > 24) throw new Error(\"maxZoom should be in the 0-24 range\");\n      if (t.promoteId && t.generateId) throw new Error(\"promoteId and generateId cannot be used together.\");\n      var i = function (e, t) {\n        var o = [];\n        if (\"FeatureCollection\" === e.type) for (var i = 0; i < e.features.length; i++) re(o, e.features[i], t, i);else re(o, \"Feature\" === e.type ? e : {\n          geometry: e\n        }, t);\n        return o;\n      }(e, t);\n      this.tiles = {}, this.tileCoords = [], o && (console.timeEnd(\"preprocess data\"), console.log(\"index: maxZoom: %d, maxPoints: %d\", t.indexMaxZoom, t.indexMaxPoints), console.time(\"generate tiles\"), this.stats = {}, this.total = 0), i = function (e, t) {\n        var o = t.buffer / t.extent,\n          i = e,\n          r = ue(e, 1, -1 - o, o, 0, -1, 2, t),\n          n = ue(e, 1, 1 - o, 2 + o, 0, -1, 2, t);\n        return (r || n) && (i = ue(e, 1, -o, 1 + o, 0, -1, 2, t) || [], r && (i = ve(r, 1).concat(i)), n && (i = i.concat(ve(n, -1)))), i;\n      }(i, t), i.length && this.splitTile(i, 0, 0, 0), o && (i.length && console.log(\"features: %d, points: %d\", this.tiles[0].numFeatures, this.tiles[0].numPoints), console.timeEnd(\"generate tiles\"), console.log(\"tiles generated:\", this.total, JSON.stringify(this.stats)));\n    }\n    function Pe(e, t, o) {\n      return 32 * ((1 << e) * o + t) + e;\n    }\n    function Te(e, t) {\n      var o = e.tileID.canonical;\n      if (!this._geoJSONIndex) return t(null, null);\n      var i = this._geoJSONIndex.getTile(o.z, o.x, o.y);\n      if (!i) return t(null, null);\n      var r = new g(i.features);\n      var n = m.exports(r);\n      0 === n.byteOffset && n.byteLength === n.buffer.byteLength || (n = new Uint8Array(n)), t(null, {\n        vectorTile: r,\n        rawData: n.buffer\n      });\n    }\n    ke.prototype.options = {\n      maxZoom: 14,\n      indexMaxZoom: 5,\n      indexMaxPoints: 1e5,\n      tolerance: 3,\n      extent: 4096,\n      buffer: 64,\n      lineMetrics: !1,\n      promoteId: null,\n      generateId: !1,\n      debug: 0\n    }, ke.prototype.splitTile = function (e, t, o, i, r, n, s) {\n      for (var a = [e, t, o, i], l = this.options, c = l.debug; a.length;) {\n        i = a.pop(), o = a.pop(), t = a.pop(), e = a.pop();\n        var u = 1 << t,\n          h = Pe(t, o, i),\n          p = this.tiles[h];\n        if (!p && (c > 1 && console.time(\"creation\"), p = this.tiles[h] = Me(e, t, o, i, l), this.tileCoords.push({\n          z: t,\n          x: o,\n          y: i\n        }), c)) {\n          c > 1 && (console.log(\"tile z%d-%d-%d (features: %d, points: %d, simplified: %d)\", t, o, i, p.numFeatures, p.numPoints, p.numSimplified), console.timeEnd(\"creation\"));\n          var f = \"z\" + t;\n          this.stats[f] = (this.stats[f] || 0) + 1, this.total++;\n        }\n        if (p.source = e, r) {\n          if (t === l.maxZoom || t === r) continue;\n          var d = 1 << r - t;\n          if (o !== Math.floor(n / d) || i !== Math.floor(s / d)) continue;\n        } else if (t === l.indexMaxZoom || p.numPoints <= l.indexMaxPoints) continue;\n        if (p.source = null, 0 !== e.length) {\n          c > 1 && console.time(\"clipping\");\n          var g,\n            m,\n            y,\n            v,\n            x,\n            w,\n            S = .5 * l.buffer / l.extent,\n            M = .5 - S,\n            I = .5 + S,\n            b = 1 + S;\n          g = m = y = v = null, x = ue(e, u, o - S, o + I, 0, p.minX, p.maxX, l), w = ue(e, u, o + M, o + b, 0, p.minX, p.maxX, l), e = null, x && (g = ue(x, u, i - S, i + I, 1, p.minY, p.maxY, l), m = ue(x, u, i + M, i + b, 1, p.minY, p.maxY, l), x = null), w && (y = ue(w, u, i - S, i + I, 1, p.minY, p.maxY, l), v = ue(w, u, i + M, i + b, 1, p.minY, p.maxY, l), w = null), c > 1 && console.timeEnd(\"clipping\"), a.push(g || [], t + 1, 2 * o, 2 * i), a.push(m || [], t + 1, 2 * o, 2 * i + 1), a.push(y || [], t + 1, 2 * o + 1, 2 * i), a.push(v || [], t + 1, 2 * o + 1, 2 * i + 1);\n        }\n      }\n    }, ke.prototype.getTile = function (e, t, o) {\n      var i = this.options,\n        r = i.extent,\n        n = i.debug;\n      if (e < 0 || e > 24) return null;\n      var s = 1 << e,\n        a = Pe(e, t = (t % s + s) % s, o);\n      if (this.tiles[a]) return we(this.tiles[a], r);\n      n > 1 && console.log(\"drilling down to z%d-%d-%d\", e, t, o);\n      for (var l, c = e, u = t, h = o; !l && c > 0;) c--, u = Math.floor(u / 2), h = Math.floor(h / 2), l = this.tiles[Pe(c, u, h)];\n      return l && l.source ? (n > 1 && console.log(\"found parent tile z%d-%d-%d\", c, u, h), n > 1 && console.time(\"drilling down\"), this.splitTile(l.source, c, u, h, e, t, o), n > 1 && console.timeEnd(\"drilling down\"), this.tiles[a] ? we(this.tiles[a], r) : null) : null;\n    };\n    var Ce = /*#__PURE__*/function (_l36) {\n      _inherits(Ce, _l36);\n      var _super76 = _createSuper(Ce);\n      function Ce(e, t, o, i) {\n        var _this27;\n        _classCallCheck(this, Ce);\n        _this27 = _super76.call(this, e, t, o, Te), i && (_this27.loadGeoJSON = i);\n        return _this27;\n      }\n      _createClass(Ce, [{\n        key: \"loadData\",\n        value: function loadData(t, o) {\n          var _this28 = this;\n          var i;\n          null === (i = this._pendingRequest) || void 0 === i || i.cancel(), this._pendingCallback && this._pendingCallback(null, {\n            abandoned: !0\n          });\n          var r = !!(t && t.request && t.request.collectResourceTiming) && new e.RequestPerformance(t.request);\n          this._pendingCallback = o, this._pendingRequest = this.loadGeoJSON(t, function (i, n) {\n            if (delete _this28._pendingCallback, delete _this28._pendingRequest, i || !n) return o(i);\n            if (\"object\" != typeof n) return o(new Error(\"Input data given to '\".concat(t.source, \"' is not a valid GeoJSON object.\")));\n            {\n              u(n, !0);\n              try {\n                if (t.filter) {\n                  var _o49 = e.createExpression(t.filter, {\n                    type: \"boolean\",\n                    \"property-type\": \"data-driven\",\n                    overridable: !1,\n                    transition: !1\n                  });\n                  if (\"error\" === _o49.result) throw new Error(_o49.value.map(function (e) {\n                    return \"\".concat(e.key, \": \").concat(e.message);\n                  }).join(\", \"));\n                  var _i118 = n.features.filter(function (e) {\n                    return _o49.value.evaluate({\n                      zoom: 0\n                    }, e);\n                  });\n                  n = {\n                    type: \"FeatureCollection\",\n                    features: _i118\n                  };\n                }\n                _this28._geoJSONIndex = t.cluster ? new Y(function (_ref120) {\n                  var t = _ref120.superclusterOptions,\n                    o = _ref120.clusterProperties;\n                  if (!o || !t) return t;\n                  var i = {},\n                    r = {},\n                    n = {\n                      accumulated: null,\n                      zoom: 0\n                    },\n                    s = {\n                      properties: null\n                    },\n                    a = Object.keys(o);\n                  for (var _i119 = 0, _a79 = a; _i119 < _a79.length; _i119++) {\n                    var _t170 = _a79[_i119];\n                    var _o$_t = _slicedToArray(o[_t170], 2),\n                      _n115 = _o$_t[0],\n                      _s73 = _o$_t[1],\n                      _a80 = e.createExpression(_s73),\n                      _l37 = e.createExpression(\"string\" == typeof _n115 ? [_n115, [\"accumulated\"], [\"get\", _t170]] : _n115);\n                    i[_t170] = _a80.value, r[_t170] = _l37.value;\n                  }\n                  return t.map = function (e) {\n                    s.properties = e;\n                    var t = {};\n                    for (var _i120 = 0, _a81 = a; _i120 < _a81.length; _i120++) {\n                      var _e172 = _a81[_i120];\n                      t[_e172] = i[_e172].evaluate(n, s);\n                    }\n                    return t;\n                  }, t.reduce = function (e, t) {\n                    s.properties = t;\n                    for (var _i121 = 0, _a82 = a; _i121 < _a82.length; _i121++) {\n                      var _t171 = _a82[_i121];\n                      n.accumulated = e[_t171], e[_t171] = r[_t171].evaluate(n, s);\n                    }\n                  }, t;\n                }(t)).load(n.features) : function (e, t) {\n                  return new ke(e, t);\n                }(n, t.geojsonVtOptions);\n              } catch (i) {\n                return o(i);\n              }\n              _this28.loaded = {};\n              var _s74 = {};\n              if (r) {\n                var _e173 = r.finish();\n                _e173 && (_s74.resourceTiming = {}, _s74.resourceTiming[t.source] = JSON.parse(JSON.stringify(_e173)));\n              }\n              o(null, _s74);\n            }\n          });\n        }\n      }, {\n        key: \"reloadTile\",\n        value: function reloadTile(e, t) {\n          var o = this.loaded;\n          return o && o[e.uid] ? _get(_getPrototypeOf(Ce.prototype), \"reloadTile\", this).call(this, e, t) : this.loadTile(e, t);\n        }\n      }, {\n        key: \"loadGeoJSON\",\n        value: function loadGeoJSON(t, o) {\n          if (t.request) return e.getJSON(t.request, o);\n          if (\"string\" == typeof t.data) try {\n            o(null, JSON.parse(t.data));\n          } catch (e) {\n            o(new Error(\"Input data given to '\".concat(t.source, \"' is not a valid GeoJSON object.\")));\n          } else o(new Error(\"Input data given to '\".concat(t.source, \"' is not a valid GeoJSON object.\")));\n          return {\n            cancel: function cancel() {}\n          };\n        }\n      }, {\n        key: \"removeSource\",\n        value: function removeSource(e, t) {\n          this._pendingCallback && this._pendingCallback(null, {\n            abandoned: !0\n          }), t();\n        }\n      }, {\n        key: \"getClusterExpansionZoom\",\n        value: function getClusterExpansionZoom(e, t) {\n          try {\n            t(null, this._geoJSONIndex.getClusterExpansionZoom(e.clusterId));\n          } catch (e) {\n            t(e);\n          }\n        }\n      }, {\n        key: \"getClusterChildren\",\n        value: function getClusterChildren(e, t) {\n          try {\n            t(null, this._geoJSONIndex.getChildren(e.clusterId));\n          } catch (e) {\n            t(e);\n          }\n        }\n      }, {\n        key: \"getClusterLeaves\",\n        value: function getClusterLeaves(e, t) {\n          try {\n            t(null, this._geoJSONIndex.getLeaves(e.clusterId, e.limit, e.offset));\n          } catch (e) {\n            t(e);\n          }\n        }\n      }]);\n      return Ce;\n    }(l);\n    var _e = /*#__PURE__*/function () {\n      function _e(t) {\n        var _this29 = this;\n        _classCallCheck(this, _e);\n        this.self = t, this.actor = new e.Actor(t, this), this.layerIndexes = {}, this.availableImages = {}, this.workerSourceTypes = {\n          vector: l,\n          geojson: Ce\n        }, this.workerSources = {}, this.demWorkerSources = {}, this.self.registerWorkerSource = function (e, t) {\n          if (_this29.workerSourceTypes[e]) throw new Error(\"Worker source with name \\\"\".concat(e, \"\\\" already registered.\"));\n          _this29.workerSourceTypes[e] = t;\n        }, this.self.registerRTLTextPlugin = function (t) {\n          if (e.plugin.isParsed()) throw new Error(\"RTL text plugin already registered.\");\n          e.plugin.applyArabicShaping = t.applyArabicShaping, e.plugin.processBidirectionalText = t.processBidirectionalText, e.plugin.processStyledBidirectionalText = t.processStyledBidirectionalText;\n        };\n      }\n      _createClass(_e, [{\n        key: \"setReferrer\",\n        value: function setReferrer(e, t) {\n          this.referrer = t;\n        }\n      }, {\n        key: \"setImages\",\n        value: function setImages(e, t, o) {\n          this.availableImages[e] = t;\n          for (var _o50 in this.workerSources[e]) {\n            var _i122 = this.workerSources[e][_o50];\n            for (var _e174 in _i122) _i122[_e174].availableImages = t;\n          }\n          o();\n        }\n      }, {\n        key: \"setLayers\",\n        value: function setLayers(e, t, o) {\n          this.getLayerIndex(e).replace(t), o();\n        }\n      }, {\n        key: \"updateLayers\",\n        value: function updateLayers(e, t, o) {\n          this.getLayerIndex(e).update(t.layers, t.removedIds), o();\n        }\n      }, {\n        key: \"loadTile\",\n        value: function loadTile(e, t, o) {\n          this.getWorkerSource(e, t.type, t.source).loadTile(t, o);\n        }\n      }, {\n        key: \"loadDEMTile\",\n        value: function loadDEMTile(e, t, o) {\n          this.getDEMWorkerSource(e, t.source).loadTile(t, o);\n        }\n      }, {\n        key: \"reloadTile\",\n        value: function reloadTile(e, t, o) {\n          this.getWorkerSource(e, t.type, t.source).reloadTile(t, o);\n        }\n      }, {\n        key: \"abortTile\",\n        value: function abortTile(e, t, o) {\n          this.getWorkerSource(e, t.type, t.source).abortTile(t, o);\n        }\n      }, {\n        key: \"removeTile\",\n        value: function removeTile(e, t, o) {\n          this.getWorkerSource(e, t.type, t.source).removeTile(t, o);\n        }\n      }, {\n        key: \"removeDEMTile\",\n        value: function removeDEMTile(e, t) {\n          this.getDEMWorkerSource(e, t.source).removeTile(t);\n        }\n      }, {\n        key: \"removeSource\",\n        value: function removeSource(e, t, o) {\n          if (!this.workerSources[e] || !this.workerSources[e][t.type] || !this.workerSources[e][t.type][t.source]) return;\n          var i = this.workerSources[e][t.type][t.source];\n          delete this.workerSources[e][t.type][t.source], void 0 !== i.removeSource ? i.removeSource(t, o) : o();\n        }\n      }, {\n        key: \"loadWorkerSource\",\n        value: function loadWorkerSource(e, t, o) {\n          try {\n            this.self.importScripts(t.url), o();\n          } catch (e) {\n            o(e.toString());\n          }\n        }\n      }, {\n        key: \"syncRTLPluginState\",\n        value: function syncRTLPluginState(t, o, i) {\n          try {\n            e.plugin.setState(o);\n            var _t172 = e.plugin.getPluginURL();\n            if (e.plugin.isLoaded() && !e.plugin.isParsed() && null != _t172) {\n              this.self.importScripts(_t172);\n              var _o51 = e.plugin.isParsed();\n              i(_o51 ? void 0 : new Error(\"RTL Text Plugin failed to import scripts from \".concat(_t172)), _o51);\n            }\n          } catch (e) {\n            i(e.toString());\n          }\n        }\n      }, {\n        key: \"getAvailableImages\",\n        value: function getAvailableImages(e) {\n          var t = this.availableImages[e];\n          return t || (t = []), t;\n        }\n      }, {\n        key: \"getLayerIndex\",\n        value: function getLayerIndex(e) {\n          var t = this.layerIndexes[e];\n          return t || (t = this.layerIndexes[e] = new i()), t;\n        }\n      }, {\n        key: \"getWorkerSource\",\n        value: function getWorkerSource(e, t, o) {\n          var _this30 = this;\n          if (this.workerSources[e] || (this.workerSources[e] = {}), this.workerSources[e][t] || (this.workerSources[e][t] = {}), !this.workerSources[e][t][o]) {\n            var _i123 = {\n              send: function send(t, o, i) {\n                _this30.actor.send(t, o, i, e);\n              }\n            };\n            this.workerSources[e][t][o] = new this.workerSourceTypes[t](_i123, this.getLayerIndex(e), this.getAvailableImages(e));\n          }\n          return this.workerSources[e][t][o];\n        }\n      }, {\n        key: \"getDEMWorkerSource\",\n        value: function getDEMWorkerSource(e, t) {\n          return this.demWorkerSources[e] || (this.demWorkerSources[e] = {}), this.demWorkerSources[e][t] || (this.demWorkerSources[e][t] = new c()), this.demWorkerSources[e][t];\n        }\n      }, {\n        key: \"enforceCacheSizeLimit\",\n        value: function enforceCacheSizeLimit(t, o) {\n          e.enforceCacheSizeLimit(o);\n        }\n      }]);\n      return _e;\n    }();\n    return e.isWorker() && (self.worker = new _e(self)), _e;\n  });\n  define([\"./shared\"], function (t) {\n    \"use strict\";\n\n    var e = i;\n    function i(t) {\n      return !function (t) {\n        return \"undefined\" == typeof window || \"undefined\" == typeof document ? \"not a browser\" : Array.prototype && Array.prototype.every && Array.prototype.filter && Array.prototype.forEach && Array.prototype.indexOf && Array.prototype.lastIndexOf && Array.prototype.map && Array.prototype.some && Array.prototype.reduce && Array.prototype.reduceRight && Array.isArray ? Function.prototype && Function.prototype.bind ? Object.keys && Object.create && Object.getPrototypeOf && Object.getOwnPropertyNames && Object.isSealed && Object.isFrozen && Object.isExtensible && Object.getOwnPropertyDescriptor && Object.defineProperty && Object.defineProperties && Object.seal && Object.freeze && Object.preventExtensions ? \"JSON\" in window && \"parse\" in JSON && \"stringify\" in JSON ? function () {\n          if (!(\"Worker\" in window && \"Blob\" in window && \"URL\" in window)) return !1;\n          var t,\n            e,\n            i = new Blob([\"\"], {\n              type: \"text/javascript\"\n            }),\n            o = URL.createObjectURL(i);\n          try {\n            e = new Worker(o), t = !0;\n          } catch (e) {\n            t = !1;\n          }\n          return e && e.terminate(), URL.revokeObjectURL(o), t;\n        }() ? \"Uint8ClampedArray\" in window ? ArrayBuffer.isView ? function () {\n          var t = document.createElement(\"canvas\");\n          t.width = t.height = 1;\n          var e = t.getContext(\"2d\");\n          if (!e) return !1;\n          var i = e.getImageData(0, 0, 1, 1);\n          return i && i.width === t.width;\n        }() ? (void 0 === o[e = t && t.failIfMajorPerformanceCaveat] && (o[e] = function (t) {\n          var e,\n            o = function (t) {\n              var e = document.createElement(\"canvas\"),\n                o = Object.create(i.webGLContextAttributes);\n              return o.failIfMajorPerformanceCaveat = t, e.getContext(\"webgl\", o) || e.getContext(\"experimental-webgl\", o);\n            }(t);\n          if (!o) return !1;\n          try {\n            e = o.createShader(o.VERTEX_SHADER);\n          } catch (t) {\n            return !1;\n          }\n          return !(!e || o.isContextLost()) && (o.shaderSource(e, \"void main() {}\"), o.compileShader(e), !0 === o.getShaderParameter(e, o.COMPILE_STATUS));\n        }(e)), o[e] ? document.documentMode ? \"insufficient ECMAScript 6 support\" : void 0 : \"insufficient WebGL support\") : \"insufficient Canvas/getImageData support\" : \"insufficient ArrayBuffer support\" : \"insufficient Uint8ClampedArray support\" : \"insufficient worker support\" : \"insufficient JSON support\" : \"insufficient Object support\" : \"insufficient Function support\" : \"insufficent Array support\";\n        var e;\n      }(t);\n    }\n    var o = {};\n    function a(t, e) {\n      if (Array.isArray(t)) {\n        if (!Array.isArray(e) || t.length !== e.length) return !1;\n        for (var _i124 = 0; _i124 < t.length; _i124++) if (!a(t[_i124], e[_i124])) return !1;\n        return !0;\n      }\n      if (\"object\" == typeof t && null !== t && null !== e) {\n        if (\"object\" != typeof e) return !1;\n        if (Object.keys(t).length !== Object.keys(e).length) return !1;\n        for (var _i125 in t) if (!a(t[_i125], e[_i125])) return !1;\n        return !0;\n      }\n      return t === e;\n    }\n    i.webGLContextAttributes = {\n      antialias: !1,\n      alpha: !0,\n      stencil: !0,\n      depth: !0\n    };\n    var r = /*#__PURE__*/function () {\n      function r() {\n        _classCallCheck(this, r);\n      }\n      _createClass(r, null, [{\n        key: \"testProp\",\n        value: function testProp(t) {\n          if (!r.docStyle) return t[0];\n          for (var _e175 = 0; _e175 < t.length; _e175++) if (t[_e175] in r.docStyle) return t[_e175];\n          return t[0];\n        }\n      }, {\n        key: \"create\",\n        value: function create(t, e, i) {\n          var o = window.document.createElement(t);\n          return void 0 !== e && (o.className = e), i && i.appendChild(o), o;\n        }\n      }, {\n        key: \"createNS\",\n        value: function createNS(t, e) {\n          return window.document.createElementNS(t, e);\n        }\n      }, {\n        key: \"disableDrag\",\n        value: function disableDrag() {\n          r.docStyle && r.selectProp && (r.userSelect = r.docStyle[r.selectProp], r.docStyle[r.selectProp] = \"none\");\n        }\n      }, {\n        key: \"enableDrag\",\n        value: function enableDrag() {\n          r.docStyle && r.selectProp && (r.docStyle[r.selectProp] = r.userSelect);\n        }\n      }, {\n        key: \"setTransform\",\n        value: function setTransform(t, e) {\n          t.style[r.transformProp] = e;\n        }\n      }, {\n        key: \"addEventListener\",\n        value: function addEventListener(t, e, i) {\n          var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n          t.addEventListener(e, i, \"passive\" in o ? o : o.capture);\n        }\n      }, {\n        key: \"removeEventListener\",\n        value: function removeEventListener(t, e, i) {\n          var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n          t.removeEventListener(e, i, \"passive\" in o ? o : o.capture);\n        }\n      }, {\n        key: \"suppressClickInternal\",\n        value: function suppressClickInternal(t) {\n          t.preventDefault(), t.stopPropagation(), window.removeEventListener(\"click\", r.suppressClickInternal, !0);\n        }\n      }, {\n        key: \"suppressClick\",\n        value: function suppressClick() {\n          window.addEventListener(\"click\", r.suppressClickInternal, !0), window.setTimeout(function () {\n            window.removeEventListener(\"click\", r.suppressClickInternal, !0);\n          }, 0);\n        }\n      }, {\n        key: \"mousePos\",\n        value: function mousePos(e, i) {\n          var o = e.getBoundingClientRect();\n          return new t.pointGeometry(i.clientX - o.left - e.clientLeft, i.clientY - o.top - e.clientTop);\n        }\n      }, {\n        key: \"touchPos\",\n        value: function touchPos(e, i) {\n          var o = e.getBoundingClientRect(),\n            a = [];\n          for (var _r163 = 0; _r163 < i.length; _r163++) a.push(new t.pointGeometry(i[_r163].clientX - o.left - e.clientLeft, i[_r163].clientY - o.top - e.clientTop));\n          return a;\n        }\n      }, {\n        key: \"mouseButton\",\n        value: function mouseButton(t) {\n          return t.button;\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(t) {\n          t.parentNode && t.parentNode.removeChild(t);\n        }\n      }]);\n      return r;\n    }();\n    r.docStyle = \"undefined\" != typeof window && window.document && window.document.documentElement.style, r.selectProp = r.testProp([\"userSelect\", \"MozUserSelect\", \"WebkitUserSelect\", \"msUserSelect\"]), r.transformProp = r.testProp([\"transform\", \"WebkitTransform\"]);\n    var s = /*#__PURE__*/function () {\n      function s(t) {\n        _classCallCheck(this, s);\n        this._transformRequestFn = t;\n      }\n      _createClass(s, [{\n        key: \"transformRequest\",\n        value: function transformRequest(t, e) {\n          return this._transformRequestFn && this._transformRequestFn(t, e) || {\n            url: t\n          };\n        }\n      }, {\n        key: \"normalizeSpriteURL\",\n        value: function normalizeSpriteURL(t, e, i) {\n          var o = function (t) {\n            var e = t.match(n);\n            if (!e) throw new Error(\"Unable to parse URL \\\"\".concat(t, \"\\\"\"));\n            return {\n              protocol: e[1],\n              authority: e[2],\n              path: e[3] || \"/\",\n              params: e[4] ? e[4].split(\"&\") : []\n            };\n          }(t);\n          return o.path += \"\".concat(e).concat(i), function (t) {\n            var e = t.params.length ? \"?\".concat(t.params.join(\"&\")) : \"\";\n            return \"\".concat(t.protocol, \"://\").concat(t.authority).concat(t.path).concat(e);\n          }(o);\n        }\n      }, {\n        key: \"setTransformRequest\",\n        value: function setTransformRequest(t) {\n          this._transformRequestFn = t;\n        }\n      }]);\n      return s;\n    }();\n    var n = /^(\\w+):\\/\\/([^/?]*)(\\/[^?]+)?\\??(.+)?/;\n    var l = /*#__PURE__*/function () {\n      function l(t, e, i, o) {\n        _classCallCheck(this, l);\n        this.context = t, this.format = i, this.texture = t.gl.createTexture(), this.update(e, o);\n      }\n      _createClass(l, [{\n        key: \"update\",\n        value: function update(e, i, o) {\n          var a = e.width,\n            r = e.height,\n            s = !(this.size && this.size[0] === a && this.size[1] === r || o),\n            n = this.context,\n            _l38 = n.gl;\n          if (this.useMipmap = Boolean(i && i.useMipmap), _l38.bindTexture(_l38.TEXTURE_2D, this.texture), n.pixelStoreUnpackFlipY.set(!1), n.pixelStoreUnpack.set(1), n.pixelStoreUnpackPremultiplyAlpha.set(this.format === _l38.RGBA && (!i || !1 !== i.premultiply)), s) this.size = [a, r], e instanceof HTMLImageElement || e instanceof HTMLCanvasElement || e instanceof HTMLVideoElement || e instanceof ImageData || t.isImageBitmap(e) ? _l38.texImage2D(_l38.TEXTURE_2D, 0, this.format, this.format, _l38.UNSIGNED_BYTE, e) : _l38.texImage2D(_l38.TEXTURE_2D, 0, this.format, a, r, 0, this.format, _l38.UNSIGNED_BYTE, e.data);else {\n            var _ref121 = o || {\n                x: 0,\n                y: 0\n              },\n              _i126 = _ref121.x,\n              _s75 = _ref121.y;\n            e instanceof HTMLImageElement || e instanceof HTMLCanvasElement || e instanceof HTMLVideoElement || e instanceof ImageData || t.isImageBitmap(e) ? _l38.texSubImage2D(_l38.TEXTURE_2D, 0, _i126, _s75, _l38.RGBA, _l38.UNSIGNED_BYTE, e) : _l38.texSubImage2D(_l38.TEXTURE_2D, 0, _i126, _s75, a, r, _l38.RGBA, _l38.UNSIGNED_BYTE, e.data);\n          }\n          this.useMipmap && this.isSizePowerOfTwo() && _l38.generateMipmap(_l38.TEXTURE_2D);\n        }\n      }, {\n        key: \"bind\",\n        value: function bind(t, e, i) {\n          var o = this.context,\n            a = o.gl;\n          a.bindTexture(a.TEXTURE_2D, this.texture), i !== a.LINEAR_MIPMAP_NEAREST || this.isSizePowerOfTwo() || (i = a.LINEAR), t !== this.filter && (a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, t), a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, i || t), this.filter = t), e !== this.wrap && (a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_S, e), a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_T, e), this.wrap = e);\n        }\n      }, {\n        key: \"isSizePowerOfTwo\",\n        value: function isSizePowerOfTwo() {\n          return this.size[0] === this.size[1] && Math.log(this.size[0]) / Math.LN2 % 1 == 0;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          var t = this.context.gl;\n          t.deleteTexture(this.texture), this.texture = null;\n        }\n      }]);\n      return l;\n    }();\n    function c(t) {\n      var e = t.userImage;\n      return !!(e && e.render && e.render()) && (t.data.replace(new Uint8Array(e.data.buffer)), !0);\n    }\n    var h = /*#__PURE__*/function (_t$Evented) {\n      _inherits(h, _t$Evented);\n      var _super77 = _createSuper(h);\n      function h() {\n        var _this31;\n        _classCallCheck(this, h);\n        _this31 = _super77.call(this), _this31.images = {}, _this31.updatedImages = {}, _this31.callbackDispatchedThisFrame = {}, _this31.loaded = !1, _this31.requestors = [], _this31.patterns = {}, _this31.atlasImage = new t.RGBAImage({\n          width: 1,\n          height: 1\n        }), _this31.dirty = !0;\n        return _this31;\n      }\n      _createClass(h, [{\n        key: \"isLoaded\",\n        value: function isLoaded() {\n          return this.loaded;\n        }\n      }, {\n        key: \"setLoaded\",\n        value: function setLoaded(t) {\n          if (this.loaded !== t && (this.loaded = t, t)) {\n            var _iterator132 = _createForOfIteratorHelper(this.requestors),\n              _step132;\n            try {\n              for (_iterator132.s(); !(_step132 = _iterator132.n()).done;) {\n                var _step132$value = _step132.value,\n                  _t173 = _step132$value.ids,\n                  _e176 = _step132$value.callback;\n                this._notify(_t173, _e176);\n              }\n            } catch (err) {\n              _iterator132.e(err);\n            } finally {\n              _iterator132.f();\n            }\n            this.requestors = [];\n          }\n        }\n      }, {\n        key: \"getImage\",\n        value: function getImage(t) {\n          return this.images[t];\n        }\n      }, {\n        key: \"addImage\",\n        value: function addImage(t, e) {\n          if (this.images[t]) throw new Error(\"Image id \".concat(t, \" already exist, use updateImage instead\"));\n          this._validate(t, e) && (this.images[t] = e);\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate(e, i) {\n          var o = !0;\n          return this._validateStretch(i.stretchX, i.data && i.data.width) || (this.fire(new t.ErrorEvent(new Error(\"Image \\\"\".concat(e, \"\\\" has invalid \\\"stretchX\\\" value\")))), o = !1), this._validateStretch(i.stretchY, i.data && i.data.height) || (this.fire(new t.ErrorEvent(new Error(\"Image \\\"\".concat(e, \"\\\" has invalid \\\"stretchY\\\" value\")))), o = !1), this._validateContent(i.content, i) || (this.fire(new t.ErrorEvent(new Error(\"Image \\\"\".concat(e, \"\\\" has invalid \\\"content\\\" value\")))), o = !1), o;\n        }\n      }, {\n        key: \"_validateStretch\",\n        value: function _validateStretch(t, e) {\n          if (!t) return !0;\n          var i = 0;\n          var _iterator133 = _createForOfIteratorHelper(t),\n            _step133;\n          try {\n            for (_iterator133.s(); !(_step133 = _iterator133.n()).done;) {\n              var _o52 = _step133.value;\n              if (_o52[0] < i || _o52[1] < _o52[0] || e < _o52[1]) return !1;\n              i = _o52[1];\n            }\n          } catch (err) {\n            _iterator133.e(err);\n          } finally {\n            _iterator133.f();\n          }\n          return !0;\n        }\n      }, {\n        key: \"_validateContent\",\n        value: function _validateContent(t, e) {\n          return !(t && (4 !== t.length || t[0] < 0 || e.data.width < t[0] || t[1] < 0 || e.data.height < t[1] || t[2] < 0 || e.data.width < t[2] || t[3] < 0 || e.data.height < t[3] || t[2] < t[0] || t[3] < t[1]));\n        }\n      }, {\n        key: \"updateImage\",\n        value: function updateImage(t, e) {\n          var i = this.images[t];\n          if (i.data.width !== e.data.width || i.data.height !== e.data.height) throw new Error(\"size mismatch between old image (\".concat(i.data.width, \"x\").concat(i.data.height, \") and new image (\").concat(e.data.width, \"x\").concat(e.data.height, \").\"));\n          e.version = i.version + 1, this.images[t] = e, this.updatedImages[t] = !0;\n        }\n      }, {\n        key: \"removeImage\",\n        value: function removeImage(t) {\n          var e = this.images[t];\n          delete this.images[t], delete this.patterns[t], e.userImage && e.userImage.onRemove && e.userImage.onRemove();\n        }\n      }, {\n        key: \"listImages\",\n        value: function listImages() {\n          return Object.keys(this.images);\n        }\n      }, {\n        key: \"getImages\",\n        value: function getImages(t, e) {\n          var i = !0;\n          if (!this.isLoaded()) {\n            var _iterator134 = _createForOfIteratorHelper(t),\n              _step134;\n            try {\n              for (_iterator134.s(); !(_step134 = _iterator134.n()).done;) {\n                var _e177 = _step134.value;\n                this.images[_e177] || (i = !1);\n              }\n            } catch (err) {\n              _iterator134.e(err);\n            } finally {\n              _iterator134.f();\n            }\n          }\n          this.isLoaded() || i ? this._notify(t, e) : this.requestors.push({\n            ids: t,\n            callback: e\n          });\n        }\n      }, {\n        key: \"_notify\",\n        value: function _notify(e, i) {\n          var o = {};\n          var _iterator135 = _createForOfIteratorHelper(e),\n            _step135;\n          try {\n            for (_iterator135.s(); !(_step135 = _iterator135.n()).done;) {\n              var _i127 = _step135.value;\n              this.images[_i127] || this.fire(new t.Event(\"styleimagemissing\", {\n                id: _i127\n              }));\n              var _e178 = this.images[_i127];\n              _e178 ? o[_i127] = {\n                data: _e178.data.clone(),\n                pixelRatio: _e178.pixelRatio,\n                sdf: _e178.sdf,\n                version: _e178.version,\n                stretchX: _e178.stretchX,\n                stretchY: _e178.stretchY,\n                content: _e178.content,\n                hasRenderCallback: Boolean(_e178.userImage && _e178.userImage.render)\n              } : t.warnOnce(\"Image \\\"\".concat(_i127, \"\\\" could not be loaded. Please make sure you have added the image with map.addImage() or a \\\"sprite\\\" property in your style. You can provide missing images by listening for the \\\"styleimagemissing\\\" map event.\"));\n            }\n          } catch (err) {\n            _iterator135.e(err);\n          } finally {\n            _iterator135.f();\n          }\n          i(null, o);\n        }\n      }, {\n        key: \"getPixelSize\",\n        value: function getPixelSize() {\n          var _this$atlasImage = this.atlasImage,\n            t = _this$atlasImage.width,\n            e = _this$atlasImage.height;\n          return {\n            width: t,\n            height: e\n          };\n        }\n      }, {\n        key: \"getPattern\",\n        value: function getPattern(e) {\n          var i = this.patterns[e],\n            o = this.getImage(e);\n          if (!o) return null;\n          if (i && i.position.version === o.version) return i.position;\n          if (i) i.position.version = o.version;else {\n            var _i128 = {\n                w: o.data.width + 2,\n                h: o.data.height + 2,\n                x: 0,\n                y: 0\n              },\n              _a83 = new t.ImagePosition(_i128, o);\n            this.patterns[e] = {\n              bin: _i128,\n              position: _a83\n            };\n          }\n          return this._updatePatternAtlas(), this.patterns[e].position;\n        }\n      }, {\n        key: \"bind\",\n        value: function bind(t) {\n          var e = t.gl;\n          this.atlasTexture ? this.dirty && (this.atlasTexture.update(this.atlasImage), this.dirty = !1) : this.atlasTexture = new l(t, this.atlasImage, e.RGBA), this.atlasTexture.bind(e.LINEAR, e.CLAMP_TO_EDGE);\n        }\n      }, {\n        key: \"_updatePatternAtlas\",\n        value: function _updatePatternAtlas() {\n          var e = [];\n          for (var _t174 in this.patterns) e.push(this.patterns[_t174].bin);\n          var _t$potpack = t.potpack(e),\n            i = _t$potpack.w,\n            o = _t$potpack.h,\n            a = this.atlasImage;\n          a.resize({\n            width: i || 1,\n            height: o || 1\n          });\n          for (var _e179 in this.patterns) {\n            var _i129 = this.patterns[_e179].bin,\n              _o53 = _i129.x + 1,\n              _r164 = _i129.y + 1,\n              _s76 = this.images[_e179].data,\n              _n116 = _s76.width,\n              _l39 = _s76.height;\n            t.RGBAImage.copy(_s76, a, {\n              x: 0,\n              y: 0\n            }, {\n              x: _o53,\n              y: _r164\n            }, {\n              width: _n116,\n              height: _l39\n            }), t.RGBAImage.copy(_s76, a, {\n              x: 0,\n              y: _l39 - 1\n            }, {\n              x: _o53,\n              y: _r164 - 1\n            }, {\n              width: _n116,\n              height: 1\n            }), t.RGBAImage.copy(_s76, a, {\n              x: 0,\n              y: 0\n            }, {\n              x: _o53,\n              y: _r164 + _l39\n            }, {\n              width: _n116,\n              height: 1\n            }), t.RGBAImage.copy(_s76, a, {\n              x: _n116 - 1,\n              y: 0\n            }, {\n              x: _o53 - 1,\n              y: _r164\n            }, {\n              width: 1,\n              height: _l39\n            }), t.RGBAImage.copy(_s76, a, {\n              x: 0,\n              y: 0\n            }, {\n              x: _o53 + _n116,\n              y: _r164\n            }, {\n              width: 1,\n              height: _l39\n            });\n          }\n          this.dirty = !0;\n        }\n      }, {\n        key: \"beginFrame\",\n        value: function beginFrame() {\n          this.callbackDispatchedThisFrame = {};\n        }\n      }, {\n        key: \"dispatchRenderCallbacks\",\n        value: function dispatchRenderCallbacks(e) {\n          var _iterator136 = _createForOfIteratorHelper(e),\n            _step136;\n          try {\n            for (_iterator136.s(); !(_step136 = _iterator136.n()).done;) {\n              var _i130 = _step136.value;\n              if (this.callbackDispatchedThisFrame[_i130]) continue;\n              this.callbackDispatchedThisFrame[_i130] = !0;\n              var _e180 = this.images[_i130];\n              _e180 || t.warnOnce(\"Image with ID: \\\"\".concat(_i130, \"\\\" was not found\")), c(_e180) && this.updateImage(_i130, _e180);\n            }\n          } catch (err) {\n            _iterator136.e(err);\n          } finally {\n            _iterator136.f();\n          }\n        }\n      }]);\n      return h;\n    }(t.Evented);\n    var u = 1e20;\n    function d(t, e, i, o, a, r, s, n, l) {\n      for (var _c21 = e; _c21 < e + o; _c21++) m(t, i * r + _c21, r, a, s, n, l);\n      for (var _c22 = i; _c22 < i + a; _c22++) m(t, _c22 * r + e, 1, o, s, n, l);\n    }\n    function m(t, e, i, o, a, r, s) {\n      r[0] = 0, s[0] = -u, s[1] = u, a[0] = t[e];\n      for (var _n117 = 1, _l40 = 0, _c23 = 0; _n117 < o; _n117++) {\n        a[_n117] = t[e + _n117 * i];\n        var _o54 = _n117 * _n117;\n        do {\n          var _t175 = r[_l40];\n          _c23 = (a[_n117] - a[_t175] + _o54 - _t175 * _t175) / (_n117 - _t175) / 2;\n        } while (_c23 <= s[_l40] && --_l40 > -1);\n        _l40++, r[_l40] = _n117, s[_l40] = _c23, s[_l40 + 1] = u;\n      }\n      for (var _n118 = 0, _l41 = 0; _n118 < o; _n118++) {\n        for (; s[_l41 + 1] < _n118;) _l41++;\n        var _o55 = r[_l41],\n          _c24 = _n118 - _o55;\n        t[e + _n118 * i] = a[_o55] + _c24 * _c24;\n      }\n    }\n    var _ = /*#__PURE__*/function () {\n      function _(t, e) {\n        _classCallCheck(this, _);\n        this.requestManager = t, this.localIdeographFontFamily = e, this.entries = {};\n      }\n      _createClass(_, [{\n        key: \"setURL\",\n        value: function setURL(t) {\n          this.url = t;\n        }\n      }, {\n        key: \"getGlyphs\",\n        value: function getGlyphs(e, i) {\n          var _this32 = this;\n          var o = [];\n          for (var _t176 in e) {\n            var _iterator137 = _createForOfIteratorHelper(e[_t176]),\n              _step137;\n            try {\n              for (_iterator137.s(); !(_step137 = _iterator137.n()).done;) {\n                var _i131 = _step137.value;\n                o.push({\n                  stack: _t176,\n                  id: _i131\n                });\n              }\n            } catch (err) {\n              _iterator137.e(err);\n            } finally {\n              _iterator137.f();\n            }\n          }\n          t.asyncAll(o, function (_ref122, i) {\n            var t = _ref122.stack,\n              e = _ref122.id;\n            var o = _this32.entries[t];\n            o || (o = _this32.entries[t] = {\n              glyphs: {},\n              requests: {},\n              ranges: {}\n            });\n            var a = o.glyphs[e];\n            if (void 0 !== a) return void i(null, {\n              stack: t,\n              id: e,\n              glyph: a\n            });\n            if (a = _this32._tinySDF(o, t, e), a) return o.glyphs[e] = a, void i(null, {\n              stack: t,\n              id: e,\n              glyph: a\n            });\n            var r = Math.floor(e / 256);\n            if (256 * r > 65535) return void i(new Error(\"glyphs > 65535 not supported\"));\n            if (o.ranges[r]) return void i(null, {\n              stack: t,\n              id: e,\n              glyph: a\n            });\n            var s = o.requests[r];\n            s || (s = o.requests[r] = [], _.loadGlyphRange(t, r, _this32.url, _this32.requestManager, function (t, e) {\n              if (e) {\n                for (var _t177 in e) _this32._doesCharSupportLocalGlyph(+_t177) || (o.glyphs[+_t177] = e[+_t177]);\n                o.ranges[r] = !0;\n              }\n              var _iterator138 = _createForOfIteratorHelper(s),\n                _step138;\n              try {\n                for (_iterator138.s(); !(_step138 = _iterator138.n()).done;) {\n                  var _i132 = _step138.value;\n                  _i132(t, e);\n                }\n              } catch (err) {\n                _iterator138.e(err);\n              } finally {\n                _iterator138.f();\n              }\n              delete o.requests[r];\n            })), s.push(function (o, a) {\n              o ? i(o) : a && i(null, {\n                stack: t,\n                id: e,\n                glyph: a[e] || null\n              });\n            });\n          }, function (t, e) {\n            if (t) i(t);else if (e) {\n              var _t178 = {};\n              var _iterator139 = _createForOfIteratorHelper(e),\n                _step139;\n              try {\n                for (_iterator139.s(); !(_step139 = _iterator139.n()).done;) {\n                  var _step139$value = _step139.value,\n                    _i133 = _step139$value.stack,\n                    _o56 = _step139$value.id,\n                    _a84 = _step139$value.glyph;\n                  (_t178[_i133] || (_t178[_i133] = {}))[_o56] = _a84 && {\n                    id: _a84.id,\n                    bitmap: _a84.bitmap.clone(),\n                    metrics: _a84.metrics\n                  };\n                }\n              } catch (err) {\n                _iterator139.e(err);\n              } finally {\n                _iterator139.f();\n              }\n              i(null, _t178);\n            }\n          });\n        }\n      }, {\n        key: \"_doesCharSupportLocalGlyph\",\n        value: function _doesCharSupportLocalGlyph(e) {\n          return !!this.localIdeographFontFamily && (t.unicodeBlockLookup[\"CJK Unified Ideographs\"](e) || t.unicodeBlockLookup[\"Hangul Syllables\"](e) || t.unicodeBlockLookup.Hiragana(e) || t.unicodeBlockLookup.Katakana(e));\n        }\n      }, {\n        key: \"_tinySDF\",\n        value: function _tinySDF(e, i, o) {\n          var a = this.localIdeographFontFamily;\n          if (!a) return;\n          if (!this._doesCharSupportLocalGlyph(o)) return;\n          var r = e.tinySDF;\n          if (!r) {\n            var _t179 = \"400\";\n            /bold/i.test(i) ? _t179 = \"900\" : /medium/i.test(i) ? _t179 = \"500\" : /light/i.test(i) && (_t179 = \"200\"), r = e.tinySDF = new _.TinySDF({\n              fontSize: 24,\n              buffer: 3,\n              radius: 8,\n              cutoff: .25,\n              fontFamily: a,\n              fontWeight: _t179\n            });\n          }\n          var s = r.draw(String.fromCharCode(o));\n          return {\n            id: o,\n            bitmap: new t.AlphaImage({\n              width: s.width || 30,\n              height: s.height || 30\n            }, s.data),\n            metrics: {\n              width: s.glyphWidth || 24,\n              height: s.glyphHeight || 24,\n              left: s.glyphLeft || 0,\n              top: s.glyphTop - 27 || -8,\n              advance: s.glyphAdvance || 24\n            }\n          };\n        }\n      }]);\n      return _;\n    }();\n    _.loadGlyphRange = function (e, i, o, a, r) {\n      var s = 256 * i,\n        n = s + 255,\n        l = a.transformRequest(o.replace(\"{fontstack}\", e).replace(\"{range}\", \"\".concat(s, \"-\").concat(n)), t.ResourceType.Glyphs);\n      t.getArrayBuffer(l, function (e, i) {\n        if (e) r(e);else if (i) {\n          var _e181 = {};\n          var _iterator140 = _createForOfIteratorHelper(t.parseGlyphPbf(i)),\n            _step140;\n          try {\n            for (_iterator140.s(); !(_step140 = _iterator140.n()).done;) {\n              var _o57 = _step140.value;\n              _e181[_o57.id] = _o57;\n            }\n          } catch (err) {\n            _iterator140.e(err);\n          } finally {\n            _iterator140.f();\n          }\n          r(null, _e181);\n        }\n      });\n    }, _.TinySDF = /*#__PURE__*/function () {\n      function _class12() {\n        var _ref123 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref123$fontSize = _ref123.fontSize,\n          t = _ref123$fontSize === void 0 ? 24 : _ref123$fontSize,\n          _ref123$buffer = _ref123.buffer,\n          e = _ref123$buffer === void 0 ? 3 : _ref123$buffer,\n          _ref123$radius = _ref123.radius,\n          i = _ref123$radius === void 0 ? 8 : _ref123$radius,\n          _ref123$cutoff = _ref123.cutoff,\n          o = _ref123$cutoff === void 0 ? .25 : _ref123$cutoff,\n          _ref123$fontFamily = _ref123.fontFamily,\n          a = _ref123$fontFamily === void 0 ? \"sans-serif\" : _ref123$fontFamily,\n          _ref123$fontWeight = _ref123.fontWeight,\n          r = _ref123$fontWeight === void 0 ? \"normal\" : _ref123$fontWeight,\n          _ref123$fontStyle = _ref123.fontStyle,\n          s = _ref123$fontStyle === void 0 ? \"normal\" : _ref123$fontStyle;\n        _classCallCheck(this, _class12);\n        this.buffer = e, this.cutoff = o, this.radius = i;\n        var n = this.size = t + 4 * e,\n          l = this._createCanvas(n),\n          c = this.ctx = l.getContext(\"2d\", {\n            willReadFrequently: !0\n          });\n        c.font = \"\".concat(s, \" \").concat(r, \" \").concat(t, \"px \").concat(a), c.textBaseline = \"alphabetic\", c.textAlign = \"left\", c.fillStyle = \"black\", this.gridOuter = new Float64Array(n * n), this.gridInner = new Float64Array(n * n), this.f = new Float64Array(n), this.z = new Float64Array(n + 1), this.v = new Uint16Array(n);\n      }\n      _createClass(_class12, [{\n        key: \"_createCanvas\",\n        value: function _createCanvas(t) {\n          var e = document.createElement(\"canvas\");\n          return e.width = e.height = t, e;\n        }\n      }, {\n        key: \"draw\",\n        value: function draw(t) {\n          var _this$ctx$measureText = this.ctx.measureText(t),\n            e = _this$ctx$measureText.width,\n            i = _this$ctx$measureText.actualBoundingBoxAscent,\n            o = _this$ctx$measureText.actualBoundingBoxDescent,\n            a = _this$ctx$measureText.actualBoundingBoxLeft,\n            r = _this$ctx$measureText.actualBoundingBoxRight,\n            s = Math.ceil(i),\n            n = Math.min(this.size - this.buffer, Math.ceil(r - a)),\n            l = Math.min(this.size - this.buffer, s + Math.ceil(o)),\n            c = n + 2 * this.buffer,\n            h = l + 2 * this.buffer,\n            m = Math.max(c * h, 0),\n            _ = new Uint8ClampedArray(m),\n            p = {\n              data: _,\n              width: c,\n              height: h,\n              glyphWidth: n,\n              glyphHeight: l,\n              glyphTop: s,\n              glyphLeft: 0,\n              glyphAdvance: e\n            };\n          if (0 === n || 0 === l) return p;\n          var f = this.ctx,\n            g = this.buffer,\n            x = this.gridInner,\n            v = this.gridOuter;\n          f.clearRect(g, g, n, l), f.fillText(t, g, g + s);\n          var y = f.getImageData(g, g, n, l);\n          v.fill(u, 0, m), x.fill(0, 0, m);\n          for (var _t180 = 0; _t180 < l; _t180++) for (var _e182 = 0; _e182 < n; _e182++) {\n            var _i134 = y.data[4 * (_t180 * n + _e182) + 3] / 255;\n            if (0 === _i134) continue;\n            var _o58 = (_t180 + g) * c + _e182 + g;\n            if (1 === _i134) v[_o58] = 0, x[_o58] = u;else {\n              var _t181 = .5 - _i134;\n              v[_o58] = _t181 > 0 ? _t181 * _t181 : 0, x[_o58] = _t181 < 0 ? _t181 * _t181 : 0;\n            }\n          }\n          d(v, 0, 0, c, h, c, this.f, this.v, this.z), d(x, g, g, n, l, c, this.f, this.v, this.z);\n          for (var _t182 = 0; _t182 < m; _t182++) {\n            var _e183 = Math.sqrt(v[_t182]) - Math.sqrt(x[_t182]);\n            _[_t182] = Math.round(255 - 255 * (_e183 / this.radius + this.cutoff));\n          }\n          return p;\n        }\n      }]);\n      return _class12;\n    }();\n    var p = new t.Properties({\n        anchor: new t.DataConstantProperty(t.spec.light.anchor),\n        position: new ( /*#__PURE__*/function () {\n          function _class13() {\n            _classCallCheck(this, _class13);\n            this.specification = t.spec.light.position;\n          }\n          _createClass(_class13, [{\n            key: \"possiblyEvaluate\",\n            value: function possiblyEvaluate(e, i) {\n              return t.sphericalToCartesian(e.expression.evaluate(i));\n            }\n          }, {\n            key: \"interpolate\",\n            value: function interpolate(e, i, o) {\n              return {\n                x: t.number(e.x, i.x, o),\n                y: t.number(e.y, i.y, o),\n                z: t.number(e.z, i.z, o)\n              };\n            }\n          }]);\n          return _class13;\n        }())(),\n        color: new t.DataConstantProperty(t.spec.light.color),\n        intensity: new t.DataConstantProperty(t.spec.light.intensity)\n      }),\n      f = \"-transition\";\n    var g = /*#__PURE__*/function (_t$Evented2) {\n      _inherits(g, _t$Evented2);\n      var _super78 = _createSuper(g);\n      function g(e) {\n        var _this33;\n        _classCallCheck(this, g);\n        _this33 = _super78.call(this), _this33._transitionable = new t.Transitionable(p), _this33.setLight(e), _this33._transitioning = _this33._transitionable.untransitioned();\n        return _this33;\n      }\n      _createClass(g, [{\n        key: \"getLight\",\n        value: function getLight() {\n          return this._transitionable.serialize();\n        }\n      }, {\n        key: \"setLight\",\n        value: function setLight(e) {\n          var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          if (!this._validate(t.validateLight, e, i)) for (var _t183 in e) {\n            var _i135 = e[_t183];\n            _t183.endsWith(f) ? this._transitionable.setTransition(_t183.slice(0, -f.length), _i135) : this._transitionable.setValue(_t183, _i135);\n          }\n        }\n      }, {\n        key: \"updateTransitions\",\n        value: function updateTransitions(t) {\n          this._transitioning = this._transitionable.transitioned(t, this._transitioning);\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return this._transitioning.hasTransition();\n        }\n      }, {\n        key: \"recalculate\",\n        value: function recalculate(t) {\n          this.properties = this._transitioning.possiblyEvaluate(t);\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate(e, i, o) {\n          return (!o || !1 !== o.validate) && t.emitValidationErrors(this, e.call(t.validateStyle, t.extend({\n            value: i,\n            style: {\n              glyphs: !0,\n              sprite: !0\n            },\n            styleSpec: t.spec\n          })));\n        }\n      }]);\n      return g;\n    }(t.Evented);\n    var x = /*#__PURE__*/function () {\n      function x(t, e) {\n        _classCallCheck(this, x);\n        this.width = t, this.height = e, this.nextRow = 0, this.data = new Uint8Array(this.width * this.height), this.dashEntry = {};\n      }\n      _createClass(x, [{\n        key: \"getDash\",\n        value: function getDash(t, e) {\n          var i = t.join(\",\") + String(e);\n          return this.dashEntry[i] || (this.dashEntry[i] = this.addDash(t, e)), this.dashEntry[i];\n        }\n      }, {\n        key: \"getDashRanges\",\n        value: function getDashRanges(t, e, i) {\n          var o = [];\n          var a = t.length % 2 == 1 ? -t[t.length - 1] * i : 0,\n            r = t[0] * i,\n            s = !0;\n          o.push({\n            left: a,\n            right: r,\n            isDash: s,\n            zeroLength: 0 === t[0]\n          });\n          var n = t[0];\n          for (var _e184 = 1; _e184 < t.length; _e184++) {\n            s = !s;\n            var _l42 = t[_e184];\n            a = n * i, n += _l42, r = n * i, o.push({\n              left: a,\n              right: r,\n              isDash: s,\n              zeroLength: 0 === _l42\n            });\n          }\n          return o;\n        }\n      }, {\n        key: \"addRoundDash\",\n        value: function addRoundDash(t, e, i) {\n          var o = e / 2;\n          for (var _e185 = -i; _e185 <= i; _e185++) {\n            var _a85 = this.width * (this.nextRow + i + _e185);\n            var _r165 = 0,\n              _s77 = t[_r165];\n            for (var _n119 = 0; _n119 < this.width; _n119++) {\n              _n119 / _s77.right > 1 && (_s77 = t[++_r165]);\n              var _l43 = Math.abs(_n119 - _s77.left),\n                _c25 = Math.abs(_n119 - _s77.right),\n                _h16 = Math.min(_l43, _c25);\n              var _u26 = void 0;\n              var _d9 = _e185 / i * (o + 1);\n              if (_s77.isDash) {\n                var _t184 = o - Math.abs(_d9);\n                _u26 = Math.sqrt(_h16 * _h16 + _t184 * _t184);\n              } else _u26 = o - Math.sqrt(_h16 * _h16 + _d9 * _d9);\n              this.data[_a85 + _n119] = Math.max(0, Math.min(255, _u26 + 128));\n            }\n          }\n        }\n      }, {\n        key: \"addRegularDash\",\n        value: function addRegularDash(t) {\n          for (var _e186 = t.length - 1; _e186 >= 0; --_e186) {\n            var _i136 = t[_e186],\n              _o59 = t[_e186 + 1];\n            _i136.zeroLength ? t.splice(_e186, 1) : _o59 && _o59.isDash === _i136.isDash && (_o59.left = _i136.left, t.splice(_e186, 1));\n          }\n          var e = t[0],\n            i = t[t.length - 1];\n          e.isDash === i.isDash && (e.left = i.left - this.width, i.right = e.right + this.width);\n          var o = this.width * this.nextRow;\n          var a = 0,\n            r = t[a];\n          for (var _e187 = 0; _e187 < this.width; _e187++) {\n            _e187 / r.right > 1 && (r = t[++a]);\n            var _i137 = Math.abs(_e187 - r.left),\n              _s78 = Math.abs(_e187 - r.right),\n              _n120 = Math.min(_i137, _s78);\n            this.data[o + _e187] = Math.max(0, Math.min(255, (r.isDash ? _n120 : -_n120) + 128));\n          }\n        }\n      }, {\n        key: \"addDash\",\n        value: function addDash(e, i) {\n          var o = i ? 7 : 0,\n            a = 2 * o + 1;\n          if (this.nextRow + a > this.height) return t.warnOnce(\"LineAtlas out of space\"), null;\n          var r = 0;\n          for (var _t185 = 0; _t185 < e.length; _t185++) r += e[_t185];\n          if (0 !== r) {\n            var _t186 = this.width / r,\n              _a86 = this.getDashRanges(e, this.width, _t186);\n            i ? this.addRoundDash(_a86, _t186, o) : this.addRegularDash(_a86);\n          }\n          var s = {\n            y: (this.nextRow + o + .5) / this.height,\n            height: 2 * o / this.height,\n            width: r\n          };\n          return this.nextRow += a, this.dirty = !0, s;\n        }\n      }, {\n        key: \"bind\",\n        value: function bind(t) {\n          var e = t.gl;\n          this.texture ? (e.bindTexture(e.TEXTURE_2D, this.texture), this.dirty && (this.dirty = !1, e.texSubImage2D(e.TEXTURE_2D, 0, 0, 0, this.width, this.height, e.ALPHA, e.UNSIGNED_BYTE, this.data))) : (this.texture = e.createTexture(), e.bindTexture(e.TEXTURE_2D, this.texture), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.REPEAT), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.REPEAT), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.LINEAR), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.LINEAR), e.texImage2D(e.TEXTURE_2D, 0, e.ALPHA, this.width, this.height, 0, e.ALPHA, e.UNSIGNED_BYTE, this.data));\n        }\n      }]);\n      return x;\n    }();\n    var v = /*#__PURE__*/function () {\n      function v(e, i) {\n        _classCallCheck(this, v);\n        this.workerPool = e, this.actors = [], this.currentActor = 0, this.id = t.uniqueId();\n        var o = this.workerPool.acquire(this.id);\n        for (var _t187 = 0; _t187 < o.length; _t187++) {\n          var _e188 = new v.Actor(o[_t187], i, this.id);\n          _e188.name = \"Worker \".concat(_t187), this.actors.push(_e188);\n        }\n        if (!this.actors.length) throw new Error(\"No actors found\");\n      }\n      _createClass(v, [{\n        key: \"broadcast\",\n        value: function broadcast(e, i, o) {\n          t.asyncAll(this.actors, function (t, o) {\n            t.send(e, i, o);\n          }, o = o || function () {});\n        }\n      }, {\n        key: \"getActor\",\n        value: function getActor() {\n          return this.currentActor = (this.currentActor + 1) % this.actors.length, this.actors[this.currentActor];\n        }\n      }, {\n        key: \"remove\",\n        value: function remove() {\n          this.actors.forEach(function (t) {\n            t.remove();\n          }), this.actors = [], this.workerPool.release(this.id);\n        }\n      }]);\n      return v;\n    }();\n    function y(e, i, o) {\n      var a = function a(i, _a87) {\n        if (i) return o(i);\n        if (_a87) {\n          var _i138 = t.pick(t.extend(_a87, e), [\"tiles\", \"minzoom\", \"maxzoom\", \"attribution\", \"bounds\", \"scheme\", \"tileSize\", \"encoding\"]);\n          _a87.vector_layers && (_i138.vectorLayers = _a87.vector_layers, _i138.vectorLayerIds = _i138.vectorLayers.map(function (t) {\n            return t.id;\n          })), o(null, _i138);\n        }\n      };\n      return e.url ? t.getJSON(i.transformRequest(e.url, t.ResourceType.Source), a) : t.exported.frame(function () {\n        return a(null, e);\n      });\n    }\n    v.Actor = t.Actor;\n    var b = /*#__PURE__*/function () {\n      function b(e, i, o) {\n        _classCallCheck(this, b);\n        this.bounds = t.LngLatBounds.convert(this.validateBounds(e)), this.minzoom = i || 0, this.maxzoom = o || 24;\n      }\n      _createClass(b, [{\n        key: \"validateBounds\",\n        value: function validateBounds(t) {\n          return Array.isArray(t) && 4 === t.length ? [Math.max(-180, t[0]), Math.max(-90, t[1]), Math.min(180, t[2]), Math.min(90, t[3])] : [-180, -90, 180, 90];\n        }\n      }, {\n        key: \"contains\",\n        value: function contains(e) {\n          var i = Math.pow(2, e.z),\n            o = Math.floor(t.mercatorXfromLng(this.bounds.getWest()) * i),\n            a = Math.floor(t.mercatorYfromLat(this.bounds.getNorth()) * i),\n            r = Math.ceil(t.mercatorXfromLng(this.bounds.getEast()) * i),\n            s = Math.ceil(t.mercatorYfromLat(this.bounds.getSouth()) * i);\n          return e.x >= o && e.x < r && e.y >= a && e.y < s;\n        }\n      }]);\n      return b;\n    }();\n    var w = /*#__PURE__*/function (_t$Evented3) {\n      _inherits(w, _t$Evented3);\n      var _super79 = _createSuper(w);\n      function w(e, i, o, a) {\n        var _this34;\n        _classCallCheck(this, w);\n        if (_this34 = _super79.call(this), _this34.id = e, _this34.dispatcher = o, _this34.type = \"vector\", _this34.minzoom = 0, _this34.maxzoom = 22, _this34.scheme = \"xyz\", _this34.tileSize = 512, _this34.reparseOverscaled = !0, _this34.isTileClipped = !0, _this34._loaded = !1, t.extend(_assertThisInitialized(_this34), t.pick(i, [\"url\", \"scheme\", \"tileSize\", \"promoteId\"])), _this34._options = t.extend({\n          type: \"vector\"\n        }, i), _this34._collectResourceTiming = i.collectResourceTiming, 512 !== _this34.tileSize) throw new Error(\"vector tile sources must have a tileSize of 512\");\n        _this34.setEventedParent(a);\n        return _possibleConstructorReturn(_this34);\n      }\n      _createClass(w, [{\n        key: \"load\",\n        value: function load() {\n          var _this35 = this;\n          this._loaded = !1, this.fire(new t.Event(\"dataloading\", {\n            dataType: \"source\"\n          })), this._tileJSONRequest = y(this._options, this.map._requestManager, function (e, i) {\n            _this35._tileJSONRequest = null, _this35._loaded = !0, _this35.map.style.sourceCaches[_this35.id].clearTiles(), e ? _this35.fire(new t.ErrorEvent(e)) : i && (t.extend(_this35, i), i.bounds && (_this35.tileBounds = new b(i.bounds, _this35.minzoom, _this35.maxzoom)), _this35.fire(new t.Event(\"data\", {\n              dataType: \"source\",\n              sourceDataType: \"metadata\"\n            })), _this35.fire(new t.Event(\"data\", {\n              dataType: \"source\",\n              sourceDataType: \"content\"\n            })));\n          });\n        }\n      }, {\n        key: \"loaded\",\n        value: function loaded() {\n          return this._loaded;\n        }\n      }, {\n        key: \"hasTile\",\n        value: function hasTile(t) {\n          return !this.tileBounds || this.tileBounds.contains(t.canonical);\n        }\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          this.map = t, this.load();\n        }\n      }, {\n        key: \"setSourceProperty\",\n        value: function setSourceProperty(t) {\n          this._tileJSONRequest && this._tileJSONRequest.cancel(), t(), this.load();\n        }\n      }, {\n        key: \"setTiles\",\n        value: function setTiles(t) {\n          var _this36 = this;\n          return this.setSourceProperty(function () {\n            _this36._options.tiles = t;\n          }), this;\n        }\n      }, {\n        key: \"setUrl\",\n        value: function setUrl(t) {\n          var _this37 = this;\n          return this.setSourceProperty(function () {\n            _this37.url = t, _this37._options.url = t;\n          }), this;\n        }\n      }, {\n        key: \"onRemove\",\n        value: function onRemove() {\n          this._tileJSONRequest && (this._tileJSONRequest.cancel(), this._tileJSONRequest = null);\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return t.extend({}, this._options);\n        }\n      }, {\n        key: \"loadTile\",\n        value: function loadTile(e, i) {\n          var o = e.tileID.canonical.url(this.tiles, this.map.getPixelRatio(), this.scheme),\n            a = {\n              request: this.map._requestManager.transformRequest(o, t.ResourceType.Tile),\n              uid: e.uid,\n              tileID: e.tileID,\n              zoom: e.tileID.overscaledZ,\n              tileSize: this.tileSize * e.tileID.overscaleFactor(),\n              type: this.type,\n              source: this.id,\n              pixelRatio: this.map.getPixelRatio(),\n              showCollisionBoxes: this.map.showCollisionBoxes,\n              promoteId: this.promoteId\n            };\n          function r(o, a) {\n            return delete e.request, e.aborted ? i(null) : o && 404 !== o.status ? i(o) : (a && a.resourceTiming && (e.resourceTiming = a.resourceTiming), this.map._refreshExpiredTiles && a && e.setExpiryData(a), e.loadVectorData(a, this.map.painter), t.cacheEntryPossiblyAdded(this.dispatcher), i(null), void (e.reloadCallback && (this.loadTile(e, e.reloadCallback), e.reloadCallback = null)));\n          }\n          a.request.collectResourceTiming = this._collectResourceTiming, e.actor && \"expired\" !== e.state ? \"loading\" === e.state ? e.reloadCallback = i : e.request = e.actor.send(\"reloadTile\", a, r.bind(this)) : (e.actor = this.dispatcher.getActor(), e.request = e.actor.send(\"loadTile\", a, r.bind(this)));\n        }\n      }, {\n        key: \"abortTile\",\n        value: function abortTile(t) {\n          t.request && (t.request.cancel(), delete t.request), t.actor && t.actor.send(\"abortTile\", {\n            uid: t.uid,\n            type: this.type,\n            source: this.id\n          }, void 0);\n        }\n      }, {\n        key: \"unloadTile\",\n        value: function unloadTile(t) {\n          t.unloadVectorData(), t.actor && t.actor.send(\"removeTile\", {\n            uid: t.uid,\n            type: this.type,\n            source: this.id\n          }, void 0);\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return !1;\n        }\n      }]);\n      return w;\n    }(t.Evented);\n    var T = /*#__PURE__*/function (_t$Evented4) {\n      _inherits(T, _t$Evented4);\n      var _super80 = _createSuper(T);\n      function T(e, i, o, a) {\n        var _this38;\n        _classCallCheck(this, T);\n        _this38 = _super80.call(this), _this38.id = e, _this38.dispatcher = o, _this38.setEventedParent(a), _this38.type = \"raster\", _this38.minzoom = 0, _this38.maxzoom = 22, _this38.roundZoom = !0, _this38.scheme = \"xyz\", _this38.tileSize = 512, _this38._loaded = !1, _this38._options = t.extend({\n          type: \"raster\"\n        }, i), t.extend(_assertThisInitialized(_this38), t.pick(i, [\"url\", \"scheme\", \"tileSize\"]));\n        return _this38;\n      }\n      _createClass(T, [{\n        key: \"load\",\n        value: function load() {\n          var _this39 = this;\n          this._loaded = !1, this.fire(new t.Event(\"dataloading\", {\n            dataType: \"source\"\n          })), this._tileJSONRequest = y(this._options, this.map._requestManager, function (e, i) {\n            _this39._tileJSONRequest = null, _this39._loaded = !0, e ? _this39.fire(new t.ErrorEvent(e)) : i && (t.extend(_this39, i), i.bounds && (_this39.tileBounds = new b(i.bounds, _this39.minzoom, _this39.maxzoom)), _this39.fire(new t.Event(\"data\", {\n              dataType: \"source\",\n              sourceDataType: \"metadata\"\n            })), _this39.fire(new t.Event(\"data\", {\n              dataType: \"source\",\n              sourceDataType: \"content\"\n            })));\n          });\n        }\n      }, {\n        key: \"loaded\",\n        value: function loaded() {\n          return this._loaded;\n        }\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          this.map = t, this.load();\n        }\n      }, {\n        key: \"onRemove\",\n        value: function onRemove() {\n          this._tileJSONRequest && (this._tileJSONRequest.cancel(), this._tileJSONRequest = null);\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return t.extend({}, this._options);\n        }\n      }, {\n        key: \"hasTile\",\n        value: function hasTile(t) {\n          return !this.tileBounds || this.tileBounds.contains(t.canonical);\n        }\n      }, {\n        key: \"loadTile\",\n        value: function loadTile(e, i) {\n          var _this40 = this;\n          var o = e.tileID.canonical.url(this.tiles, this.map.getPixelRatio(), this.scheme);\n          e.request = t.getImage(this.map._requestManager.transformRequest(o, t.ResourceType.Tile), function (o, a, r) {\n            if (delete e.request, e.aborted) e.state = \"unloaded\", i(null);else if (o) e.state = \"errored\", i(o);else if (a) {\n              _this40.map._refreshExpiredTiles && e.setExpiryData(r);\n              var _o60 = _this40.map.painter.context,\n                _s79 = _o60.gl;\n              e.texture = _this40.map.painter.getTileTexture(a.width), e.texture ? e.texture.update(a, {\n                useMipmap: !0\n              }) : (e.texture = new l(_o60, a, _s79.RGBA, {\n                useMipmap: !0\n              }), e.texture.bind(_s79.LINEAR, _s79.CLAMP_TO_EDGE, _s79.LINEAR_MIPMAP_NEAREST), _o60.extTextureFilterAnisotropic && _s79.texParameterf(_s79.TEXTURE_2D, _o60.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT, _o60.extTextureFilterAnisotropicMax)), e.state = \"loaded\", t.cacheEntryPossiblyAdded(_this40.dispatcher), i(null);\n            }\n          });\n        }\n      }, {\n        key: \"abortTile\",\n        value: function abortTile(t, e) {\n          t.request && (t.request.cancel(), delete t.request), e();\n        }\n      }, {\n        key: \"unloadTile\",\n        value: function unloadTile(t, e) {\n          t.texture && this.map.painter.saveTileTexture(t.texture), e();\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return !1;\n        }\n      }]);\n      return T;\n    }(t.Evented);\n    var E;\n    var I = /*#__PURE__*/function (_T) {\n      _inherits(I, _T);\n      var _super81 = _createSuper(I);\n      function I(e, i, o, a) {\n        var _this41;\n        _classCallCheck(this, I);\n        _this41 = _super81.call(this, e, i, o, a), _this41.type = \"raster-dem\", _this41.maxzoom = 22, _this41._options = t.extend({\n          type: \"raster-dem\"\n        }, i), _this41.encoding = i.encoding || \"mapbox\";\n        return _this41;\n      }\n      _createClass(I, [{\n        key: \"serialize\",\n        value: function serialize() {\n          return {\n            type: \"raster-dem\",\n            url: this.url,\n            tileSize: this.tileSize,\n            tiles: this.tiles,\n            bounds: this.bounds,\n            encoding: this.encoding\n          };\n        }\n      }, {\n        key: \"loadTile\",\n        value: function loadTile(e, i) {\n          var o = e.tileID.canonical.url(this.tiles, this.map.getPixelRatio(), this.scheme);\n          function a(t, o) {\n            t && (e.state = \"errored\", i(t)), o && (e.dem = o, e.needsHillshadePrepare = !0, e.needsTerrainPrepare = !0, e.state = \"loaded\", i(null));\n          }\n          e.request = t.getImage(this.map._requestManager.transformRequest(o, t.ResourceType.Tile), function (o, r) {\n            if (delete e.request, e.aborted) e.state = \"unloaded\", i(null);else if (o) e.state = \"errored\", i(o);else if (r) {\n              this.map._refreshExpiredTiles && e.setExpiryData(r), delete r.cacheControl, delete r.expires;\n              var _i139 = t.isImageBitmap(r) && (null == E && (E = \"undefined\" != typeof OffscreenCanvas && new OffscreenCanvas(1, 1).getContext(\"2d\") && \"function\" == typeof createImageBitmap), E) ? r : t.exported.getImageData(r, 1),\n                _o61 = {\n                  uid: e.uid,\n                  coord: e.tileID,\n                  source: this.id,\n                  rawImageData: _i139,\n                  encoding: this.encoding\n                };\n              e.actor && \"expired\" !== e.state || (e.actor = this.dispatcher.getActor(), e.actor.send(\"loadDEMTile\", _o61, a.bind(this)));\n            }\n          }.bind(this)), e.neighboringTiles = this._getNeighboringTiles(e.tileID);\n        }\n      }, {\n        key: \"_getNeighboringTiles\",\n        value: function _getNeighboringTiles(e) {\n          var i = e.canonical,\n            o = Math.pow(2, i.z),\n            a = (i.x - 1 + o) % o,\n            r = 0 === i.x ? e.wrap - 1 : e.wrap,\n            s = (i.x + 1 + o) % o,\n            n = i.x + 1 === o ? e.wrap + 1 : e.wrap,\n            l = {};\n          return l[new t.OverscaledTileID(e.overscaledZ, r, i.z, a, i.y).key] = {\n            backfilled: !1\n          }, l[new t.OverscaledTileID(e.overscaledZ, n, i.z, s, i.y).key] = {\n            backfilled: !1\n          }, i.y > 0 && (l[new t.OverscaledTileID(e.overscaledZ, r, i.z, a, i.y - 1).key] = {\n            backfilled: !1\n          }, l[new t.OverscaledTileID(e.overscaledZ, e.wrap, i.z, i.x, i.y - 1).key] = {\n            backfilled: !1\n          }, l[new t.OverscaledTileID(e.overscaledZ, n, i.z, s, i.y - 1).key] = {\n            backfilled: !1\n          }), i.y + 1 < o && (l[new t.OverscaledTileID(e.overscaledZ, r, i.z, a, i.y + 1).key] = {\n            backfilled: !1\n          }, l[new t.OverscaledTileID(e.overscaledZ, e.wrap, i.z, i.x, i.y + 1).key] = {\n            backfilled: !1\n          }, l[new t.OverscaledTileID(e.overscaledZ, n, i.z, s, i.y + 1).key] = {\n            backfilled: !1\n          }), l;\n        }\n      }, {\n        key: \"unloadTile\",\n        value: function unloadTile(t) {\n          t.demTexture && this.map.painter.saveTileTexture(t.demTexture), t.fbo && (t.fbo.destroy(), delete t.fbo), t.dem && delete t.dem, delete t.neighboringTiles, t.state = \"unloaded\", t.actor && t.actor.send(\"removeDEMTile\", {\n            uid: t.uid,\n            source: this.id\n          });\n        }\n      }]);\n      return I;\n    }(T);\n    var C = /*#__PURE__*/function (_t$Evented5) {\n      _inherits(C, _t$Evented5);\n      var _super82 = _createSuper(C);\n      function C(e, i, o, a) {\n        var _this42;\n        _classCallCheck(this, C);\n        _this42 = _super82.call(this), _this42.id = e, _this42.type = \"geojson\", _this42.minzoom = 0, _this42.maxzoom = 18, _this42.tileSize = 512, _this42.isTileClipped = !0, _this42.reparseOverscaled = !0, _this42._removed = !1, _this42._pendingLoads = 0, _this42.actor = o.getActor(), _this42.setEventedParent(a), _this42._data = i.data, _this42._options = t.extend({}, i), _this42._collectResourceTiming = i.collectResourceTiming, void 0 !== i.maxzoom && (_this42.maxzoom = i.maxzoom), i.type && (_this42.type = i.type), i.attribution && (_this42.attribution = i.attribution), _this42.promoteId = i.promoteId;\n        var r = t.EXTENT / _this42.tileSize;\n        _this42.workerOptions = t.extend({\n          source: _this42.id,\n          cluster: i.cluster || !1,\n          geojsonVtOptions: {\n            buffer: (void 0 !== i.buffer ? i.buffer : 128) * r,\n            tolerance: (void 0 !== i.tolerance ? i.tolerance : .375) * r,\n            extent: t.EXTENT,\n            maxZoom: _this42.maxzoom,\n            lineMetrics: i.lineMetrics || !1,\n            generateId: i.generateId || !1\n          },\n          superclusterOptions: {\n            maxZoom: void 0 !== i.clusterMaxZoom ? i.clusterMaxZoom : _this42.maxzoom - 1,\n            minPoints: Math.max(2, i.clusterMinPoints || 2),\n            extent: t.EXTENT,\n            radius: (i.clusterRadius || 50) * r,\n            log: !1,\n            generateId: i.generateId || !1\n          },\n          clusterProperties: i.clusterProperties,\n          filter: i.filter\n        }, i.workerOptions);\n        return _this42;\n      }\n      _createClass(C, [{\n        key: \"load\",\n        value: function load() {\n          this._updateWorkerData(\"metadata\");\n        }\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          this.map = t, this.load();\n        }\n      }, {\n        key: \"setData\",\n        value: function setData(t) {\n          return this._data = t, this._updateWorkerData(\"content\"), this;\n        }\n      }, {\n        key: \"getClusterExpansionZoom\",\n        value: function getClusterExpansionZoom(t, e) {\n          return this.actor.send(\"geojson.getClusterExpansionZoom\", {\n            clusterId: t,\n            source: this.id\n          }, e), this;\n        }\n      }, {\n        key: \"getClusterChildren\",\n        value: function getClusterChildren(t, e) {\n          return this.actor.send(\"geojson.getClusterChildren\", {\n            clusterId: t,\n            source: this.id\n          }, e), this;\n        }\n      }, {\n        key: \"getClusterLeaves\",\n        value: function getClusterLeaves(t, e, i, o) {\n          return this.actor.send(\"geojson.getClusterLeaves\", {\n            source: this.id,\n            clusterId: t,\n            limit: e,\n            offset: i\n          }, o), this;\n        }\n      }, {\n        key: \"_updateWorkerData\",\n        value: function _updateWorkerData(e) {\n          var _this43 = this;\n          var i = t.extend({}, this.workerOptions),\n            o = this._data;\n          \"string\" == typeof o ? (i.request = this.map._requestManager.transformRequest(t.exported.resolveURL(o), t.ResourceType.Source), i.request.collectResourceTiming = this._collectResourceTiming) : i.data = JSON.stringify(o), this._pendingLoads++, this.fire(new t.Event(\"dataloading\", {\n            dataType: \"source\"\n          })), this.actor.send(\"\".concat(this.type, \".loadData\"), i, function (i, o) {\n            if (_this43._pendingLoads--, _this43._removed || o && o.abandoned) return void _this43.fire(new t.Event(\"dataabort\", {\n              dataType: \"source\",\n              sourceDataType: e\n            }));\n            var a = null;\n            if (o && o.resourceTiming && o.resourceTiming[_this43.id] && (a = o.resourceTiming[_this43.id].slice(0)), i) return void _this43.fire(new t.ErrorEvent(i));\n            var r = {\n              dataType: \"source\",\n              sourceDataType: e\n            };\n            _this43._collectResourceTiming && a && a.length > 0 && t.extend(r, {\n              resourceTiming: a\n            }), _this43.fire(new t.Event(\"data\", r));\n          });\n        }\n      }, {\n        key: \"loaded\",\n        value: function loaded() {\n          return 0 === this._pendingLoads;\n        }\n      }, {\n        key: \"loadTile\",\n        value: function loadTile(t, e) {\n          var _this44 = this;\n          var i = t.actor ? \"reloadTile\" : \"loadTile\";\n          t.actor = this.actor;\n          var o = {\n            type: this.type,\n            uid: t.uid,\n            tileID: t.tileID,\n            zoom: t.tileID.overscaledZ,\n            maxZoom: this.maxzoom,\n            tileSize: this.tileSize,\n            source: this.id,\n            pixelRatio: this.map.getPixelRatio(),\n            showCollisionBoxes: this.map.showCollisionBoxes,\n            promoteId: this.promoteId\n          };\n          t.request = this.actor.send(i, o, function (o, a) {\n            return delete t.request, t.unloadVectorData(), t.aborted ? e(null) : o ? e(o) : (t.loadVectorData(a, _this44.map.painter, \"reloadTile\" === i), e(null));\n          });\n        }\n      }, {\n        key: \"abortTile\",\n        value: function abortTile(t) {\n          t.request && (t.request.cancel(), delete t.request), t.aborted = !0;\n        }\n      }, {\n        key: \"unloadTile\",\n        value: function unloadTile(t) {\n          t.unloadVectorData(), this.actor.send(\"removeTile\", {\n            uid: t.uid,\n            type: this.type,\n            source: this.id\n          });\n        }\n      }, {\n        key: \"onRemove\",\n        value: function onRemove() {\n          this._removed = !0, this.actor.send(\"removeSource\", {\n            type: this.type,\n            source: this.id\n          });\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return t.extend({}, this._options, {\n            type: this.type,\n            data: this._data\n          });\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return !1;\n        }\n      }]);\n      return C;\n    }(t.Evented);\n    var S = t.createLayout([{\n      name: \"a_pos\",\n      type: \"Int16\",\n      components: 2\n    }, {\n      name: \"a_texture_pos\",\n      type: \"Int16\",\n      components: 2\n    }]);\n    var D = /*#__PURE__*/function (_t$Evented6) {\n      _inherits(D, _t$Evented6);\n      var _super83 = _createSuper(D);\n      function D(t, e, i, o) {\n        var _this45;\n        _classCallCheck(this, D);\n        _this45 = _super83.call(this), _this45.id = t, _this45.dispatcher = i, _this45.coordinates = e.coordinates, _this45.type = \"image\", _this45.minzoom = 0, _this45.maxzoom = 22, _this45.tileSize = 512, _this45.tiles = {}, _this45._loaded = !1, _this45.setEventedParent(o), _this45.options = e;\n        return _this45;\n      }\n      _createClass(D, [{\n        key: \"load\",\n        value: function load(e, i) {\n          var _this46 = this;\n          this._loaded = !1, this.fire(new t.Event(\"dataloading\", {\n            dataType: \"source\"\n          })), this.url = this.options.url, t.getImage(this.map._requestManager.transformRequest(this.url, t.ResourceType.Image), function (o, a) {\n            _this46._loaded = !0, o ? _this46.fire(new t.ErrorEvent(o)) : a && (_this46.image = a, e && (_this46.coordinates = e), i && i(), _this46._finishLoading());\n          });\n        }\n      }, {\n        key: \"loaded\",\n        value: function loaded() {\n          return this._loaded;\n        }\n      }, {\n        key: \"updateImage\",\n        value: function updateImage(t) {\n          var _this47 = this;\n          return this.image && t.url ? (this.options.url = t.url, this.load(t.coordinates, function () {\n            _this47.texture = null;\n          }), this) : this;\n        }\n      }, {\n        key: \"_finishLoading\",\n        value: function _finishLoading() {\n          this.map && (this.setCoordinates(this.coordinates), this.fire(new t.Event(\"data\", {\n            dataType: \"source\",\n            sourceDataType: \"metadata\"\n          })));\n        }\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          this.map = t, this.load();\n        }\n      }, {\n        key: \"setCoordinates\",\n        value: function setCoordinates(e) {\n          var _this48 = this;\n          this.coordinates = e;\n          var i = e.map(t.MercatorCoordinate.fromLngLat);\n          this.tileID = function (e) {\n            var i = 1 / 0,\n              o = 1 / 0,\n              a = -1 / 0,\n              r = -1 / 0;\n            var _iterator141 = _createForOfIteratorHelper(e),\n              _step141;\n            try {\n              for (_iterator141.s(); !(_step141 = _iterator141.n()).done;) {\n                var _t188 = _step141.value;\n                i = Math.min(i, _t188.x), o = Math.min(o, _t188.y), a = Math.max(a, _t188.x), r = Math.max(r, _t188.y);\n              }\n            } catch (err) {\n              _iterator141.e(err);\n            } finally {\n              _iterator141.f();\n            }\n            var s = Math.max(a - i, r - o),\n              n = Math.max(0, Math.floor(-Math.log(s) / Math.LN2)),\n              l = Math.pow(2, n);\n            return new t.CanonicalTileID(n, Math.floor((i + a) / 2 * l), Math.floor((o + r) / 2 * l));\n          }(i), this.minzoom = this.maxzoom = this.tileID.z;\n          var o = i.map(function (t) {\n            return _this48.tileID.getTilePoint(t)._round();\n          });\n          return this._boundsArray = new t.RasterBoundsArray(), this._boundsArray.emplaceBack(o[0].x, o[0].y, 0, 0), this._boundsArray.emplaceBack(o[1].x, o[1].y, t.EXTENT, 0), this._boundsArray.emplaceBack(o[3].x, o[3].y, 0, t.EXTENT), this._boundsArray.emplaceBack(o[2].x, o[2].y, t.EXTENT, t.EXTENT), this.boundsBuffer && (this.boundsBuffer.destroy(), delete this.boundsBuffer), this.fire(new t.Event(\"data\", {\n            dataType: \"source\",\n            sourceDataType: \"content\"\n          })), this;\n        }\n      }, {\n        key: \"prepare\",\n        value: function prepare() {\n          if (0 === Object.keys(this.tiles).length || !this.image) return;\n          var e = this.map.painter.context,\n            i = e.gl;\n          this.boundsBuffer || (this.boundsBuffer = e.createVertexBuffer(this._boundsArray, S.members)), this.boundsSegments || (this.boundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2)), this.texture || (this.texture = new l(e, this.image, i.RGBA), this.texture.bind(i.LINEAR, i.CLAMP_TO_EDGE));\n          for (var _t189 in this.tiles) {\n            var _e189 = this.tiles[_t189];\n            \"loaded\" !== _e189.state && (_e189.state = \"loaded\", _e189.texture = this.texture);\n          }\n        }\n      }, {\n        key: \"loadTile\",\n        value: function loadTile(t, e) {\n          this.tileID && this.tileID.equals(t.tileID.canonical) ? (this.tiles[String(t.tileID.wrap)] = t, t.buckets = {}, e(null)) : (t.state = \"errored\", e(null));\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return {\n            type: \"image\",\n            url: this.options.url,\n            coordinates: this.coordinates\n          };\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return !1;\n        }\n      }]);\n      return D;\n    }(t.Evented);\n    var z = /*#__PURE__*/function (_D) {\n      _inherits(z, _D);\n      var _super84 = _createSuper(z);\n      function z(t, e, i, o) {\n        var _this49;\n        _classCallCheck(this, z);\n        _this49 = _super84.call(this, t, e, i, o), _this49.roundZoom = !0, _this49.type = \"video\", _this49.options = e;\n        return _this49;\n      }\n      _createClass(z, [{\n        key: \"load\",\n        value: function load() {\n          var _this50 = this;\n          this._loaded = !1;\n          var e = this.options;\n          this.urls = [];\n          var _iterator142 = _createForOfIteratorHelper(e.urls),\n            _step142;\n          try {\n            for (_iterator142.s(); !(_step142 = _iterator142.n()).done;) {\n              var _i140 = _step142.value;\n              this.urls.push(this.map._requestManager.transformRequest(_i140, t.ResourceType.Source).url);\n            }\n          } catch (err) {\n            _iterator142.e(err);\n          } finally {\n            _iterator142.f();\n          }\n          t.getVideo(this.urls, function (e, i) {\n            _this50._loaded = !0, e ? _this50.fire(new t.ErrorEvent(e)) : i && (_this50.video = i, _this50.video.loop = !0, _this50.video.addEventListener(\"playing\", function () {\n              _this50.map.triggerRepaint();\n            }), _this50.map && _this50.video.play(), _this50._finishLoading());\n          });\n        }\n      }, {\n        key: \"pause\",\n        value: function pause() {\n          this.video && this.video.pause();\n        }\n      }, {\n        key: \"play\",\n        value: function play() {\n          this.video && this.video.play();\n        }\n      }, {\n        key: \"seek\",\n        value: function seek(e) {\n          if (this.video) {\n            var _i141 = this.video.seekable;\n            e < _i141.start(0) || e > _i141.end(0) ? this.fire(new t.ErrorEvent(new t.ValidationError(\"sources.\".concat(this.id), null, \"Playback for this video can be set only between the \".concat(_i141.start(0), \" and \").concat(_i141.end(0), \"-second mark.\")))) : this.video.currentTime = e;\n          }\n        }\n      }, {\n        key: \"getVideo\",\n        value: function getVideo() {\n          return this.video;\n        }\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          this.map || (this.map = t, this.load(), this.video && (this.video.play(), this.setCoordinates(this.coordinates)));\n        }\n      }, {\n        key: \"prepare\",\n        value: function prepare() {\n          if (0 === Object.keys(this.tiles).length || this.video.readyState < 2) return;\n          var e = this.map.painter.context,\n            i = e.gl;\n          this.boundsBuffer || (this.boundsBuffer = e.createVertexBuffer(this._boundsArray, S.members)), this.boundsSegments || (this.boundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2)), this.texture ? this.video.paused || (this.texture.bind(i.LINEAR, i.CLAMP_TO_EDGE), i.texSubImage2D(i.TEXTURE_2D, 0, 0, 0, i.RGBA, i.UNSIGNED_BYTE, this.video)) : (this.texture = new l(e, this.video, i.RGBA), this.texture.bind(i.LINEAR, i.CLAMP_TO_EDGE));\n          for (var _t190 in this.tiles) {\n            var _e190 = this.tiles[_t190];\n            \"loaded\" !== _e190.state && (_e190.state = \"loaded\", _e190.texture = this.texture);\n          }\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return {\n            type: \"video\",\n            urls: this.urls,\n            coordinates: this.coordinates\n          };\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return this.video && !this.video.paused;\n        }\n      }]);\n      return z;\n    }(D);\n    var P = /*#__PURE__*/function (_D2) {\n      _inherits(P, _D2);\n      var _super85 = _createSuper(P);\n      function P(e, i, o, a) {\n        var _this51;\n        _classCallCheck(this, P);\n        _this51 = _super85.call(this, e, i, o, a), i.coordinates ? Array.isArray(i.coordinates) && 4 === i.coordinates.length && !i.coordinates.some(function (t) {\n          return !Array.isArray(t) || 2 !== t.length || t.some(function (t) {\n            return \"number\" != typeof t;\n          });\n        }) || _this51.fire(new t.ErrorEvent(new t.ValidationError(\"sources.\".concat(e), null, '\"coordinates\" property must be an array of 4 longitude/latitude array pairs'))) : _this51.fire(new t.ErrorEvent(new t.ValidationError(\"sources.\".concat(e), null, 'missing required property \"coordinates\"'))), i.animate && \"boolean\" != typeof i.animate && _this51.fire(new t.ErrorEvent(new t.ValidationError(\"sources.\".concat(e), null, 'optional \"animate\" property must be a boolean value'))), i.canvas ? \"string\" == typeof i.canvas || i.canvas instanceof HTMLCanvasElement || _this51.fire(new t.ErrorEvent(new t.ValidationError(\"sources.\".concat(e), null, '\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))) : _this51.fire(new t.ErrorEvent(new t.ValidationError(\"sources.\".concat(e), null, 'missing required property \"canvas\"'))), _this51.options = i, _this51.animate = void 0 === i.animate || i.animate;\n        return _this51;\n      }\n      _createClass(P, [{\n        key: \"load\",\n        value: function load() {\n          this._loaded = !0, this.canvas || (this.canvas = this.options.canvas instanceof HTMLCanvasElement ? this.options.canvas : document.getElementById(this.options.canvas)), this.width = this.canvas.width, this.height = this.canvas.height, this._hasInvalidDimensions() ? this.fire(new t.ErrorEvent(new Error(\"Canvas dimensions cannot be less than or equal to zero.\"))) : (this.play = function () {\n            this._playing = !0, this.map.triggerRepaint();\n          }, this.pause = function () {\n            this._playing && (this.prepare(), this._playing = !1);\n          }, this._finishLoading());\n        }\n      }, {\n        key: \"getCanvas\",\n        value: function getCanvas() {\n          return this.canvas;\n        }\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          this.map = t, this.load(), this.canvas && this.animate && this.play();\n        }\n      }, {\n        key: \"onRemove\",\n        value: function onRemove() {\n          this.pause();\n        }\n      }, {\n        key: \"prepare\",\n        value: function prepare() {\n          var e = !1;\n          if (this.canvas.width !== this.width && (this.width = this.canvas.width, e = !0), this.canvas.height !== this.height && (this.height = this.canvas.height, e = !0), this._hasInvalidDimensions()) return;\n          if (0 === Object.keys(this.tiles).length) return;\n          var i = this.map.painter.context,\n            o = i.gl;\n          this.boundsBuffer || (this.boundsBuffer = i.createVertexBuffer(this._boundsArray, S.members)), this.boundsSegments || (this.boundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2)), this.texture ? (e || this._playing) && this.texture.update(this.canvas, {\n            premultiply: !0\n          }) : this.texture = new l(i, this.canvas, o.RGBA, {\n            premultiply: !0\n          });\n          for (var _t191 in this.tiles) {\n            var _e191 = this.tiles[_t191];\n            \"loaded\" !== _e191.state && (_e191.state = \"loaded\", _e191.texture = this.texture);\n          }\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return {\n            type: \"canvas\",\n            coordinates: this.coordinates\n          };\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return this._playing;\n        }\n      }, {\n        key: \"_hasInvalidDimensions\",\n        value: function _hasInvalidDimensions() {\n          for (var _i142 = 0, _arr = [this.canvas.width, this.canvas.height]; _i142 < _arr.length; _i142++) {\n            var _t192 = _arr[_i142];\n            if (isNaN(_t192) || _t192 <= 0) return !0;\n          }\n          return !1;\n        }\n      }]);\n      return P;\n    }(D);\n    var M = {\n      vector: w,\n      raster: T,\n      \"raster-dem\": I,\n      geojson: C,\n      video: z,\n      image: D,\n      canvas: P\n    };\n    function A(e, i) {\n      var o = t.create();\n      return t.translate(o, o, [1, 1, 0]), t.scale(o, o, [.5 * e.width, .5 * e.height, 1]), t.multiply(o, o, e.calculatePosMatrix(i.toUnwrapped()));\n    }\n    function L(t, e, i, o, a, r) {\n      var s = function (t, e, i) {\n          if (t) {\n            var _iterator143 = _createForOfIteratorHelper(t),\n              _step143;\n            try {\n              for (_iterator143.s(); !(_step143 = _iterator143.n()).done;) {\n                var _o62 = _step143.value;\n                var _t193 = e[_o62];\n                if (_t193 && _t193.source === i && \"fill-extrusion\" === _t193.type) return !0;\n              }\n            } catch (err) {\n              _iterator143.e(err);\n            } finally {\n              _iterator143.f();\n            }\n          } else for (var _t194 in e) {\n            var _o63 = e[_t194];\n            if (_o63.source === i && \"fill-extrusion\" === _o63.type) return !0;\n          }\n          return !1;\n        }(a && a.layers, e, t.id),\n        n = r.maxPitchScaleFactor(),\n        l = t.tilesIn(o, n, s);\n      l.sort(R);\n      var c = [];\n      var _iterator144 = _createForOfIteratorHelper(l),\n        _step144;\n      try {\n        for (_iterator144.s(); !(_step144 = _iterator144.n()).done;) {\n          var _o66 = _step144.value;\n          c.push({\n            wrappedTileID: _o66.tileID.wrapped().key,\n            queryResults: _o66.tile.queryRenderedFeatures(e, i, t._state, _o66.queryGeometry, _o66.cameraQueryGeometry, _o66.scale, a, r, n, A(t.transform, _o66.tileID))\n          });\n        }\n      } catch (err) {\n        _iterator144.e(err);\n      } finally {\n        _iterator144.f();\n      }\n      var h = function (t) {\n        var e = {},\n          i = {};\n        var _iterator145 = _createForOfIteratorHelper(t),\n          _step145;\n        try {\n          for (_iterator145.s(); !(_step145 = _iterator145.n()).done;) {\n            var _o64 = _step145.value;\n            var _t195 = _o64.queryResults,\n              _a88 = _o64.wrappedTileID,\n              _r166 = i[_a88] = i[_a88] || {};\n            for (var _i143 in _t195) {\n              var _o65 = _t195[_i143],\n                _a89 = _r166[_i143] = _r166[_i143] || {},\n                _s80 = e[_i143] = e[_i143] || [];\n              var _iterator146 = _createForOfIteratorHelper(_o65),\n                _step146;\n              try {\n                for (_iterator146.s(); !(_step146 = _iterator146.n()).done;) {\n                  var _t196 = _step146.value;\n                  _a89[_t196.featureIndex] || (_a89[_t196.featureIndex] = !0, _s80.push(_t196));\n                }\n              } catch (err) {\n                _iterator146.e(err);\n              } finally {\n                _iterator146.f();\n              }\n            }\n          }\n        } catch (err) {\n          _iterator145.e(err);\n        } finally {\n          _iterator145.f();\n        }\n        return e;\n      }(c);\n      for (var _e192 in h) h[_e192].forEach(function (e) {\n        var i = e.feature,\n          o = t.getFeatureState(i.layer[\"source-layer\"], i.id);\n        i.source = i.layer.source, i.layer[\"source-layer\"] && (i.sourceLayer = i.layer[\"source-layer\"]), i.state = o;\n      });\n      return h;\n    }\n    function R(t, e) {\n      var i = t.tileID,\n        o = e.tileID;\n      return i.overscaledZ - o.overscaledZ || i.canonical.y - o.canonical.y || i.wrap - o.wrap || i.canonical.x - o.canonical.x;\n    }\n    var k = /*#__PURE__*/function () {\n      function k(e, i) {\n        _classCallCheck(this, k);\n        this.tileID = e, this.uid = t.uniqueId(), this.uses = 0, this.tileSize = i, this.buckets = {}, this.expirationTime = null, this.queryPadding = 0, this.hasSymbolBuckets = !1, this.hasRTLText = !1, this.dependencies = {}, this.textures = [], this.textureCoords = {}, this.expiredRequestCount = 0, this.state = \"loading\";\n      }\n      _createClass(k, [{\n        key: \"registerFadeDuration\",\n        value: function registerFadeDuration(e) {\n          var i = e + this.timeAdded;\n          i < t.exported.now() || this.fadeEndTime && i < this.fadeEndTime || (this.fadeEndTime = i);\n        }\n      }, {\n        key: \"wasRequested\",\n        value: function wasRequested() {\n          return \"errored\" === this.state || \"loaded\" === this.state || \"reloading\" === this.state;\n        }\n      }, {\n        key: \"clearTextures\",\n        value: function clearTextures(t) {\n          this.demTexture && t.saveTileTexture(this.demTexture), this.textures.forEach(function (e) {\n            return t.saveTileTexture(e);\n          }), this.demTexture = null, this.textures = [], this.textureCoords = {};\n        }\n      }, {\n        key: \"loadVectorData\",\n        value: function loadVectorData(e, i, o) {\n          if (this.hasData() && this.unloadVectorData(), this.state = \"loaded\", e) {\n            e.featureIndex && (this.latestFeatureIndex = e.featureIndex, e.rawTileData ? (this.latestRawTileData = e.rawTileData, this.latestFeatureIndex.rawTileData = e.rawTileData) : this.latestRawTileData && (this.latestFeatureIndex.rawTileData = this.latestRawTileData)), this.collisionBoxArray = e.collisionBoxArray, this.buckets = function (t, e) {\n              var i = {};\n              if (!e) return i;\n              var _iterator147 = _createForOfIteratorHelper(t),\n                _step147;\n              try {\n                var _loop3 = function _loop3() {\n                  var o = _step147.value;\n                  var t = o.layerIds.map(function (t) {\n                    return e.getLayer(t);\n                  }).filter(Boolean);\n                  if (0 !== t.length) {\n                    o.layers = t, o.stateDependentLayerIds && (o.stateDependentLayers = o.stateDependentLayerIds.map(function (e) {\n                      return t.filter(function (t) {\n                        return t.id === e;\n                      })[0];\n                    }));\n                    var _iterator148 = _createForOfIteratorHelper(t),\n                      _step148;\n                    try {\n                      for (_iterator148.s(); !(_step148 = _iterator148.n()).done;) {\n                        var _e193 = _step148.value;\n                        i[_e193.id] = o;\n                      }\n                    } catch (err) {\n                      _iterator148.e(err);\n                    } finally {\n                      _iterator148.f();\n                    }\n                  }\n                };\n                for (_iterator147.s(); !(_step147 = _iterator147.n()).done;) {\n                  _loop3();\n                }\n              } catch (err) {\n                _iterator147.e(err);\n              } finally {\n                _iterator147.f();\n              }\n              return i;\n            }(e.buckets, i.style), this.hasSymbolBuckets = !1;\n            for (var _e194 in this.buckets) {\n              var _i144 = this.buckets[_e194];\n              if (_i144 instanceof t.SymbolBucket) {\n                if (this.hasSymbolBuckets = !0, !o) break;\n                _i144.justReloaded = !0;\n              }\n            }\n            if (this.hasRTLText = !1, this.hasSymbolBuckets) for (var _e195 in this.buckets) {\n              var _i145 = this.buckets[_e195];\n              if (_i145 instanceof t.SymbolBucket && _i145.hasRTLText) {\n                this.hasRTLText = !0, t.lazyLoadRTLTextPlugin();\n                break;\n              }\n            }\n            this.queryPadding = 0;\n            for (var _t197 in this.buckets) {\n              var _e196 = this.buckets[_t197];\n              this.queryPadding = Math.max(this.queryPadding, i.style.getLayer(_t197).queryRadius(_e196));\n            }\n            e.imageAtlas && (this.imageAtlas = e.imageAtlas), e.glyphAtlasImage && (this.glyphAtlasImage = e.glyphAtlasImage);\n          } else this.collisionBoxArray = new t.CollisionBoxArray();\n        }\n      }, {\n        key: \"unloadVectorData\",\n        value: function unloadVectorData() {\n          for (var _t198 in this.buckets) this.buckets[_t198].destroy();\n          this.buckets = {}, this.imageAtlasTexture && this.imageAtlasTexture.destroy(), this.imageAtlas && (this.imageAtlas = null), this.glyphAtlasTexture && this.glyphAtlasTexture.destroy(), this.latestFeatureIndex = null, this.state = \"unloaded\";\n        }\n      }, {\n        key: \"getBucket\",\n        value: function getBucket(t) {\n          return this.buckets[t.id];\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          for (var _e197 in this.buckets) {\n            var _i146 = this.buckets[_e197];\n            _i146.uploadPending() && _i146.upload(t);\n          }\n          var e = t.gl;\n          this.imageAtlas && !this.imageAtlas.uploaded && (this.imageAtlasTexture = new l(t, this.imageAtlas.image, e.RGBA), this.imageAtlas.uploaded = !0), this.glyphAtlasImage && (this.glyphAtlasTexture = new l(t, this.glyphAtlasImage, e.ALPHA), this.glyphAtlasImage = null);\n        }\n      }, {\n        key: \"prepare\",\n        value: function prepare(t) {\n          this.imageAtlas && this.imageAtlas.patchUpdatedImages(t, this.imageAtlasTexture);\n        }\n      }, {\n        key: \"queryRenderedFeatures\",\n        value: function queryRenderedFeatures(t, e, i, o, a, r, s, n, l, c) {\n          return this.latestFeatureIndex && this.latestFeatureIndex.rawTileData ? this.latestFeatureIndex.query({\n            queryGeometry: o,\n            cameraQueryGeometry: a,\n            scale: r,\n            tileSize: this.tileSize,\n            pixelPosMatrix: c,\n            transform: n,\n            params: s,\n            queryPadding: this.queryPadding * l\n          }, t, e, i) : {};\n        }\n      }, {\n        key: \"querySourceFeatures\",\n        value: function querySourceFeatures(e, i) {\n          var o = this.latestFeatureIndex;\n          if (!o || !o.rawTileData) return;\n          var a = o.loadVTLayers(),\n            r = i ? i.sourceLayer : \"\",\n            s = a._geojsonTileLayer || a[r];\n          if (!s) return;\n          var n = t.createFilter(i && i.filter),\n            _this$tileID$canonica = this.tileID.canonical,\n            l = _this$tileID$canonica.z,\n            c = _this$tileID$canonica.x,\n            h = _this$tileID$canonica.y,\n            u = {\n              z: l,\n              x: c,\n              y: h\n            };\n          for (var _i147 = 0; _i147 < s.length; _i147++) {\n            var _a90 = s.feature(_i147);\n            if (n.needGeometry) {\n              var _e198 = t.toEvaluationFeature(_a90, !0);\n              if (!n.filter(new t.EvaluationParameters(this.tileID.overscaledZ), _e198, this.tileID.canonical)) continue;\n            } else if (!n.filter(new t.EvaluationParameters(this.tileID.overscaledZ), _a90)) continue;\n            var _d10 = o.getId(_a90, r),\n              _m12 = new t.GeoJSONFeature(_a90, l, c, h, _d10);\n            _m12.tile = u, e.push(_m12);\n          }\n        }\n      }, {\n        key: \"hasData\",\n        value: function hasData() {\n          return \"loaded\" === this.state || \"reloading\" === this.state || \"expired\" === this.state;\n        }\n      }, {\n        key: \"patternsLoaded\",\n        value: function patternsLoaded() {\n          return this.imageAtlas && !!Object.keys(this.imageAtlas.patternPositions).length;\n        }\n      }, {\n        key: \"setExpiryData\",\n        value: function setExpiryData(e) {\n          var i = this.expirationTime;\n          if (e.cacheControl) {\n            var _i148 = t.parseCacheControl(e.cacheControl);\n            _i148[\"max-age\"] && (this.expirationTime = Date.now() + 1e3 * _i148[\"max-age\"]);\n          } else e.expires && (this.expirationTime = new Date(e.expires).getTime());\n          if (this.expirationTime) {\n            var _t199 = Date.now();\n            var _e199 = !1;\n            if (this.expirationTime > _t199) _e199 = !1;else if (i) {\n              if (this.expirationTime < i) _e199 = !0;else {\n                var _o67 = this.expirationTime - i;\n                _o67 ? this.expirationTime = _t199 + Math.max(_o67, 3e4) : _e199 = !0;\n              }\n            } else _e199 = !0;\n            _e199 ? (this.expiredRequestCount++, this.state = \"expired\") : this.expiredRequestCount = 0;\n          }\n        }\n      }, {\n        key: \"getExpiryTimeout\",\n        value: function getExpiryTimeout() {\n          if (this.expirationTime) return this.expiredRequestCount ? 1e3 * (1 << Math.min(this.expiredRequestCount - 1, 31)) : Math.min(this.expirationTime - new Date().getTime(), Math.pow(2, 31) - 1);\n        }\n      }, {\n        key: \"setFeatureState\",\n        value: function setFeatureState(t, e) {\n          if (!this.latestFeatureIndex || !this.latestFeatureIndex.rawTileData || 0 === Object.keys(t).length) return;\n          var i = this.latestFeatureIndex.loadVTLayers();\n          for (var _o68 in this.buckets) {\n            if (!e.style.hasLayer(_o68)) continue;\n            var _a91 = this.buckets[_o68],\n              _r167 = _a91.layers[0].sourceLayer || \"_geojsonTileLayer\",\n              _s81 = i[_r167],\n              _n121 = t[_r167];\n            if (!_s81 || !_n121 || 0 === Object.keys(_n121).length) continue;\n            _a91.update(_n121, _s81, this.imageAtlas && this.imageAtlas.patternPositions || {});\n            var _l44 = e && e.style && e.style.getLayer(_o68);\n            _l44 && (this.queryPadding = Math.max(this.queryPadding, _l44.queryRadius(_a91)));\n          }\n        }\n      }, {\n        key: \"holdingForFade\",\n        value: function holdingForFade() {\n          return void 0 !== this.symbolFadeHoldUntil;\n        }\n      }, {\n        key: \"symbolFadeFinished\",\n        value: function symbolFadeFinished() {\n          return !this.symbolFadeHoldUntil || this.symbolFadeHoldUntil < t.exported.now();\n        }\n      }, {\n        key: \"clearFadeHold\",\n        value: function clearFadeHold() {\n          this.symbolFadeHoldUntil = void 0;\n        }\n      }, {\n        key: \"setHoldDuration\",\n        value: function setHoldDuration(e) {\n          this.symbolFadeHoldUntil = t.exported.now() + e;\n        }\n      }, {\n        key: \"setDependencies\",\n        value: function setDependencies(t, e) {\n          var i = {};\n          var _iterator149 = _createForOfIteratorHelper(e),\n            _step149;\n          try {\n            for (_iterator149.s(); !(_step149 = _iterator149.n()).done;) {\n              var _t200 = _step149.value;\n              i[_t200] = !0;\n            }\n          } catch (err) {\n            _iterator149.e(err);\n          } finally {\n            _iterator149.f();\n          }\n          this.dependencies[t] = i;\n        }\n      }, {\n        key: \"hasDependency\",\n        value: function hasDependency(t, e) {\n          var _iterator150 = _createForOfIteratorHelper(t),\n            _step150;\n          try {\n            for (_iterator150.s(); !(_step150 = _iterator150.n()).done;) {\n              var _i149 = _step150.value;\n              var _t201 = this.dependencies[_i149];\n              if (_t201) {\n                var _iterator151 = _createForOfIteratorHelper(e),\n                  _step151;\n                try {\n                  for (_iterator151.s(); !(_step151 = _iterator151.n()).done;) {\n                    var _i150 = _step151.value;\n                    if (_t201[_i150]) return !0;\n                  }\n                } catch (err) {\n                  _iterator151.e(err);\n                } finally {\n                  _iterator151.f();\n                }\n              }\n            }\n          } catch (err) {\n            _iterator150.e(err);\n          } finally {\n            _iterator150.f();\n          }\n          return !1;\n        }\n      }]);\n      return k;\n    }();\n    var B = /*#__PURE__*/function () {\n      function B(t, e) {\n        _classCallCheck(this, B);\n        this.max = t, this.onRemove = e, this.reset();\n      }\n      _createClass(B, [{\n        key: \"reset\",\n        value: function reset() {\n          for (var _t202 in this.data) {\n            var _iterator152 = _createForOfIteratorHelper(this.data[_t202]),\n              _step152;\n            try {\n              for (_iterator152.s(); !(_step152 = _iterator152.n()).done;) {\n                var _e200 = _step152.value;\n                _e200.timeout && clearTimeout(_e200.timeout), this.onRemove(_e200.value);\n              }\n            } catch (err) {\n              _iterator152.e(err);\n            } finally {\n              _iterator152.f();\n            }\n          }\n          return this.data = {}, this.order = [], this;\n        }\n      }, {\n        key: \"add\",\n        value: function add(t, e, i) {\n          var _this52 = this;\n          var o = t.wrapped().key;\n          void 0 === this.data[o] && (this.data[o] = []);\n          var a = {\n            value: e,\n            timeout: void 0\n          };\n          if (void 0 !== i && (a.timeout = setTimeout(function () {\n            _this52.remove(t, a);\n          }, i)), this.data[o].push(a), this.order.push(o), this.order.length > this.max) {\n            var _t203 = this._getAndRemoveByKey(this.order[0]);\n            _t203 && this.onRemove(_t203);\n          }\n          return this;\n        }\n      }, {\n        key: \"has\",\n        value: function has(t) {\n          return t.wrapped().key in this.data;\n        }\n      }, {\n        key: \"getAndRemove\",\n        value: function getAndRemove(t) {\n          return this.has(t) ? this._getAndRemoveByKey(t.wrapped().key) : null;\n        }\n      }, {\n        key: \"_getAndRemoveByKey\",\n        value: function _getAndRemoveByKey(t) {\n          var e = this.data[t].shift();\n          return e.timeout && clearTimeout(e.timeout), 0 === this.data[t].length && delete this.data[t], this.order.splice(this.order.indexOf(t), 1), e.value;\n        }\n      }, {\n        key: \"getByKey\",\n        value: function getByKey(t) {\n          var e = this.data[t];\n          return e ? e[0].value : null;\n        }\n      }, {\n        key: \"get\",\n        value: function get(t) {\n          return this.has(t) ? this.data[t.wrapped().key][0].value : null;\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(t, e) {\n          if (!this.has(t)) return this;\n          var i = t.wrapped().key,\n            o = void 0 === e ? 0 : this.data[i].indexOf(e),\n            a = this.data[i][o];\n          return this.data[i].splice(o, 1), a.timeout && clearTimeout(a.timeout), 0 === this.data[i].length && delete this.data[i], this.onRemove(a.value), this.order.splice(this.order.indexOf(i), 1), this;\n        }\n      }, {\n        key: \"setMaxSize\",\n        value: function setMaxSize(t) {\n          for (this.max = t; this.order.length > this.max;) {\n            var _t204 = this._getAndRemoveByKey(this.order[0]);\n            _t204 && this.onRemove(_t204);\n          }\n          return this;\n        }\n      }, {\n        key: \"filter\",\n        value: function filter(t) {\n          var e = [];\n          for (var _i151 in this.data) {\n            var _iterator153 = _createForOfIteratorHelper(this.data[_i151]),\n              _step153;\n            try {\n              for (_iterator153.s(); !(_step153 = _iterator153.n()).done;) {\n                var _o69 = _step153.value;\n                t(_o69.value) || e.push(_o69);\n              }\n            } catch (err) {\n              _iterator153.e(err);\n            } finally {\n              _iterator153.f();\n            }\n          }\n          for (var _i152 = 0, _e201 = e; _i152 < _e201.length; _i152++) {\n            var _t205 = _e201[_i152];\n            this.remove(_t205.value.tileID, _t205);\n          }\n        }\n      }]);\n      return B;\n    }();\n    var F = /*#__PURE__*/function () {\n      function F() {\n        _classCallCheck(this, F);\n        this.state = {}, this.stateChanges = {}, this.deletedStates = {};\n      }\n      _createClass(F, [{\n        key: \"updateState\",\n        value: function updateState(e, i, o) {\n          var a = String(i);\n          if (this.stateChanges[e] = this.stateChanges[e] || {}, this.stateChanges[e][a] = this.stateChanges[e][a] || {}, t.extend(this.stateChanges[e][a], o), null === this.deletedStates[e]) {\n            this.deletedStates[e] = {};\n            for (var _t206 in this.state[e]) _t206 !== a && (this.deletedStates[e][_t206] = null);\n          } else if (this.deletedStates[e] && null === this.deletedStates[e][a]) {\n            this.deletedStates[e][a] = {};\n            for (var _t207 in this.state[e][a]) o[_t207] || (this.deletedStates[e][a][_t207] = null);\n          } else for (var _t208 in o) this.deletedStates[e] && this.deletedStates[e][a] && null === this.deletedStates[e][a][_t208] && delete this.deletedStates[e][a][_t208];\n        }\n      }, {\n        key: \"removeFeatureState\",\n        value: function removeFeatureState(t, e, i) {\n          if (null === this.deletedStates[t]) return;\n          var o = String(e);\n          if (this.deletedStates[t] = this.deletedStates[t] || {}, i && void 0 !== e) null !== this.deletedStates[t][o] && (this.deletedStates[t][o] = this.deletedStates[t][o] || {}, this.deletedStates[t][o][i] = null);else if (void 0 !== e) {\n            if (this.stateChanges[t] && this.stateChanges[t][o]) for (i in this.deletedStates[t][o] = {}, this.stateChanges[t][o]) this.deletedStates[t][o][i] = null;else this.deletedStates[t][o] = null;\n          } else this.deletedStates[t] = null;\n        }\n      }, {\n        key: \"getState\",\n        value: function getState(e, i) {\n          var o = String(i),\n            a = t.extend({}, (this.state[e] || {})[o], (this.stateChanges[e] || {})[o]);\n          if (null === this.deletedStates[e]) return {};\n          if (this.deletedStates[e]) {\n            var _t209 = this.deletedStates[e][i];\n            if (null === _t209) return {};\n            for (var _e202 in _t209) delete a[_e202];\n          }\n          return a;\n        }\n      }, {\n        key: \"initializeTileState\",\n        value: function initializeTileState(t, e) {\n          t.setFeatureState(this.state, e);\n        }\n      }, {\n        key: \"coalesceChanges\",\n        value: function coalesceChanges(e, i) {\n          var o = {};\n          for (var _e203 in this.stateChanges) {\n            this.state[_e203] = this.state[_e203] || {};\n            var _i153 = {};\n            for (var _o70 in this.stateChanges[_e203]) this.state[_e203][_o70] || (this.state[_e203][_o70] = {}), t.extend(this.state[_e203][_o70], this.stateChanges[_e203][_o70]), _i153[_o70] = this.state[_e203][_o70];\n            o[_e203] = _i153;\n          }\n          for (var _e204 in this.deletedStates) {\n            this.state[_e204] = this.state[_e204] || {};\n            var _i154 = {};\n            if (null === this.deletedStates[_e204]) for (var _t210 in this.state[_e204]) _i154[_t210] = {}, this.state[_e204][_t210] = {};else for (var _t211 in this.deletedStates[_e204]) {\n              if (null === this.deletedStates[_e204][_t211]) this.state[_e204][_t211] = {};else for (var _i155 = 0, _Object$keys9 = Object.keys(this.deletedStates[_e204][_t211]); _i155 < _Object$keys9.length; _i155++) {\n                var _i156 = _Object$keys9[_i155];\n                delete this.state[_e204][_t211][_i156];\n              }\n              _i154[_t211] = this.state[_e204][_t211];\n            }\n            o[_e204] = o[_e204] || {}, t.extend(o[_e204], _i154);\n          }\n          if (this.stateChanges = {}, this.deletedStates = {}, 0 !== Object.keys(o).length) for (var _t212 in e) e[_t212].setFeatureState(o, i);\n        }\n      }]);\n      return F;\n    }();\n    var O = /*#__PURE__*/function (_t$Evented7) {\n      _inherits(O, _t$Evented7);\n      var _super86 = _createSuper(O);\n      function O(e, i, o) {\n        var _this53;\n        _classCallCheck(this, O);\n        _this53 = _super86.call(this), _this53.id = e, _this53.dispatcher = o, _this53.on(\"data\", function (t) {\n          \"source\" === t.dataType && \"metadata\" === t.sourceDataType && (_this53._sourceLoaded = !0), _this53._sourceLoaded && !_this53._paused && \"source\" === t.dataType && \"content\" === t.sourceDataType && (_this53.reload(), _this53.transform && _this53.update(_this53.transform, _this53.terrain));\n        }), _this53.on(\"dataloading\", function () {\n          _this53._sourceErrored = !1;\n        }), _this53.on(\"error\", function () {\n          _this53._sourceErrored = _this53._source.loaded();\n        }), _this53._source = function (e, i, o, a) {\n          var r = new M[i.type](e, i, o, a);\n          if (r.id !== e) throw new Error(\"Expected Source id to be \".concat(e, \" instead of \").concat(r.id));\n          return t.bindAll([\"load\", \"abort\", \"unload\", \"serialize\", \"prepare\"], r), r;\n        }(e, i, o, _assertThisInitialized(_this53)), _this53._tiles = {}, _this53._cache = new B(0, _this53._unloadTile.bind(_assertThisInitialized(_this53))), _this53._timers = {}, _this53._cacheTimers = {}, _this53._maxTileCacheSize = null, _this53._loadedParentTiles = {}, _this53._coveredTiles = {}, _this53._state = new F();\n        return _this53;\n      }\n      _createClass(O, [{\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          this.map = t, this._maxTileCacheSize = t ? t._maxTileCacheSize : null, this._source && this._source.onAdd && this._source.onAdd(t);\n        }\n      }, {\n        key: \"onRemove\",\n        value: function onRemove(t) {\n          this.clearTiles(), this._source && this._source.onRemove && this._source.onRemove(t);\n        }\n      }, {\n        key: \"loaded\",\n        value: function loaded() {\n          if (this._sourceErrored) return !0;\n          if (!this._sourceLoaded) return !1;\n          if (!this._source.loaded()) return !1;\n          for (var _t213 in this._tiles) {\n            var _e205 = this._tiles[_t213];\n            if (\"loaded\" !== _e205.state && \"errored\" !== _e205.state) return !1;\n          }\n          return !0;\n        }\n      }, {\n        key: \"getSource\",\n        value: function getSource() {\n          return this._source;\n        }\n      }, {\n        key: \"pause\",\n        value: function pause() {\n          this._paused = !0;\n        }\n      }, {\n        key: \"resume\",\n        value: function resume() {\n          if (!this._paused) return;\n          var t = this._shouldReloadOnResume;\n          this._paused = !1, this._shouldReloadOnResume = !1, t && this.reload(), this.transform && this.update(this.transform, this.terrain);\n        }\n      }, {\n        key: \"_loadTile\",\n        value: function _loadTile(t, e) {\n          return this._source.loadTile(t, e);\n        }\n      }, {\n        key: \"_unloadTile\",\n        value: function _unloadTile(t) {\n          if (this._source.unloadTile) return this._source.unloadTile(t, function () {});\n        }\n      }, {\n        key: \"_abortTile\",\n        value: function _abortTile(e) {\n          this._source.abortTile && this._source.abortTile(e, function () {}), this._source.fire(new t.Event(\"dataabort\", {\n            tile: e,\n            coord: e.tileID,\n            dataType: \"source\"\n          }));\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return this._source.serialize();\n        }\n      }, {\n        key: \"prepare\",\n        value: function prepare(t) {\n          this._source.prepare && this._source.prepare(), this._state.coalesceChanges(this._tiles, this.map ? this.map.painter : null);\n          for (var _e206 in this._tiles) {\n            var _i157 = this._tiles[_e206];\n            _i157.upload(t), _i157.prepare(this.map.style.imageManager);\n          }\n        }\n      }, {\n        key: \"getIds\",\n        value: function getIds() {\n          return Object.values(this._tiles).map(function (t) {\n            return t.tileID;\n          }).sort(U).map(function (t) {\n            return t.key;\n          });\n        }\n      }, {\n        key: \"getRenderableIds\",\n        value: function getRenderableIds(e) {\n          var _this54 = this;\n          var i = [];\n          for (var _t214 in this._tiles) this._isIdRenderable(_t214, e) && i.push(this._tiles[_t214]);\n          return e ? i.sort(function (e, i) {\n            var o = e.tileID,\n              a = i.tileID,\n              r = new t.pointGeometry(o.canonical.x, o.canonical.y)._rotate(_this54.transform.angle),\n              s = new t.pointGeometry(a.canonical.x, a.canonical.y)._rotate(_this54.transform.angle);\n            return o.overscaledZ - a.overscaledZ || s.y - r.y || s.x - r.x;\n          }).map(function (t) {\n            return t.tileID.key;\n          }) : i.map(function (t) {\n            return t.tileID;\n          }).sort(U).map(function (t) {\n            return t.key;\n          });\n        }\n      }, {\n        key: \"hasRenderableParent\",\n        value: function hasRenderableParent(t) {\n          var e = this.findLoadedParent(t, 0);\n          return !!e && this._isIdRenderable(e.tileID.key);\n        }\n      }, {\n        key: \"_isIdRenderable\",\n        value: function _isIdRenderable(t, e) {\n          return this._tiles[t] && this._tiles[t].hasData() && !this._coveredTiles[t] && (e || !this._tiles[t].holdingForFade());\n        }\n      }, {\n        key: \"reload\",\n        value: function reload() {\n          if (this._paused) this._shouldReloadOnResume = !0;else {\n            this._cache.reset();\n            for (var _t215 in this._tiles) \"errored\" !== this._tiles[_t215].state && this._reloadTile(_t215, \"reloading\");\n          }\n        }\n      }, {\n        key: \"_reloadTile\",\n        value: function _reloadTile(t, e) {\n          var i = this._tiles[t];\n          i && (\"loading\" !== i.state && (i.state = e), this._loadTile(i, this._tileLoaded.bind(this, i, t, e)));\n        }\n      }, {\n        key: \"_tileLoaded\",\n        value: function _tileLoaded(e, i, o, a) {\n          if (a) return e.state = \"errored\", void (404 !== a.status ? this._source.fire(new t.ErrorEvent(a, {\n            tile: e\n          })) : this.update(this.transform, this.terrain));\n          e.timeAdded = t.exported.now(), \"expired\" === o && (e.refreshedUponExpiration = !0), this._setTileReloadTimer(i, e), \"raster-dem\" === this.getSource().type && e.dem && this._backfillDEM(e), this._state.initializeTileState(e, this.map ? this.map.painter : null), e.aborted || this._source.fire(new t.Event(\"data\", {\n            dataType: \"source\",\n            tile: e,\n            coord: e.tileID\n          }));\n        }\n      }, {\n        key: \"_backfillDEM\",\n        value: function _backfillDEM(t) {\n          var e = this.getRenderableIds();\n          for (var _o71 = 0; _o71 < e.length; _o71++) {\n            var _a92 = e[_o71];\n            if (t.neighboringTiles && t.neighboringTiles[_a92]) {\n              var _e207 = this.getTileByID(_a92);\n              i(t, _e207), i(_e207, t);\n            }\n          }\n          function i(t, e) {\n            t.needsHillshadePrepare = !0, t.needsTerrainPrepare = !0;\n            var i = e.tileID.canonical.x - t.tileID.canonical.x;\n            var o = e.tileID.canonical.y - t.tileID.canonical.y,\n              a = Math.pow(2, t.tileID.canonical.z),\n              r = e.tileID.key;\n            0 === i && 0 === o || Math.abs(o) > 1 || (Math.abs(i) > 1 && (1 === Math.abs(i + a) ? i += a : 1 === Math.abs(i - a) && (i -= a)), e.dem && t.dem && (t.dem.backfillBorder(e.dem, i, o), t.neighboringTiles && t.neighboringTiles[r] && (t.neighboringTiles[r].backfilled = !0)));\n          }\n        }\n      }, {\n        key: \"getTile\",\n        value: function getTile(t) {\n          return this.getTileByID(t.key);\n        }\n      }, {\n        key: \"getTileByID\",\n        value: function getTileByID(t) {\n          return this._tiles[t];\n        }\n      }, {\n        key: \"_retainLoadedChildren\",\n        value: function _retainLoadedChildren(t, e, i, o) {\n          for (var _a93 in this._tiles) {\n            var _r168 = this._tiles[_a93];\n            if (o[_a93] || !_r168.hasData() || _r168.tileID.overscaledZ <= e || _r168.tileID.overscaledZ > i) continue;\n            var _s82 = _r168.tileID;\n            for (; _r168 && _r168.tileID.overscaledZ > e + 1;) {\n              var _t216 = _r168.tileID.scaledTo(_r168.tileID.overscaledZ - 1);\n              _r168 = this._tiles[_t216.key], _r168 && _r168.hasData() && (_s82 = _t216);\n            }\n            var _n122 = _s82;\n            for (; _n122.overscaledZ > e;) if (_n122 = _n122.scaledTo(_n122.overscaledZ - 1), t[_n122.key]) {\n              o[_s82.key] = _s82;\n              break;\n            }\n          }\n        }\n      }, {\n        key: \"findLoadedParent\",\n        value: function findLoadedParent(t, e) {\n          if (t.key in this._loadedParentTiles) {\n            var _i158 = this._loadedParentTiles[t.key];\n            return _i158 && _i158.tileID.overscaledZ >= e ? _i158 : null;\n          }\n          for (var _i159 = t.overscaledZ - 1; _i159 >= e; _i159--) {\n            var _e208 = t.scaledTo(_i159),\n              _o72 = this._getLoadedTile(_e208);\n            if (_o72) return _o72;\n          }\n        }\n      }, {\n        key: \"_getLoadedTile\",\n        value: function _getLoadedTile(t) {\n          var e = this._tiles[t.key];\n          return e && e.hasData() ? e : this._cache.getByKey(t.wrapped().key);\n        }\n      }, {\n        key: \"updateCacheSize\",\n        value: function updateCacheSize(t) {\n          var e = Math.ceil(t.width / this._source.tileSize) + 1,\n            i = Math.ceil(t.height / this._source.tileSize) + 1,\n            o = Math.floor(e * i * 5),\n            a = \"number\" == typeof this._maxTileCacheSize ? Math.min(this._maxTileCacheSize, o) : o;\n          this._cache.setMaxSize(a);\n        }\n      }, {\n        key: \"handleWrapJump\",\n        value: function handleWrapJump(t) {\n          var e = Math.round((t - (void 0 === this._prevLng ? t : this._prevLng)) / 360);\n          if (this._prevLng = t, e) {\n            var _t217 = {};\n            for (var _i160 in this._tiles) {\n              var _o73 = this._tiles[_i160];\n              _o73.tileID = _o73.tileID.unwrapTo(_o73.tileID.wrap + e), _t217[_o73.tileID.key] = _o73;\n            }\n            this._tiles = _t217;\n            for (var _t218 in this._timers) clearTimeout(this._timers[_t218]), delete this._timers[_t218];\n            for (var _t219 in this._tiles) this._setTileReloadTimer(_t219, this._tiles[_t219]);\n          }\n        }\n      }, {\n        key: \"update\",\n        value: function update(e, i) {\n          var _this55 = this;\n          if (this.transform = e, this.terrain = i, !this._sourceLoaded || this._paused) return;\n          var o;\n          this.updateCacheSize(e), this.handleWrapJump(this.transform.center.lng), this._coveredTiles = {}, this.used || this.usedForTerrain ? this._source.tileID ? o = e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function (e) {\n            return new t.OverscaledTileID(e.canonical.z, e.wrap, e.canonical.z, e.canonical.x, e.canonical.y);\n          }) : (o = e.coveringTiles({\n            tileSize: this.usedForTerrain ? this.tileSize : this._source.tileSize,\n            minzoom: this._source.minzoom,\n            maxzoom: this._source.maxzoom,\n            roundZoom: !this.usedForTerrain && this._source.roundZoom,\n            reparseOverscaled: this._source.reparseOverscaled,\n            terrain: i\n          }), this._source.hasTile && (o = o.filter(function (t) {\n            return _this55._source.hasTile(t);\n          }))) : o = [];\n          var a = e.coveringZoomLevel(this._source),\n            r = Math.max(a - O.maxOverzooming, this._source.minzoom),\n            s = Math.max(a + O.maxUnderzooming, this._source.minzoom);\n          if (this.usedForTerrain) {\n            var _t220 = {};\n            var _iterator154 = _createForOfIteratorHelper(o),\n              _step154;\n            try {\n              for (_iterator154.s(); !(_step154 = _iterator154.n()).done;) {\n                var _e209 = _step154.value;\n                if (_e209.canonical.z > this._source.minzoom) {\n                  var _i161 = _e209.scaledTo(_e209.canonical.z - 1);\n                  _t220[_i161.key] = _i161;\n                  var _o74 = _e209.scaledTo(Math.max(this._source.minzoom, Math.min(_e209.canonical.z, 5)));\n                  _t220[_o74.key] = _o74;\n                }\n              }\n            } catch (err) {\n              _iterator154.e(err);\n            } finally {\n              _iterator154.f();\n            }\n            o = o.concat(Object.values(_t220));\n          }\n          var n = this._updateRetainedTiles(o, a);\n          if (N(this._source.type)) {\n            var _e210 = {},\n              _l45 = {},\n              _c26 = Object.keys(n);\n            for (var _i162 = 0, _c27 = _c26; _i162 < _c27.length; _i162++) {\n              var _i163 = _c27[_i162];\n              var _o75 = n[_i163],\n                _a94 = this._tiles[_i163];\n              if (!_a94 || _a94.fadeEndTime && _a94.fadeEndTime <= t.exported.now()) continue;\n              var _s83 = this.findLoadedParent(_o75, r);\n              _s83 && (this._addTile(_s83.tileID), _e210[_s83.tileID.key] = _s83.tileID), _l45[_i163] = _o75;\n            }\n            this._retainLoadedChildren(_l45, a, s, n);\n            for (var _t221 in _e210) n[_t221] || (this._coveredTiles[_t221] = !0, n[_t221] = _e210[_t221]);\n            if (i) {\n              var _t222 = {},\n                _e211 = {};\n              var _iterator155 = _createForOfIteratorHelper(o),\n                _step155;\n              try {\n                for (_iterator155.s(); !(_step155 = _iterator155.n()).done;) {\n                  var _i166 = _step155.value;\n                  this._tiles[_i166.key].hasData() ? _t222[_i166.key] = _i166 : _e211[_i166.key] = _i166;\n                }\n              } catch (err) {\n                _iterator155.e(err);\n              } finally {\n                _iterator155.f();\n              }\n              for (var _i164 in _e211) {\n                var _o76 = _e211[_i164].children(this._source.maxzoom);\n                this._tiles[_o76[0].key] && this._tiles[_o76[1].key] && this._tiles[_o76[2].key] && this._tiles[_o76[3].key] && (_t222[_o76[0].key] = n[_o76[0].key] = _o76[0], _t222[_o76[1].key] = n[_o76[1].key] = _o76[1], _t222[_o76[2].key] = n[_o76[2].key] = _o76[2], _t222[_o76[3].key] = n[_o76[3].key] = _o76[3], delete _e211[_i164]);\n              }\n              for (var _i165 in _e211) {\n                var _o77 = this.findLoadedParent(_e211[_i165], this._source.minzoom);\n                if (_o77) {\n                  _t222[_o77.tileID.key] = n[_o77.tileID.key] = _o77.tileID;\n                  for (var _e212 in _t222) _t222[_e212].isChildOf(_o77.tileID) && delete _t222[_e212];\n                }\n              }\n              for (var _e213 in this._tiles) _t222[_e213] || (this._coveredTiles[_e213] = !0);\n            }\n          }\n          for (var _t223 in n) this._tiles[_t223].clearFadeHold();\n          var l = t.keysDifference(this._tiles, n);\n          var _iterator156 = _createForOfIteratorHelper(l),\n            _step156;\n          try {\n            for (_iterator156.s(); !(_step156 = _iterator156.n()).done;) {\n              var _t224 = _step156.value;\n              var _e214 = this._tiles[_t224];\n              _e214.hasSymbolBuckets && !_e214.holdingForFade() ? _e214.setHoldDuration(this.map._fadeDuration) : _e214.hasSymbolBuckets && !_e214.symbolFadeFinished() || this._removeTile(_t224);\n            }\n          } catch (err) {\n            _iterator156.e(err);\n          } finally {\n            _iterator156.f();\n          }\n          this._updateLoadedParentTileCache();\n        }\n      }, {\n        key: \"releaseSymbolFadeTiles\",\n        value: function releaseSymbolFadeTiles() {\n          for (var _t225 in this._tiles) this._tiles[_t225].holdingForFade() && this._removeTile(_t225);\n        }\n      }, {\n        key: \"_updateRetainedTiles\",\n        value: function _updateRetainedTiles(t, e) {\n          var i = {},\n            o = {},\n            a = Math.max(e - O.maxOverzooming, this._source.minzoom),\n            r = Math.max(e + O.maxUnderzooming, this._source.minzoom),\n            s = {};\n          var _iterator157 = _createForOfIteratorHelper(t),\n            _step157;\n          try {\n            for (_iterator157.s(); !(_step157 = _iterator157.n()).done;) {\n              var _o78 = _step157.value;\n              var _t226 = this._addTile(_o78);\n              i[_o78.key] = _o78, _t226.hasData() || e < this._source.maxzoom && (s[_o78.key] = _o78);\n            }\n          } catch (err) {\n            _iterator157.e(err);\n          } finally {\n            _iterator157.f();\n          }\n          this._retainLoadedChildren(s, e, r, i);\n          var _iterator158 = _createForOfIteratorHelper(t),\n            _step158;\n          try {\n            for (_iterator158.s(); !(_step158 = _iterator158.n()).done;) {\n              var _r169 = _step158.value;\n              var _t227 = this._tiles[_r169.key];\n              if (_t227.hasData()) continue;\n              if (e + 1 > this._source.maxzoom) {\n                var _t228 = _r169.children(this._source.maxzoom)[0],\n                  _e215 = this.getTile(_t228);\n                if (_e215 && _e215.hasData()) {\n                  i[_t228.key] = _t228;\n                  continue;\n                }\n              } else {\n                var _t229 = _r169.children(this._source.maxzoom);\n                if (i[_t229[0].key] && i[_t229[1].key] && i[_t229[2].key] && i[_t229[3].key]) continue;\n              }\n              var _s84 = _t227.wasRequested();\n              for (var _e216 = _r169.overscaledZ - 1; _e216 >= a; --_e216) {\n                var _a95 = _r169.scaledTo(_e216);\n                if (o[_a95.key]) break;\n                if (o[_a95.key] = !0, _t227 = this.getTile(_a95), !_t227 && _s84 && (_t227 = this._addTile(_a95)), _t227 && (i[_a95.key] = _a95, _s84 = _t227.wasRequested(), _t227.hasData())) break;\n              }\n            }\n          } catch (err) {\n            _iterator158.e(err);\n          } finally {\n            _iterator158.f();\n          }\n          return i;\n        }\n      }, {\n        key: \"_updateLoadedParentTileCache\",\n        value: function _updateLoadedParentTileCache() {\n          this._loadedParentTiles = {};\n          for (var _t230 in this._tiles) {\n            var _e217 = [];\n            var _i167 = void 0,\n              _o79 = this._tiles[_t230].tileID;\n            for (; _o79.overscaledZ > 0;) {\n              if (_o79.key in this._loadedParentTiles) {\n                _i167 = this._loadedParentTiles[_o79.key];\n                break;\n              }\n              _e217.push(_o79.key);\n              var _t231 = _o79.scaledTo(_o79.overscaledZ - 1);\n              if (_i167 = this._getLoadedTile(_t231), _i167) break;\n              _o79 = _t231;\n            }\n            for (var _i168 = 0, _e218 = _e217; _i168 < _e218.length; _i168++) {\n              var _t232 = _e218[_i168];\n              this._loadedParentTiles[_t232] = _i167;\n            }\n          }\n        }\n      }, {\n        key: \"_addTile\",\n        value: function _addTile(e) {\n          var i = this._tiles[e.key];\n          if (i) return i;\n          i = this._cache.getAndRemove(e), i && (this._setTileReloadTimer(e.key, i), i.tileID = e, this._state.initializeTileState(i, this.map ? this.map.painter : null), this._cacheTimers[e.key] && (clearTimeout(this._cacheTimers[e.key]), delete this._cacheTimers[e.key], this._setTileReloadTimer(e.key, i)));\n          var o = i;\n          return i || (i = new k(e, this._source.tileSize * e.overscaleFactor()), this._loadTile(i, this._tileLoaded.bind(this, i, e.key, i.state))), i.uses++, this._tiles[e.key] = i, o || this._source.fire(new t.Event(\"dataloading\", {\n            tile: i,\n            coord: i.tileID,\n            dataType: \"source\"\n          })), i;\n        }\n      }, {\n        key: \"_setTileReloadTimer\",\n        value: function _setTileReloadTimer(t, e) {\n          var _this56 = this;\n          t in this._timers && (clearTimeout(this._timers[t]), delete this._timers[t]);\n          var i = e.getExpiryTimeout();\n          i && (this._timers[t] = setTimeout(function () {\n            _this56._reloadTile(t, \"expired\"), delete _this56._timers[t];\n          }, i));\n        }\n      }, {\n        key: \"_removeTile\",\n        value: function _removeTile(t) {\n          var e = this._tiles[t];\n          e && (e.uses--, delete this._tiles[t], this._timers[t] && (clearTimeout(this._timers[t]), delete this._timers[t]), e.uses > 0 || (e.hasData() && \"reloading\" !== e.state ? this._cache.add(e.tileID, e, e.getExpiryTimeout()) : (e.aborted = !0, this._abortTile(e), this._unloadTile(e))));\n        }\n      }, {\n        key: \"clearTiles\",\n        value: function clearTiles() {\n          this._shouldReloadOnResume = !1, this._paused = !1;\n          for (var _t233 in this._tiles) this._removeTile(_t233);\n          this._cache.reset();\n        }\n      }, {\n        key: \"tilesIn\",\n        value: function tilesIn(e, i, o) {\n          var _this57 = this;\n          var a = [],\n            r = this.transform;\n          if (!r) return a;\n          var s = o ? r.getCameraQueryGeometry(e) : e,\n            n = e.map(function (t) {\n              return r.pointCoordinate(t, _this57.terrain);\n            }),\n            l = s.map(function (t) {\n              return r.pointCoordinate(t, _this57.terrain);\n            }),\n            c = this.getIds();\n          var h = 1 / 0,\n            u = 1 / 0,\n            d = -1 / 0,\n            m = -1 / 0;\n          var _iterator159 = _createForOfIteratorHelper(l),\n            _step159;\n          try {\n            for (_iterator159.s(); !(_step159 = _iterator159.n()).done;) {\n              var _t234 = _step159.value;\n              h = Math.min(h, _t234.x), u = Math.min(u, _t234.y), d = Math.max(d, _t234.x), m = Math.max(m, _t234.y);\n            }\n          } catch (err) {\n            _iterator159.e(err);\n          } finally {\n            _iterator159.f();\n          }\n          var _loop4 = function _loop4() {\n            var o = _this57._tiles[c[_e219]];\n            if (o.holdingForFade()) return \"continue\";\n            var s = o.tileID,\n              _ = Math.pow(2, r.zoom - o.tileID.overscaledZ),\n              p = i * o.queryPadding * t.EXTENT / o.tileSize / _,\n              f = [s.getTilePoint(new t.MercatorCoordinate(h, u)), s.getTilePoint(new t.MercatorCoordinate(d, m))];\n            if (f[0].x - p < t.EXTENT && f[0].y - p < t.EXTENT && f[1].x + p >= 0 && f[1].y + p >= 0) {\n              var _t235 = n.map(function (t) {\n                  return s.getTilePoint(t);\n                }),\n                _e220 = l.map(function (t) {\n                  return s.getTilePoint(t);\n                });\n              a.push({\n                tile: o,\n                tileID: s,\n                queryGeometry: _t235,\n                cameraQueryGeometry: _e220,\n                scale: _\n              });\n            }\n          };\n          for (var _e219 = 0; _e219 < c.length; _e219++) {\n            var _ret2 = _loop4();\n            if (_ret2 === \"continue\") continue;\n          }\n          return a;\n        }\n      }, {\n        key: \"getVisibleCoordinates\",\n        value: function getVisibleCoordinates(t) {\n          var _this58 = this;\n          var e = this.getRenderableIds(t).map(function (t) {\n            return _this58._tiles[t].tileID;\n          });\n          var _iterator160 = _createForOfIteratorHelper(e),\n            _step160;\n          try {\n            for (_iterator160.s(); !(_step160 = _iterator160.n()).done;) {\n              var _t236 = _step160.value;\n              _t236.posMatrix = this.transform.calculatePosMatrix(_t236.toUnwrapped());\n            }\n          } catch (err) {\n            _iterator160.e(err);\n          } finally {\n            _iterator160.f();\n          }\n          return e;\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          if (this._source.hasTransition()) return !0;\n          if (N(this._source.type)) for (var _e221 in this._tiles) {\n            var _i169 = this._tiles[_e221];\n            if (void 0 !== _i169.fadeEndTime && _i169.fadeEndTime >= t.exported.now()) return !0;\n          }\n          return !1;\n        }\n      }, {\n        key: \"setFeatureState\",\n        value: function setFeatureState(t, e, i) {\n          this._state.updateState(t = t || \"_geojsonTileLayer\", e, i);\n        }\n      }, {\n        key: \"removeFeatureState\",\n        value: function removeFeatureState(t, e, i) {\n          this._state.removeFeatureState(t = t || \"_geojsonTileLayer\", e, i);\n        }\n      }, {\n        key: \"getFeatureState\",\n        value: function getFeatureState(t, e) {\n          return this._state.getState(t = t || \"_geojsonTileLayer\", e);\n        }\n      }, {\n        key: \"setDependencies\",\n        value: function setDependencies(t, e, i) {\n          var o = this._tiles[t];\n          o && o.setDependencies(e, i);\n        }\n      }, {\n        key: \"reloadTilesForDependencies\",\n        value: function reloadTilesForDependencies(t, e) {\n          for (var _i170 in this._tiles) this._tiles[_i170].hasDependency(t, e) && this._reloadTile(_i170, \"reloading\");\n          this._cache.filter(function (i) {\n            return !i.hasDependency(t, e);\n          });\n        }\n      }]);\n      return O;\n    }(t.Evented);\n    function U(t, e) {\n      var i = Math.abs(2 * t.wrap) - +(t.wrap < 0),\n        o = Math.abs(2 * e.wrap) - +(e.wrap < 0);\n      return t.overscaledZ - e.overscaledZ || o - i || e.canonical.y - t.canonical.y || e.canonical.x - t.canonical.x;\n    }\n    function N(t) {\n      return \"raster\" === t || \"image\" === t || \"video\" === t;\n    }\n    O.maxOverzooming = 10, O.maxUnderzooming = 3;\n    var G = \"mapboxgl_preloaded_worker_pool\";\n    var Z = /*#__PURE__*/function () {\n      function Z() {\n        _classCallCheck(this, Z);\n        this.active = {};\n      }\n      _createClass(Z, [{\n        key: \"acquire\",\n        value: function acquire(t) {\n          if (!this.workers) for (this.workers = []; this.workers.length < Z.workerCount;) this.workers.push(new Worker(ba.workerUrl));\n          return this.active[t] = !0, this.workers.slice();\n        }\n      }, {\n        key: \"release\",\n        value: function release(t) {\n          delete this.active[t], 0 === this.numActive() && (this.workers.forEach(function (t) {\n            t.terminate();\n          }), this.workers = null);\n        }\n      }, {\n        key: \"isPreloaded\",\n        value: function isPreloaded() {\n          return !!this.active[G];\n        }\n      }, {\n        key: \"numActive\",\n        value: function numActive() {\n          return Object.keys(this.active).length;\n        }\n      }]);\n      return Z;\n    }();\n    var V = Math.floor(t.exported.hardwareConcurrency / 2);\n    var q;\n    function j() {\n      return q || (q = new Z()), q;\n    }\n    function $(e, i) {\n      var o = {};\n      for (var _t237 in e) \"ref\" !== _t237 && (o[_t237] = e[_t237]);\n      return t.refProperties.forEach(function (t) {\n        t in i && (o[t] = i[t]);\n      }), o;\n    }\n    function X(t) {\n      t = t.slice();\n      var e = Object.create(null);\n      for (var _i171 = 0; _i171 < t.length; _i171++) e[t[_i171].id] = t[_i171];\n      for (var _i172 = 0; _i172 < t.length; _i172++) \"ref\" in t[_i172] && (t[_i172] = $(t[_i172], e[t[_i172].ref]));\n      return t;\n    }\n    Z.workerCount = Math.max(Math.min(V, 6), 1);\n    var W = {\n      setStyle: \"setStyle\",\n      addLayer: \"addLayer\",\n      removeLayer: \"removeLayer\",\n      setPaintProperty: \"setPaintProperty\",\n      setLayoutProperty: \"setLayoutProperty\",\n      setFilter: \"setFilter\",\n      addSource: \"addSource\",\n      removeSource: \"removeSource\",\n      setGeoJSONSourceData: \"setGeoJSONSourceData\",\n      setLayerZoomRange: \"setLayerZoomRange\",\n      setLayerProperty: \"setLayerProperty\",\n      setCenter: \"setCenter\",\n      setZoom: \"setZoom\",\n      setBearing: \"setBearing\",\n      setPitch: \"setPitch\",\n      setSprite: \"setSprite\",\n      setGlyphs: \"setGlyphs\",\n      setTransition: \"setTransition\",\n      setLight: \"setLight\"\n    };\n    function H(t, e, i) {\n      i.push({\n        command: W.addSource,\n        args: [t, e[t]]\n      });\n    }\n    function K(t, e, i) {\n      e.push({\n        command: W.removeSource,\n        args: [t]\n      }), i[t] = !0;\n    }\n    function Y(t, e, i, o) {\n      K(t, i, o), H(t, e, i);\n    }\n    function J(t, e, i) {\n      var o;\n      for (o in t[i]) if (Object.prototype.hasOwnProperty.call(t[i], o) && \"data\" !== o && !a(t[i][o], e[i][o])) return !1;\n      for (o in e[i]) if (Object.prototype.hasOwnProperty.call(e[i], o) && \"data\" !== o && !a(t[i][o], e[i][o])) return !1;\n      return !0;\n    }\n    function Q(t, e, i, o, r, s) {\n      var n;\n      for (n in e = e || {}, t = t || {}) Object.prototype.hasOwnProperty.call(t, n) && (a(t[n], e[n]) || i.push({\n        command: s,\n        args: [o, n, e[n], r]\n      }));\n      for (n in e) Object.prototype.hasOwnProperty.call(e, n) && !Object.prototype.hasOwnProperty.call(t, n) && (a(t[n], e[n]) || i.push({\n        command: s,\n        args: [o, n, e[n], r]\n      }));\n    }\n    function tt(t) {\n      return t.id;\n    }\n    function et(t, e) {\n      return t[e.id] = e, t;\n    }\n    var it = /*#__PURE__*/function () {\n      function it(t, e) {\n        _classCallCheck(this, it);\n        this.reset(t, e);\n      }\n      _createClass(it, [{\n        key: \"reset\",\n        value: function reset(t, e) {\n          this.points = t || [], this._distances = [0];\n          for (var _t238 = 1; _t238 < this.points.length; _t238++) this._distances[_t238] = this._distances[_t238 - 1] + this.points[_t238].dist(this.points[_t238 - 1]);\n          this.length = this._distances[this._distances.length - 1], this.padding = Math.min(e || 0, .5 * this.length), this.paddedLength = this.length - 2 * this.padding;\n        }\n      }, {\n        key: \"lerp\",\n        value: function lerp(e) {\n          if (1 === this.points.length) return this.points[0];\n          e = t.clamp(e, 0, 1);\n          var i = 1,\n            o = this._distances[i];\n          var a = e * this.paddedLength + this.padding;\n          for (; o < a && i < this._distances.length;) o = this._distances[++i];\n          var r = i - 1,\n            s = this._distances[r],\n            n = o - s,\n            l = n > 0 ? (a - s) / n : 0;\n          return this.points[r].mult(1 - l).add(this.points[i].mult(l));\n        }\n      }]);\n      return it;\n    }();\n    function ot(t, e) {\n      var i = !0;\n      return \"always\" === t || \"never\" !== t && \"never\" !== e || (i = !1), i;\n    }\n    var at = /*#__PURE__*/function () {\n      function at(t, e, i) {\n        _classCallCheck(this, at);\n        var o = this.boxCells = [],\n          a = this.circleCells = [];\n        this.xCellCount = Math.ceil(t / i), this.yCellCount = Math.ceil(e / i);\n        for (var _t239 = 0; _t239 < this.xCellCount * this.yCellCount; _t239++) o.push([]), a.push([]);\n        this.circleKeys = [], this.boxKeys = [], this.bboxes = [], this.circles = [], this.width = t, this.height = e, this.xScale = this.xCellCount / t, this.yScale = this.yCellCount / e, this.boxUid = 0, this.circleUid = 0;\n      }\n      _createClass(at, [{\n        key: \"keysLength\",\n        value: function keysLength() {\n          return this.boxKeys.length + this.circleKeys.length;\n        }\n      }, {\n        key: \"insert\",\n        value: function insert(t, e, i, o, a) {\n          this._forEachCell(e, i, o, a, this._insertBoxCell, this.boxUid++), this.boxKeys.push(t), this.bboxes.push(e), this.bboxes.push(i), this.bboxes.push(o), this.bboxes.push(a);\n        }\n      }, {\n        key: \"insertCircle\",\n        value: function insertCircle(t, e, i, o) {\n          this._forEachCell(e - o, i - o, e + o, i + o, this._insertCircleCell, this.circleUid++), this.circleKeys.push(t), this.circles.push(e), this.circles.push(i), this.circles.push(o);\n        }\n      }, {\n        key: \"_insertBoxCell\",\n        value: function _insertBoxCell(t, e, i, o, a, r) {\n          this.boxCells[a].push(r);\n        }\n      }, {\n        key: \"_insertCircleCell\",\n        value: function _insertCircleCell(t, e, i, o, a, r) {\n          this.circleCells[a].push(r);\n        }\n      }, {\n        key: \"_query\",\n        value: function _query(t, e, i, o, a, r, s) {\n          if (i < 0 || t > this.width || o < 0 || e > this.height) return [];\n          var n = [];\n          if (t <= 0 && e <= 0 && this.width <= i && this.height <= o) {\n            if (a) return [{\n              key: null,\n              x1: t,\n              y1: e,\n              x2: i,\n              y2: o\n            }];\n            for (var _t240 = 0; _t240 < this.boxKeys.length; _t240++) n.push({\n              key: this.boxKeys[_t240],\n              x1: this.bboxes[4 * _t240],\n              y1: this.bboxes[4 * _t240 + 1],\n              x2: this.bboxes[4 * _t240 + 2],\n              y2: this.bboxes[4 * _t240 + 3]\n            });\n            for (var _t241 = 0; _t241 < this.circleKeys.length; _t241++) {\n              var _e222 = this.circles[3 * _t241],\n                _i173 = this.circles[3 * _t241 + 1],\n                _o80 = this.circles[3 * _t241 + 2];\n              n.push({\n                key: this.circleKeys[_t241],\n                x1: _e222 - _o80,\n                y1: _i173 - _o80,\n                x2: _e222 + _o80,\n                y2: _i173 + _o80\n              });\n            }\n          } else this._forEachCell(t, e, i, o, this._queryCell, n, {\n            hitTest: a,\n            overlapMode: r,\n            seenUids: {\n              box: {},\n              circle: {}\n            }\n          }, s);\n          return n;\n        }\n      }, {\n        key: \"query\",\n        value: function query(t, e, i, o) {\n          return this._query(t, e, i, o, !1, null);\n        }\n      }, {\n        key: \"hitTest\",\n        value: function hitTest(t, e, i, o, a, r) {\n          return this._query(t, e, i, o, !0, a, r).length > 0;\n        }\n      }, {\n        key: \"hitTestCircle\",\n        value: function hitTestCircle(t, e, i, o, a) {\n          var r = t - i,\n            s = t + i,\n            n = e - i,\n            l = e + i;\n          if (s < 0 || r > this.width || l < 0 || n > this.height) return !1;\n          var c = [];\n          return this._forEachCell(r, n, s, l, this._queryCellCircle, c, {\n            hitTest: !0,\n            overlapMode: o,\n            circle: {\n              x: t,\n              y: e,\n              radius: i\n            },\n            seenUids: {\n              box: {},\n              circle: {}\n            }\n          }, a), c.length > 0;\n        }\n      }, {\n        key: \"_queryCell\",\n        value: function _queryCell(t, e, i, o, a, r, s, n) {\n          var l = s.seenUids,\n            c = s.hitTest,\n            h = s.overlapMode,\n            u = this.boxCells[a];\n          if (null !== u) {\n            var _a96 = this.bboxes;\n            var _iterator161 = _createForOfIteratorHelper(u),\n              _step161;\n            try {\n              for (_iterator161.s(); !(_step161 = _iterator161.n()).done;) {\n                var _s85 = _step161.value;\n                if (!l.box[_s85]) {\n                  l.box[_s85] = !0;\n                  var _u27 = 4 * _s85,\n                    _d11 = this.boxKeys[_s85];\n                  if (t <= _a96[_u27 + 2] && e <= _a96[_u27 + 3] && i >= _a96[_u27 + 0] && o >= _a96[_u27 + 1] && (!n || n(_d11)) && (!c || !ot(h, _d11.overlapMode)) && (r.push({\n                    key: _d11,\n                    x1: _a96[_u27],\n                    y1: _a96[_u27 + 1],\n                    x2: _a96[_u27 + 2],\n                    y2: _a96[_u27 + 3]\n                  }), c)) return !0;\n                }\n              }\n            } catch (err) {\n              _iterator161.e(err);\n            } finally {\n              _iterator161.f();\n            }\n          }\n          var d = this.circleCells[a];\n          if (null !== d) {\n            var _a97 = this.circles;\n            var _iterator162 = _createForOfIteratorHelper(d),\n              _step162;\n            try {\n              for (_iterator162.s(); !(_step162 = _iterator162.n()).done;) {\n                var _s86 = _step162.value;\n                if (!l.circle[_s86]) {\n                  l.circle[_s86] = !0;\n                  var _u28 = 3 * _s86,\n                    _d12 = this.circleKeys[_s86];\n                  if (this._circleAndRectCollide(_a97[_u28], _a97[_u28 + 1], _a97[_u28 + 2], t, e, i, o) && (!n || n(_d12)) && (!c || !ot(h, _d12.overlapMode))) {\n                    var _t242 = _a97[_u28],\n                      _e223 = _a97[_u28 + 1],\n                      _i174 = _a97[_u28 + 2];\n                    if (r.push({\n                      key: _d12,\n                      x1: _t242 - _i174,\n                      y1: _e223 - _i174,\n                      x2: _t242 + _i174,\n                      y2: _e223 + _i174\n                    }), c) return !0;\n                  }\n                }\n              }\n            } catch (err) {\n              _iterator162.e(err);\n            } finally {\n              _iterator162.f();\n            }\n          }\n          return !1;\n        }\n      }, {\n        key: \"_queryCellCircle\",\n        value: function _queryCellCircle(t, e, i, o, a, r, s, n) {\n          var l = s.circle,\n            c = s.seenUids,\n            h = s.overlapMode,\n            u = this.boxCells[a];\n          if (null !== u) {\n            var _t243 = this.bboxes;\n            var _iterator163 = _createForOfIteratorHelper(u),\n              _step163;\n            try {\n              for (_iterator163.s(); !(_step163 = _iterator163.n()).done;) {\n                var _e224 = _step163.value;\n                if (!c.box[_e224]) {\n                  c.box[_e224] = !0;\n                  var _i175 = 4 * _e224,\n                    _o81 = this.boxKeys[_e224];\n                  if (this._circleAndRectCollide(l.x, l.y, l.radius, _t243[_i175 + 0], _t243[_i175 + 1], _t243[_i175 + 2], _t243[_i175 + 3]) && (!n || n(_o81)) && !ot(h, _o81.overlapMode)) return r.push(!0), !0;\n                }\n              }\n            } catch (err) {\n              _iterator163.e(err);\n            } finally {\n              _iterator163.f();\n            }\n          }\n          var d = this.circleCells[a];\n          if (null !== d) {\n            var _t244 = this.circles;\n            var _iterator164 = _createForOfIteratorHelper(d),\n              _step164;\n            try {\n              for (_iterator164.s(); !(_step164 = _iterator164.n()).done;) {\n                var _e225 = _step164.value;\n                if (!c.circle[_e225]) {\n                  c.circle[_e225] = !0;\n                  var _i176 = 3 * _e225,\n                    _o82 = this.circleKeys[_e225];\n                  if (this._circlesCollide(_t244[_i176], _t244[_i176 + 1], _t244[_i176 + 2], l.x, l.y, l.radius) && (!n || n(_o82)) && !ot(h, _o82.overlapMode)) return r.push(!0), !0;\n                }\n              }\n            } catch (err) {\n              _iterator164.e(err);\n            } finally {\n              _iterator164.f();\n            }\n          }\n        }\n      }, {\n        key: \"_forEachCell\",\n        value: function _forEachCell(t, e, i, o, a, r, s, n) {\n          var l = this._convertToXCellCoord(t),\n            c = this._convertToYCellCoord(e),\n            h = this._convertToXCellCoord(i),\n            u = this._convertToYCellCoord(o);\n          for (var _d13 = l; _d13 <= h; _d13++) for (var _l46 = c; _l46 <= u; _l46++) if (a.call(this, t, e, i, o, this.xCellCount * _l46 + _d13, r, s, n)) return;\n        }\n      }, {\n        key: \"_convertToXCellCoord\",\n        value: function _convertToXCellCoord(t) {\n          return Math.max(0, Math.min(this.xCellCount - 1, Math.floor(t * this.xScale)));\n        }\n      }, {\n        key: \"_convertToYCellCoord\",\n        value: function _convertToYCellCoord(t) {\n          return Math.max(0, Math.min(this.yCellCount - 1, Math.floor(t * this.yScale)));\n        }\n      }, {\n        key: \"_circlesCollide\",\n        value: function _circlesCollide(t, e, i, o, a, r) {\n          var s = o - t,\n            n = a - e,\n            l = i + r;\n          return l * l > s * s + n * n;\n        }\n      }, {\n        key: \"_circleAndRectCollide\",\n        value: function _circleAndRectCollide(t, e, i, o, a, r, s) {\n          var n = (r - o) / 2,\n            l = Math.abs(t - (o + n));\n          if (l > n + i) return !1;\n          var c = (s - a) / 2,\n            h = Math.abs(e - (a + c));\n          if (h > c + i) return !1;\n          if (l <= n || h <= c) return !0;\n          var u = l - n,\n            d = h - c;\n          return u * u + d * d <= i * i;\n        }\n      }]);\n      return at;\n    }();\n    function rt(e, i, o, a, r) {\n      var s = t.create();\n      return i ? (t.scale(s, s, [1 / r, 1 / r, 1]), o || t.rotateZ(s, s, a.angle)) : t.multiply(s, a.labelPlaneMatrix, e), s;\n    }\n    function st(e, i, o, a, r) {\n      if (i) {\n        var _i177 = t.clone(e);\n        return t.scale(_i177, _i177, [r, r, 1]), o || t.rotateZ(_i177, _i177, -a.angle), _i177;\n      }\n      return a.glCoordMatrix;\n    }\n    function nt(e, i, o) {\n      var a;\n      o ? (a = [e.x, e.y, o(e.x, e.y), 1], t.transformMat4(a, a, i)) : (a = [e.x, e.y, 0, 1], xt(a, a, i));\n      var r = a[3];\n      return {\n        point: new t.pointGeometry(a[0] / r, a[1] / r),\n        signedDistanceFromCamera: r\n      };\n    }\n    function lt(t, e) {\n      return .5 + t / e * .5;\n    }\n    function ct(t, e) {\n      var i = t[0] / t[3],\n        o = t[1] / t[3];\n      return i >= -e[0] && i <= e[0] && o >= -e[1] && o <= e[1];\n    }\n    function ht(e, i, o, a, r, s, n, l, c, h) {\n      var u = a ? e.textSizeData : e.iconSizeData,\n        d = t.evaluateSizeForZoom(u, o.transform.zoom),\n        m = [256 / o.width * 2 + 1, 256 / o.height * 2 + 1],\n        _ = a ? e.text.dynamicLayoutVertexArray : e.icon.dynamicLayoutVertexArray;\n      _.clear();\n      var p = e.lineVertexArray,\n        f = a ? e.text.placedSymbolArray : e.icon.placedSymbolArray,\n        g = o.transform.width / o.transform.height;\n      var x = !1;\n      for (var _a98 = 0; _a98 < f.length; _a98++) {\n        var _v7 = f.get(_a98);\n        if (_v7.hidden || _v7.writingMode === t.WritingMode.vertical && !x) {\n          gt(_v7.numGlyphs, _);\n          continue;\n        }\n        var _y7 = void 0;\n        if (x = !1, h ? (_y7 = [_v7.anchorX, _v7.anchorY, h(_v7.anchorX, _v7.anchorY), 1], t.transformMat4(_y7, _y7, i)) : (_y7 = [_v7.anchorX, _v7.anchorY, 0, 1], xt(_y7, _y7, i)), !ct(_y7, m)) {\n          gt(_v7.numGlyphs, _);\n          continue;\n        }\n        var _b9 = lt(o.transform.cameraToCenterDistance, _y7[3]),\n          _w7 = t.evaluateSizeForFeature(u, d, _v7),\n          _T2 = n ? _w7 / _b9 : _w7 * _b9,\n          _E = new t.pointGeometry(_v7.anchorX, _v7.anchorY),\n          _I4 = nt(_E, r, h).point,\n          _C = {},\n          _S4 = mt(_v7, _T2, !1, l, i, r, s, e.glyphOffsetArray, p, _, _I4, _E, _C, g, c, h);\n        x = _S4.useVertical, (_S4.notEnoughRoom || x || _S4.needsFlipping && mt(_v7, _T2, !0, l, i, r, s, e.glyphOffsetArray, p, _, _I4, _E, _C, g, c, h).notEnoughRoom) && gt(_v7.numGlyphs, _);\n      }\n      a ? e.text.dynamicLayoutVertexBuffer.updateData(_) : e.icon.dynamicLayoutVertexBuffer.updateData(_);\n    }\n    function ut(t, e, i, o, a, r, s, n, l, c, h, u, d) {\n      var m = n.glyphStartIndex + n.numGlyphs,\n        _ = n.lineStartIndex,\n        p = n.lineStartIndex + n.lineLength,\n        f = e.getoffsetX(n.glyphStartIndex),\n        g = e.getoffsetX(m - 1),\n        x = pt(t * f, i, o, a, r, s, n.segment, _, p, l, c, h, u, d);\n      if (!x) return null;\n      var v = pt(t * g, i, o, a, r, s, n.segment, _, p, l, c, h, u, d);\n      return v ? {\n        first: x,\n        last: v\n      } : null;\n    }\n    function dt(e, i, o, a) {\n      return e === t.WritingMode.horizontal && Math.abs(o.y - i.y) > Math.abs(o.x - i.x) * a ? {\n        useVertical: !0\n      } : (e === t.WritingMode.vertical ? i.y < o.y : i.x > o.x) ? {\n        needsFlipping: !0\n      } : null;\n    }\n    function mt(e, i, o, a, r, s, n, l, c, h, u, d, m, _, p, f) {\n      var g = i / 24,\n        x = e.lineOffsetX * g,\n        v = e.lineOffsetY * g;\n      var y;\n      if (e.numGlyphs > 1) {\n        var _t245 = e.glyphStartIndex + e.numGlyphs,\n          _i178 = e.lineStartIndex,\n          _r170 = e.lineStartIndex + e.lineLength,\n          _h17 = ut(g, l, x, v, o, u, d, e, c, s, m, p, f);\n        if (!_h17) return {\n          notEnoughRoom: !0\n        };\n        var _b10 = nt(_h17.first.point, n, f).point,\n          _w8 = nt(_h17.last.point, n, f).point;\n        if (a && !o) {\n          var _t246 = dt(e.writingMode, _b10, _w8, _);\n          if (_t246) return _t246;\n        }\n        y = [_h17.first];\n        for (var _a99 = e.glyphStartIndex + 1; _a99 < _t245 - 1; _a99++) y.push(pt(g * l.getoffsetX(_a99), x, v, o, u, d, e.segment, _i178, _r170, c, s, m, p, f));\n        y.push(_h17.last);\n      } else {\n        if (a && !o) {\n          var _i179 = nt(d, r, f).point,\n            _o83 = e.lineStartIndex + e.segment + 1,\n            _a100 = new t.pointGeometry(c.getx(_o83), c.gety(_o83)),\n            _s87 = nt(_a100, r, f),\n            _n123 = _s87.signedDistanceFromCamera > 0 ? _s87.point : _t(d, _a100, _i179, 1, r, f),\n            _l47 = dt(e.writingMode, _i179, _n123, _);\n          if (_l47) return _l47;\n        }\n        var _i180 = pt(g * l.getoffsetX(e.glyphStartIndex), x, v, o, u, d, e.segment, e.lineStartIndex, e.lineStartIndex + e.lineLength, c, s, m, p, f);\n        if (!_i180) return {\n          notEnoughRoom: !0\n        };\n        y = [_i180];\n      }\n      var _iterator165 = _createForOfIteratorHelper(y),\n        _step165;\n      try {\n        for (_iterator165.s(); !(_step165 = _iterator165.n()).done;) {\n          var _e226 = _step165.value;\n          t.addDynamicAttributes(h, _e226.point, _e226.angle);\n        }\n      } catch (err) {\n        _iterator165.e(err);\n      } finally {\n        _iterator165.f();\n      }\n      return {};\n    }\n    function _t(t, e, i, o, a, r) {\n      var s = nt(t.add(t.sub(e)._unit()), a, r).point,\n        n = i.sub(s);\n      return i.add(n._mult(o / n.mag()));\n    }\n    function pt(e, i, o, a, r, s, n, l, c, h, u, d, m, _) {\n      var p = a ? e - i : e + i;\n      var f = p > 0 ? 1 : -1,\n        g = 0;\n      a && (f *= -1, g = Math.PI), f < 0 && (g += Math.PI);\n      var x = f > 0 ? l + n : l + n + 1,\n        v = r,\n        y = r,\n        b = 0,\n        w = 0;\n      var T = Math.abs(p),\n        E = [];\n      for (; b + w <= T;) {\n        if (x += f, x < l || x >= c) return null;\n        if (y = v, E.push(v), v = d[x], void 0 === v) {\n          var _e227 = new t.pointGeometry(h.getx(x), h.gety(x)),\n            _i181 = nt(_e227, u, _);\n          if (_i181.signedDistanceFromCamera > 0) v = d[x] = _i181.point;else {\n            var _i182 = x - f;\n            v = _t(0 === b ? s : new t.pointGeometry(h.getx(_i182), h.gety(_i182)), _e227, y, T - b + 1, u, _);\n          }\n        }\n        b += w, w = y.dist(v);\n      }\n      var I = (T - b) / w,\n        C = v.sub(y),\n        S = C.mult(I)._add(y);\n      S._add(C._unit()._perp()._mult(o * f));\n      var D = g + Math.atan2(v.y - y.y, v.x - y.x);\n      return E.push(S), {\n        point: S,\n        angle: m ? D : 0,\n        path: E\n      };\n    }\n    var ft = new Float32Array([-1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0]);\n    function gt(t, e) {\n      for (var _i183 = 0; _i183 < t; _i183++) {\n        var _t247 = e.length;\n        e.resize(_t247 + 4), e.float32.set(ft, 3 * _t247);\n      }\n    }\n    function xt(t, e, i) {\n      var o = e[0],\n        a = e[1];\n      return t[0] = i[0] * o + i[4] * a + i[12], t[1] = i[1] * o + i[5] * a + i[13], t[3] = i[3] * o + i[7] * a + i[15], t;\n    }\n    var vt = 100;\n    var yt = /*#__PURE__*/function () {\n      function yt(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new at(t.width + 200, t.height + 200, 25);\n        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new at(t.width + 200, t.height + 200, 25);\n        _classCallCheck(this, yt);\n        this.transform = t, this.grid = e, this.ignoredGrid = i, this.pitchfactor = Math.cos(t._pitch) * t.cameraToCenterDistance, this.screenRightBoundary = t.width + vt, this.screenBottomBoundary = t.height + vt, this.gridRightBoundary = t.width + 200, this.gridBottomBoundary = t.height + 200, this.perspectiveRatioCutoff = .6;\n      }\n      _createClass(yt, [{\n        key: \"placeCollisionBox\",\n        value: function placeCollisionBox(t, e, i, o, a, r) {\n          var s = this.projectAndGetPerspectiveRatio(o, t.anchorPointX, t.anchorPointY, r),\n            n = i * s.perspectiveRatio,\n            l = t.x1 * n + s.point.x,\n            c = t.y1 * n + s.point.y,\n            h = t.x2 * n + s.point.x,\n            u = t.y2 * n + s.point.y;\n          return !this.isInsideGrid(l, c, h, u) || \"always\" !== e && this.grid.hitTest(l, c, h, u, e, a) || s.perspectiveRatio < this.perspectiveRatioCutoff ? {\n            box: [],\n            offscreen: !1\n          } : {\n            box: [l, c, h, u],\n            offscreen: this.isOffscreen(l, c, h, u)\n          };\n        }\n      }, {\n        key: \"placeCollisionCircles\",\n        value: function placeCollisionCircles(e, i, o, a, r, s, n, l, c, h, u, d, m, _) {\n          var p = [],\n            f = new t.pointGeometry(i.anchorX, i.anchorY),\n            g = nt(f, s, _),\n            x = lt(this.transform.cameraToCenterDistance, g.signedDistanceFromCamera),\n            v = (h ? r / x : r * x) / t.ONE_EM,\n            y = nt(f, n, _).point,\n            b = ut(v, a, i.lineOffsetX * v, i.lineOffsetY * v, !1, y, f, i, o, n, {}, !1, _);\n          var w = !1,\n            T = !1,\n            E = !0;\n          if (b) {\n            var _i184 = .5 * d * x + m,\n              _o84 = new t.pointGeometry(-100, -100),\n              _a101 = new t.pointGeometry(this.screenRightBoundary, this.screenBottomBoundary),\n              _r171 = new it(),\n              _s88 = b.first,\n              _n124 = b.last;\n            var _h18 = [];\n            for (var _t248 = _s88.path.length - 1; _t248 >= 1; _t248--) _h18.push(_s88.path[_t248]);\n            for (var _t249 = 1; _t249 < _n124.path.length; _t249++) _h18.push(_n124.path[_t249]);\n            var _f10 = 2.5 * _i184;\n            if (l) {\n              var _t250 = _h18.map(function (t) {\n                return nt(t, l, _);\n              });\n              _h18 = _t250.some(function (t) {\n                return t.signedDistanceFromCamera <= 0;\n              }) ? [] : _t250.map(function (t) {\n                return t.point;\n              });\n            }\n            var _g12 = [];\n            if (_h18.length > 0) {\n              var _e228 = _h18[0].clone(),\n                _i185 = _h18[0].clone();\n              for (var _t251 = 1; _t251 < _h18.length; _t251++) _e228.x = Math.min(_e228.x, _h18[_t251].x), _e228.y = Math.min(_e228.y, _h18[_t251].y), _i185.x = Math.max(_i185.x, _h18[_t251].x), _i185.y = Math.max(_i185.y, _h18[_t251].y);\n              _g12 = _e228.x >= _o84.x && _i185.x <= _a101.x && _e228.y >= _o84.y && _i185.y <= _a101.y ? [_h18] : _i185.x < _o84.x || _e228.x > _a101.x || _i185.y < _o84.y || _e228.y > _a101.y ? [] : t.clipLine([_h18], _o84.x, _o84.y, _a101.x, _a101.y);\n            }\n            var _iterator166 = _createForOfIteratorHelper(_g12),\n              _step166;\n            try {\n              for (_iterator166.s(); !(_step166 = _iterator166.n()).done;) {\n                var _t252 = _step166.value;\n                _r171.reset(_t252, .25 * _i184);\n                var _o85 = 0;\n                _o85 = _r171.length <= .5 * _i184 ? 1 : Math.ceil(_r171.paddedLength / _f10) + 1;\n                for (var _t253 = 0; _t253 < _o85; _t253++) {\n                  var _a102 = _t253 / Math.max(_o85 - 1, 1),\n                    _s89 = _r171.lerp(_a102),\n                    _n125 = _s89.x + vt,\n                    _l48 = _s89.y + vt;\n                  p.push(_n125, _l48, _i184, 0);\n                  var _h19 = _n125 - _i184,\n                    _d14 = _l48 - _i184,\n                    _m13 = _n125 + _i184,\n                    _7 = _l48 + _i184;\n                  if (E = E && this.isOffscreen(_h19, _d14, _m13, _7), T = T || this.isInsideGrid(_h19, _d14, _m13, _7), \"always\" !== e && this.grid.hitTestCircle(_n125, _l48, _i184, e, u) && (w = !0, !c)) return {\n                    circles: [],\n                    offscreen: !1,\n                    collisionDetected: w\n                  };\n                }\n              }\n            } catch (err) {\n              _iterator166.e(err);\n            } finally {\n              _iterator166.f();\n            }\n          }\n          return {\n            circles: !c && w || !T || x < this.perspectiveRatioCutoff ? [] : p,\n            offscreen: E,\n            collisionDetected: w\n          };\n        }\n      }, {\n        key: \"queryRenderedSymbols\",\n        value: function queryRenderedSymbols(e) {\n          if (0 === e.length || 0 === this.grid.keysLength() && 0 === this.ignoredGrid.keysLength()) return {};\n          var i = [];\n          var o = 1 / 0,\n            a = 1 / 0,\n            r = -1 / 0,\n            s = -1 / 0;\n          var _iterator167 = _createForOfIteratorHelper(e),\n            _step167;\n          try {\n            for (_iterator167.s(); !(_step167 = _iterator167.n()).done;) {\n              var _n126 = _step167.value;\n              var _e229 = new t.pointGeometry(_n126.x + vt, _n126.y + vt);\n              o = Math.min(o, _e229.x), a = Math.min(a, _e229.y), r = Math.max(r, _e229.x), s = Math.max(s, _e229.y), i.push(_e229);\n            }\n          } catch (err) {\n            _iterator167.e(err);\n          } finally {\n            _iterator167.f();\n          }\n          var n = this.grid.query(o, a, r, s).concat(this.ignoredGrid.query(o, a, r, s)),\n            l = {},\n            c = {};\n          var _iterator168 = _createForOfIteratorHelper(n),\n            _step168;\n          try {\n            for (_iterator168.s(); !(_step168 = _iterator168.n()).done;) {\n              var _e230 = _step168.value;\n              var _o86 = _e230.key;\n              if (void 0 === l[_o86.bucketInstanceId] && (l[_o86.bucketInstanceId] = {}), l[_o86.bucketInstanceId][_o86.featureIndex]) continue;\n              var _a103 = [new t.pointGeometry(_e230.x1, _e230.y1), new t.pointGeometry(_e230.x2, _e230.y1), new t.pointGeometry(_e230.x2, _e230.y2), new t.pointGeometry(_e230.x1, _e230.y2)];\n              t.polygonIntersectsPolygon(i, _a103) && (l[_o86.bucketInstanceId][_o86.featureIndex] = !0, void 0 === c[_o86.bucketInstanceId] && (c[_o86.bucketInstanceId] = []), c[_o86.bucketInstanceId].push(_o86.featureIndex));\n            }\n          } catch (err) {\n            _iterator168.e(err);\n          } finally {\n            _iterator168.f();\n          }\n          return c;\n        }\n      }, {\n        key: \"insertCollisionBox\",\n        value: function insertCollisionBox(t, e, i, o, a, r) {\n          (i ? this.ignoredGrid : this.grid).insert({\n            bucketInstanceId: o,\n            featureIndex: a,\n            collisionGroupID: r,\n            overlapMode: e\n          }, t[0], t[1], t[2], t[3]);\n        }\n      }, {\n        key: \"insertCollisionCircles\",\n        value: function insertCollisionCircles(t, e, i, o, a, r) {\n          var s = i ? this.ignoredGrid : this.grid,\n            n = {\n              bucketInstanceId: o,\n              featureIndex: a,\n              collisionGroupID: r,\n              overlapMode: e\n            };\n          for (var _e231 = 0; _e231 < t.length; _e231 += 4) s.insertCircle(n, t[_e231], t[_e231 + 1], t[_e231 + 2]);\n        }\n      }, {\n        key: \"projectAndGetPerspectiveRatio\",\n        value: function projectAndGetPerspectiveRatio(e, i, o, a) {\n          var r;\n          return a ? (r = [i, o, a(i, o), 1], t.transformMat4(r, r, e)) : (r = [i, o, 0, 1], xt(r, r, e)), {\n            point: new t.pointGeometry((r[0] / r[3] + 1) / 2 * this.transform.width + vt, (-r[1] / r[3] + 1) / 2 * this.transform.height + vt),\n            perspectiveRatio: .5 + this.transform.cameraToCenterDistance / r[3] * .5\n          };\n        }\n      }, {\n        key: \"isOffscreen\",\n        value: function isOffscreen(t, e, i, o) {\n          return i < vt || t >= this.screenRightBoundary || o < vt || e > this.screenBottomBoundary;\n        }\n      }, {\n        key: \"isInsideGrid\",\n        value: function isInsideGrid(t, e, i, o) {\n          return i >= 0 && t < this.gridRightBoundary && o >= 0 && e < this.gridBottomBoundary;\n        }\n      }, {\n        key: \"getViewportMatrix\",\n        value: function getViewportMatrix() {\n          var e = t.identity([]);\n          return t.translate(e, e, [-100, -100, 0]), e;\n        }\n      }]);\n      return yt;\n    }();\n    function bt(e, i, o) {\n      return i * (t.EXTENT / (e.tileSize * Math.pow(2, o - e.tileID.overscaledZ)));\n    }\n    var wt = /*#__PURE__*/function () {\n      function wt(t, e, i, o) {\n        _classCallCheck(this, wt);\n        this.opacity = t ? Math.max(0, Math.min(1, t.opacity + (t.placed ? e : -e))) : o && i ? 1 : 0, this.placed = i;\n      }\n      _createClass(wt, [{\n        key: \"isHidden\",\n        value: function isHidden() {\n          return 0 === this.opacity && !this.placed;\n        }\n      }]);\n      return wt;\n    }();\n    var Tt = /*#__PURE__*/function () {\n      function Tt(t, e, i, o, a) {\n        _classCallCheck(this, Tt);\n        this.text = new wt(t ? t.text : null, e, i, a), this.icon = new wt(t ? t.icon : null, e, o, a);\n      }\n      _createClass(Tt, [{\n        key: \"isHidden\",\n        value: function isHidden() {\n          return this.text.isHidden() && this.icon.isHidden();\n        }\n      }]);\n      return Tt;\n    }();\n    var Et = /*#__PURE__*/_createClass(function Et(t, e, i) {\n      _classCallCheck(this, Et);\n      this.text = t, this.icon = e, this.skipFade = i;\n    });\n    var It = /*#__PURE__*/_createClass(function It() {\n      _classCallCheck(this, It);\n      this.invProjMatrix = t.create(), this.viewportMatrix = t.create(), this.circles = [];\n    });\n    var Ct = /*#__PURE__*/_createClass(function Ct(t, e, i, o, a) {\n      _classCallCheck(this, Ct);\n      this.bucketInstanceId = t, this.featureIndex = e, this.sourceLayerIndex = i, this.bucketIndex = o, this.tileID = a;\n    });\n    var St = /*#__PURE__*/function () {\n      function St(t) {\n        _classCallCheck(this, St);\n        this.crossSourceCollisions = t, this.maxGroupID = 0, this.collisionGroups = {};\n      }\n      _createClass(St, [{\n        key: \"get\",\n        value: function get(t) {\n          if (this.crossSourceCollisions) return {\n            ID: 0,\n            predicate: null\n          };\n          if (!this.collisionGroups[t]) {\n            var _e232 = ++this.maxGroupID;\n            this.collisionGroups[t] = {\n              ID: _e232,\n              predicate: function predicate(t) {\n                return t.collisionGroupID === _e232;\n              }\n            };\n          }\n          return this.collisionGroups[t];\n        }\n      }]);\n      return St;\n    }();\n    function Dt(e, i, o, a, r) {\n      var _t$getAnchorAlignment = t.getAnchorAlignment(e),\n        s = _t$getAnchorAlignment.horizontalAlign,\n        n = _t$getAnchorAlignment.verticalAlign,\n        l = -(s - .5) * i,\n        c = -(n - .5) * o,\n        h = t.evaluateVariableOffset(e, a);\n      return new t.pointGeometry(l + h[0] * r, c + h[1] * r);\n    }\n    function zt(e, i, o, a, r, s) {\n      var n = e.x1,\n        l = e.x2,\n        c = e.y1,\n        h = e.y2,\n        u = e.anchorPointX,\n        d = e.anchorPointY,\n        m = new t.pointGeometry(i, o);\n      return a && m._rotate(r ? s : -s), {\n        x1: n + m.x,\n        y1: c + m.y,\n        x2: l + m.x,\n        y2: h + m.y,\n        anchorPointX: u,\n        anchorPointY: d\n      };\n    }\n    var Pt = /*#__PURE__*/function () {\n      function Pt(t, e, i, o, a) {\n        _classCallCheck(this, Pt);\n        this.transform = t.clone(), this.terrain = e, this.collisionIndex = new yt(this.transform), this.placements = {}, this.opacities = {}, this.variableOffsets = {}, this.stale = !1, this.commitTime = 0, this.fadeDuration = i, this.retainedQueryData = {}, this.collisionGroups = new St(o), this.collisionCircleArrays = {}, this.prevPlacement = a, a && (a.prevPlacement = void 0), this.placedOrientations = {};\n      }\n      _createClass(Pt, [{\n        key: \"getBucketParts\",\n        value: function getBucketParts(e, i, o, a) {\n          var r = o.getBucket(i),\n            s = o.latestFeatureIndex;\n          if (!r || !s || i.id !== r.layerIds[0]) return;\n          var n = o.collisionBoxArray,\n            l = r.layers[0].layout,\n            c = Math.pow(2, this.transform.zoom - o.tileID.overscaledZ),\n            h = o.tileSize / t.EXTENT,\n            u = this.transform.calculatePosMatrix(o.tileID.toUnwrapped()),\n            d = \"map\" === l.get(\"text-pitch-alignment\"),\n            m = \"map\" === l.get(\"text-rotation-alignment\"),\n            _ = bt(o, 1, this.transform.zoom),\n            p = rt(u, d, m, this.transform, _);\n          var f = null;\n          if (d) {\n            var _e233 = st(u, d, m, this.transform, _);\n            f = t.multiply([], this.transform.labelPlaneMatrix, _e233);\n          }\n          this.retainedQueryData[r.bucketInstanceId] = new Ct(r.bucketInstanceId, s, r.sourceLayerIndex, r.index, o.tileID);\n          var g = {\n            bucket: r,\n            layout: l,\n            posMatrix: u,\n            textLabelPlaneMatrix: p,\n            labelToScreenMatrix: f,\n            scale: c,\n            textPixelRatio: h,\n            holdingForFade: o.holdingForFade(),\n            collisionBoxArray: n,\n            partiallyEvaluatedTextSize: t.evaluateSizeForZoom(r.textSizeData, this.transform.zoom),\n            collisionGroup: this.collisionGroups.get(r.sourceID)\n          };\n          if (a) {\n            var _iterator169 = _createForOfIteratorHelper(r.sortKeyRanges),\n              _step169;\n            try {\n              for (_iterator169.s(); !(_step169 = _iterator169.n()).done;) {\n                var _t254 = _step169.value;\n                var _i186 = _t254.sortKey,\n                  _o87 = _t254.symbolInstanceStart,\n                  _a104 = _t254.symbolInstanceEnd;\n                e.push({\n                  sortKey: _i186,\n                  symbolInstanceStart: _o87,\n                  symbolInstanceEnd: _a104,\n                  parameters: g\n                });\n              }\n            } catch (err) {\n              _iterator169.e(err);\n            } finally {\n              _iterator169.f();\n            }\n          } else e.push({\n            symbolInstanceStart: 0,\n            symbolInstanceEnd: r.symbolInstances.length,\n            parameters: g\n          });\n        }\n      }, {\n        key: \"attemptAnchorPlacement\",\n        value: function attemptAnchorPlacement(t, e, i, o, a, r, s, n, l, c, h, u, d, m, _, p) {\n          var f = [u.textOffset0, u.textOffset1],\n            g = Dt(t, i, o, f, a),\n            x = this.collisionIndex.placeCollisionBox(zt(e, g.x, g.y, r, s, this.transform.angle), h, n, l, c.predicate, p);\n          if ((!_ || 0 !== this.collisionIndex.placeCollisionBox(zt(_, g.x, g.y, r, s, this.transform.angle), h, n, l, c.predicate, p).box.length) && x.box.length > 0) {\n            var _e234;\n            if (this.prevPlacement && this.prevPlacement.variableOffsets[u.crossTileID] && this.prevPlacement.placements[u.crossTileID] && this.prevPlacement.placements[u.crossTileID].text && (_e234 = this.prevPlacement.variableOffsets[u.crossTileID].anchor), 0 === u.crossTileID) throw new Error(\"symbolInstance.crossTileID can't be 0\");\n            return this.variableOffsets[u.crossTileID] = {\n              textOffset: f,\n              width: i,\n              height: o,\n              anchor: t,\n              textBoxScale: a,\n              prevAnchor: _e234\n            }, this.markUsedJustification(d, t, u, m), d.allowVerticalPlacement && (this.markUsedOrientation(d, m, u), this.placedOrientations[u.crossTileID] = m), {\n              shift: g,\n              placedGlyphBoxes: x\n            };\n          }\n        }\n      }, {\n        key: \"placeLayerBucketPart\",\n        value: function placeLayerBucketPart(e, i, o) {\n          var _this59 = this;\n          var _e$parameters = e.parameters,\n            a = _e$parameters.bucket,\n            r = _e$parameters.layout,\n            s = _e$parameters.posMatrix,\n            n = _e$parameters.textLabelPlaneMatrix,\n            l = _e$parameters.labelToScreenMatrix,\n            c = _e$parameters.textPixelRatio,\n            h = _e$parameters.holdingForFade,\n            u = _e$parameters.collisionBoxArray,\n            d = _e$parameters.partiallyEvaluatedTextSize,\n            m = _e$parameters.collisionGroup,\n            _ = r.get(\"text-optional\"),\n            p = r.get(\"icon-optional\"),\n            f = t.getOverlapMode(r, \"text-overlap\", \"text-allow-overlap\"),\n            g = \"always\" === f,\n            x = t.getOverlapMode(r, \"icon-overlap\", \"icon-allow-overlap\"),\n            v = \"always\" === x,\n            y = \"map\" === r.get(\"text-rotation-alignment\"),\n            b = \"map\" === r.get(\"text-pitch-alignment\"),\n            w = \"none\" !== r.get(\"icon-text-fit\"),\n            T = \"viewport-y\" === r.get(\"symbol-z-order\"),\n            E = g && (v || !a.hasIconData() || p),\n            I = v && (g || !a.hasTextData() || _);\n          !a.collisionArrays && u && a.deserializeCollisionBoxes(u);\n          var C = function C(e, u) {\n            if (i[e.crossTileID]) return;\n            if (h) return void (_this59.placements[e.crossTileID] = new Et(!1, !1, !1));\n            var v = !1,\n              T = !1,\n              C = !0,\n              S = null,\n              D = {\n                box: null,\n                offscreen: null\n              },\n              z = {\n                box: null,\n                offscreen: null\n              },\n              P = null,\n              M = null,\n              A = null,\n              L = 0,\n              R = 0,\n              k = 0;\n            u.textFeatureIndex ? L = u.textFeatureIndex : e.useRuntimeCollisionCircles && (L = e.featureIndex), u.verticalTextFeatureIndex && (R = u.verticalTextFeatureIndex);\n            var B = _this59.retainedQueryData[a.bucketInstanceId].tileID,\n              F = _this59.terrain ? function (t, e) {\n                return _this59.terrain.getElevation(B, t, e);\n              } : null;\n            for (var _i187 = 0, _arr2 = [\"textBox\", \"verticalTextBox\", \"iconBox\", \"verticalIconBox\"]; _i187 < _arr2.length; _i187++) {\n              var _t255 = _arr2[_i187];\n              var _e235 = u[_t255];\n              _e235 && (_e235.elevation = F ? F(_e235.anchorPointX, _e235.anchorPointY) : 0);\n            }\n            var O = u.textBox;\n            if (O) {\n              var _i188 = function _i188(i) {\n                  var o = t.WritingMode.horizontal;\n                  if (a.allowVerticalPlacement && !i && _this59.prevPlacement) {\n                    var _t256 = _this59.prevPlacement.placedOrientations[e.crossTileID];\n                    _t256 && (_this59.placedOrientations[e.crossTileID] = _t256, o = _t256, _this59.markUsedOrientation(a, o, e));\n                  }\n                  return o;\n                },\n                _o88 = function _o88(i, o) {\n                  if (a.allowVerticalPlacement && e.numVerticalGlyphVertices > 0 && u.verticalTextBox) {\n                    var _iterator170 = _createForOfIteratorHelper(a.writingModes),\n                      _step170;\n                    try {\n                      for (_iterator170.s(); !(_step170 = _iterator170.n()).done;) {\n                        var _e236 = _step170.value;\n                        if (_e236 === t.WritingMode.vertical ? (D = o(), z = D) : D = i(), D && D.box && D.box.length) break;\n                      }\n                    } catch (err) {\n                      _iterator170.e(err);\n                    } finally {\n                      _iterator170.f();\n                    }\n                  } else D = i();\n                };\n              if (r.get(\"text-variable-anchor\")) {\n                var _n127 = r.get(\"text-variable-anchor\");\n                if (_this59.prevPlacement && _this59.prevPlacement.variableOffsets[e.crossTileID]) {\n                  var _t257 = _this59.prevPlacement.variableOffsets[e.crossTileID];\n                  _n127.indexOf(_t257.anchor) > 0 && (_n127 = _n127.filter(function (e) {\n                    return e !== _t257.anchor;\n                  }), _n127.unshift(_t257.anchor));\n                }\n                var _l49 = function _l49(t, i, o) {\n                  var r = t.x2 - t.x1,\n                    l = t.y2 - t.y1,\n                    h = e.textBoxScale,\n                    u = w && \"never\" === x ? i : null;\n                  var d = {\n                    box: [],\n                    offscreen: !1\n                  };\n                  var _ = \"never\" !== f ? 2 * _n127.length : _n127.length;\n                  for (var _i189 = 0; _i189 < _; ++_i189) {\n                    var _8 = _this59.attemptAnchorPlacement(_n127[_i189 % _n127.length], t, r, l, h, y, b, c, s, m, _i189 >= _n127.length ? f : \"never\", e, a, o, u, F);\n                    if (_8 && (d = _8.placedGlyphBoxes, d && d.box && d.box.length)) {\n                      v = !0, S = _8.shift;\n                      break;\n                    }\n                  }\n                  return d;\n                };\n                _o88(function () {\n                  return _l49(O, u.iconBox, t.WritingMode.horizontal);\n                }, function () {\n                  var i = u.verticalTextBox;\n                  return a.allowVerticalPlacement && !(D && D.box && D.box.length) && e.numVerticalGlyphVertices > 0 && i ? _l49(i, u.verticalIconBox, t.WritingMode.vertical) : {\n                    box: null,\n                    offscreen: null\n                  };\n                }), D && (v = D.box, C = D.offscreen);\n                var _h20 = _i188(D && D.box);\n                if (!v && _this59.prevPlacement) {\n                  var _t258 = _this59.prevPlacement.variableOffsets[e.crossTileID];\n                  _t258 && (_this59.variableOffsets[e.crossTileID] = _t258, _this59.markUsedJustification(a, _t258.anchor, e, _h20));\n                }\n              } else {\n                var _r172 = function _r172(t, i) {\n                  var o = _this59.collisionIndex.placeCollisionBox(t, f, c, s, m.predicate, F);\n                  return o && o.box && o.box.length && (_this59.markUsedOrientation(a, i, e), _this59.placedOrientations[e.crossTileID] = i), o;\n                };\n                _o88(function () {\n                  return _r172(O, t.WritingMode.horizontal);\n                }, function () {\n                  var i = u.verticalTextBox;\n                  return a.allowVerticalPlacement && e.numVerticalGlyphVertices > 0 && i ? _r172(i, t.WritingMode.vertical) : {\n                    box: null,\n                    offscreen: null\n                  };\n                }), _i188(D && D.box && D.box.length);\n              }\n            }\n            if (P = D, v = P && P.box && P.box.length > 0, C = P && P.offscreen, e.useRuntimeCollisionCircles) {\n              var _i190 = a.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),\n                _c28 = t.evaluateSizeForFeature(a.textSizeData, d, _i190),\n                _h21 = r.get(\"text-padding\");\n              M = _this59.collisionIndex.placeCollisionCircles(f, _i190, a.lineVertexArray, a.glyphOffsetArray, _c28, s, n, l, o, b, m.predicate, e.collisionCircleDiameter, _h21, F), M.circles.length && M.collisionDetected && !o && t.warnOnce(\"Collisions detected, but collision boxes are not shown\"), v = g || M.circles.length > 0 && !M.collisionDetected, C = C && M.offscreen;\n            }\n            if (u.iconFeatureIndex && (k = u.iconFeatureIndex), u.iconBox) {\n              var _t259 = function _t259(t) {\n                var e = w && S ? zt(t, S.x, S.y, y, b, _this59.transform.angle) : t;\n                return _this59.collisionIndex.placeCollisionBox(e, x, c, s, m.predicate, F);\n              };\n              z && z.box && z.box.length && u.verticalIconBox ? (A = _t259(u.verticalIconBox), T = A.box.length > 0) : (A = _t259(u.iconBox), T = A.box.length > 0), C = C && A.offscreen;\n            }\n            var U = _ || 0 === e.numHorizontalGlyphVertices && 0 === e.numVerticalGlyphVertices,\n              N = p || 0 === e.numIconVertices;\n            if (U || N ? N ? U || (T = T && v) : v = T && v : T = v = T && v, v && P && P.box && _this59.collisionIndex.insertCollisionBox(P.box, f, r.get(\"text-ignore-placement\"), a.bucketInstanceId, z && z.box && R ? R : L, m.ID), T && A && _this59.collisionIndex.insertCollisionBox(A.box, x, r.get(\"icon-ignore-placement\"), a.bucketInstanceId, k, m.ID), M && (v && _this59.collisionIndex.insertCollisionCircles(M.circles, f, r.get(\"text-ignore-placement\"), a.bucketInstanceId, L, m.ID), o)) {\n              var _t260 = a.bucketInstanceId;\n              var _e237 = _this59.collisionCircleArrays[_t260];\n              void 0 === _e237 && (_e237 = _this59.collisionCircleArrays[_t260] = new It());\n              for (var _t261 = 0; _t261 < M.circles.length; _t261 += 4) _e237.circles.push(M.circles[_t261 + 0]), _e237.circles.push(M.circles[_t261 + 1]), _e237.circles.push(M.circles[_t261 + 2]), _e237.circles.push(M.collisionDetected ? 1 : 0);\n            }\n            if (0 === e.crossTileID) throw new Error(\"symbolInstance.crossTileID can't be 0\");\n            if (0 === a.bucketInstanceId) throw new Error(\"bucket.bucketInstanceId can't be 0\");\n            _this59.placements[e.crossTileID] = new Et(v || E, T || I, C || a.justReloaded), i[e.crossTileID] = !0;\n          };\n          if (T) {\n            if (0 !== e.symbolInstanceStart) throw new Error(\"bucket.bucketInstanceId should be 0\");\n            var _t262 = a.getSortedSymbolIndexes(this.transform.angle);\n            for (var _e238 = _t262.length - 1; _e238 >= 0; --_e238) {\n              var _i191 = _t262[_e238];\n              C(a.symbolInstances.get(_i191), a.collisionArrays[_i191]);\n            }\n          } else for (var _t263 = e.symbolInstanceStart; _t263 < e.symbolInstanceEnd; _t263++) C(a.symbolInstances.get(_t263), a.collisionArrays[_t263]);\n          if (o && a.bucketInstanceId in this.collisionCircleArrays) {\n            var _e239 = this.collisionCircleArrays[a.bucketInstanceId];\n            t.invert(_e239.invProjMatrix, s), _e239.viewportMatrix = this.collisionIndex.getViewportMatrix();\n          }\n          a.justReloaded = !1;\n        }\n      }, {\n        key: \"markUsedJustification\",\n        value: function markUsedJustification(e, i, o, a) {\n          var r;\n          r = a === t.WritingMode.vertical ? o.verticalPlacedTextSymbolIndex : {\n            left: o.leftJustifiedTextSymbolIndex,\n            center: o.centerJustifiedTextSymbolIndex,\n            right: o.rightJustifiedTextSymbolIndex\n          }[t.getAnchorJustification(i)];\n          var s = [o.leftJustifiedTextSymbolIndex, o.centerJustifiedTextSymbolIndex, o.rightJustifiedTextSymbolIndex, o.verticalPlacedTextSymbolIndex];\n          for (var _i192 = 0, _s90 = s; _i192 < _s90.length; _i192++) {\n            var _t264 = _s90[_i192];\n            _t264 >= 0 && (e.text.placedSymbolArray.get(_t264).crossTileID = r >= 0 && _t264 !== r ? 0 : o.crossTileID);\n          }\n        }\n      }, {\n        key: \"markUsedOrientation\",\n        value: function markUsedOrientation(e, i, o) {\n          var a = i === t.WritingMode.horizontal || i === t.WritingMode.horizontalOnly ? i : 0,\n            r = i === t.WritingMode.vertical ? i : 0,\n            s = [o.leftJustifiedTextSymbolIndex, o.centerJustifiedTextSymbolIndex, o.rightJustifiedTextSymbolIndex];\n          for (var _i193 = 0, _s91 = s; _i193 < _s91.length; _i193++) {\n            var _t265 = _s91[_i193];\n            e.text.placedSymbolArray.get(_t265).placedOrientation = a;\n          }\n          o.verticalPlacedTextSymbolIndex && (e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).placedOrientation = r);\n        }\n      }, {\n        key: \"commit\",\n        value: function commit(t) {\n          this.commitTime = t, this.zoomAtLastRecencyCheck = this.transform.zoom;\n          var e = this.prevPlacement;\n          var i = !1;\n          this.prevZoomAdjustment = e ? e.zoomAdjustment(this.transform.zoom) : 0;\n          var o = e ? e.symbolFadeChange(t) : 1,\n            a = e ? e.opacities : {},\n            r = e ? e.variableOffsets : {},\n            s = e ? e.placedOrientations : {};\n          for (var _t266 in this.placements) {\n            var _e240 = this.placements[_t266],\n              _r173 = a[_t266];\n            _r173 ? (this.opacities[_t266] = new Tt(_r173, o, _e240.text, _e240.icon), i = i || _e240.text !== _r173.text.placed || _e240.icon !== _r173.icon.placed) : (this.opacities[_t266] = new Tt(null, o, _e240.text, _e240.icon, _e240.skipFade), i = i || _e240.text || _e240.icon);\n          }\n          for (var _t267 in a) {\n            var _e241 = a[_t267];\n            if (!this.opacities[_t267]) {\n              var _a105 = new Tt(_e241, o, !1, !1);\n              _a105.isHidden() || (this.opacities[_t267] = _a105, i = i || _e241.text.placed || _e241.icon.placed);\n            }\n          }\n          for (var _t268 in r) this.variableOffsets[_t268] || !this.opacities[_t268] || this.opacities[_t268].isHidden() || (this.variableOffsets[_t268] = r[_t268]);\n          for (var _t269 in s) this.placedOrientations[_t269] || !this.opacities[_t269] || this.opacities[_t269].isHidden() || (this.placedOrientations[_t269] = s[_t269]);\n          if (e && void 0 === e.lastPlacementChangeTime) throw new Error(\"Last placement time for previous placement is not defined\");\n          i ? this.lastPlacementChangeTime = t : \"number\" != typeof this.lastPlacementChangeTime && (this.lastPlacementChangeTime = e ? e.lastPlacementChangeTime : t);\n        }\n      }, {\n        key: \"updateLayerOpacities\",\n        value: function updateLayerOpacities(t, e) {\n          var i = {};\n          var _iterator171 = _createForOfIteratorHelper(e),\n            _step171;\n          try {\n            for (_iterator171.s(); !(_step171 = _iterator171.n()).done;) {\n              var _o89 = _step171.value;\n              var _e242 = _o89.getBucket(t);\n              _e242 && _o89.latestFeatureIndex && t.id === _e242.layerIds[0] && this.updateBucketOpacities(_e242, i, _o89.collisionBoxArray);\n            }\n          } catch (err) {\n            _iterator171.e(err);\n          } finally {\n            _iterator171.f();\n          }\n        }\n      }, {\n        key: \"updateBucketOpacities\",\n        value: function updateBucketOpacities(e, i, o) {\n          var _this60 = this;\n          e.hasTextData() && e.text.opacityVertexArray.clear(), e.hasIconData() && e.icon.opacityVertexArray.clear(), e.hasIconCollisionBoxData() && e.iconCollisionBox.collisionVertexArray.clear(), e.hasTextCollisionBoxData() && e.textCollisionBox.collisionVertexArray.clear();\n          var a = e.layers[0].layout,\n            r = new Tt(null, 0, !1, !1, !0),\n            s = a.get(\"text-allow-overlap\"),\n            n = a.get(\"icon-allow-overlap\"),\n            l = a.get(\"text-variable-anchor\"),\n            c = \"map\" === a.get(\"text-rotation-alignment\"),\n            h = \"map\" === a.get(\"text-pitch-alignment\"),\n            u = \"none\" !== a.get(\"icon-text-fit\"),\n            d = new Tt(null, 0, s && (n || !e.hasIconData() || a.get(\"icon-optional\")), n && (s || !e.hasTextData() || a.get(\"text-optional\")), !0);\n          !e.collisionArrays && o && (e.hasIconCollisionBoxData() || e.hasTextCollisionBoxData()) && e.deserializeCollisionBoxes(o);\n          var m = function m(t, e, i) {\n            for (var _o90 = 0; _o90 < e / 4; _o90++) t.opacityVertexArray.emplaceBack(i);\n          };\n          var _loop5 = function _loop5() {\n            var a = e.symbolInstances.get(_o91),\n              s = a.numHorizontalGlyphVertices,\n              n = a.numVerticalGlyphVertices,\n              _ = a.crossTileID;\n            var p = _this60.opacities[_];\n            i[_] ? p = r : p || (p = d, _this60.opacities[_] = p), i[_] = !0;\n            var f = a.numIconVertices > 0,\n              g = _this60.placedOrientations[a.crossTileID],\n              x = g === t.WritingMode.vertical,\n              v = g === t.WritingMode.horizontal || g === t.WritingMode.horizontalOnly;\n            if (s > 0 || n > 0) {\n              var _t271 = Ut(p.text);\n              m(e.text, s, x ? Nt : _t271), m(e.text, n, v ? Nt : _t271);\n              var _i194 = p.text.isHidden();\n              [a.rightJustifiedTextSymbolIndex, a.centerJustifiedTextSymbolIndex, a.leftJustifiedTextSymbolIndex].forEach(function (t) {\n                t >= 0 && (e.text.placedSymbolArray.get(t).hidden = _i194 || x ? 1 : 0);\n              }), a.verticalPlacedTextSymbolIndex >= 0 && (e.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).hidden = _i194 || v ? 1 : 0);\n              var _o92 = _this60.variableOffsets[a.crossTileID];\n              _o92 && _this60.markUsedJustification(e, _o92.anchor, a, g);\n              var _r174 = _this60.placedOrientations[a.crossTileID];\n              _r174 && (_this60.markUsedJustification(e, \"left\", a, _r174), _this60.markUsedOrientation(e, _r174, a));\n            }\n            if (f) {\n              var _t272 = Ut(p.icon),\n                _i195 = !(u && a.verticalPlacedIconSymbolIndex && x);\n              a.placedIconSymbolIndex >= 0 && (m(e.icon, a.numIconVertices, _i195 ? _t272 : Nt), e.icon.placedSymbolArray.get(a.placedIconSymbolIndex).hidden = p.icon.isHidden()), a.verticalPlacedIconSymbolIndex >= 0 && (m(e.icon, a.numVerticalIconVertices, _i195 ? Nt : _t272), e.icon.placedSymbolArray.get(a.verticalPlacedIconSymbolIndex).hidden = p.icon.isHidden());\n            }\n            if (e.hasIconCollisionBoxData() || e.hasTextCollisionBoxData()) {\n              var _i196 = e.collisionArrays[_o91];\n              if (_i196) {\n                var _o93 = new t.pointGeometry(0, 0);\n                if (_i196.textBox || _i196.verticalTextBox) {\n                  var _t273 = !0;\n                  if (l) {\n                    var _e243 = _this60.variableOffsets[_];\n                    _e243 ? (_o93 = Dt(_e243.anchor, _e243.width, _e243.height, _e243.textOffset, _e243.textBoxScale), c && _o93._rotate(h ? _this60.transform.angle : -_this60.transform.angle)) : _t273 = !1;\n                  }\n                  _i196.textBox && Mt(e.textCollisionBox.collisionVertexArray, p.text.placed, !_t273 || x, _o93.x, _o93.y), _i196.verticalTextBox && Mt(e.textCollisionBox.collisionVertexArray, p.text.placed, !_t273 || v, _o93.x, _o93.y);\n                }\n                var _a106 = Boolean(!v && _i196.verticalIconBox);\n                _i196.iconBox && Mt(e.iconCollisionBox.collisionVertexArray, p.icon.placed, _a106, u ? _o93.x : 0, u ? _o93.y : 0), _i196.verticalIconBox && Mt(e.iconCollisionBox.collisionVertexArray, p.icon.placed, !_a106, u ? _o93.x : 0, u ? _o93.y : 0);\n              }\n            }\n          };\n          for (var _o91 = 0; _o91 < e.symbolInstances.length; _o91++) {\n            _loop5();\n          }\n          if (e.sortFeatures(this.transform.angle), this.retainedQueryData[e.bucketInstanceId] && (this.retainedQueryData[e.bucketInstanceId].featureSortOrder = e.featureSortOrder), e.hasTextData() && e.text.opacityVertexBuffer && e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray), e.hasIconData() && e.icon.opacityVertexBuffer && e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray), e.hasIconCollisionBoxData() && e.iconCollisionBox.collisionVertexBuffer && e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray), e.hasTextCollisionBoxData() && e.textCollisionBox.collisionVertexBuffer && e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray), e.text.opacityVertexArray.length !== e.text.layoutVertexArray.length / 4) throw new Error(\"bucket.text.opacityVertexArray.length (= \".concat(e.text.opacityVertexArray.length, \") !== bucket.text.layoutVertexArray.length (= \").concat(e.text.layoutVertexArray.length, \") / 4\"));\n          if (e.icon.opacityVertexArray.length !== e.icon.layoutVertexArray.length / 4) throw new Error(\"bucket.icon.opacityVertexArray.length (= \".concat(e.icon.opacityVertexArray.length, \") !== bucket.icon.layoutVertexArray.length (= \").concat(e.icon.layoutVertexArray.length, \") / 4\"));\n          if (e.bucketInstanceId in this.collisionCircleArrays) {\n            var _t270 = this.collisionCircleArrays[e.bucketInstanceId];\n            e.placementInvProjMatrix = _t270.invProjMatrix, e.placementViewportMatrix = _t270.viewportMatrix, e.collisionCircleArray = _t270.circles, delete this.collisionCircleArrays[e.bucketInstanceId];\n          }\n        }\n      }, {\n        key: \"symbolFadeChange\",\n        value: function symbolFadeChange(t) {\n          return 0 === this.fadeDuration ? 1 : (t - this.commitTime) / this.fadeDuration + this.prevZoomAdjustment;\n        }\n      }, {\n        key: \"zoomAdjustment\",\n        value: function zoomAdjustment(t) {\n          return Math.max(0, (this.transform.zoom - t) / 1.5);\n        }\n      }, {\n        key: \"hasTransitions\",\n        value: function hasTransitions(t) {\n          return this.stale || t - this.lastPlacementChangeTime < this.fadeDuration;\n        }\n      }, {\n        key: \"stillRecent\",\n        value: function stillRecent(t, e) {\n          var i = this.zoomAtLastRecencyCheck === e ? 1 - this.zoomAdjustment(e) : 1;\n          return this.zoomAtLastRecencyCheck = e, this.commitTime + this.fadeDuration * i > t;\n        }\n      }, {\n        key: \"setStale\",\n        value: function setStale() {\n          this.stale = !0;\n        }\n      }]);\n      return Pt;\n    }();\n    function Mt(t, e, i, o, a) {\n      t.emplaceBack(e ? 1 : 0, i ? 1 : 0, o || 0, a || 0), t.emplaceBack(e ? 1 : 0, i ? 1 : 0, o || 0, a || 0), t.emplaceBack(e ? 1 : 0, i ? 1 : 0, o || 0, a || 0), t.emplaceBack(e ? 1 : 0, i ? 1 : 0, o || 0, a || 0);\n    }\n    var At = Math.pow(2, 25),\n      Lt = Math.pow(2, 24),\n      Rt = Math.pow(2, 17),\n      kt = Math.pow(2, 16),\n      Bt = Math.pow(2, 9),\n      Ft = Math.pow(2, 8),\n      Ot = Math.pow(2, 1);\n    function Ut(t) {\n      if (0 === t.opacity && !t.placed) return 0;\n      if (1 === t.opacity && t.placed) return 4294967295;\n      var e = t.placed ? 1 : 0,\n        i = Math.floor(127 * t.opacity);\n      return i * At + e * Lt + i * Rt + e * kt + i * Bt + e * Ft + i * Ot + e;\n    }\n    var Nt = 0;\n    var Gt = /*#__PURE__*/function () {\n      function Gt(t) {\n        _classCallCheck(this, Gt);\n        this._sortAcrossTiles = \"viewport-y\" !== t.layout.get(\"symbol-z-order\") && !t.layout.get(\"symbol-sort-key\").isConstant(), this._currentTileIndex = 0, this._currentPartIndex = 0, this._seenCrossTileIDs = {}, this._bucketParts = [];\n      }\n      _createClass(Gt, [{\n        key: \"continuePlacement\",\n        value: function continuePlacement(t, e, i, o, a) {\n          var r = this._bucketParts;\n          for (; this._currentTileIndex < t.length;) if (e.getBucketParts(r, o, t[this._currentTileIndex], this._sortAcrossTiles), this._currentTileIndex++, a()) return !0;\n          for (this._sortAcrossTiles && (this._sortAcrossTiles = !1, r.sort(function (t, e) {\n            return t.sortKey - e.sortKey;\n          })); this._currentPartIndex < r.length;) if (e.placeLayerBucketPart(r[this._currentPartIndex], this._seenCrossTileIDs, i), this._currentPartIndex++, a()) return !0;\n          return !1;\n        }\n      }]);\n      return Gt;\n    }();\n    var Zt = /*#__PURE__*/function () {\n      function Zt(t, e, i, o, a, r, s, n) {\n        _classCallCheck(this, Zt);\n        this.placement = new Pt(t, e, r, s, n), this._currentPlacementIndex = i.length - 1, this._forceFullPlacement = o, this._showCollisionBoxes = a, this._done = !1;\n      }\n      _createClass(Zt, [{\n        key: \"isDone\",\n        value: function isDone() {\n          return this._done;\n        }\n      }, {\n        key: \"continuePlacement\",\n        value: function continuePlacement(e, i, o) {\n          var _this61 = this;\n          var a = t.exported.now(),\n            r = function r() {\n              var e = t.exported.now() - a;\n              return !_this61._forceFullPlacement && e > 2;\n            };\n          for (; this._currentPlacementIndex >= 0;) {\n            var _t274 = i[e[this._currentPlacementIndex]],\n              _a107 = this.placement.collisionIndex.transform.zoom;\n            if (\"symbol\" === _t274.type && (!_t274.minzoom || _t274.minzoom <= _a107) && (!_t274.maxzoom || _t274.maxzoom > _a107)) {\n              if (this._inProgressLayer || (this._inProgressLayer = new Gt(_t274)), this._inProgressLayer.continuePlacement(o[_t274.source], this.placement, this._showCollisionBoxes, _t274, r)) return;\n              delete this._inProgressLayer;\n            }\n            this._currentPlacementIndex--;\n          }\n          this._done = !0;\n        }\n      }, {\n        key: \"commit\",\n        value: function commit(t) {\n          return this.placement.commit(t), this.placement;\n        }\n      }]);\n      return Zt;\n    }();\n    var Vt = 512 / t.EXTENT / 2;\n    var qt = /*#__PURE__*/function () {\n      function qt(t, e, i) {\n        _classCallCheck(this, qt);\n        this.tileID = t, this.indexedSymbolInstances = {}, this.bucketInstanceId = i;\n        for (var _i197 = 0; _i197 < e.length; _i197++) {\n          var _o94 = e.get(_i197),\n            _a108 = _o94.key;\n          this.indexedSymbolInstances[_a108] || (this.indexedSymbolInstances[_a108] = []), this.indexedSymbolInstances[_a108].push({\n            crossTileID: _o94.crossTileID,\n            coord: this.getScaledCoordinates(_o94, t)\n          });\n        }\n      }\n      _createClass(qt, [{\n        key: \"getScaledCoordinates\",\n        value: function getScaledCoordinates(e, i) {\n          var o = Vt / Math.pow(2, i.canonical.z - this.tileID.canonical.z);\n          return {\n            x: Math.floor((i.canonical.x * t.EXTENT + e.anchorX) * o),\n            y: Math.floor((i.canonical.y * t.EXTENT + e.anchorY) * o)\n          };\n        }\n      }, {\n        key: \"findMatches\",\n        value: function findMatches(t, e, i) {\n          var o = this.tileID.canonical.z < e.canonical.z ? 1 : Math.pow(2, this.tileID.canonical.z - e.canonical.z);\n          for (var _a109 = 0; _a109 < t.length; _a109++) {\n            var _r175 = t.get(_a109);\n            if (_r175.crossTileID) continue;\n            var _s92 = this.indexedSymbolInstances[_r175.key];\n            if (!_s92) continue;\n            var _n128 = this.getScaledCoordinates(_r175, e);\n            var _iterator172 = _createForOfIteratorHelper(_s92),\n              _step172;\n            try {\n              for (_iterator172.s(); !(_step172 = _iterator172.n()).done;) {\n                var _t275 = _step172.value;\n                if (Math.abs(_t275.coord.x - _n128.x) <= o && Math.abs(_t275.coord.y - _n128.y) <= o && !i[_t275.crossTileID]) {\n                  i[_t275.crossTileID] = !0, _r175.crossTileID = _t275.crossTileID;\n                  break;\n                }\n              }\n            } catch (err) {\n              _iterator172.e(err);\n            } finally {\n              _iterator172.f();\n            }\n          }\n        }\n      }]);\n      return qt;\n    }();\n    var jt = /*#__PURE__*/function () {\n      function jt() {\n        _classCallCheck(this, jt);\n        this.maxCrossTileID = 0;\n      }\n      _createClass(jt, [{\n        key: \"generate\",\n        value: function generate() {\n          return ++this.maxCrossTileID;\n        }\n      }]);\n      return jt;\n    }();\n    var $t = /*#__PURE__*/function () {\n      function $t() {\n        _classCallCheck(this, $t);\n        this.indexes = {}, this.usedCrossTileIDs = {}, this.lng = 0;\n      }\n      _createClass($t, [{\n        key: \"handleWrapJump\",\n        value: function handleWrapJump(t) {\n          var e = Math.round((t - this.lng) / 360);\n          if (0 !== e) for (var _t276 in this.indexes) {\n            var _i198 = this.indexes[_t276],\n              _o95 = {};\n            for (var _t277 in _i198) {\n              var _a110 = _i198[_t277];\n              _a110.tileID = _a110.tileID.unwrapTo(_a110.tileID.wrap + e), _o95[_a110.tileID.key] = _a110;\n            }\n            this.indexes[_t276] = _o95;\n          }\n          this.lng = t;\n        }\n      }, {\n        key: \"addBucket\",\n        value: function addBucket(t, e, i) {\n          if (this.indexes[t.overscaledZ] && this.indexes[t.overscaledZ][t.key]) {\n            if (this.indexes[t.overscaledZ][t.key].bucketInstanceId === e.bucketInstanceId) return !1;\n            this.removeBucketCrossTileIDs(t.overscaledZ, this.indexes[t.overscaledZ][t.key]);\n          }\n          for (var _t278 = 0; _t278 < e.symbolInstances.length; _t278++) e.symbolInstances.get(_t278).crossTileID = 0;\n          this.usedCrossTileIDs[t.overscaledZ] || (this.usedCrossTileIDs[t.overscaledZ] = {});\n          var o = this.usedCrossTileIDs[t.overscaledZ];\n          for (var _i199 in this.indexes) {\n            var _a111 = this.indexes[_i199];\n            if (Number(_i199) > t.overscaledZ) for (var _i200 in _a111) {\n              var _r176 = _a111[_i200];\n              _r176.tileID.isChildOf(t) && _r176.findMatches(e.symbolInstances, t, o);\n            } else {\n              var _r177 = _a111[t.scaledTo(Number(_i199)).key];\n              _r177 && _r177.findMatches(e.symbolInstances, t, o);\n            }\n          }\n          for (var _t279 = 0; _t279 < e.symbolInstances.length; _t279++) {\n            var _a112 = e.symbolInstances.get(_t279);\n            _a112.crossTileID || (_a112.crossTileID = i.generate(), o[_a112.crossTileID] = !0);\n          }\n          return void 0 === this.indexes[t.overscaledZ] && (this.indexes[t.overscaledZ] = {}), this.indexes[t.overscaledZ][t.key] = new qt(t, e.symbolInstances, e.bucketInstanceId), !0;\n        }\n      }, {\n        key: \"removeBucketCrossTileIDs\",\n        value: function removeBucketCrossTileIDs(t, e) {\n          for (var _i201 in e.indexedSymbolInstances) {\n            var _iterator173 = _createForOfIteratorHelper(e.indexedSymbolInstances[_i201]),\n              _step173;\n            try {\n              for (_iterator173.s(); !(_step173 = _iterator173.n()).done;) {\n                var _o96 = _step173.value;\n                delete this.usedCrossTileIDs[t][_o96.crossTileID];\n              }\n            } catch (err) {\n              _iterator173.e(err);\n            } finally {\n              _iterator173.f();\n            }\n          }\n        }\n      }, {\n        key: \"removeStaleBuckets\",\n        value: function removeStaleBuckets(t) {\n          var e = !1;\n          for (var _i202 in this.indexes) {\n            var _o97 = this.indexes[_i202];\n            for (var _a113 in _o97) t[_o97[_a113].bucketInstanceId] || (this.removeBucketCrossTileIDs(_i202, _o97[_a113]), delete _o97[_a113], e = !0);\n          }\n          return e;\n        }\n      }]);\n      return $t;\n    }();\n    var Xt = /*#__PURE__*/function () {\n      function Xt() {\n        _classCallCheck(this, Xt);\n        this.layerIndexes = {}, this.crossTileIDs = new jt(), this.maxBucketInstanceId = 0, this.bucketsInCurrentPlacement = {};\n      }\n      _createClass(Xt, [{\n        key: \"addLayer\",\n        value: function addLayer(t, e, i) {\n          var o = this.layerIndexes[t.id];\n          void 0 === o && (o = this.layerIndexes[t.id] = new $t());\n          var a = !1;\n          var r = {};\n          o.handleWrapJump(i);\n          var _iterator174 = _createForOfIteratorHelper(e),\n            _step174;\n          try {\n            for (_iterator174.s(); !(_step174 = _iterator174.n()).done;) {\n              var _i203 = _step174.value;\n              var _e244 = _i203.getBucket(t);\n              _e244 && t.id === _e244.layerIds[0] && (_e244.bucketInstanceId || (_e244.bucketInstanceId = ++this.maxBucketInstanceId), o.addBucket(_i203.tileID, _e244, this.crossTileIDs) && (a = !0), r[_e244.bucketInstanceId] = !0);\n            }\n          } catch (err) {\n            _iterator174.e(err);\n          } finally {\n            _iterator174.f();\n          }\n          return o.removeStaleBuckets(r) && (a = !0), a;\n        }\n      }, {\n        key: \"pruneUnusedLayers\",\n        value: function pruneUnusedLayers(t) {\n          var e = {};\n          t.forEach(function (t) {\n            e[t] = !0;\n          });\n          for (var _t280 in this.layerIndexes) e[_t280] || delete this.layerIndexes[_t280];\n        }\n      }]);\n      return Xt;\n    }();\n    var Wt = t.createLayout([{\n      name: \"a_pos\",\n      type: \"Int16\",\n      components: 2\n    }]);\n    var Ht = /*#__PURE__*/function (_t$Evented8) {\n      _inherits(Ht, _t$Evented8);\n      var _super87 = _createSuper(Ht);\n      function Ht(t) {\n        var _this62;\n        _classCallCheck(this, Ht);\n        _this62 = _super87.call(this), _this62.sourceCache = t, _this62._tiles = {}, _this62._renderableTilesKeys = [], _this62._sourceTileCache = {}, _this62.renderHistory = [], _this62.minzoom = 0, _this62.maxzoom = 22, _this62.tileSize = 512, _this62.deltaZoom = 1, _this62.renderHistorySize = t._cache.max, t.usedForTerrain = !0, t.tileSize = _this62.tileSize * Math.pow(2, _this62.deltaZoom);\n        return _this62;\n      }\n      _createClass(Ht, [{\n        key: \"destruct\",\n        value: function destruct() {\n          this.sourceCache.usedForTerrain = !1, this.sourceCache.tileSize = null;\n          for (var _t281 in this._tiles) {\n            var _e245 = this._tiles[_t281];\n            _e245.textures.forEach(function (t) {\n              return t.destroy();\n            }), _e245.textures = [];\n          }\n        }\n      }, {\n        key: \"update\",\n        value: function update(e, i) {\n          this.sourceCache.update(e, i), this._renderableTilesKeys = [];\n          var _iterator175 = _createForOfIteratorHelper(e.coveringTiles({\n              tileSize: this.tileSize,\n              minzoom: this.minzoom,\n              maxzoom: this.maxzoom,\n              reparseOverscaled: !1,\n              terrain: i\n            })),\n            _step175;\n          try {\n            for (_iterator175.s(); !(_step175 = _iterator175.n()).done;) {\n              var _o98 = _step175.value;\n              this._renderableTilesKeys.push(_o98.key), this._tiles[_o98.key] || (_o98.posMatrix = new Float64Array(16), t.ortho(_o98.posMatrix, 0, t.EXTENT, 0, t.EXTENT, 0, 1), this._tiles[_o98.key] = new k(_o98, this.tileSize));\n            }\n          } catch (err) {\n            _iterator175.e(err);\n          } finally {\n            _iterator175.f();\n          }\n        }\n      }, {\n        key: \"removeOutdated\",\n        value: function removeOutdated(t) {\n          var _this63 = this;\n          var e = {};\n          this.renderHistory = this.renderHistory.filter(function (t, e) {\n            return _this63.renderHistory.indexOf(t) === e;\n          }).slice(0, this.renderHistorySize);\n          var _iterator176 = _createForOfIteratorHelper(this._renderableTilesKeys),\n            _step176;\n          try {\n            for (_iterator176.s(); !(_step176 = _iterator176.n()).done;) {\n              var _t282 = _step176.value;\n              e[_t282] = !0;\n            }\n          } catch (err) {\n            _iterator176.e(err);\n          } finally {\n            _iterator176.f();\n          }\n          var _iterator177 = _createForOfIteratorHelper(this.renderHistory),\n            _step177;\n          try {\n            for (_iterator177.s(); !(_step177 = _iterator177.n()).done;) {\n              var _t283 = _step177.value;\n              e[_t283] = !0;\n            }\n          } catch (err) {\n            _iterator177.e(err);\n          } finally {\n            _iterator177.f();\n          }\n          for (var _i204 in this._tiles) e[_i204] || (this._tiles[_i204].clearTextures(t), delete this._tiles[_i204]);\n        }\n      }, {\n        key: \"getRenderableTiles\",\n        value: function getRenderableTiles() {\n          var _this64 = this;\n          return this._renderableTilesKeys.map(function (t) {\n            return _this64.getTileByID(t);\n          });\n        }\n      }, {\n        key: \"getTileByID\",\n        value: function getTileByID(t) {\n          return this._tiles[t];\n        }\n      }, {\n        key: \"getTerrainCoords\",\n        value: function getTerrainCoords(e) {\n          var i = {};\n          var _iterator178 = _createForOfIteratorHelper(this._renderableTilesKeys),\n            _step178;\n          try {\n            for (_iterator178.s(); !(_step178 = _iterator178.n()).done;) {\n              var _o99 = _step178.value;\n              var _a114 = this._tiles[_o99].tileID;\n              if (_a114.canonical.equals(e.canonical)) {\n                var _a115 = e.clone();\n                _a115.posMatrix = new Float64Array(16), t.ortho(_a115.posMatrix, 0, t.EXTENT, 0, t.EXTENT, 0, 1), i[_o99] = _a115;\n              } else if (_a114.canonical.isChildOf(e.canonical)) {\n                var _r178 = e.clone();\n                _r178.posMatrix = new Float64Array(16);\n                var _s93 = _a114.canonical.z - e.canonical.z,\n                  _n129 = _a114.canonical.x - (_a114.canonical.x >> _s93 << _s93),\n                  _l50 = _a114.canonical.y - (_a114.canonical.y >> _s93 << _s93),\n                  _c29 = t.EXTENT >> _s93;\n                t.ortho(_r178.posMatrix, 0, _c29, 0, _c29, 0, 1), t.translate(_r178.posMatrix, _r178.posMatrix, [-_n129 * _c29, -_l50 * _c29, 0]), i[_o99] = _r178;\n              } else if (e.canonical.isChildOf(_a114.canonical)) {\n                var _r179 = e.clone();\n                _r179.posMatrix = new Float64Array(16);\n                var _s94 = e.canonical.z - _a114.canonical.z,\n                  _n130 = e.canonical.x - (e.canonical.x >> _s94 << _s94),\n                  _l51 = e.canonical.y - (e.canonical.y >> _s94 << _s94),\n                  _c30 = t.EXTENT >> _s94;\n                t.ortho(_r179.posMatrix, 0, t.EXTENT, 0, t.EXTENT, 0, 1), t.translate(_r179.posMatrix, _r179.posMatrix, [_n130 * _c30, _l51 * _c30, 0]), t.scale(_r179.posMatrix, _r179.posMatrix, [1 / Math.pow(2, _s94), 1 / Math.pow(2, _s94), 0]), i[_o99] = _r179;\n              }\n            }\n          } catch (err) {\n            _iterator178.e(err);\n          } finally {\n            _iterator178.f();\n          }\n          return i;\n        }\n      }, {\n        key: \"getSourceTile\",\n        value: function getSourceTile(t, e) {\n          var i = this.sourceCache._source;\n          var o = t.overscaledZ - this.deltaZoom;\n          if (o > i.maxzoom && (o = i.maxzoom), o < i.minzoom) return null;\n          this._sourceTileCache[t.key] || (this._sourceTileCache[t.key] = t.scaledTo(o).key);\n          var a = this.sourceCache.getTileByID(this._sourceTileCache[t.key]);\n          if ((!a || !a.dem) && e) for (; o >= i.minzoom && (!a || !a.dem);) a = this.sourceCache.getTileByID(t.scaledTo(o--).key);\n          return a;\n        }\n      }, {\n        key: \"tilesAfterTime\",\n        value: function tilesAfterTime() {\n          var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Date.now();\n          return Object.values(this._tiles).filter(function (e) {\n            return e.timeLoaded >= t;\n          });\n        }\n      }]);\n      return Ht;\n    }(t.Evented);\n    var Kt = /*#__PURE__*/function () {\n      function Kt(t, e, i) {\n        _classCallCheck(this, Kt);\n        this.style = t, this.sourceCache = new Ht(e), this.options = i, this.exaggeration = \"number\" == typeof i.exaggeration ? i.exaggeration : 1, this.elevationOffset = \"number\" == typeof i.elevationOffset ? i.elevationOffset : 450, this.qualityFactor = 2, this.meshSize = 128, this._demMatrixCache = {}, this.coordsIndex = [], this._coordsTextureSize = 1024, this.clearRerenderCache();\n      }\n      _createClass(Kt, [{\n        key: \"getDEMElevation\",\n        value: function getDEMElevation(e, i, o) {\n          var a = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : t.EXTENT;\n          if (!(i >= 0 && i < a && o >= 0 && o < a)) return this.elevationOffset;\n          var r = 0;\n          var s = this.getTerrainData(e);\n          if (s.tile && s.tile.dem) {\n            var _e246 = t.transformMat4$1([], [i / a * t.EXTENT, o / a * t.EXTENT], s.u_terrain_matrix),\n              _n131 = [_e246[0] * s.tile.dem.dim, _e246[1] * s.tile.dem.dim],\n              _l52 = [Math.floor(_n131[0]), Math.floor(_n131[1])],\n              _c31 = s.tile.dem.get(_l52[0], _l52[1]),\n              _h22 = s.tile.dem.get(_l52[0], _l52[1] + 1),\n              _u29 = s.tile.dem.get(_l52[0] + 1, _l52[1]),\n              _d15 = s.tile.dem.get(_l52[0] + 1, _l52[1] + 1);\n            r = t.number(t.number(_c31, _h22, _n131[0] - _l52[0]), t.number(_u29, _d15, _n131[0] - _l52[0]), _n131[1] - _l52[1]);\n          }\n          return r;\n        }\n      }, {\n        key: \"rememberForRerender\",\n        value: function rememberForRerender(t, e) {\n          for (var _i205 in this.sourceCache._tiles) {\n            var _o100 = this.sourceCache._tiles[_i205];\n            (_o100.tileID.equals(e) || _o100.tileID.isChildOf(e)) && (t === this.sourceCache.sourceCache.id && (_o100.timeLoaded = Date.now()), this._rerender[t] = this._rerender[t] || {}, this._rerender[t][_o100.tileID.key] = !0);\n          }\n        }\n      }, {\n        key: \"needsRerender\",\n        value: function needsRerender(t, e) {\n          return this._rerender[t] && this._rerender[t][e.key];\n        }\n      }, {\n        key: \"clearRerenderCache\",\n        value: function clearRerenderCache() {\n          this._rerender = {};\n        }\n      }, {\n        key: \"getElevation\",\n        value: function getElevation(e, i, o) {\n          var a = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : t.EXTENT;\n          return (this.getDEMElevation(e, i, o, a) + this.elevationOffset) * this.exaggeration;\n        }\n      }, {\n        key: \"getTerrainData\",\n        value: function getTerrainData(e) {\n          if (!this._emptyDemTexture) {\n            var _e247 = this.style.map.painter.context,\n              _i206 = new t.RGBAImage({\n                width: 1,\n                height: 1\n              }, new Uint8Array(4));\n            this._emptyDepthTexture = new l(_e247, _i206, _e247.gl.RGBA, {\n              premultiply: !1\n            }), this._emptyDemUnpack = [0, 0, 0, 0], this._emptyDemTexture = new l(_e247, new t.RGBAImage({\n              width: 1,\n              height: 1\n            }), _e247.gl.RGBA, {\n              premultiply: !1\n            }), this._emptyDemTexture.bind(_e247.gl.NEAREST, _e247.gl.CLAMP_TO_EDGE), this._emptyDemMatrix = t.identity([]);\n          }\n          var i = this.sourceCache.getSourceTile(e, !0);\n          if (i && i.dem && (!i.demTexture || i.needsTerrainPrepare)) {\n            var _t284 = this.style.map.painter.context;\n            i.demTexture = this.style.map.painter.getTileTexture(i.dem.stride), i.demTexture ? i.demTexture.update(i.dem.getPixels(), {\n              premultiply: !1\n            }) : i.demTexture = new l(_t284, i.dem.getPixels(), _t284.gl.RGBA, {\n              premultiply: !1\n            }), i.demTexture.bind(_t284.gl.NEAREST, _t284.gl.CLAMP_TO_EDGE), i.needsTerrainPrepare = !1;\n          }\n          var o = i && i + i.tileID.key + e.key;\n          if (o && !this._demMatrixCache[o]) {\n            var _o101 = this.sourceCache.sourceCache._source.maxzoom;\n            var _a116 = e.canonical.z - i.tileID.canonical.z;\n            e.overscaledZ > e.canonical.z && (e.canonical.z >= _o101 ? _a116 = e.canonical.z - _o101 : t.warnOnce(\"cannot calculate elevation if elevation maxzoom > source.maxzoom\"));\n            var _r180 = e.canonical.x - (e.canonical.x >> _a116 << _a116),\n              _s95 = e.canonical.y - (e.canonical.y >> _a116 << _a116),\n              _n132 = t.fromScaling(new Float64Array(16), [1 / (t.EXTENT << _a116), 1 / (t.EXTENT << _a116), 0]);\n            t.translate(_n132, _n132, [_r180 * t.EXTENT, _s95 * t.EXTENT, 0]), this._demMatrixCache[e.key] = {\n              matrix: _n132,\n              coord: e\n            };\n          }\n          return {\n            u_depth: 2,\n            u_terrain: 3,\n            u_terrain_dim: i && i.dem && i.dem.dim || 1,\n            u_terrain_matrix: o ? this._demMatrixCache[e.key].matrix : this._emptyDemMatrix,\n            u_terrain_unpack: i && i.dem && i.dem.getUnpackVector() || this._emptyDemUnpack,\n            u_terrain_offset: this.elevationOffset,\n            u_terrain_exaggeration: this.exaggeration,\n            texture: (i && i.demTexture || this._emptyDemTexture).texture,\n            depthTexture: (this._fboDepthTexture || this._emptyDepthTexture).texture,\n            tile: i\n          };\n        }\n      }, {\n        key: \"getRTTFramebuffer\",\n        value: function getRTTFramebuffer() {\n          var t = this.style.map.painter;\n          if (!this._rttFramebuffer) {\n            var _e248 = this.sourceCache.tileSize * this.qualityFactor;\n            this._rttFramebuffer = t.context.createFramebuffer(_e248, _e248, !0), this._rttFramebuffer.depthAttachment.set(t.context.createRenderbuffer(t.context.gl.DEPTH_COMPONENT16, _e248, _e248));\n          }\n          return this._rttFramebuffer;\n        }\n      }, {\n        key: \"getFramebuffer\",\n        value: function getFramebuffer(t) {\n          var e = this.style.map.painter,\n            i = e.width / devicePixelRatio,\n            o = e.height / devicePixelRatio;\n          return !this._fbo || this._fbo.width === i && this._fbo.height === o || (this._fbo.destroy(), this._fboCoordsTexture.destroy(), this._fboDepthTexture.destroy(), delete this._fbo, delete this._fboDepthTexture, delete this._fboCoordsTexture), this._fboCoordsTexture || (this._fboCoordsTexture = new l(e.context, {\n            width: i,\n            height: o,\n            data: null\n          }, e.context.gl.RGBA, {\n            premultiply: !1\n          }), this._fboCoordsTexture.bind(e.context.gl.NEAREST, e.context.gl.CLAMP_TO_EDGE)), this._fboDepthTexture || (this._fboDepthTexture = new l(e.context, {\n            width: i,\n            height: o,\n            data: null\n          }, e.context.gl.RGBA, {\n            premultiply: !1\n          }), this._fboDepthTexture.bind(e.context.gl.NEAREST, e.context.gl.CLAMP_TO_EDGE)), this._fbo || (this._fbo = e.context.createFramebuffer(i, o, !0), this._fbo.depthAttachment.set(e.context.createRenderbuffer(e.context.gl.DEPTH_COMPONENT16, i, o))), this._fbo.colorAttachment.set(\"coords\" === t ? this._fboCoordsTexture.texture : this._fboDepthTexture.texture), this._fbo;\n        }\n      }, {\n        key: \"getCoordsTexture\",\n        value: function getCoordsTexture() {\n          var e = this.style.map.painter.context;\n          if (this._coordsTexture) return this._coordsTexture;\n          var i = new Uint8Array(this._coordsTextureSize * this._coordsTextureSize * 4);\n          for (var _t285 = 0, _e249 = 0; _t285 < this._coordsTextureSize; _t285++) for (var _o102 = 0; _o102 < this._coordsTextureSize; _o102++, _e249 += 4) i[_e249 + 0] = 255 & _o102, i[_e249 + 1] = 255 & _t285, i[_e249 + 2] = _o102 >> 8 << 4 | _t285 >> 8, i[_e249 + 3] = 0;\n          var o = new t.RGBAImage({\n              width: this._coordsTextureSize,\n              height: this._coordsTextureSize\n            }, new Uint8Array(i.buffer)),\n            a = new l(e, o, e.gl.RGBA, {\n              premultiply: !1\n            });\n          return a.bind(e.gl.NEAREST, e.gl.CLAMP_TO_EDGE), this._coordsTexture = a, a;\n        }\n      }, {\n        key: \"pointCoordinate\",\n        value: function pointCoordinate(e) {\n          var i = new Uint8Array(4),\n            o = this.style.map.painter,\n            a = o.context,\n            r = a.gl;\n          a.bindFramebuffer.set(this.getFramebuffer(\"coords\").framebuffer), r.readPixels(e.x, o.height / devicePixelRatio - e.y - 1, 1, 1, r.RGBA, r.UNSIGNED_BYTE, i), a.bindFramebuffer.set(null);\n          var s = i[0] + (i[2] >> 4 << 8),\n            n = i[1] + ((15 & i[2]) << 8),\n            l = this.coordsIndex[255 - i[3]],\n            c = l && this.sourceCache.getTileByID(l);\n          if (!c) return null;\n          var h = this._coordsTextureSize,\n            u = (1 << c.tileID.canonical.z) * h;\n          return new t.MercatorCoordinate((c.tileID.canonical.x * h + s) / u, (c.tileID.canonical.y * h + n) / u, this.getElevation(c.tileID, s, n, h));\n        }\n      }, {\n        key: \"getTerrainMesh\",\n        value: function getTerrainMesh() {\n          if (this._mesh) return this._mesh;\n          var e = this.style.map.painter.context,\n            i = new t.PosArray(),\n            o = new t.TriangleIndexArray(),\n            a = this.meshSize,\n            r = t.EXTENT / a,\n            s = a * a;\n          for (var _t286 = 0; _t286 <= a; _t286++) for (var _e250 = 0; _e250 <= a; _e250++) i.emplaceBack(_e250 * r, _t286 * r);\n          for (var _t287 = 0; _t287 < s; _t287 += a + 1) for (var _e251 = 0; _e251 < a; _e251++) o.emplaceBack(_e251 + _t287, a + _e251 + _t287 + 1, a + _e251 + _t287 + 2), o.emplaceBack(_e251 + _t287, a + _e251 + _t287 + 2, _e251 + _t287 + 1);\n          return this._mesh = {\n            indexBuffer: e.createIndexBuffer(o),\n            vertexBuffer: e.createVertexBuffer(i, Wt.members),\n            segments: t.SegmentVector.simpleSegment(0, 0, i.length, o.length)\n          }, this._mesh;\n        }\n      }, {\n        key: \"getMinMaxElevation\",\n        value: function getMinMaxElevation(t) {\n          var e = this.getTerrainData(t).tile,\n            i = {\n              minElevation: null,\n              maxElevation: null\n            };\n          return e && e.dem && (i.minElevation = (e.dem.min + this.elevationOffset) * this.exaggeration, i.maxElevation = (e.dem.max + this.elevationOffset) * this.exaggeration), i;\n        }\n      }]);\n      return Kt;\n    }();\n    var Yt = function Yt(e, i) {\n        return t.emitValidationErrors(e, i && i.filter(function (t) {\n          return \"source.canvas\" !== t.identifier;\n        }));\n      },\n      Jt = t.pick(W, [\"addLayer\", \"removeLayer\", \"setPaintProperty\", \"setLayoutProperty\", \"setFilter\", \"addSource\", \"removeSource\", \"setLayerZoomRange\", \"setLight\", \"setTransition\", \"setGeoJSONSourceData\"]),\n      Qt = t.pick(W, [\"setCenter\", \"setZoom\", \"setBearing\", \"setPitch\"]),\n      te = function () {\n        var e = {},\n          i = t.spec.$version;\n        for (var _o103 in t.spec.$root) {\n          var _a117 = t.spec.$root[_o103];\n          if (_a117.required) {\n            var _t288 = null;\n            _t288 = \"version\" === _o103 ? i : \"array\" === _a117.type ? [] : {}, null != _t288 && (e[_o103] = _t288);\n          }\n        }\n        return e;\n      }();\n    var ee = /*#__PURE__*/function (_t$Evented9) {\n      _inherits(ee, _t$Evented9);\n      var _super88 = _createSuper(ee);\n      function ee(e) {\n        var _this65;\n        var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        _classCallCheck(this, ee);\n        _this65 = _super88.call(this), _this65.map = e, _this65.dispatcher = new v(j(), _assertThisInitialized(_this65)), _this65.imageManager = new h(), _this65.imageManager.setEventedParent(_assertThisInitialized(_this65)), _this65.glyphManager = new _(e._requestManager, i.localIdeographFontFamily), _this65.lineAtlas = new x(256, 512), _this65.crossTileSymbolIndex = new Xt(), _this65._layers = {}, _this65._serializedLayers = {}, _this65._order = [], _this65.sourceCaches = {}, _this65.zoomHistory = new t.ZoomHistory(), _this65._loaded = !1, _this65._availableImages = [], _this65._resetUpdates(), _this65.dispatcher.broadcast(\"setReferrer\", t.getReferrer());\n        var o = _assertThisInitialized(_this65);\n        _this65._rtlTextPluginCallback = ee.registerForPluginStateChange(function (e) {\n          o.dispatcher.broadcast(\"syncRTLPluginState\", {\n            pluginStatus: e.pluginStatus,\n            pluginURL: e.pluginURL\n          }, function (e, i) {\n            if (t.triggerPluginCompletionEvent(e), i && i.every(function (t) {\n              return t;\n            })) for (var _t289 in o.sourceCaches) o.sourceCaches[_t289].reload();\n          });\n        }), _this65.on(\"data\", function (t) {\n          if (\"source\" !== t.dataType || \"metadata\" !== t.sourceDataType) return;\n          var e = _this65.sourceCaches[t.sourceId];\n          if (!e) return;\n          var i = e.getSource();\n          if (i && i.vectorLayerIds) for (var _t290 in _this65._layers) {\n            var _e252 = _this65._layers[_t290];\n            _e252.source === i.id && _this65._validateLayer(_e252);\n          }\n        });\n        return _this65;\n      }\n      _createClass(ee, [{\n        key: \"loadURL\",\n        value: function loadURL(e) {\n          var _this66 = this;\n          var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          this.fire(new t.Event(\"dataloading\", {\n            dataType: \"style\"\n          }));\n          var o = \"boolean\" != typeof i.validate || i.validate,\n            a = this.map._requestManager.transformRequest(e, t.ResourceType.Style);\n          this._request = t.getJSON(a, function (e, i) {\n            _this66._request = null, e ? _this66.fire(new t.ErrorEvent(e)) : i && _this66._load(i, o);\n          });\n        }\n      }, {\n        key: \"loadJSON\",\n        value: function loadJSON(e) {\n          var _this67 = this;\n          var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          this.fire(new t.Event(\"dataloading\", {\n            dataType: \"style\"\n          })), this._request = t.exported.frame(function () {\n            _this67._request = null, _this67._load(e, !1 !== i.validate);\n          });\n        }\n      }, {\n        key: \"loadEmpty\",\n        value: function loadEmpty() {\n          this.fire(new t.Event(\"dataloading\", {\n            dataType: \"style\"\n          })), this._load(te, !1);\n        }\n      }, {\n        key: \"_load\",\n        value: function _load(e, i) {\n          if (i && Yt(this, t.validateStyle(e))) return;\n          this._loaded = !0, this.stylesheet = e;\n          for (var _t291 in e.sources) this.addSource(_t291, e.sources[_t291], {\n            validate: !1\n          });\n          e.sprite ? this._loadSprite(e.sprite) : this.imageManager.setLoaded(!0), this.glyphManager.setURL(e.glyphs);\n          var o = X(this.stylesheet.layers);\n          this._order = o.map(function (t) {\n            return t.id;\n          }), this._layers = {}, this._serializedLayers = {};\n          var _iterator179 = _createForOfIteratorHelper(o),\n            _step179;\n          try {\n            for (_iterator179.s(); !(_step179 = _iterator179.n()).done;) {\n              var _e253 = _step179.value;\n              _e253 = t.createStyleLayer(_e253), _e253.setEventedParent(this, {\n                layer: {\n                  id: _e253.id\n                }\n              }), this._layers[_e253.id] = _e253, this._serializedLayers[_e253.id] = _e253.serialize();\n            }\n          } catch (err) {\n            _iterator179.e(err);\n          } finally {\n            _iterator179.f();\n          }\n          this.dispatcher.broadcast(\"setLayers\", this._serializeLayers(this._order)), this.light = new g(this.stylesheet.light), this.setTerrain(this.stylesheet.terrain), this.fire(new t.Event(\"data\", {\n            dataType: \"style\"\n          })), this.fire(new t.Event(\"style.load\"));\n        }\n      }, {\n        key: \"_loadSprite\",\n        value: function _loadSprite(e) {\n          var _this68 = this;\n          this._spriteRequest = function (e, i, o, a) {\n            var r, s, n;\n            var l = o > 1 ? \"@2x\" : \"\";\n            var c = t.getJSON(i.transformRequest(i.normalizeSpriteURL(e, l, \".json\"), t.ResourceType.SpriteJSON), function (t, e) {\n                c = null, n || (n = t, r = e, u());\n              }),\n              h = t.getImage(i.transformRequest(i.normalizeSpriteURL(e, l, \".png\"), t.ResourceType.SpriteImage), function (t, e) {\n                h = null, n || (n = t, s = e, u());\n              });\n            function u() {\n              if (n) a(n);else if (r && s) {\n                var _e254 = t.exported.getImageData(s),\n                  _i207 = {};\n                for (var _o104 in r) {\n                  var _r$_o = r[_o104],\n                    _a118 = _r$_o.width,\n                    _s96 = _r$_o.height,\n                    _n133 = _r$_o.x,\n                    _l53 = _r$_o.y,\n                    _c32 = _r$_o.sdf,\n                    _h23 = _r$_o.pixelRatio,\n                    _u30 = _r$_o.stretchX,\n                    _d16 = _r$_o.stretchY,\n                    _m14 = _r$_o.content,\n                    _9 = new t.RGBAImage({\n                      width: _a118,\n                      height: _s96\n                    });\n                  t.RGBAImage.copy(_e254, _9, {\n                    x: _n133,\n                    y: _l53\n                  }, {\n                    x: 0,\n                    y: 0\n                  }, {\n                    width: _a118,\n                    height: _s96\n                  }), _i207[_o104] = {\n                    data: _9,\n                    pixelRatio: _h23,\n                    sdf: _c32,\n                    stretchX: _u30,\n                    stretchY: _d16,\n                    content: _m14\n                  };\n                }\n                a(null, _i207);\n              }\n            }\n            return {\n              cancel: function cancel() {\n                c && (c.cancel(), c = null), h && (h.cancel(), h = null);\n              }\n            };\n          }(e, this.map._requestManager, this.map.getPixelRatio(), function (e, i) {\n            if (_this68._spriteRequest = null, e) _this68.fire(new t.ErrorEvent(e));else if (i) for (var _t292 in i) _this68.imageManager.addImage(_t292, i[_t292]);\n            _this68.imageManager.setLoaded(!0), _this68._availableImages = _this68.imageManager.listImages(), _this68.dispatcher.broadcast(\"setImages\", _this68._availableImages), _this68.fire(new t.Event(\"data\", {\n              dataType: \"style\"\n            }));\n          });\n        }\n      }, {\n        key: \"_validateLayer\",\n        value: function _validateLayer(e) {\n          var i = this.sourceCaches[e.source];\n          if (!i) return;\n          var o = e.sourceLayer;\n          if (!o) return;\n          var a = i.getSource();\n          (\"geojson\" === a.type || a.vectorLayerIds && -1 === a.vectorLayerIds.indexOf(o)) && this.fire(new t.ErrorEvent(new Error(\"Source layer \\\"\".concat(o, \"\\\" does not exist on source \\\"\").concat(a.id, \"\\\" as specified by style layer \\\"\").concat(e.id, \"\\\".\"))));\n        }\n      }, {\n        key: \"loaded\",\n        value: function loaded() {\n          if (!this._loaded) return !1;\n          if (Object.keys(this._updatedSources).length) return !1;\n          for (var _t293 in this.sourceCaches) if (!this.sourceCaches[_t293].loaded()) return !1;\n          return !!this.imageManager.isLoaded();\n        }\n      }, {\n        key: \"_serializeLayers\",\n        value: function _serializeLayers(t) {\n          var e = [];\n          var _iterator180 = _createForOfIteratorHelper(t),\n            _step180;\n          try {\n            for (_iterator180.s(); !(_step180 = _iterator180.n()).done;) {\n              var _i208 = _step180.value;\n              var _t294 = this._layers[_i208];\n              \"custom\" !== _t294.type && e.push(_t294.serialize());\n            }\n          } catch (err) {\n            _iterator180.e(err);\n          } finally {\n            _iterator180.f();\n          }\n          return e;\n        }\n      }, {\n        key: \"hasTransitions\",\n        value: function hasTransitions() {\n          if (this.light && this.light.hasTransition()) return !0;\n          for (var _t295 in this.sourceCaches) if (this.sourceCaches[_t295].hasTransition()) return !0;\n          for (var _t296 in this._layers) if (this._layers[_t296].hasTransition()) return !0;\n          return !1;\n        }\n      }, {\n        key: \"_checkLoaded\",\n        value: function _checkLoaded() {\n          if (!this._loaded) throw new Error(\"Style is not done loading.\");\n        }\n      }, {\n        key: \"update\",\n        value: function update(e) {\n          if (!this._loaded) return;\n          var i = this._changed;\n          if (this._changed) {\n            var _t297 = Object.keys(this._updatedLayers),\n              _i209 = Object.keys(this._removedLayers);\n            (_t297.length || _i209.length) && this._updateWorkerLayers(_t297, _i209);\n            for (var _t298 in this._updatedSources) {\n              var _e255 = this._updatedSources[_t298];\n              if (\"reload\" === _e255) this._reloadSource(_t298);else {\n                if (\"clear\" !== _e255) throw new Error(\"Invalid action \".concat(_e255));\n                this._clearSource(_t298);\n              }\n            }\n            this._updateTilesForChangedImages();\n            for (var _t299 in this._updatedPaintProps) this._layers[_t299].updateTransitions(e);\n            this.light.updateTransitions(e), this._resetUpdates();\n          }\n          var o = {};\n          for (var _t300 in this.sourceCaches) {\n            var _e256 = this.sourceCaches[_t300];\n            o[_t300] = _e256.used, _e256.used = !1;\n          }\n          var _iterator181 = _createForOfIteratorHelper(this._order),\n            _step181;\n          try {\n            for (_iterator181.s(); !(_step181 = _iterator181.n()).done;) {\n              var _t301 = _step181.value;\n              var _i211 = this._layers[_t301];\n              _i211.recalculate(e, this._availableImages), !_i211.isHidden(e.zoom) && _i211.source && (this.sourceCaches[_i211.source].used = !0);\n            }\n          } catch (err) {\n            _iterator181.e(err);\n          } finally {\n            _iterator181.f();\n          }\n          for (var _e257 in o) {\n            var _i210 = this.sourceCaches[_e257];\n            o[_e257] !== _i210.used && _i210.fire(new t.Event(\"data\", {\n              sourceDataType: \"visibility\",\n              dataType: \"source\",\n              sourceId: _e257\n            }));\n          }\n          this.light.recalculate(e), this.z = e.zoom, i && this.fire(new t.Event(\"data\", {\n            dataType: \"style\"\n          }));\n        }\n      }, {\n        key: \"_updateTilesForChangedImages\",\n        value: function _updateTilesForChangedImages() {\n          var t = Object.keys(this._changedImages);\n          if (t.length) {\n            for (var _e258 in this.sourceCaches) this.sourceCaches[_e258].reloadTilesForDependencies([\"icons\", \"patterns\"], t);\n            this._changedImages = {};\n          }\n        }\n      }, {\n        key: \"_updateWorkerLayers\",\n        value: function _updateWorkerLayers(t, e) {\n          this.dispatcher.broadcast(\"updateLayers\", {\n            layers: this._serializeLayers(t),\n            removedIds: e\n          });\n        }\n      }, {\n        key: \"_resetUpdates\",\n        value: function _resetUpdates() {\n          this._changed = !1, this._updatedLayers = {}, this._removedLayers = {}, this._updatedSources = {}, this._updatedPaintProps = {}, this._changedImages = {};\n        }\n      }, {\n        key: \"setTerrain\",\n        value: function setTerrain(e) {\n          var _this69 = this;\n          if (this._checkLoaded(), this._terrainDataCallback && this.off(\"data\", this._terrainDataCallback), this._terrainfreezeElevationCallback && this.map.off(\"freezeElevation\", this._terrainfreezeElevationCallback), e) {\n            var _t302 = this.sourceCaches[e.source];\n            if (!_t302) throw new Error(\"cannot load terrain, because there exists no source with ID: \".concat(e.source));\n            this.terrain = new Kt(this, _t302, e), this.map.transform.updateElevation(this.terrain), this._terrainfreezeElevationCallback = function (t) {\n              t.freeze ? _this69.map.transform.freezeElevation = !0 : (_this69.map.transform.freezeElevation = !1, _this69.map.transform.recalculateZoom(_this69.terrain));\n            }, this._terrainDataCallback = function (t) {\n              t.tile && (t.sourceId === e.source ? (_this69.map.transform.updateElevation(_this69.terrain), _this69.terrain.rememberForRerender(t.sourceId, t.tile.tileID)) : \"geojson\" === t.source.type && _this69.terrain.rememberForRerender(t.sourceId, t.tile.tileID));\n            }, this.on(\"data\", this._terrainDataCallback), this.map.on(\"freezeElevation\", this._terrainfreezeElevationCallback);\n          } else this.terrain && this.terrain.sourceCache.destruct(), this.terrain = null, this.map.transform.updateElevation(this.terrain);\n          this.map.fire(new t.Event(\"terrain\", {\n            terrain: e\n          }));\n        }\n      }, {\n        key: \"setState\",\n        value: function setState(e) {\n          var _this70 = this;\n          if (this._checkLoaded(), Yt(this, t.validateStyle(e))) return !1;\n          (e = t.clone$1(e)).layers = X(e.layers);\n          var i = function (t, e) {\n            if (!t) return [{\n              command: W.setStyle,\n              args: [e]\n            }];\n            var i = [];\n            try {\n              if (!a(t.version, e.version)) return [{\n                command: W.setStyle,\n                args: [e]\n              }];\n              a(t.center, e.center) || i.push({\n                command: W.setCenter,\n                args: [e.center]\n              }), a(t.zoom, e.zoom) || i.push({\n                command: W.setZoom,\n                args: [e.zoom]\n              }), a(t.bearing, e.bearing) || i.push({\n                command: W.setBearing,\n                args: [e.bearing]\n              }), a(t.pitch, e.pitch) || i.push({\n                command: W.setPitch,\n                args: [e.pitch]\n              }), a(t.sprite, e.sprite) || i.push({\n                command: W.setSprite,\n                args: [e.sprite]\n              }), a(t.glyphs, e.glyphs) || i.push({\n                command: W.setGlyphs,\n                args: [e.glyphs]\n              }), a(t.transition, e.transition) || i.push({\n                command: W.setTransition,\n                args: [e.transition]\n              }), a(t.light, e.light) || i.push({\n                command: W.setLight,\n                args: [e.light]\n              });\n              var _o105 = {},\n                _r181 = [];\n              !function (t, e, i, o) {\n                var r;\n                for (r in e = e || {}, t = t || {}) Object.prototype.hasOwnProperty.call(t, r) && (Object.prototype.hasOwnProperty.call(e, r) || K(r, i, o));\n                for (r in e) Object.prototype.hasOwnProperty.call(e, r) && (Object.prototype.hasOwnProperty.call(t, r) ? a(t[r], e[r]) || (\"geojson\" === t[r].type && \"geojson\" === e[r].type && J(t, e, r) ? i.push({\n                  command: W.setGeoJSONSourceData,\n                  args: [r, e[r].data]\n                }) : Y(r, e, i, o)) : H(r, e, i));\n              }(t.sources, e.sources, _r181, _o105);\n              var _s97 = [];\n              t.layers && t.layers.forEach(function (t) {\n                _o105[t.source] ? i.push({\n                  command: W.removeLayer,\n                  args: [t.id]\n                }) : _s97.push(t);\n              }), i = i.concat(_r181), function (t, e, i) {\n                e = e || [];\n                var o = (t = t || []).map(tt),\n                  r = e.map(tt),\n                  s = t.reduce(et, {}),\n                  n = e.reduce(et, {}),\n                  l = o.slice(),\n                  c = Object.create(null);\n                var h, u, d, m, _, p, f;\n                for (h = 0, u = 0; h < o.length; h++) d = o[h], Object.prototype.hasOwnProperty.call(n, d) ? u++ : (i.push({\n                  command: W.removeLayer,\n                  args: [d]\n                }), l.splice(l.indexOf(d, u), 1));\n                for (h = 0, u = 0; h < r.length; h++) d = r[r.length - 1 - h], l[l.length - 1 - h] !== d && (Object.prototype.hasOwnProperty.call(s, d) ? (i.push({\n                  command: W.removeLayer,\n                  args: [d]\n                }), l.splice(l.lastIndexOf(d, l.length - u), 1)) : u++, p = l[l.length - h], i.push({\n                  command: W.addLayer,\n                  args: [n[d], p]\n                }), l.splice(l.length - h, 0, d), c[d] = !0);\n                for (h = 0; h < r.length; h++) if (d = r[h], m = s[d], _ = n[d], !c[d] && !a(m, _)) if (a(m.source, _.source) && a(m[\"source-layer\"], _[\"source-layer\"]) && a(m.type, _.type)) {\n                  for (f in Q(m.layout, _.layout, i, d, null, W.setLayoutProperty), Q(m.paint, _.paint, i, d, null, W.setPaintProperty), a(m.filter, _.filter) || i.push({\n                    command: W.setFilter,\n                    args: [d, _.filter]\n                  }), a(m.minzoom, _.minzoom) && a(m.maxzoom, _.maxzoom) || i.push({\n                    command: W.setLayerZoomRange,\n                    args: [d, _.minzoom, _.maxzoom]\n                  }), m) Object.prototype.hasOwnProperty.call(m, f) && \"layout\" !== f && \"paint\" !== f && \"filter\" !== f && \"metadata\" !== f && \"minzoom\" !== f && \"maxzoom\" !== f && (0 === f.indexOf(\"paint.\") ? Q(m[f], _[f], i, d, f.slice(6), W.setPaintProperty) : a(m[f], _[f]) || i.push({\n                    command: W.setLayerProperty,\n                    args: [d, f, _[f]]\n                  }));\n                  for (f in _) Object.prototype.hasOwnProperty.call(_, f) && !Object.prototype.hasOwnProperty.call(m, f) && \"layout\" !== f && \"paint\" !== f && \"filter\" !== f && \"metadata\" !== f && \"minzoom\" !== f && \"maxzoom\" !== f && (0 === f.indexOf(\"paint.\") ? Q(m[f], _[f], i, d, f.slice(6), W.setPaintProperty) : a(m[f], _[f]) || i.push({\n                    command: W.setLayerProperty,\n                    args: [d, f, _[f]]\n                  }));\n                } else i.push({\n                  command: W.removeLayer,\n                  args: [d]\n                }), p = l[l.lastIndexOf(d) + 1], i.push({\n                  command: W.addLayer,\n                  args: [_, p]\n                });\n              }(_s97, e.layers, i);\n            } catch (t) {\n              console.warn(\"Unable to compute style diff:\", t), i = [{\n                command: W.setStyle,\n                args: [e]\n              }];\n            }\n            return i;\n          }(this.serialize(), e).filter(function (t) {\n            return !(t.command in Qt);\n          });\n          if (0 === i.length) return !1;\n          var o = i.filter(function (t) {\n            return !(t.command in Jt);\n          });\n          if (o.length > 0) throw new Error(\"Unimplemented: \".concat(o.map(function (t) {\n            return t.command;\n          }).join(\", \"), \".\"));\n          return i.forEach(function (t) {\n            \"setTransition\" !== t.command && _this70[t.command].apply(_this70, t.args);\n          }), this.stylesheet = e, !0;\n        }\n      }, {\n        key: \"addImage\",\n        value: function addImage(e, i) {\n          if (this.getImage(e)) return this.fire(new t.ErrorEvent(new Error(\"An image named \\\"\".concat(e, \"\\\" already exists.\"))));\n          this.imageManager.addImage(e, i), this._afterImageUpdated(e);\n        }\n      }, {\n        key: \"updateImage\",\n        value: function updateImage(t, e) {\n          this.imageManager.updateImage(t, e);\n        }\n      }, {\n        key: \"getImage\",\n        value: function getImage(t) {\n          return this.imageManager.getImage(t);\n        }\n      }, {\n        key: \"removeImage\",\n        value: function removeImage(e) {\n          if (!this.getImage(e)) return this.fire(new t.ErrorEvent(new Error(\"An image named \\\"\".concat(e, \"\\\" does not exist.\"))));\n          this.imageManager.removeImage(e), this._afterImageUpdated(e);\n        }\n      }, {\n        key: \"_afterImageUpdated\",\n        value: function _afterImageUpdated(e) {\n          this._availableImages = this.imageManager.listImages(), this._changedImages[e] = !0, this._changed = !0, this.dispatcher.broadcast(\"setImages\", this._availableImages), this.fire(new t.Event(\"data\", {\n            dataType: \"style\"\n          }));\n        }\n      }, {\n        key: \"listImages\",\n        value: function listImages() {\n          return this._checkLoaded(), this.imageManager.listImages();\n        }\n      }, {\n        key: \"addSource\",\n        value: function addSource(e, i) {\n          var _this71 = this;\n          var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          if (this._checkLoaded(), void 0 !== this.sourceCaches[e]) throw new Error(\"Source \\\"\".concat(e, \"\\\" already exists.\"));\n          if (!i.type) throw new Error(\"The type property must be defined, but only the following properties were given: \".concat(Object.keys(i).join(\", \"), \".\"));\n          if ([\"vector\", \"raster\", \"geojson\", \"video\", \"image\"].indexOf(i.type) >= 0 && this._validate(t.validateStyle.source, \"sources.\".concat(e), i, null, o)) return;\n          this.map && this.map._collectResourceTiming && (i.collectResourceTiming = !0);\n          var a = this.sourceCaches[e] = new O(e, i, this.dispatcher);\n          a.style = this, a.setEventedParent(this, function () {\n            return {\n              isSourceLoaded: _this71.loaded(),\n              source: a.serialize(),\n              sourceId: e\n            };\n          }), a.onAdd(this.map), this._changed = !0;\n        }\n      }, {\n        key: \"removeSource\",\n        value: function removeSource(e) {\n          if (this._checkLoaded(), void 0 === this.sourceCaches[e]) throw new Error(\"There is no source with this ID\");\n          for (var _i212 in this._layers) if (this._layers[_i212].source === e) return this.fire(new t.ErrorEvent(new Error(\"Source \\\"\".concat(e, \"\\\" cannot be removed while layer \\\"\").concat(_i212, \"\\\" is using it.\"))));\n          var i = this.sourceCaches[e];\n          delete this.sourceCaches[e], delete this._updatedSources[e], i.fire(new t.Event(\"data\", {\n            sourceDataType: \"metadata\",\n            dataType: \"source\",\n            sourceId: e\n          })), i.setEventedParent(null), i.onRemove(this.map), this._changed = !0;\n        }\n      }, {\n        key: \"setGeoJSONSourceData\",\n        value: function setGeoJSONSourceData(t, e) {\n          if (this._checkLoaded(), void 0 === this.sourceCaches[t]) throw new Error(\"There is no source with this ID=\".concat(t));\n          var i = this.sourceCaches[t].getSource();\n          if (\"geojson\" !== i.type) throw new Error(\"geojsonSource.type is \".concat(i.type, \", which is !== 'geojson\"));\n          i.setData(e), this._changed = !0;\n        }\n      }, {\n        key: \"getSource\",\n        value: function getSource(t) {\n          return this.sourceCaches[t] && this.sourceCaches[t].getSource();\n        }\n      }, {\n        key: \"addLayer\",\n        value: function addLayer(e, i) {\n          var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          this._checkLoaded();\n          var a = e.id;\n          if (this.getLayer(a)) return void this.fire(new t.ErrorEvent(new Error(\"Layer \\\"\".concat(a, \"\\\" already exists on this map.\"))));\n          var r;\n          if (\"custom\" === e.type) {\n            if (Yt(this, t.validateCustomStyleLayer(e))) return;\n            r = t.createStyleLayer(e);\n          } else {\n            if (\"object\" == typeof e.source && (this.addSource(a, e.source), e = t.clone$1(e), e = t.extend(e, {\n              source: a\n            })), this._validate(t.validateStyle.layer, \"layers.\".concat(a), e, {\n              arrayIndex: -1\n            }, o)) return;\n            r = t.createStyleLayer(e), this._validateLayer(r), r.setEventedParent(this, {\n              layer: {\n                id: a\n              }\n            }), this._serializedLayers[r.id] = r.serialize();\n          }\n          var s = i ? this._order.indexOf(i) : this._order.length;\n          if (i && -1 === s) this.fire(new t.ErrorEvent(new Error(\"Cannot add layer \\\"\".concat(a, \"\\\" before non-existing layer \\\"\").concat(i, \"\\\".\"))));else {\n            if (this._order.splice(s, 0, a), this._layerOrderChanged = !0, this._layers[a] = r, this._removedLayers[a] && r.source && \"custom\" !== r.type) {\n              var _t303 = this._removedLayers[a];\n              delete this._removedLayers[a], _t303.type !== r.type ? this._updatedSources[r.source] = \"clear\" : (this._updatedSources[r.source] = \"reload\", this.sourceCaches[r.source].pause());\n            }\n            this._updateLayer(r), r.onAdd && r.onAdd(this.map);\n          }\n        }\n      }, {\n        key: \"moveLayer\",\n        value: function moveLayer(e, i) {\n          if (this._checkLoaded(), this._changed = !0, !this._layers[e]) return void this.fire(new t.ErrorEvent(new Error(\"The layer '\".concat(e, \"' does not exist in the map's style and cannot be moved.\"))));\n          if (e === i) return;\n          var o = this._order.indexOf(e);\n          this._order.splice(o, 1);\n          var a = i ? this._order.indexOf(i) : this._order.length;\n          i && -1 === a ? this.fire(new t.ErrorEvent(new Error(\"Cannot move layer \\\"\".concat(e, \"\\\" before non-existing layer \\\"\").concat(i, \"\\\".\")))) : (this._order.splice(a, 0, e), this._layerOrderChanged = !0);\n        }\n      }, {\n        key: \"removeLayer\",\n        value: function removeLayer(e) {\n          this._checkLoaded();\n          var i = this._layers[e];\n          if (!i) return void this.fire(new t.ErrorEvent(new Error(\"Cannot remove non-existing layer \\\"\".concat(e, \"\\\".\"))));\n          i.setEventedParent(null);\n          var o = this._order.indexOf(e);\n          this._order.splice(o, 1), this._layerOrderChanged = !0, this._changed = !0, this._removedLayers[e] = i, delete this._layers[e], delete this._serializedLayers[e], delete this._updatedLayers[e], delete this._updatedPaintProps[e], i.onRemove && i.onRemove(this.map);\n        }\n      }, {\n        key: \"getLayer\",\n        value: function getLayer(t) {\n          return this._layers[t];\n        }\n      }, {\n        key: \"hasLayer\",\n        value: function hasLayer(t) {\n          return t in this._layers;\n        }\n      }, {\n        key: \"setLayerZoomRange\",\n        value: function setLayerZoomRange(e, i, o) {\n          this._checkLoaded();\n          var a = this.getLayer(e);\n          a ? a.minzoom === i && a.maxzoom === o || (null != i && (a.minzoom = i), null != o && (a.maxzoom = o), this._updateLayer(a)) : this.fire(new t.ErrorEvent(new Error(\"Cannot set the zoom range of non-existing layer \\\"\".concat(e, \"\\\".\"))));\n        }\n      }, {\n        key: \"setFilter\",\n        value: function setFilter(e, i) {\n          var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          this._checkLoaded();\n          var r = this.getLayer(e);\n          if (r) {\n            if (!a(r.filter, i)) return null == i ? (r.filter = void 0, void this._updateLayer(r)) : void (this._validate(t.validateStyle.filter, \"layers.\".concat(r.id, \".filter\"), i, null, o) || (r.filter = t.clone$1(i), this._updateLayer(r)));\n          } else this.fire(new t.ErrorEvent(new Error(\"Cannot filter non-existing layer \\\"\".concat(e, \"\\\".\"))));\n        }\n      }, {\n        key: \"getFilter\",\n        value: function getFilter(e) {\n          return t.clone$1(this.getLayer(e).filter);\n        }\n      }, {\n        key: \"setLayoutProperty\",\n        value: function setLayoutProperty(e, i, o) {\n          var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n          this._checkLoaded();\n          var s = this.getLayer(e);\n          s ? a(s.getLayoutProperty(i), o) || (s.setLayoutProperty(i, o, r), this._updateLayer(s)) : this.fire(new t.ErrorEvent(new Error(\"Cannot style non-existing layer \\\"\".concat(e, \"\\\".\"))));\n        }\n      }, {\n        key: \"getLayoutProperty\",\n        value: function getLayoutProperty(e, i) {\n          var o = this.getLayer(e);\n          if (o) return o.getLayoutProperty(i);\n          this.fire(new t.ErrorEvent(new Error(\"Cannot get style of non-existing layer \\\"\".concat(e, \"\\\".\"))));\n        }\n      }, {\n        key: \"setPaintProperty\",\n        value: function setPaintProperty(e, i, o) {\n          var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n          this._checkLoaded();\n          var s = this.getLayer(e);\n          s ? a(s.getPaintProperty(i), o) || (s.setPaintProperty(i, o, r) && this._updateLayer(s), this._changed = !0, this._updatedPaintProps[e] = !0) : this.fire(new t.ErrorEvent(new Error(\"Cannot style non-existing layer \\\"\".concat(e, \"\\\".\"))));\n        }\n      }, {\n        key: \"getPaintProperty\",\n        value: function getPaintProperty(t, e) {\n          return this.getLayer(t).getPaintProperty(e);\n        }\n      }, {\n        key: \"setFeatureState\",\n        value: function setFeatureState(e, i) {\n          this._checkLoaded();\n          var o = e.source,\n            a = e.sourceLayer,\n            r = this.sourceCaches[o];\n          if (void 0 === r) return void this.fire(new t.ErrorEvent(new Error(\"The source '\".concat(o, \"' does not exist in the map's style.\"))));\n          var s = r.getSource().type;\n          \"geojson\" === s && a ? this.fire(new t.ErrorEvent(new Error(\"GeoJSON sources cannot have a sourceLayer parameter.\"))) : \"vector\" !== s || a ? (void 0 === e.id && this.fire(new t.ErrorEvent(new Error(\"The feature id parameter must be provided.\"))), r.setFeatureState(a, e.id, i)) : this.fire(new t.ErrorEvent(new Error(\"The sourceLayer parameter must be provided for vector source types.\")));\n        }\n      }, {\n        key: \"removeFeatureState\",\n        value: function removeFeatureState(e, i) {\n          this._checkLoaded();\n          var o = e.source,\n            a = this.sourceCaches[o];\n          if (void 0 === a) return void this.fire(new t.ErrorEvent(new Error(\"The source '\".concat(o, \"' does not exist in the map's style.\"))));\n          var r = a.getSource().type,\n            s = \"vector\" === r ? e.sourceLayer : void 0;\n          \"vector\" !== r || s ? i && \"string\" != typeof e.id && \"number\" != typeof e.id ? this.fire(new t.ErrorEvent(new Error(\"A feature id is required to remove its specific state property.\"))) : a.removeFeatureState(s, e.id, i) : this.fire(new t.ErrorEvent(new Error(\"The sourceLayer parameter must be provided for vector source types.\")));\n        }\n      }, {\n        key: \"getFeatureState\",\n        value: function getFeatureState(e) {\n          this._checkLoaded();\n          var i = e.source,\n            o = e.sourceLayer,\n            a = this.sourceCaches[i];\n          if (void 0 !== a) return \"vector\" !== a.getSource().type || o ? (void 0 === e.id && this.fire(new t.ErrorEvent(new Error(\"The feature id parameter must be provided.\"))), a.getFeatureState(o, e.id)) : void this.fire(new t.ErrorEvent(new Error(\"The sourceLayer parameter must be provided for vector source types.\")));\n          this.fire(new t.ErrorEvent(new Error(\"The source '\".concat(i, \"' does not exist in the map's style.\"))));\n        }\n      }, {\n        key: \"getTransition\",\n        value: function getTransition() {\n          return t.extend({\n            duration: 300,\n            delay: 0\n          }, this.stylesheet && this.stylesheet.transition);\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return t.filterObject({\n            version: this.stylesheet.version,\n            name: this.stylesheet.name,\n            metadata: this.stylesheet.metadata,\n            light: this.stylesheet.light,\n            center: this.stylesheet.center,\n            zoom: this.stylesheet.zoom,\n            bearing: this.stylesheet.bearing,\n            pitch: this.stylesheet.pitch,\n            sprite: this.stylesheet.sprite,\n            glyphs: this.stylesheet.glyphs,\n            transition: this.stylesheet.transition,\n            sources: t.mapObject(this.sourceCaches, function (t) {\n              return t.serialize();\n            }),\n            layers: this._serializeLayers(this._order)\n          }, function (t) {\n            return void 0 !== t;\n          });\n        }\n      }, {\n        key: \"_updateLayer\",\n        value: function _updateLayer(t) {\n          this._updatedLayers[t.id] = !0, t.source && !this._updatedSources[t.source] && \"raster\" !== this.sourceCaches[t.source].getSource().type && (this._updatedSources[t.source] = \"reload\", this.sourceCaches[t.source].pause()), this._changed = !0;\n        }\n      }, {\n        key: \"_flattenAndSortRenderedFeatures\",\n        value: function _flattenAndSortRenderedFeatures(t) {\n          var _this72 = this;\n          var e = function e(t) {\n              return \"fill-extrusion\" === _this72._layers[t].type;\n            },\n            i = {},\n            o = [];\n          for (var _a119 = this._order.length - 1; _a119 >= 0; _a119--) {\n            var _r182 = this._order[_a119];\n            if (e(_r182)) {\n              i[_r182] = _a119;\n              var _iterator182 = _createForOfIteratorHelper(t),\n                _step182;\n              try {\n                for (_iterator182.s(); !(_step182 = _iterator182.n()).done;) {\n                  var _e259 = _step182.value;\n                  var _t304 = _e259[_r182];\n                  if (_t304) {\n                    var _iterator183 = _createForOfIteratorHelper(_t304),\n                      _step183;\n                    try {\n                      for (_iterator183.s(); !(_step183 = _iterator183.n()).done;) {\n                        var _e260 = _step183.value;\n                        o.push(_e260);\n                      }\n                    } catch (err) {\n                      _iterator183.e(err);\n                    } finally {\n                      _iterator183.f();\n                    }\n                  }\n                }\n              } catch (err) {\n                _iterator182.e(err);\n              } finally {\n                _iterator182.f();\n              }\n            }\n          }\n          o.sort(function (t, e) {\n            return e.intersectionZ - t.intersectionZ;\n          });\n          var a = [];\n          for (var _r183 = this._order.length - 1; _r183 >= 0; _r183--) {\n            var _s98 = this._order[_r183];\n            if (e(_s98)) for (var _t305 = o.length - 1; _t305 >= 0; _t305--) {\n              var _e261 = o[_t305].feature;\n              if (i[_e261.layer.id] < _r183) break;\n              a.push(_e261), o.pop();\n            } else {\n              var _iterator184 = _createForOfIteratorHelper(t),\n                _step184;\n              try {\n                for (_iterator184.s(); !(_step184 = _iterator184.n()).done;) {\n                  var _e262 = _step184.value;\n                  var _t306 = _e262[_s98];\n                  if (_t306) {\n                    var _iterator185 = _createForOfIteratorHelper(_t306),\n                      _step185;\n                    try {\n                      for (_iterator185.s(); !(_step185 = _iterator185.n()).done;) {\n                        var _e263 = _step185.value;\n                        a.push(_e263.feature);\n                      }\n                    } catch (err) {\n                      _iterator185.e(err);\n                    } finally {\n                      _iterator185.f();\n                    }\n                  }\n                }\n              } catch (err) {\n                _iterator184.e(err);\n              } finally {\n                _iterator184.f();\n              }\n            }\n          }\n          return a;\n        }\n      }, {\n        key: \"queryRenderedFeatures\",\n        value: function queryRenderedFeatures(e, i, o) {\n          i && i.filter && this._validate(t.validateStyle.filter, \"queryRenderedFeatures.filter\", i.filter, null, i);\n          var a = {};\n          if (i && i.layers) {\n            if (!Array.isArray(i.layers)) return this.fire(new t.ErrorEvent(new Error(\"parameters.layers must be an Array.\"))), [];\n            var _iterator186 = _createForOfIteratorHelper(i.layers),\n              _step186;\n            try {\n              for (_iterator186.s(); !(_step186 = _iterator186.n()).done;) {\n                var _e264 = _step186.value;\n                var _i213 = this._layers[_e264];\n                if (!_i213) return this.fire(new t.ErrorEvent(new Error(\"The layer '\".concat(_e264, \"' does not exist in the map's style and cannot be queried for features.\")))), [];\n                a[_i213.source] = !0;\n              }\n            } catch (err) {\n              _iterator186.e(err);\n            } finally {\n              _iterator186.f();\n            }\n          }\n          var r = [];\n          i.availableImages = this._availableImages;\n          for (var _t307 in this.sourceCaches) i.layers && !a[_t307] || r.push(L(this.sourceCaches[_t307], this._layers, this._serializedLayers, e, i, o));\n          return this.placement && r.push(function (t, e, i, o, a, r, s) {\n            var n = {},\n              l = r.queryRenderedSymbols(o),\n              c = [];\n            var _iterator187 = _createForOfIteratorHelper(Object.keys(l).map(Number)),\n              _step187;\n            try {\n              for (_iterator187.s(); !(_step187 = _iterator187.n()).done;) {\n                var _t310 = _step187.value;\n                c.push(s[_t310]);\n              }\n            } catch (err) {\n              _iterator187.e(err);\n            } finally {\n              _iterator187.f();\n            }\n            c.sort(R);\n            var _loop6 = function _loop6() {\n              var i = _c33[_i214];\n              var o = i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId], e, i.bucketIndex, i.sourceLayerIndex, a.filter, a.layers, a.availableImages, t);\n              for (var _t308 in o) {\n                var _e265 = n[_t308] = n[_t308] || [],\n                  _a120 = o[_t308];\n                _a120.sort(function (t, e) {\n                  var o = i.featureSortOrder;\n                  if (o) {\n                    var _i215 = o.indexOf(t.featureIndex);\n                    return o.indexOf(e.featureIndex) - _i215;\n                  }\n                  return e.featureIndex - t.featureIndex;\n                });\n                var _iterator188 = _createForOfIteratorHelper(_a120),\n                  _step188;\n                try {\n                  for (_iterator188.s(); !(_step188 = _iterator188.n()).done;) {\n                    var _t309 = _step188.value;\n                    _e265.push(_t309);\n                  }\n                } catch (err) {\n                  _iterator188.e(err);\n                } finally {\n                  _iterator188.f();\n                }\n              }\n            };\n            for (var _i214 = 0, _c33 = c; _i214 < _c33.length; _i214++) {\n              _loop6();\n            }\n            var _loop7 = function _loop7(_e266) {\n              n[_e266].forEach(function (o) {\n                var a = o.feature,\n                  r = i[t[_e266].source].getFeatureState(a.layer[\"source-layer\"], a.id);\n                a.source = a.layer.source, a.layer[\"source-layer\"] && (a.sourceLayer = a.layer[\"source-layer\"]), a.state = r;\n              });\n            };\n            for (var _e266 in n) {\n              _loop7(_e266);\n            }\n            return n;\n          }(this._layers, this._serializedLayers, this.sourceCaches, e, i, this.placement.collisionIndex, this.placement.retainedQueryData)), this._flattenAndSortRenderedFeatures(r);\n        }\n      }, {\n        key: \"querySourceFeatures\",\n        value: function querySourceFeatures(e, i) {\n          i && i.filter && this._validate(t.validateStyle.filter, \"querySourceFeatures.filter\", i.filter, null, i);\n          var o = this.sourceCaches[e];\n          return o ? function (t, e) {\n            var i = t.getRenderableIds().map(function (e) {\n                return t.getTileByID(e);\n              }),\n              o = [],\n              a = {};\n            for (var _t311 = 0; _t311 < i.length; _t311++) {\n              var _r184 = i[_t311],\n                _s99 = _r184.tileID.canonical.key;\n              a[_s99] || (a[_s99] = !0, _r184.querySourceFeatures(o, e));\n            }\n            return o;\n          }(o, i) : [];\n        }\n      }, {\n        key: \"addSourceType\",\n        value: function addSourceType(t, e, i) {\n          return ee.getSourceType(t) ? i(new Error(\"A source type called \\\"\".concat(t, \"\\\" already exists.\"))) : (ee.setSourceType(t, e), e.workerSourceURL ? void this.dispatcher.broadcast(\"loadWorkerSource\", {\n            name: t,\n            url: e.workerSourceURL\n          }, i) : i(null, null));\n        }\n      }, {\n        key: \"getLight\",\n        value: function getLight() {\n          return this.light.getLight();\n        }\n      }, {\n        key: \"setLight\",\n        value: function setLight(e) {\n          var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          this._checkLoaded();\n          var o = this.light.getLight();\n          var r = !1;\n          for (var _t312 in e) if (!a(e[_t312], o[_t312])) {\n            r = !0;\n            break;\n          }\n          if (!r) return;\n          var s = {\n            now: t.exported.now(),\n            transition: t.extend({\n              duration: 300,\n              delay: 0\n            }, this.stylesheet.transition)\n          };\n          this.light.setLight(e, i), this.light.updateTransitions(s);\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate(e, i, o, a) {\n          var r = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n          return (!r || !1 !== r.validate) && Yt(this, e.call(t.validateStyle, t.extend({\n            key: i,\n            style: this.serialize(),\n            value: o,\n            styleSpec: t.spec\n          }, a)));\n        }\n      }, {\n        key: \"_remove\",\n        value: function _remove() {\n          this._request && (this._request.cancel(), this._request = null), this._spriteRequest && (this._spriteRequest.cancel(), this._spriteRequest = null), t.evented.off(\"pluginStateChange\", this._rtlTextPluginCallback);\n          for (var _t313 in this._layers) this._layers[_t313].setEventedParent(null);\n          for (var _t314 in this.sourceCaches) {\n            var _e267 = this.sourceCaches[_t314];\n            _e267.setEventedParent(null), _e267.onRemove(this.map);\n          }\n          this.imageManager.setEventedParent(null), this.setEventedParent(null), this.dispatcher.remove();\n        }\n      }, {\n        key: \"_clearSource\",\n        value: function _clearSource(t) {\n          this.sourceCaches[t].clearTiles();\n        }\n      }, {\n        key: \"_reloadSource\",\n        value: function _reloadSource(t) {\n          this.sourceCaches[t].resume(), this.sourceCaches[t].reload();\n        }\n      }, {\n        key: \"_updateSources\",\n        value: function _updateSources(t) {\n          for (var _e268 in this.sourceCaches) this.sourceCaches[_e268].update(t, this.terrain);\n        }\n      }, {\n        key: \"_generateCollisionBoxes\",\n        value: function _generateCollisionBoxes() {\n          for (var _t315 in this.sourceCaches) this._reloadSource(_t315);\n        }\n      }, {\n        key: \"_updatePlacement\",\n        value: function _updatePlacement(e, i, o, a) {\n          var _this73 = this;\n          var r = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !1;\n          var s = !1,\n            n = !1;\n          var l = {};\n          var _iterator189 = _createForOfIteratorHelper(this._order),\n            _step189;\n          try {\n            var _loop8 = function _loop8() {\n              var t = _step189.value;\n              var i = _this73._layers[t];\n              if (\"symbol\" !== i.type) return \"continue\";\n              if (!l[i.source]) {\n                var _t317 = _this73.sourceCaches[i.source];\n                l[i.source] = _t317.getRenderableIds(!0).map(function (e) {\n                  return _t317.getTileByID(e);\n                }).sort(function (t, e) {\n                  return e.tileID.overscaledZ - t.tileID.overscaledZ || (t.tileID.isLessThan(e.tileID) ? -1 : 1);\n                });\n              }\n              var o = _this73.crossTileSymbolIndex.addLayer(i, l[i.source], e.center.lng);\n              s = s || o;\n            };\n            for (_iterator189.s(); !(_step189 = _iterator189.n()).done;) {\n              var _ret3 = _loop8();\n              if (_ret3 === \"continue\") continue;\n            }\n          } catch (err) {\n            _iterator189.e(err);\n          } finally {\n            _iterator189.f();\n          }\n          if (this.crossTileSymbolIndex.pruneUnusedLayers(this._order), ((r = r || this._layerOrderChanged || 0 === o) || !this.pauseablePlacement || this.pauseablePlacement.isDone() && !this.placement.stillRecent(t.exported.now(), e.zoom)) && (this.pauseablePlacement = new Zt(e, this.terrain, this._order, r, i, o, a, this.placement), this._layerOrderChanged = !1), this.pauseablePlacement.isDone() ? this.placement.setStale() : (this.pauseablePlacement.continuePlacement(this._order, this._layers, l), this.pauseablePlacement.isDone() && (this.placement = this.pauseablePlacement.commit(t.exported.now()), n = !0), s && this.pauseablePlacement.placement.setStale()), n || s) {\n            var _iterator190 = _createForOfIteratorHelper(this._order),\n              _step190;\n            try {\n              for (_iterator190.s(); !(_step190 = _iterator190.n()).done;) {\n                var _t316 = _step190.value;\n                var _e269 = this._layers[_t316];\n                \"symbol\" === _e269.type && this.placement.updateLayerOpacities(_e269, l[_e269.source]);\n              }\n            } catch (err) {\n              _iterator190.e(err);\n            } finally {\n              _iterator190.f();\n            }\n          }\n          return !this.pauseablePlacement.isDone() || this.placement.hasTransitions(t.exported.now());\n        }\n      }, {\n        key: \"_releaseSymbolFadeTiles\",\n        value: function _releaseSymbolFadeTiles() {\n          for (var _t318 in this.sourceCaches) this.sourceCaches[_t318].releaseSymbolFadeTiles();\n        }\n      }, {\n        key: \"getImages\",\n        value: function getImages(t, e, i) {\n          this.imageManager.getImages(e.icons, i), this._updateTilesForChangedImages();\n          var o = this.sourceCaches[e.source];\n          o && o.setDependencies(e.tileID.key, e.type, e.icons);\n        }\n      }, {\n        key: \"getGlyphs\",\n        value: function getGlyphs(t, e, i) {\n          this.glyphManager.getGlyphs(e.stacks, i);\n        }\n      }, {\n        key: \"getResource\",\n        value: function getResource(e, i, o) {\n          return t.makeRequest(i, o);\n        }\n      }]);\n      return ee;\n    }(t.Evented);\n    ee.getSourceType = function (t) {\n      return M[t];\n    }, ee.setSourceType = function (t, e) {\n      M[t] = e;\n    }, ee.registerForPluginStateChange = t.registerForPluginStateChange;\n    var ie = \"attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}\";\n    var oe = {\n      prelude: ae(\"#ifdef GL_ES\\nprecision mediump float;\\n#else\\n#if !defined(lowp)\\n#define lowp\\n#endif\\n#if !defined(mediump)\\n#define mediump\\n#endif\\n#if !defined(highp)\\n#define highp\\n#endif\\n#endif\", \"#ifdef GL_ES\\nprecision highp float;\\n#else\\n#if !defined(lowp)\\n#define lowp\\n#endif\\n#if !defined(mediump)\\n#define mediump\\n#endif\\n#if !defined(highp)\\n#define highp\\n#endif\\n#endif\\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\\n#ifdef TERRAIN3D\\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\\n#endif\\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\\n#ifdef TERRAIN3D\\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\\n#else\\nreturn 1.0;\\n#endif\\n}float calculate_visibility(vec4 pos) {\\n#ifdef TERRAIN3D\\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\\n#else\\nreturn 1.0;\\n#endif\\n}float ele(vec2 pos) {\\n#ifdef TERRAIN3D\\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\\n#else\\nreturn 0.0;\\n#endif\\n}float get_elevation(vec2 pos) {\\n#ifdef TERRAIN3D\\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;\\n#else\\nreturn 0.0;\\n#endif\\n}\"),\n      background: ae(\"uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}\"),\n      backgroundPattern: ae(\"uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}\"),\n      circle: ae(\"varying vec3 v_data;varying float v_visibility;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define mediump float radius\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define highp vec4 stroke_color\\n#pragma mapbox: define mediump float stroke_width\\n#pragma mapbox: define lowp float stroke_opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize mediump float radius\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize highp vec4 stroke_color\\n#pragma mapbox: initialize mediump float stroke_width\\n#pragma mapbox: initialize lowp float stroke_opacity\\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define mediump float radius\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define highp vec4 stroke_color\\n#pragma mapbox: define mediump float stroke_width\\n#pragma mapbox: define lowp float stroke_opacity\\nvoid main(void) {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize mediump float radius\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize highp vec4 stroke_color\\n#pragma mapbox: initialize mediump float stroke_width\\n#pragma mapbox: initialize lowp float stroke_opacity\\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}\"),\n      clippingMask: ae(\"void main() {gl_FragColor=vec4(1.0);}\", \"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}\"),\n      heatmap: ae(\"uniform highp float u_intensity;varying vec2 v_extrude;\\n#pragma mapbox: define highp float weight\\n#define GAUSS_COEF 0.3989422804014327\\nvoid main() {\\n#pragma mapbox: initialize highp float weight\\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\\n#pragma mapbox: define highp float weight\\n#pragma mapbox: define mediump float radius\\nconst highp float ZERO=1.0/255.0/16.0;\\n#define GAUSS_COEF 0.3989422804014327\\nvoid main(void) {\\n#pragma mapbox: initialize highp float weight\\n#pragma mapbox: initialize mediump float radius\\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}\"),\n      heatmapTexture: ae(\"uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(0.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}\"),\n      collisionBox: ae(\"varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}\", \"attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}\"),\n      collisionCircle: ae(\"varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}\", \"attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}\"),\n      debug: ae(\"uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}\", \"attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}\"),\n      fill: ae(\"#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float opacity\\ngl_FragColor=color*opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"attribute vec2 a_pos;uniform mat4 u_matrix;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float opacity\\ngl_Position=u_matrix*vec4(a_pos,0,1);}\"),\n      fillOutline: ae(\"varying vec2 v_pos;\\n#pragma mapbox: define highp vec4 outline_color\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 outline_color\\n#pragma mapbox: initialize lowp float opacity\\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\\n#pragma mapbox: define highp vec4 outline_color\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 outline_color\\n#pragma mapbox: initialize lowp float opacity\\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}\"),\n      fillOutlinePattern: ae(\"uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\n#pragma mapbox: define lowp float pixel_ratio_from\\n#pragma mapbox: define lowp float pixel_ratio_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\n#pragma mapbox: initialize lowp float pixel_ratio_from\\n#pragma mapbox: initialize lowp float pixel_ratio_to\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}\"),\n      fillPattern: ae(\"#ifdef GL_ES\\nprecision highp float;\\n#endif\\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\n#pragma mapbox: define lowp float pixel_ratio_from\\n#pragma mapbox: define lowp float pixel_ratio_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\n#pragma mapbox: initialize lowp float pixel_ratio_from\\n#pragma mapbox: initialize lowp float pixel_ratio_to\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}\"),\n      fillExtrusion: ae(\"varying vec4 v_color;void main() {gl_FragColor=v_color;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\\n#ifdef TERRAIN3D\\nattribute vec2 a_centroid;\\n#endif\\nvarying vec4 v_color;\\n#pragma mapbox: define highp float base\\n#pragma mapbox: define highp float height\\n#pragma mapbox: define highp vec4 color\\nvoid main() {\\n#pragma mapbox: initialize highp float base\\n#pragma mapbox: initialize highp float height\\n#pragma mapbox: initialize highp vec4 color\\nvec3 normal=a_normal_ed.xyz;\\n#ifdef TERRAIN3D\\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\\n#else\\nfloat baseDelta=0.0;float ele=0.0;\\n#endif\\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}\"),\n      fillExtrusionPattern: ae(\"uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\\n#pragma mapbox: define lowp float base\\n#pragma mapbox: define lowp float height\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\n#pragma mapbox: define lowp float pixel_ratio_from\\n#pragma mapbox: define lowp float pixel_ratio_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float base\\n#pragma mapbox: initialize lowp float height\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\n#pragma mapbox: initialize lowp float pixel_ratio_from\\n#pragma mapbox: initialize lowp float pixel_ratio_to\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\\n#ifdef TERRAIN3D\\nattribute vec2 a_centroid;\\n#endif\\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\\n#pragma mapbox: define lowp float base\\n#pragma mapbox: define lowp float height\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\n#pragma mapbox: define lowp float pixel_ratio_from\\n#pragma mapbox: define lowp float pixel_ratio_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float base\\n#pragma mapbox: initialize lowp float height\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\n#pragma mapbox: initialize lowp float pixel_ratio_from\\n#pragma mapbox: initialize lowp float pixel_ratio_to\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\\n#ifdef TERRAIN3D\\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\\n#else\\nfloat baseDelta=0.0;float ele=0.0;\\n#endif\\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\\n? a_pos\\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}\"),\n      hillshadePrepare: ae(\"#ifdef GL_ES\\nprecision highp float;\\n#endif\\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}\"),\n      hillshade: ae(\"uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\\n#define PI 3.141592653589793\\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}\"),\n      line: ae(\"uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"\\n#define scale 0.015873016\\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define mediump float gapwidth\\n#pragma mapbox: define lowp float offset\\n#pragma mapbox: define mediump float width\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump float gapwidth\\n#pragma mapbox: initialize lowp float offset\\n#pragma mapbox: initialize mediump float width\\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\\n#ifdef TERRAIN3D\\nv_gamma_scale=1.0;\\n#else\\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\\n#endif\\nv_width2=vec2(outset,inset);}\"),\n      lineGradient: ae(\"uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"\\n#define scale 0.015873016\\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define mediump float gapwidth\\n#pragma mapbox: define lowp float offset\\n#pragma mapbox: define mediump float width\\nvoid main() {\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump float gapwidth\\n#pragma mapbox: initialize lowp float offset\\n#pragma mapbox: initialize mediump float width\\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\\n#ifdef TERRAIN3D\\nv_gamma_scale=1.0;\\n#else\\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\\n#endif\\nv_width2=vec2(outset,inset);}\"),\n      linePattern: ae(\"#ifdef GL_ES\\nprecision highp float;\\n#endif\\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\n#pragma mapbox: define lowp float pixel_ratio_from\\n#pragma mapbox: define lowp float pixel_ratio_to\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\n#pragma mapbox: initialize lowp float pixel_ratio_from\\n#pragma mapbox: initialize lowp float pixel_ratio_to\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"\\n#define scale 0.015873016\\n#define LINE_DISTANCE_SCALE 2.0\\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float offset\\n#pragma mapbox: define mediump float gapwidth\\n#pragma mapbox: define mediump float width\\n#pragma mapbox: define lowp float floorwidth\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\n#pragma mapbox: define lowp float pixel_ratio_from\\n#pragma mapbox: define lowp float pixel_ratio_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float offset\\n#pragma mapbox: initialize mediump float gapwidth\\n#pragma mapbox: initialize mediump float width\\n#pragma mapbox: initialize lowp float floorwidth\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\n#pragma mapbox: initialize lowp float pixel_ratio_from\\n#pragma mapbox: initialize lowp float pixel_ratio_to\\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\\n#ifdef TERRAIN3D\\nv_gamma_scale=1.0;\\n#else\\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\\n#endif\\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}\"),\n      lineSDF: ae(\"uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define mediump float width\\n#pragma mapbox: define lowp float floorwidth\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump float width\\n#pragma mapbox: initialize lowp float floorwidth\\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"\\n#define scale 0.015873016\\n#define LINE_DISTANCE_SCALE 2.0\\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define mediump float gapwidth\\n#pragma mapbox: define lowp float offset\\n#pragma mapbox: define mediump float width\\n#pragma mapbox: define lowp float floorwidth\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump float gapwidth\\n#pragma mapbox: initialize lowp float offset\\n#pragma mapbox: initialize mediump float width\\n#pragma mapbox: initialize lowp float floorwidth\\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\\n#ifdef TERRAIN3D\\nv_gamma_scale=1.0;\\n#else\\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\\n#endif\\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}\"),\n      raster: ae(\"uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}\"),\n      symbolIcon: ae(\"uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\\ncamera_to_anchor_distance/u_camera_to_center_distance :\\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}\"),\n      symbolSDF: ae(\"#define SDF_PX 8.0\\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 fill_color\\n#pragma mapbox: initialize highp vec4 halo_color\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float halo_width\\n#pragma mapbox: initialize lowp float halo_blur\\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 fill_color\\n#pragma mapbox: initialize highp vec4 halo_color\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float halo_width\\n#pragma mapbox: initialize lowp float halo_blur\\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\\ncamera_to_anchor_distance/u_camera_to_center_distance :\\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}\"),\n      symbolTextAndIcon: ae(\"#define SDF_PX 8.0\\n#define SDF 1.0\\n#define ICON 0.0\\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 fill_color\\n#pragma mapbox: initialize highp vec4 halo_color\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float halo_width\\n#pragma mapbox: initialize lowp float halo_blur\\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 fill_color\\n#pragma mapbox: initialize highp vec4 halo_color\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float halo_width\\n#pragma mapbox: initialize lowp float halo_blur\\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\\ncamera_to_anchor_distance/u_camera_to_center_distance :\\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}\"),\n      terrain: ae(\"uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}\", ie),\n      terrainDepth: ae(\"varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}\", ie),\n      terrainCoords: ae(\"precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}\", ie)\n    };\n    function ae(t, e) {\n      var i = /#pragma mapbox: ([\\w]+) ([\\w]+) ([\\w]+) ([\\w]+)/g,\n        o = e.match(/attribute ([\\w]+) ([\\w]+)/g),\n        a = t.match(/uniform ([\\w]+) ([\\w]+)([\\s]*)([\\w]*)/g),\n        r = e.match(/uniform ([\\w]+) ([\\w]+)([\\s]*)([\\w]*)/g),\n        s = r ? r.concat(a) : a,\n        n = {};\n      return {\n        fragmentSource: t = t.replace(i, function (t, e, i, o, a) {\n          return n[a] = !0, \"define\" === e ? \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\nvarying \").concat(i, \" \").concat(o, \" \").concat(a, \";\\n#else\\nuniform \").concat(i, \" \").concat(o, \" u_\").concat(a, \";\\n#endif\\n\") : \"\\n#ifdef HAS_UNIFORM_u_\".concat(a, \"\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = u_\").concat(a, \";\\n#endif\\n\");\n        }),\n        vertexSource: e = e.replace(i, function (t, e, i, o, a) {\n          var r = \"float\" === o ? \"vec2\" : \"vec4\",\n            s = a.match(/color/) ? \"color\" : r;\n          return n[a] ? \"define\" === e ? \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\nuniform lowp float u_\").concat(a, \"_t;\\nattribute \").concat(i, \" \").concat(r, \" a_\").concat(a, \";\\nvarying \").concat(i, \" \").concat(o, \" \").concat(a, \";\\n#else\\nuniform \").concat(i, \" \").concat(o, \" u_\").concat(a, \";\\n#endif\\n\") : \"vec4\" === s ? \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\n    \").concat(a, \" = a_\").concat(a, \";\\n#else\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = u_\").concat(a, \";\\n#endif\\n\") : \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\n    \").concat(a, \" = unpack_mix_\").concat(s, \"(a_\").concat(a, \", u_\").concat(a, \"_t);\\n#else\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = u_\").concat(a, \";\\n#endif\\n\") : \"define\" === e ? \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\nuniform lowp float u_\").concat(a, \"_t;\\nattribute \").concat(i, \" \").concat(r, \" a_\").concat(a, \";\\n#else\\nuniform \").concat(i, \" \").concat(o, \" u_\").concat(a, \";\\n#endif\\n\") : \"vec4\" === s ? \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = a_\").concat(a, \";\\n#else\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = u_\").concat(a, \";\\n#endif\\n\") : \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = unpack_mix_\").concat(s, \"(a_\").concat(a, \", u_\").concat(a, \"_t);\\n#else\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = u_\").concat(a, \";\\n#endif\\n\");\n        }),\n        staticAttributes: o,\n        staticUniforms: s\n      };\n    }\n    var re = /*#__PURE__*/function () {\n      function re() {\n        _classCallCheck(this, re);\n        this.boundProgram = null, this.boundLayoutVertexBuffer = null, this.boundPaintVertexBuffers = [], this.boundIndexBuffer = null, this.boundVertexOffset = null, this.boundDynamicVertexBuffer = null, this.vao = null;\n      }\n      _createClass(re, [{\n        key: \"bind\",\n        value: function bind(t, e, i, o, a, r, s, n, l) {\n          this.context = t;\n          var c = this.boundPaintVertexBuffers.length !== o.length;\n          for (var _t319 = 0; !c && _t319 < o.length; _t319++) this.boundPaintVertexBuffers[_t319] !== o[_t319] && (c = !0);\n          t.extVertexArrayObject && this.vao && this.boundProgram === e && this.boundLayoutVertexBuffer === i && !c && this.boundIndexBuffer === a && this.boundVertexOffset === r && this.boundDynamicVertexBuffer === s && this.boundDynamicVertexBuffer2 === n && this.boundDynamicVertexBuffer3 === l ? (t.bindVertexArrayOES.set(this.vao), s && s.bind(), a && a.dynamicDraw && a.bind(), n && n.bind(), l && l.bind()) : this.freshBind(e, i, o, a, r, s, n, l);\n        }\n      }, {\n        key: \"freshBind\",\n        value: function freshBind(t, e, i, o, a, r, s, n) {\n          var l;\n          var c = t.numAttributes,\n            h = this.context,\n            u = h.gl;\n          if (h.extVertexArrayObject) this.vao && this.destroy(), this.vao = h.extVertexArrayObject.createVertexArrayOES(), h.bindVertexArrayOES.set(this.vao), l = 0, this.boundProgram = t, this.boundLayoutVertexBuffer = e, this.boundPaintVertexBuffers = i, this.boundIndexBuffer = o, this.boundVertexOffset = a, this.boundDynamicVertexBuffer = r, this.boundDynamicVertexBuffer2 = s, this.boundDynamicVertexBuffer3 = n;else {\n            l = h.currentNumAttributes || 0;\n            for (var _t320 = c; _t320 < l; _t320++) u.disableVertexAttribArray(_t320);\n          }\n          e.enableAttributes(u, t);\n          var _iterator191 = _createForOfIteratorHelper(i),\n            _step191;\n          try {\n            for (_iterator191.s(); !(_step191 = _iterator191.n()).done;) {\n              var _e270 = _step191.value;\n              _e270.enableAttributes(u, t);\n            }\n          } catch (err) {\n            _iterator191.e(err);\n          } finally {\n            _iterator191.f();\n          }\n          r && r.enableAttributes(u, t), s && s.enableAttributes(u, t), n && n.enableAttributes(u, t), e.bind(), e.setVertexAttribPointers(u, t, a);\n          var _iterator192 = _createForOfIteratorHelper(i),\n            _step192;\n          try {\n            for (_iterator192.s(); !(_step192 = _iterator192.n()).done;) {\n              var _e271 = _step192.value;\n              _e271.bind(), _e271.setVertexAttribPointers(u, t, a);\n            }\n          } catch (err) {\n            _iterator192.e(err);\n          } finally {\n            _iterator192.f();\n          }\n          r && (r.bind(), r.setVertexAttribPointers(u, t, a)), o && o.bind(), s && (s.bind(), s.setVertexAttribPointers(u, t, a)), n && (n.bind(), n.setVertexAttribPointers(u, t, a)), h.currentNumAttributes = c;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.vao && (this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao), this.vao = null);\n        }\n      }]);\n      return re;\n    }();\n    function se(t) {\n      var e = [];\n      for (var _i216 = 0; _i216 < t.length; _i216++) {\n        if (null === t[_i216]) continue;\n        var _o106 = t[_i216].split(\" \");\n        e.push(_o106.pop());\n      }\n      return e;\n    }\n    var ne = /*#__PURE__*/function () {\n      function ne(e, i, o, a, r, s, n) {\n        _classCallCheck(this, ne);\n        var l = e.gl;\n        this.program = l.createProgram();\n        var c = se(o.staticAttributes),\n          h = a ? a.getBinderAttributes() : [],\n          u = c.concat(h),\n          d = oe.prelude.staticUniforms ? se(oe.prelude.staticUniforms) : [],\n          m = o.staticUniforms ? se(o.staticUniforms) : [],\n          _ = a ? a.getBinderUniforms() : [],\n          p = d.concat(m).concat(_),\n          f = [];\n        var _iterator193 = _createForOfIteratorHelper(p),\n          _step193;\n        try {\n          for (_iterator193.s(); !(_step193 = _iterator193.n()).done;) {\n            var _t324 = _step193.value;\n            f.indexOf(_t324) < 0 && f.push(_t324);\n          }\n        } catch (err) {\n          _iterator193.e(err);\n        } finally {\n          _iterator193.f();\n        }\n        var g = a ? a.defines() : [];\n        s && g.push(\"#define OVERDRAW_INSPECTOR;\"), n && g.push(\"#define TERRAIN3D;\");\n        var x = g.concat(oe.prelude.fragmentSource, o.fragmentSource).join(\"\\n\"),\n          v = g.concat(oe.prelude.vertexSource, o.vertexSource).join(\"\\n\"),\n          y = l.createShader(l.FRAGMENT_SHADER);\n        if (l.isContextLost()) return void (this.failedToCreate = !0);\n        l.shaderSource(y, x), l.compileShader(y), l.attachShader(this.program, y);\n        var b = l.createShader(l.VERTEX_SHADER);\n        if (l.isContextLost()) return void (this.failedToCreate = !0);\n        l.shaderSource(b, v), l.compileShader(b), l.attachShader(this.program, b), this.attributes = {};\n        var w = {};\n        this.numAttributes = u.length;\n        for (var _t321 = 0; _t321 < this.numAttributes; _t321++) u[_t321] && (l.bindAttribLocation(this.program, _t321, u[_t321]), this.attributes[u[_t321]] = _t321);\n        l.linkProgram(this.program), l.deleteShader(b), l.deleteShader(y);\n        for (var _t322 = 0; _t322 < f.length; _t322++) {\n          var _e272 = f[_t322];\n          if (_e272 && !w[_e272]) {\n            var _t323 = l.getUniformLocation(this.program, _e272);\n            _t323 && (w[_e272] = _t323);\n          }\n        }\n        this.fixedUniforms = r(e, w), this.terrainUniforms = function (e, i) {\n          return {\n            u_depth: new t.Uniform1i(e, i.u_depth),\n            u_terrain: new t.Uniform1i(e, i.u_terrain),\n            u_terrain_dim: new t.Uniform1f(e, i.u_terrain_dim),\n            u_terrain_matrix: new t.UniformMatrix4f(e, i.u_terrain_matrix),\n            u_terrain_unpack: new t.Uniform4f(e, i.u_terrain_unpack),\n            u_terrain_offset: new t.Uniform1f(e, i.u_terrain_offset),\n            u_terrain_exaggeration: new t.Uniform1f(e, i.u_terrain_exaggeration)\n          };\n        }(e, w), this.binderUniforms = a ? a.getUniforms(e, w) : [];\n      }\n      _createClass(ne, [{\n        key: \"draw\",\n        value: function draw(t, e, i, o, a, r, s, n, l, c, h, u, d, m, _, p, f, g) {\n          var x = t.gl;\n          if (this.failedToCreate) return;\n          if (t.program.set(this.program), t.setDepthMode(i), t.setStencilMode(o), t.setColorMode(a), t.setCullFace(r), n) {\n            t.activeTexture.set(x.TEXTURE2), x.bindTexture(x.TEXTURE_2D, n.depthTexture), t.activeTexture.set(x.TEXTURE3), x.bindTexture(x.TEXTURE_2D, n.texture);\n            for (var _t325 in this.terrainUniforms) this.terrainUniforms[_t325].set(n[_t325]);\n          }\n          for (var _t326 in this.fixedUniforms) this.fixedUniforms[_t326].set(s[_t326]);\n          _ && _.setUniforms(t, this.binderUniforms, d, {\n            zoom: m\n          });\n          var v = 0;\n          switch (e) {\n            case x.LINES:\n              v = 2;\n              break;\n            case x.TRIANGLES:\n              v = 3;\n              break;\n            case x.LINE_STRIP:\n              v = 1;\n          }\n          var _iterator194 = _createForOfIteratorHelper(u.get()),\n            _step194;\n          try {\n            for (_iterator194.s(); !(_step194 = _iterator194.n()).done;) {\n              var _i217 = _step194.value;\n              var _o107 = _i217.vaos || (_i217.vaos = {});\n              (_o107[l] || (_o107[l] = new re())).bind(t, this, c, _ ? _.getPaintVertexBuffers() : [], h, _i217.vertexOffset, p, f, g), x.drawElements(e, _i217.primitiveLength * v, x.UNSIGNED_SHORT, _i217.primitiveOffset * v * 2);\n            }\n          } catch (err) {\n            _iterator194.e(err);\n          } finally {\n            _iterator194.f();\n          }\n        }\n      }]);\n      return ne;\n    }();\n    function le(t, e, i) {\n      var o = 1 / bt(i, 1, e.transform.tileZoom),\n        a = Math.pow(2, i.tileID.overscaledZ),\n        r = i.tileSize * Math.pow(2, e.transform.tileZoom) / a,\n        s = r * (i.tileID.canonical.x + i.tileID.wrap * a),\n        n = r * i.tileID.canonical.y;\n      return {\n        u_image: 0,\n        u_texsize: i.imageAtlasTexture.size,\n        u_scale: [o, t.fromScale, t.toScale],\n        u_fade: t.t,\n        u_pixel_coord_upper: [s >> 16, n >> 16],\n        u_pixel_coord_lower: [65535 & s, 65535 & n]\n      };\n    }\n    var ce = function ce(e, i, o, a) {\n        var r = i.style.light,\n          s = r.properties.get(\"position\"),\n          n = [s.x, s.y, s.z],\n          l = t.create$1();\n        \"viewport\" === r.properties.get(\"anchor\") && t.fromRotation(l, -i.transform.angle), t.transformMat3(n, n, l);\n        var c = r.properties.get(\"color\");\n        return {\n          u_matrix: e,\n          u_lightpos: n,\n          u_lightintensity: r.properties.get(\"intensity\"),\n          u_lightcolor: [c.r, c.g, c.b],\n          u_vertical_gradient: +o,\n          u_opacity: a\n        };\n      },\n      he = function he(e, i, o, a, r, s, n) {\n        return t.extend(ce(e, i, o, a), le(s, i, n), {\n          u_height_factor: -Math.pow(2, r.overscaledZ) / n.tileSize / 8\n        });\n      },\n      ue = function ue(t) {\n        return {\n          u_matrix: t\n        };\n      },\n      de = function de(e, i, o, a) {\n        return t.extend(ue(e), le(o, i, a));\n      },\n      me = function me(t, e) {\n        return {\n          u_matrix: t,\n          u_world: e\n        };\n      },\n      _e = function _e(e, i, o, a, r) {\n        return t.extend(de(e, i, o, a), {\n          u_world: r\n        });\n      },\n      pe = function pe(t, e, i, o) {\n        var a = t.transform;\n        var r, s;\n        if (\"map\" === o.paint.get(\"circle-pitch-alignment\")) {\n          var _t327 = bt(i, 1, a.zoom);\n          r = !0, s = [_t327, _t327];\n        } else r = !1, s = a.pixelsToGLUnits;\n        return {\n          u_camera_to_center_distance: a.cameraToCenterDistance,\n          u_scale_with_map: +(\"map\" === o.paint.get(\"circle-pitch-scale\")),\n          u_matrix: t.translatePosMatrix(e.posMatrix, i, o.paint.get(\"circle-translate\"), o.paint.get(\"circle-translate-anchor\")),\n          u_pitch_with_map: +r,\n          u_device_pixel_ratio: t.pixelRatio,\n          u_extrude_scale: s\n        };\n      },\n      fe = function fe(t, e, i) {\n        var o = bt(i, 1, e.zoom),\n          a = Math.pow(2, e.zoom - i.tileID.overscaledZ),\n          r = i.tileID.overscaleFactor();\n        return {\n          u_matrix: t,\n          u_camera_to_center_distance: e.cameraToCenterDistance,\n          u_pixels_to_tile_units: o,\n          u_extrude_scale: [e.pixelsToGLUnits[0] / (o * a), e.pixelsToGLUnits[1] / (o * a)],\n          u_overscale_factor: r\n        };\n      },\n      ge = function ge(t, e) {\n        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n        return {\n          u_matrix: t,\n          u_color: e,\n          u_overlay: 0,\n          u_overlay_scale: i\n        };\n      },\n      xe = function xe(t) {\n        return {\n          u_matrix: t\n        };\n      },\n      ve = function ve(t, e, i, o) {\n        return {\n          u_matrix: t,\n          u_extrude_scale: bt(e, 1, i),\n          u_intensity: o\n        };\n      };\n    function ye(e, i) {\n      var o = Math.pow(2, i.canonical.z),\n        a = i.canonical.y;\n      return [new t.MercatorCoordinate(0, a / o).toLngLat().lat, new t.MercatorCoordinate(0, (a + 1) / o).toLngLat().lat];\n    }\n    var be = function be(t, e, i, o) {\n        var a = t.transform;\n        return {\n          u_matrix: Ce(t, e, i, o),\n          u_ratio: 1 / bt(e, 1, a.zoom),\n          u_device_pixel_ratio: t.pixelRatio,\n          u_units_to_pixels: [1 / a.pixelsToGLUnits[0], 1 / a.pixelsToGLUnits[1]]\n        };\n      },\n      we = function we(e, i, o, a, r) {\n        return t.extend(be(e, i, o, r), {\n          u_image: 0,\n          u_image_height: a\n        });\n      },\n      Te = function Te(t, e, i, o, a) {\n        var r = t.transform,\n          s = Ie(e, r);\n        return {\n          u_matrix: Ce(t, e, i, a),\n          u_texsize: e.imageAtlasTexture.size,\n          u_ratio: 1 / bt(e, 1, r.zoom),\n          u_device_pixel_ratio: t.pixelRatio,\n          u_image: 0,\n          u_scale: [s, o.fromScale, o.toScale],\n          u_fade: o.t,\n          u_units_to_pixels: [1 / r.pixelsToGLUnits[0], 1 / r.pixelsToGLUnits[1]]\n        };\n      },\n      Ee = function Ee(e, i, o, a, r, s) {\n        var n = e.lineAtlas,\n          l = Ie(i, e.transform),\n          c = \"round\" === o.layout.get(\"line-cap\"),\n          h = n.getDash(a.from, c),\n          u = n.getDash(a.to, c),\n          d = h.width * r.fromScale,\n          m = u.width * r.toScale;\n        return t.extend(be(e, i, o, s), {\n          u_patternscale_a: [l / d, -h.height / 2],\n          u_patternscale_b: [l / m, -u.height / 2],\n          u_sdfgamma: n.width / (256 * Math.min(d, m) * e.pixelRatio) / 2,\n          u_image: 0,\n          u_tex_y_a: h.y,\n          u_tex_y_b: u.y,\n          u_mix: r.t\n        });\n      };\n    function Ie(t, e) {\n      return 1 / bt(t, 1, e.tileZoom);\n    }\n    function Ce(t, e, i, o) {\n      return t.translatePosMatrix(o ? o.posMatrix : e.tileID.posMatrix, e, i.paint.get(\"line-translate\"), i.paint.get(\"line-translate-anchor\"));\n    }\n    var Se = function Se(t, e, i, o, a) {\n      return {\n        u_matrix: t,\n        u_tl_parent: e,\n        u_scale_parent: i,\n        u_buffer_scale: 1,\n        u_fade_t: o.mix,\n        u_opacity: o.opacity * a.paint.get(\"raster-opacity\"),\n        u_image0: 0,\n        u_image1: 1,\n        u_brightness_low: a.paint.get(\"raster-brightness-min\"),\n        u_brightness_high: a.paint.get(\"raster-brightness-max\"),\n        u_saturation_factor: (s = a.paint.get(\"raster-saturation\"), s > 0 ? 1 - 1 / (1.001 - s) : -s),\n        u_contrast_factor: (r = a.paint.get(\"raster-contrast\"), r > 0 ? 1 / (1 - r) : 1 + r),\n        u_spin_weights: De(a.paint.get(\"raster-hue-rotate\"))\n      };\n      var r, s;\n    };\n    function De(t) {\n      t *= Math.PI / 180;\n      var e = Math.sin(t),\n        i = Math.cos(t);\n      return [(2 * i + 1) / 3, (-Math.sqrt(3) * e - i + 1) / 3, (Math.sqrt(3) * e - i + 1) / 3];\n    }\n    var ze = function ze(t, e, i, o, a, r, s, n, l, c) {\n        var h = a.transform;\n        return {\n          u_is_size_zoom_constant: +(\"constant\" === t || \"source\" === t),\n          u_is_size_feature_constant: +(\"constant\" === t || \"camera\" === t),\n          u_size_t: e ? e.uSizeT : 0,\n          u_size: e ? e.uSize : 0,\n          u_camera_to_center_distance: h.cameraToCenterDistance,\n          u_pitch: h.pitch / 360 * 2 * Math.PI,\n          u_rotate_symbol: +i,\n          u_aspect_ratio: h.width / h.height,\n          u_fade_change: a.options.fadeDuration ? a.symbolFadeChange : 1,\n          u_matrix: r,\n          u_label_plane_matrix: s,\n          u_coord_matrix: n,\n          u_is_text: +l,\n          u_pitch_with_map: +o,\n          u_texsize: c,\n          u_texture: 0\n        };\n      },\n      Pe = function Pe(e, i, o, a, r, s, n, l, c, h, u) {\n        var d = r.transform;\n        return t.extend(ze(e, i, o, a, r, s, n, l, c, h), {\n          u_gamma_scale: a ? Math.cos(d._pitch) * d.cameraToCenterDistance : 1,\n          u_device_pixel_ratio: r.pixelRatio,\n          u_is_halo: +u\n        });\n      },\n      Me = function Me(e, i, o, a, r, s, n, l, c, h) {\n        return t.extend(Pe(e, i, o, a, r, s, n, l, !0, c, !0), {\n          u_texsize_icon: h,\n          u_texture_icon: 1\n        });\n      },\n      Ae = function Ae(t, e, i) {\n        return {\n          u_matrix: t,\n          u_opacity: e,\n          u_color: i\n        };\n      },\n      Le = function Le(e, i, o, a, r, s) {\n        return t.extend(function (t, e, i, o) {\n          var a = i.imageManager.getPattern(t.from.toString()),\n            r = i.imageManager.getPattern(t.to.toString()),\n            _i$imageManager$getPi = i.imageManager.getPixelSize(),\n            s = _i$imageManager$getPi.width,\n            n = _i$imageManager$getPi.height,\n            l = Math.pow(2, o.tileID.overscaledZ),\n            c = o.tileSize * Math.pow(2, i.transform.tileZoom) / l,\n            h = c * (o.tileID.canonical.x + o.tileID.wrap * l),\n            u = c * o.tileID.canonical.y;\n          return {\n            u_image: 0,\n            u_pattern_tl_a: a.tl,\n            u_pattern_br_a: a.br,\n            u_pattern_tl_b: r.tl,\n            u_pattern_br_b: r.br,\n            u_texsize: [s, n],\n            u_mix: e.t,\n            u_pattern_size_a: a.displaySize,\n            u_pattern_size_b: r.displaySize,\n            u_scale_a: e.fromScale,\n            u_scale_b: e.toScale,\n            u_tile_units_to_pixels: 1 / bt(o, 1, i.transform.tileZoom),\n            u_pixel_coord_upper: [h >> 16, u >> 16],\n            u_pixel_coord_lower: [65535 & h, 65535 & u]\n          };\n        }(a, s, o, r), {\n          u_matrix: e,\n          u_opacity: i\n        });\n      },\n      Re = {\n        fillExtrusion: function fillExtrusion(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_lightpos: new t.Uniform3f(e, i.u_lightpos),\n            u_lightintensity: new t.Uniform1f(e, i.u_lightintensity),\n            u_lightcolor: new t.Uniform3f(e, i.u_lightcolor),\n            u_vertical_gradient: new t.Uniform1f(e, i.u_vertical_gradient),\n            u_opacity: new t.Uniform1f(e, i.u_opacity)\n          };\n        },\n        fillExtrusionPattern: function fillExtrusionPattern(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_lightpos: new t.Uniform3f(e, i.u_lightpos),\n            u_lightintensity: new t.Uniform1f(e, i.u_lightintensity),\n            u_lightcolor: new t.Uniform3f(e, i.u_lightcolor),\n            u_vertical_gradient: new t.Uniform1f(e, i.u_vertical_gradient),\n            u_height_factor: new t.Uniform1f(e, i.u_height_factor),\n            u_image: new t.Uniform1i(e, i.u_image),\n            u_texsize: new t.Uniform2f(e, i.u_texsize),\n            u_pixel_coord_upper: new t.Uniform2f(e, i.u_pixel_coord_upper),\n            u_pixel_coord_lower: new t.Uniform2f(e, i.u_pixel_coord_lower),\n            u_scale: new t.Uniform3f(e, i.u_scale),\n            u_fade: new t.Uniform1f(e, i.u_fade),\n            u_opacity: new t.Uniform1f(e, i.u_opacity)\n          };\n        },\n        fill: function fill(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix)\n          };\n        },\n        fillPattern: function fillPattern(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_image: new t.Uniform1i(e, i.u_image),\n            u_texsize: new t.Uniform2f(e, i.u_texsize),\n            u_pixel_coord_upper: new t.Uniform2f(e, i.u_pixel_coord_upper),\n            u_pixel_coord_lower: new t.Uniform2f(e, i.u_pixel_coord_lower),\n            u_scale: new t.Uniform3f(e, i.u_scale),\n            u_fade: new t.Uniform1f(e, i.u_fade)\n          };\n        },\n        fillOutline: function fillOutline(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_world: new t.Uniform2f(e, i.u_world)\n          };\n        },\n        fillOutlinePattern: function fillOutlinePattern(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_world: new t.Uniform2f(e, i.u_world),\n            u_image: new t.Uniform1i(e, i.u_image),\n            u_texsize: new t.Uniform2f(e, i.u_texsize),\n            u_pixel_coord_upper: new t.Uniform2f(e, i.u_pixel_coord_upper),\n            u_pixel_coord_lower: new t.Uniform2f(e, i.u_pixel_coord_lower),\n            u_scale: new t.Uniform3f(e, i.u_scale),\n            u_fade: new t.Uniform1f(e, i.u_fade)\n          };\n        },\n        circle: function circle(e, i) {\n          return {\n            u_camera_to_center_distance: new t.Uniform1f(e, i.u_camera_to_center_distance),\n            u_scale_with_map: new t.Uniform1i(e, i.u_scale_with_map),\n            u_pitch_with_map: new t.Uniform1i(e, i.u_pitch_with_map),\n            u_extrude_scale: new t.Uniform2f(e, i.u_extrude_scale),\n            u_device_pixel_ratio: new t.Uniform1f(e, i.u_device_pixel_ratio),\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix)\n          };\n        },\n        collisionBox: function collisionBox(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_camera_to_center_distance: new t.Uniform1f(e, i.u_camera_to_center_distance),\n            u_pixels_to_tile_units: new t.Uniform1f(e, i.u_pixels_to_tile_units),\n            u_extrude_scale: new t.Uniform2f(e, i.u_extrude_scale),\n            u_overscale_factor: new t.Uniform1f(e, i.u_overscale_factor)\n          };\n        },\n        collisionCircle: function collisionCircle(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_inv_matrix: new t.UniformMatrix4f(e, i.u_inv_matrix),\n            u_camera_to_center_distance: new t.Uniform1f(e, i.u_camera_to_center_distance),\n            u_viewport_size: new t.Uniform2f(e, i.u_viewport_size)\n          };\n        },\n        debug: function debug(e, i) {\n          return {\n            u_color: new t.UniformColor(e, i.u_color),\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_overlay: new t.Uniform1i(e, i.u_overlay),\n            u_overlay_scale: new t.Uniform1f(e, i.u_overlay_scale)\n          };\n        },\n        clippingMask: function clippingMask(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix)\n          };\n        },\n        heatmap: function heatmap(e, i) {\n          return {\n            u_extrude_scale: new t.Uniform1f(e, i.u_extrude_scale),\n            u_intensity: new t.Uniform1f(e, i.u_intensity),\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix)\n          };\n        },\n        heatmapTexture: function heatmapTexture(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_world: new t.Uniform2f(e, i.u_world),\n            u_image: new t.Uniform1i(e, i.u_image),\n            u_color_ramp: new t.Uniform1i(e, i.u_color_ramp),\n            u_opacity: new t.Uniform1f(e, i.u_opacity)\n          };\n        },\n        hillshade: function hillshade(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_image: new t.Uniform1i(e, i.u_image),\n            u_latrange: new t.Uniform2f(e, i.u_latrange),\n            u_light: new t.Uniform2f(e, i.u_light),\n            u_shadow: new t.UniformColor(e, i.u_shadow),\n            u_highlight: new t.UniformColor(e, i.u_highlight),\n            u_accent: new t.UniformColor(e, i.u_accent)\n          };\n        },\n        hillshadePrepare: function hillshadePrepare(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_image: new t.Uniform1i(e, i.u_image),\n            u_dimension: new t.Uniform2f(e, i.u_dimension),\n            u_zoom: new t.Uniform1f(e, i.u_zoom),\n            u_unpack: new t.Uniform4f(e, i.u_unpack)\n          };\n        },\n        line: function line(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_ratio: new t.Uniform1f(e, i.u_ratio),\n            u_device_pixel_ratio: new t.Uniform1f(e, i.u_device_pixel_ratio),\n            u_units_to_pixels: new t.Uniform2f(e, i.u_units_to_pixels)\n          };\n        },\n        lineGradient: function lineGradient(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_ratio: new t.Uniform1f(e, i.u_ratio),\n            u_device_pixel_ratio: new t.Uniform1f(e, i.u_device_pixel_ratio),\n            u_units_to_pixels: new t.Uniform2f(e, i.u_units_to_pixels),\n            u_image: new t.Uniform1i(e, i.u_image),\n            u_image_height: new t.Uniform1f(e, i.u_image_height)\n          };\n        },\n        linePattern: function linePattern(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_texsize: new t.Uniform2f(e, i.u_texsize),\n            u_ratio: new t.Uniform1f(e, i.u_ratio),\n            u_device_pixel_ratio: new t.Uniform1f(e, i.u_device_pixel_ratio),\n            u_image: new t.Uniform1i(e, i.u_image),\n            u_units_to_pixels: new t.Uniform2f(e, i.u_units_to_pixels),\n            u_scale: new t.Uniform3f(e, i.u_scale),\n            u_fade: new t.Uniform1f(e, i.u_fade)\n          };\n        },\n        lineSDF: function lineSDF(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_ratio: new t.Uniform1f(e, i.u_ratio),\n            u_device_pixel_ratio: new t.Uniform1f(e, i.u_device_pixel_ratio),\n            u_units_to_pixels: new t.Uniform2f(e, i.u_units_to_pixels),\n            u_patternscale_a: new t.Uniform2f(e, i.u_patternscale_a),\n            u_patternscale_b: new t.Uniform2f(e, i.u_patternscale_b),\n            u_sdfgamma: new t.Uniform1f(e, i.u_sdfgamma),\n            u_image: new t.Uniform1i(e, i.u_image),\n            u_tex_y_a: new t.Uniform1f(e, i.u_tex_y_a),\n            u_tex_y_b: new t.Uniform1f(e, i.u_tex_y_b),\n            u_mix: new t.Uniform1f(e, i.u_mix)\n          };\n        },\n        raster: function raster(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_tl_parent: new t.Uniform2f(e, i.u_tl_parent),\n            u_scale_parent: new t.Uniform1f(e, i.u_scale_parent),\n            u_buffer_scale: new t.Uniform1f(e, i.u_buffer_scale),\n            u_fade_t: new t.Uniform1f(e, i.u_fade_t),\n            u_opacity: new t.Uniform1f(e, i.u_opacity),\n            u_image0: new t.Uniform1i(e, i.u_image0),\n            u_image1: new t.Uniform1i(e, i.u_image1),\n            u_brightness_low: new t.Uniform1f(e, i.u_brightness_low),\n            u_brightness_high: new t.Uniform1f(e, i.u_brightness_high),\n            u_saturation_factor: new t.Uniform1f(e, i.u_saturation_factor),\n            u_contrast_factor: new t.Uniform1f(e, i.u_contrast_factor),\n            u_spin_weights: new t.Uniform3f(e, i.u_spin_weights)\n          };\n        },\n        symbolIcon: function symbolIcon(e, i) {\n          return {\n            u_is_size_zoom_constant: new t.Uniform1i(e, i.u_is_size_zoom_constant),\n            u_is_size_feature_constant: new t.Uniform1i(e, i.u_is_size_feature_constant),\n            u_size_t: new t.Uniform1f(e, i.u_size_t),\n            u_size: new t.Uniform1f(e, i.u_size),\n            u_camera_to_center_distance: new t.Uniform1f(e, i.u_camera_to_center_distance),\n            u_pitch: new t.Uniform1f(e, i.u_pitch),\n            u_rotate_symbol: new t.Uniform1i(e, i.u_rotate_symbol),\n            u_aspect_ratio: new t.Uniform1f(e, i.u_aspect_ratio),\n            u_fade_change: new t.Uniform1f(e, i.u_fade_change),\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_label_plane_matrix: new t.UniformMatrix4f(e, i.u_label_plane_matrix),\n            u_coord_matrix: new t.UniformMatrix4f(e, i.u_coord_matrix),\n            u_is_text: new t.Uniform1i(e, i.u_is_text),\n            u_pitch_with_map: new t.Uniform1i(e, i.u_pitch_with_map),\n            u_texsize: new t.Uniform2f(e, i.u_texsize),\n            u_texture: new t.Uniform1i(e, i.u_texture)\n          };\n        },\n        symbolSDF: function symbolSDF(e, i) {\n          return {\n            u_is_size_zoom_constant: new t.Uniform1i(e, i.u_is_size_zoom_constant),\n            u_is_size_feature_constant: new t.Uniform1i(e, i.u_is_size_feature_constant),\n            u_size_t: new t.Uniform1f(e, i.u_size_t),\n            u_size: new t.Uniform1f(e, i.u_size),\n            u_camera_to_center_distance: new t.Uniform1f(e, i.u_camera_to_center_distance),\n            u_pitch: new t.Uniform1f(e, i.u_pitch),\n            u_rotate_symbol: new t.Uniform1i(e, i.u_rotate_symbol),\n            u_aspect_ratio: new t.Uniform1f(e, i.u_aspect_ratio),\n            u_fade_change: new t.Uniform1f(e, i.u_fade_change),\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_label_plane_matrix: new t.UniformMatrix4f(e, i.u_label_plane_matrix),\n            u_coord_matrix: new t.UniformMatrix4f(e, i.u_coord_matrix),\n            u_is_text: new t.Uniform1i(e, i.u_is_text),\n            u_pitch_with_map: new t.Uniform1i(e, i.u_pitch_with_map),\n            u_texsize: new t.Uniform2f(e, i.u_texsize),\n            u_texture: new t.Uniform1i(e, i.u_texture),\n            u_gamma_scale: new t.Uniform1f(e, i.u_gamma_scale),\n            u_device_pixel_ratio: new t.Uniform1f(e, i.u_device_pixel_ratio),\n            u_is_halo: new t.Uniform1i(e, i.u_is_halo)\n          };\n        },\n        symbolTextAndIcon: function symbolTextAndIcon(e, i) {\n          return {\n            u_is_size_zoom_constant: new t.Uniform1i(e, i.u_is_size_zoom_constant),\n            u_is_size_feature_constant: new t.Uniform1i(e, i.u_is_size_feature_constant),\n            u_size_t: new t.Uniform1f(e, i.u_size_t),\n            u_size: new t.Uniform1f(e, i.u_size),\n            u_camera_to_center_distance: new t.Uniform1f(e, i.u_camera_to_center_distance),\n            u_pitch: new t.Uniform1f(e, i.u_pitch),\n            u_rotate_symbol: new t.Uniform1i(e, i.u_rotate_symbol),\n            u_aspect_ratio: new t.Uniform1f(e, i.u_aspect_ratio),\n            u_fade_change: new t.Uniform1f(e, i.u_fade_change),\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_label_plane_matrix: new t.UniformMatrix4f(e, i.u_label_plane_matrix),\n            u_coord_matrix: new t.UniformMatrix4f(e, i.u_coord_matrix),\n            u_is_text: new t.Uniform1i(e, i.u_is_text),\n            u_pitch_with_map: new t.Uniform1i(e, i.u_pitch_with_map),\n            u_texsize: new t.Uniform2f(e, i.u_texsize),\n            u_texsize_icon: new t.Uniform2f(e, i.u_texsize_icon),\n            u_texture: new t.Uniform1i(e, i.u_texture),\n            u_texture_icon: new t.Uniform1i(e, i.u_texture_icon),\n            u_gamma_scale: new t.Uniform1f(e, i.u_gamma_scale),\n            u_device_pixel_ratio: new t.Uniform1f(e, i.u_device_pixel_ratio),\n            u_is_halo: new t.Uniform1i(e, i.u_is_halo)\n          };\n        },\n        background: function background(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_opacity: new t.Uniform1f(e, i.u_opacity),\n            u_color: new t.UniformColor(e, i.u_color)\n          };\n        },\n        backgroundPattern: function backgroundPattern(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_opacity: new t.Uniform1f(e, i.u_opacity),\n            u_image: new t.Uniform1i(e, i.u_image),\n            u_pattern_tl_a: new t.Uniform2f(e, i.u_pattern_tl_a),\n            u_pattern_br_a: new t.Uniform2f(e, i.u_pattern_br_a),\n            u_pattern_tl_b: new t.Uniform2f(e, i.u_pattern_tl_b),\n            u_pattern_br_b: new t.Uniform2f(e, i.u_pattern_br_b),\n            u_texsize: new t.Uniform2f(e, i.u_texsize),\n            u_mix: new t.Uniform1f(e, i.u_mix),\n            u_pattern_size_a: new t.Uniform2f(e, i.u_pattern_size_a),\n            u_pattern_size_b: new t.Uniform2f(e, i.u_pattern_size_b),\n            u_scale_a: new t.Uniform1f(e, i.u_scale_a),\n            u_scale_b: new t.Uniform1f(e, i.u_scale_b),\n            u_pixel_coord_upper: new t.Uniform2f(e, i.u_pixel_coord_upper),\n            u_pixel_coord_lower: new t.Uniform2f(e, i.u_pixel_coord_lower),\n            u_tile_units_to_pixels: new t.Uniform1f(e, i.u_tile_units_to_pixels)\n          };\n        },\n        terrain: function terrain(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_texture: new t.Uniform1i(e, i.u_texture)\n          };\n        },\n        terrainDepth: function terrainDepth(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix)\n          };\n        },\n        terrainCoords: function terrainCoords(e, i) {\n          return {\n            u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n            u_texture: new t.Uniform1i(e, i.u_texture),\n            u_terrain_coords_id: new t.Uniform1f(e, i.u_terrain_coords_id)\n          };\n        }\n      };\n    var ke = /*#__PURE__*/function () {\n      function ke(t, e, i) {\n        _classCallCheck(this, ke);\n        this.context = t;\n        var o = t.gl;\n        this.buffer = o.createBuffer(), this.dynamicDraw = Boolean(i), this.context.unbindVAO(), t.bindElementBuffer.set(this.buffer), o.bufferData(o.ELEMENT_ARRAY_BUFFER, e.arrayBuffer, this.dynamicDraw ? o.DYNAMIC_DRAW : o.STATIC_DRAW), this.dynamicDraw || delete e.arrayBuffer;\n      }\n      _createClass(ke, [{\n        key: \"bind\",\n        value: function bind() {\n          this.context.bindElementBuffer.set(this.buffer);\n        }\n      }, {\n        key: \"updateData\",\n        value: function updateData(t) {\n          var e = this.context.gl;\n          if (!this.dynamicDraw) throw new Error(\"Attempted to update data while not in dynamic mode.\");\n          this.context.unbindVAO(), this.bind(), e.bufferSubData(e.ELEMENT_ARRAY_BUFFER, 0, t.arrayBuffer);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.buffer && (this.context.gl.deleteBuffer(this.buffer), delete this.buffer);\n        }\n      }]);\n      return ke;\n    }();\n    var Be = {\n      Int8: \"BYTE\",\n      Uint8: \"UNSIGNED_BYTE\",\n      Int16: \"SHORT\",\n      Uint16: \"UNSIGNED_SHORT\",\n      Int32: \"INT\",\n      Uint32: \"UNSIGNED_INT\",\n      Float32: \"FLOAT\"\n    };\n    var Fe = /*#__PURE__*/function () {\n      function Fe(t, e, i, o) {\n        _classCallCheck(this, Fe);\n        this.length = e.length, this.attributes = i, this.itemSize = e.bytesPerElement, this.dynamicDraw = o, this.context = t;\n        var a = t.gl;\n        this.buffer = a.createBuffer(), t.bindVertexBuffer.set(this.buffer), a.bufferData(a.ARRAY_BUFFER, e.arrayBuffer, this.dynamicDraw ? a.DYNAMIC_DRAW : a.STATIC_DRAW), this.dynamicDraw || delete e.arrayBuffer;\n      }\n      _createClass(Fe, [{\n        key: \"bind\",\n        value: function bind() {\n          this.context.bindVertexBuffer.set(this.buffer);\n        }\n      }, {\n        key: \"updateData\",\n        value: function updateData(t) {\n          if (t.length !== this.length) throw new Error(\"Length of new data is \".concat(t.length, \", which doesn't match current length of \").concat(this.length));\n          var e = this.context.gl;\n          this.bind(), e.bufferSubData(e.ARRAY_BUFFER, 0, t.arrayBuffer);\n        }\n      }, {\n        key: \"enableAttributes\",\n        value: function enableAttributes(t, e) {\n          for (var _i218 = 0; _i218 < this.attributes.length; _i218++) {\n            var _o108 = e.attributes[this.attributes[_i218].name];\n            void 0 !== _o108 && t.enableVertexAttribArray(_o108);\n          }\n        }\n      }, {\n        key: \"setVertexAttribPointers\",\n        value: function setVertexAttribPointers(t, e, i) {\n          for (var _o109 = 0; _o109 < this.attributes.length; _o109++) {\n            var _a121 = this.attributes[_o109],\n              _r185 = e.attributes[_a121.name];\n            void 0 !== _r185 && t.vertexAttribPointer(_r185, _a121.components, t[Be[_a121.type]], !1, this.itemSize, _a121.offset + this.itemSize * (i || 0));\n          }\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.buffer && (this.context.gl.deleteBuffer(this.buffer), delete this.buffer);\n        }\n      }]);\n      return Fe;\n    }();\n    var Oe = /*#__PURE__*/function () {\n      function Oe(t) {\n        _classCallCheck(this, Oe);\n        this.gl = t.gl, this.default = this.getDefault(), this.current = this.default, this.dirty = !1;\n      }\n      _createClass(Oe, [{\n        key: \"get\",\n        value: function get() {\n          return this.current;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {}\n      }, {\n        key: \"getDefault\",\n        value: function getDefault() {\n          return this.default;\n        }\n      }, {\n        key: \"setDefault\",\n        value: function setDefault() {\n          this.set(this.default);\n        }\n      }]);\n      return Oe;\n    }();\n    var Ue = /*#__PURE__*/function (_Oe) {\n      _inherits(Ue, _Oe);\n      var _super89 = _createSuper(Ue);\n      function Ue() {\n        _classCallCheck(this, Ue);\n        return _super89.apply(this, arguments);\n      }\n      _createClass(Ue, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return t.Color.transparent;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t.r !== e.r || t.g !== e.g || t.b !== e.b || t.a !== e.a || this.dirty) && (this.gl.clearColor(t.r, t.g, t.b, t.a), this.current = t, this.dirty = !1);\n        }\n      }]);\n      return Ue;\n    }(Oe);\n    var Ne = /*#__PURE__*/function (_Oe2) {\n      _inherits(Ne, _Oe2);\n      var _super90 = _createSuper(Ne);\n      function Ne() {\n        _classCallCheck(this, Ne);\n        return _super90.apply(this, arguments);\n      }\n      _createClass(Ne, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return 1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.clearDepth(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n      return Ne;\n    }(Oe);\n    var Ge = /*#__PURE__*/function (_Oe3) {\n      _inherits(Ge, _Oe3);\n      var _super91 = _createSuper(Ge);\n      function Ge() {\n        _classCallCheck(this, Ge);\n        return _super91.apply(this, arguments);\n      }\n      _createClass(Ge, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return 0;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.clearStencil(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n      return Ge;\n    }(Oe);\n    var Ze = /*#__PURE__*/function (_Oe4) {\n      _inherits(Ze, _Oe4);\n      var _super92 = _createSuper(Ze);\n      function Ze() {\n        _classCallCheck(this, Ze);\n        return _super92.apply(this, arguments);\n      }\n      _createClass(Ze, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return [!0, !0, !0, !0];\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t[0] !== e[0] || t[1] !== e[1] || t[2] !== e[2] || t[3] !== e[3] || this.dirty) && (this.gl.colorMask(t[0], t[1], t[2], t[3]), this.current = t, this.dirty = !1);\n        }\n      }]);\n      return Ze;\n    }(Oe);\n    var Ve = /*#__PURE__*/function (_Oe5) {\n      _inherits(Ve, _Oe5);\n      var _super93 = _createSuper(Ve);\n      function Ve() {\n        _classCallCheck(this, Ve);\n        return _super93.apply(this, arguments);\n      }\n      _createClass(Ve, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !0;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.depthMask(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n      return Ve;\n    }(Oe);\n    var qe = /*#__PURE__*/function (_Oe6) {\n      _inherits(qe, _Oe6);\n      var _super94 = _createSuper(qe);\n      function qe() {\n        _classCallCheck(this, qe);\n        return _super94.apply(this, arguments);\n      }\n      _createClass(qe, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return 255;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.stencilMask(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n      return qe;\n    }(Oe);\n    var je = /*#__PURE__*/function (_Oe7) {\n      _inherits(je, _Oe7);\n      var _super95 = _createSuper(je);\n      function je() {\n        _classCallCheck(this, je);\n        return _super95.apply(this, arguments);\n      }\n      _createClass(je, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return {\n            func: this.gl.ALWAYS,\n            ref: 0,\n            mask: 255\n          };\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t.func !== e.func || t.ref !== e.ref || t.mask !== e.mask || this.dirty) && (this.gl.stencilFunc(t.func, t.ref, t.mask), this.current = t, this.dirty = !1);\n        }\n      }]);\n      return je;\n    }(Oe);\n    var $e = /*#__PURE__*/function (_Oe8) {\n      _inherits($e, _Oe8);\n      var _super96 = _createSuper($e);\n      function $e() {\n        _classCallCheck(this, $e);\n        return _super96.apply(this, arguments);\n      }\n      _createClass($e, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          var t = this.gl;\n          return [t.KEEP, t.KEEP, t.KEEP];\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t[0] !== e[0] || t[1] !== e[1] || t[2] !== e[2] || this.dirty) && (this.gl.stencilOp(t[0], t[1], t[2]), this.current = t, this.dirty = !1);\n        }\n      }]);\n      return $e;\n    }(Oe);\n    var Xe = /*#__PURE__*/function (_Oe9) {\n      _inherits(Xe, _Oe9);\n      var _super97 = _createSuper(Xe);\n      function Xe() {\n        _classCallCheck(this, Xe);\n        return _super97.apply(this, arguments);\n      }\n      _createClass(Xe, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          t ? e.enable(e.STENCIL_TEST) : e.disable(e.STENCIL_TEST), this.current = t, this.dirty = !1;\n        }\n      }]);\n      return Xe;\n    }(Oe);\n    var We = /*#__PURE__*/function (_Oe10) {\n      _inherits(We, _Oe10);\n      var _super98 = _createSuper(We);\n      function We() {\n        _classCallCheck(this, We);\n        return _super98.apply(this, arguments);\n      }\n      _createClass(We, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return [0, 1];\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t[0] !== e[0] || t[1] !== e[1] || this.dirty) && (this.gl.depthRange(t[0], t[1]), this.current = t, this.dirty = !1);\n        }\n      }]);\n      return We;\n    }(Oe);\n    var He = /*#__PURE__*/function (_Oe11) {\n      _inherits(He, _Oe11);\n      var _super99 = _createSuper(He);\n      function He() {\n        _classCallCheck(this, He);\n        return _super99.apply(this, arguments);\n      }\n      _createClass(He, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          t ? e.enable(e.DEPTH_TEST) : e.disable(e.DEPTH_TEST), this.current = t, this.dirty = !1;\n        }\n      }]);\n      return He;\n    }(Oe);\n    var Ke = /*#__PURE__*/function (_Oe12) {\n      _inherits(Ke, _Oe12);\n      var _super100 = _createSuper(Ke);\n      function Ke() {\n        _classCallCheck(this, Ke);\n        return _super100.apply(this, arguments);\n      }\n      _createClass(Ke, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return this.gl.LESS;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.depthFunc(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n      return Ke;\n    }(Oe);\n    var Ye = /*#__PURE__*/function (_Oe13) {\n      _inherits(Ye, _Oe13);\n      var _super101 = _createSuper(Ye);\n      function Ye() {\n        _classCallCheck(this, Ye);\n        return _super101.apply(this, arguments);\n      }\n      _createClass(Ye, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          t ? e.enable(e.BLEND) : e.disable(e.BLEND), this.current = t, this.dirty = !1;\n        }\n      }]);\n      return Ye;\n    }(Oe);\n    var Je = /*#__PURE__*/function (_Oe14) {\n      _inherits(Je, _Oe14);\n      var _super102 = _createSuper(Je);\n      function Je() {\n        _classCallCheck(this, Je);\n        return _super102.apply(this, arguments);\n      }\n      _createClass(Je, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          var t = this.gl;\n          return [t.ONE, t.ZERO];\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t[0] !== e[0] || t[1] !== e[1] || this.dirty) && (this.gl.blendFunc(t[0], t[1]), this.current = t, this.dirty = !1);\n        }\n      }]);\n      return Je;\n    }(Oe);\n    var Qe = /*#__PURE__*/function (_Oe15) {\n      _inherits(Qe, _Oe15);\n      var _super103 = _createSuper(Qe);\n      function Qe() {\n        _classCallCheck(this, Qe);\n        return _super103.apply(this, arguments);\n      }\n      _createClass(Qe, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return t.Color.transparent;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t.r !== e.r || t.g !== e.g || t.b !== e.b || t.a !== e.a || this.dirty) && (this.gl.blendColor(t.r, t.g, t.b, t.a), this.current = t, this.dirty = !1);\n        }\n      }]);\n      return Qe;\n    }(Oe);\n    var ti = /*#__PURE__*/function (_Oe16) {\n      _inherits(ti, _Oe16);\n      var _super104 = _createSuper(ti);\n      function ti() {\n        _classCallCheck(this, ti);\n        return _super104.apply(this, arguments);\n      }\n      _createClass(ti, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return this.gl.FUNC_ADD;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.blendEquation(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n      return ti;\n    }(Oe);\n    var ei = /*#__PURE__*/function (_Oe17) {\n      _inherits(ei, _Oe17);\n      var _super105 = _createSuper(ei);\n      function ei() {\n        _classCallCheck(this, ei);\n        return _super105.apply(this, arguments);\n      }\n      _createClass(ei, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          t ? e.enable(e.CULL_FACE) : e.disable(e.CULL_FACE), this.current = t, this.dirty = !1;\n        }\n      }]);\n      return ei;\n    }(Oe);\n    var ii = /*#__PURE__*/function (_Oe18) {\n      _inherits(ii, _Oe18);\n      var _super106 = _createSuper(ii);\n      function ii() {\n        _classCallCheck(this, ii);\n        return _super106.apply(this, arguments);\n      }\n      _createClass(ii, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return this.gl.BACK;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.cullFace(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n      return ii;\n    }(Oe);\n    var oi = /*#__PURE__*/function (_Oe19) {\n      _inherits(oi, _Oe19);\n      var _super107 = _createSuper(oi);\n      function oi() {\n        _classCallCheck(this, oi);\n        return _super107.apply(this, arguments);\n      }\n      _createClass(oi, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return this.gl.CCW;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.frontFace(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n      return oi;\n    }(Oe);\n    var ai = /*#__PURE__*/function (_Oe20) {\n      _inherits(ai, _Oe20);\n      var _super108 = _createSuper(ai);\n      function ai() {\n        _classCallCheck(this, ai);\n        return _super108.apply(this, arguments);\n      }\n      _createClass(ai, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.useProgram(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n      return ai;\n    }(Oe);\n    var ri = /*#__PURE__*/function (_Oe21) {\n      _inherits(ri, _Oe21);\n      var _super109 = _createSuper(ri);\n      function ri() {\n        _classCallCheck(this, ri);\n        return _super109.apply(this, arguments);\n      }\n      _createClass(ri, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return this.gl.TEXTURE0;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.activeTexture(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n      return ri;\n    }(Oe);\n    var si = /*#__PURE__*/function (_Oe22) {\n      _inherits(si, _Oe22);\n      var _super110 = _createSuper(si);\n      function si() {\n        _classCallCheck(this, si);\n        return _super110.apply(this, arguments);\n      }\n      _createClass(si, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          var t = this.gl;\n          return [0, 0, t.drawingBufferWidth, t.drawingBufferHeight];\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t[0] !== e[0] || t[1] !== e[1] || t[2] !== e[2] || t[3] !== e[3] || this.dirty) && (this.gl.viewport(t[0], t[1], t[2], t[3]), this.current = t, this.dirty = !1);\n        }\n      }]);\n      return si;\n    }(Oe);\n    var ni = /*#__PURE__*/function (_Oe23) {\n      _inherits(ni, _Oe23);\n      var _super111 = _createSuper(ni);\n      function ni() {\n        _classCallCheck(this, ni);\n        return _super111.apply(this, arguments);\n      }\n      _createClass(ni, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.bindFramebuffer(e.FRAMEBUFFER, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n      return ni;\n    }(Oe);\n    var li = /*#__PURE__*/function (_Oe24) {\n      _inherits(li, _Oe24);\n      var _super112 = _createSuper(li);\n      function li() {\n        _classCallCheck(this, li);\n        return _super112.apply(this, arguments);\n      }\n      _createClass(li, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.bindRenderbuffer(e.RENDERBUFFER, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n      return li;\n    }(Oe);\n    var ci = /*#__PURE__*/function (_Oe25) {\n      _inherits(ci, _Oe25);\n      var _super113 = _createSuper(ci);\n      function ci() {\n        _classCallCheck(this, ci);\n        return _super113.apply(this, arguments);\n      }\n      _createClass(ci, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.bindTexture(e.TEXTURE_2D, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n      return ci;\n    }(Oe);\n    var hi = /*#__PURE__*/function (_Oe26) {\n      _inherits(hi, _Oe26);\n      var _super114 = _createSuper(hi);\n      function hi() {\n        _classCallCheck(this, hi);\n        return _super114.apply(this, arguments);\n      }\n      _createClass(hi, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.bindBuffer(e.ARRAY_BUFFER, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n      return hi;\n    }(Oe);\n    var ui = /*#__PURE__*/function (_Oe27) {\n      _inherits(ui, _Oe27);\n      var _super115 = _createSuper(ui);\n      function ui() {\n        _classCallCheck(this, ui);\n        return _super115.apply(this, arguments);\n      }\n      _createClass(ui, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.gl;\n          e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n      return ui;\n    }(Oe);\n    var di = /*#__PURE__*/function (_Oe28) {\n      _inherits(di, _Oe28);\n      var _super116 = _createSuper(di);\n      function di(t) {\n        var _this74;\n        _classCallCheck(this, di);\n        _this74 = _super116.call(this, t), _this74.vao = t.extVertexArrayObject;\n        return _this74;\n      }\n      _createClass(di, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          this.vao && (t !== this.current || this.dirty) && (this.vao.bindVertexArrayOES(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n      return di;\n    }(Oe);\n    var mi = /*#__PURE__*/function (_Oe29) {\n      _inherits(mi, _Oe29);\n      var _super117 = _createSuper(mi);\n      function mi() {\n        _classCallCheck(this, mi);\n        return _super117.apply(this, arguments);\n      }\n      _createClass(mi, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return 4;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.pixelStorei(e.UNPACK_ALIGNMENT, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n      return mi;\n    }(Oe);\n    var _i = /*#__PURE__*/function (_Oe30) {\n      _inherits(_i, _Oe30);\n      var _super118 = _createSuper(_i);\n      function _i() {\n        _classCallCheck(this, _i);\n        return _super118.apply(this, arguments);\n      }\n      _createClass(_i, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n      return _i;\n    }(Oe);\n    var pi = /*#__PURE__*/function (_Oe31) {\n      _inherits(pi, _Oe31);\n      var _super119 = _createSuper(pi);\n      function pi() {\n        _classCallCheck(this, pi);\n        return _super119.apply(this, arguments);\n      }\n      _createClass(pi, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n      return pi;\n    }(Oe);\n    var fi = /*#__PURE__*/function (_Oe32) {\n      _inherits(fi, _Oe32);\n      var _super120 = _createSuper(fi);\n      function fi(t, e) {\n        var _this75;\n        _classCallCheck(this, fi);\n        _this75 = _super120.call(this, t), _this75.context = t, _this75.parent = e;\n        return _this75;\n      }\n      _createClass(fi, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }]);\n      return fi;\n    }(Oe);\n    var gi = /*#__PURE__*/function (_fi) {\n      _inherits(gi, _fi);\n      var _super121 = _createSuper(gi);\n      function gi() {\n        _classCallCheck(this, gi);\n        return _super121.apply(this, arguments);\n      }\n      _createClass(gi, [{\n        key: \"setDirty\",\n        value: function setDirty() {\n          this.dirty = !0;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          this.context.bindFramebuffer.set(this.parent);\n          var e = this.gl;\n          e.framebufferTexture2D(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, e.TEXTURE_2D, t, 0), this.current = t, this.dirty = !1;\n        }\n      }]);\n      return gi;\n    }(fi);\n    var xi = /*#__PURE__*/function (_fi2) {\n      _inherits(xi, _fi2);\n      var _super122 = _createSuper(xi);\n      function xi() {\n        _classCallCheck(this, xi);\n        return _super122.apply(this, arguments);\n      }\n      _createClass(xi, [{\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          this.context.bindFramebuffer.set(this.parent);\n          var e = this.gl;\n          e.framebufferRenderbuffer(e.FRAMEBUFFER, e.DEPTH_ATTACHMENT, e.RENDERBUFFER, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n      return xi;\n    }(fi);\n    var vi = /*#__PURE__*/function () {\n      function vi(t, e, i, o) {\n        _classCallCheck(this, vi);\n        this.context = t, this.width = e, this.height = i;\n        var a = t.gl,\n          r = this.framebuffer = a.createFramebuffer();\n        if (this.colorAttachment = new gi(t, r), o && (this.depthAttachment = new xi(t, r)), a.checkFramebufferStatus(a.FRAMEBUFFER) !== a.FRAMEBUFFER_COMPLETE) throw new Error(\"Framebuffer is not complete\");\n      }\n      _createClass(vi, [{\n        key: \"destroy\",\n        value: function destroy() {\n          var t = this.context.gl,\n            e = this.colorAttachment.get();\n          if (e && t.deleteTexture(e), this.depthAttachment) {\n            var _e273 = this.depthAttachment.get();\n            _e273 && t.deleteRenderbuffer(_e273);\n          }\n          t.deleteFramebuffer(this.framebuffer);\n        }\n      }]);\n      return vi;\n    }();\n    var yi = /*#__PURE__*/_createClass(function yi(t, e, i) {\n      _classCallCheck(this, yi);\n      this.blendFunction = t, this.blendColor = e, this.mask = i;\n    });\n    yi.Replace = [1, 0], yi.disabled = new yi(yi.Replace, t.Color.transparent, [!1, !1, !1, !1]), yi.unblended = new yi(yi.Replace, t.Color.transparent, [!0, !0, !0, !0]), yi.alphaBlended = new yi([1, 771], t.Color.transparent, [!0, !0, !0, !0]);\n    var bi = /*#__PURE__*/function () {\n      function bi(t) {\n        _classCallCheck(this, bi);\n        this.gl = t, this.extVertexArrayObject = this.gl.getExtension(\"OES_vertex_array_object\"), this.clearColor = new Ue(this), this.clearDepth = new Ne(this), this.clearStencil = new Ge(this), this.colorMask = new Ze(this), this.depthMask = new Ve(this), this.stencilMask = new qe(this), this.stencilFunc = new je(this), this.stencilOp = new $e(this), this.stencilTest = new Xe(this), this.depthRange = new We(this), this.depthTest = new He(this), this.depthFunc = new Ke(this), this.blend = new Ye(this), this.blendFunc = new Je(this), this.blendColor = new Qe(this), this.blendEquation = new ti(this), this.cullFace = new ei(this), this.cullFaceSide = new ii(this), this.frontFace = new oi(this), this.program = new ai(this), this.activeTexture = new ri(this), this.viewport = new si(this), this.bindFramebuffer = new ni(this), this.bindRenderbuffer = new li(this), this.bindTexture = new ci(this), this.bindVertexBuffer = new hi(this), this.bindElementBuffer = new ui(this), this.bindVertexArrayOES = this.extVertexArrayObject && new di(this), this.pixelStoreUnpack = new mi(this), this.pixelStoreUnpackPremultiplyAlpha = new _i(this), this.pixelStoreUnpackFlipY = new pi(this), this.extTextureFilterAnisotropic = t.getExtension(\"EXT_texture_filter_anisotropic\") || t.getExtension(\"MOZ_EXT_texture_filter_anisotropic\") || t.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\"), this.extTextureFilterAnisotropic && (this.extTextureFilterAnisotropicMax = t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)), this.extTextureHalfFloat = t.getExtension(\"OES_texture_half_float\"), this.extTextureHalfFloat && (t.getExtension(\"OES_texture_half_float_linear\"), this.extRenderToTextureHalfFloat = t.getExtension(\"EXT_color_buffer_half_float\")), this.extTimerQuery = t.getExtension(\"EXT_disjoint_timer_query\"), this.maxTextureSize = t.getParameter(t.MAX_TEXTURE_SIZE);\n      }\n      _createClass(bi, [{\n        key: \"setDefault\",\n        value: function setDefault() {\n          this.unbindVAO(), this.clearColor.setDefault(), this.clearDepth.setDefault(), this.clearStencil.setDefault(), this.colorMask.setDefault(), this.depthMask.setDefault(), this.stencilMask.setDefault(), this.stencilFunc.setDefault(), this.stencilOp.setDefault(), this.stencilTest.setDefault(), this.depthRange.setDefault(), this.depthTest.setDefault(), this.depthFunc.setDefault(), this.blend.setDefault(), this.blendFunc.setDefault(), this.blendColor.setDefault(), this.blendEquation.setDefault(), this.cullFace.setDefault(), this.cullFaceSide.setDefault(), this.frontFace.setDefault(), this.program.setDefault(), this.activeTexture.setDefault(), this.bindFramebuffer.setDefault(), this.pixelStoreUnpack.setDefault(), this.pixelStoreUnpackPremultiplyAlpha.setDefault(), this.pixelStoreUnpackFlipY.setDefault();\n        }\n      }, {\n        key: \"setDirty\",\n        value: function setDirty() {\n          this.clearColor.dirty = !0, this.clearDepth.dirty = !0, this.clearStencil.dirty = !0, this.colorMask.dirty = !0, this.depthMask.dirty = !0, this.stencilMask.dirty = !0, this.stencilFunc.dirty = !0, this.stencilOp.dirty = !0, this.stencilTest.dirty = !0, this.depthRange.dirty = !0, this.depthTest.dirty = !0, this.depthFunc.dirty = !0, this.blend.dirty = !0, this.blendFunc.dirty = !0, this.blendColor.dirty = !0, this.blendEquation.dirty = !0, this.cullFace.dirty = !0, this.cullFaceSide.dirty = !0, this.frontFace.dirty = !0, this.program.dirty = !0, this.activeTexture.dirty = !0, this.viewport.dirty = !0, this.bindFramebuffer.dirty = !0, this.bindRenderbuffer.dirty = !0, this.bindTexture.dirty = !0, this.bindVertexBuffer.dirty = !0, this.bindElementBuffer.dirty = !0, this.extVertexArrayObject && (this.bindVertexArrayOES.dirty = !0), this.pixelStoreUnpack.dirty = !0, this.pixelStoreUnpackPremultiplyAlpha.dirty = !0, this.pixelStoreUnpackFlipY.dirty = !0;\n        }\n      }, {\n        key: \"createIndexBuffer\",\n        value: function createIndexBuffer(t, e) {\n          return new ke(this, t, e);\n        }\n      }, {\n        key: \"createVertexBuffer\",\n        value: function createVertexBuffer(t, e, i) {\n          return new Fe(this, t, e, i);\n        }\n      }, {\n        key: \"createRenderbuffer\",\n        value: function createRenderbuffer(t, e, i) {\n          var o = this.gl,\n            a = o.createRenderbuffer();\n          return this.bindRenderbuffer.set(a), o.renderbufferStorage(o.RENDERBUFFER, t, e, i), this.bindRenderbuffer.set(null), a;\n        }\n      }, {\n        key: \"createFramebuffer\",\n        value: function createFramebuffer(t, e, i) {\n          return new vi(this, t, e, i);\n        }\n      }, {\n        key: \"clear\",\n        value: function clear(_ref124) {\n          var t = _ref124.color,\n            e = _ref124.depth;\n          var i = this.gl;\n          var o = 0;\n          t && (o |= i.COLOR_BUFFER_BIT, this.clearColor.set(t), this.colorMask.set([!0, !0, !0, !0])), void 0 !== e && (o |= i.DEPTH_BUFFER_BIT, this.depthRange.set([0, 1]), this.clearDepth.set(e), this.depthMask.set(!0)), i.clear(o);\n        }\n      }, {\n        key: \"setCullFace\",\n        value: function setCullFace(t) {\n          !1 === t.enable ? this.cullFace.set(!1) : (this.cullFace.set(!0), this.cullFaceSide.set(t.mode), this.frontFace.set(t.frontFace));\n        }\n      }, {\n        key: \"setDepthMode\",\n        value: function setDepthMode(t) {\n          t.func !== this.gl.ALWAYS || t.mask ? (this.depthTest.set(!0), this.depthFunc.set(t.func), this.depthMask.set(t.mask), this.depthRange.set(t.range)) : this.depthTest.set(!1);\n        }\n      }, {\n        key: \"setStencilMode\",\n        value: function setStencilMode(t) {\n          t.test.func !== this.gl.ALWAYS || t.mask ? (this.stencilTest.set(!0), this.stencilMask.set(t.mask), this.stencilOp.set([t.fail, t.depthFail, t.pass]), this.stencilFunc.set({\n            func: t.test.func,\n            ref: t.ref,\n            mask: t.test.mask\n          })) : this.stencilTest.set(!1);\n        }\n      }, {\n        key: \"setColorMode\",\n        value: function setColorMode(t) {\n          a(t.blendFunction, yi.Replace) ? this.blend.set(!1) : (this.blend.set(!0), this.blendFunc.set(t.blendFunction), this.blendColor.set(t.blendColor)), this.colorMask.set(t.mask);\n        }\n      }, {\n        key: \"unbindVAO\",\n        value: function unbindVAO() {\n          this.extVertexArrayObject && this.bindVertexArrayOES.set(null);\n        }\n      }]);\n      return bi;\n    }();\n    var wi = /*#__PURE__*/_createClass(function wi(t, e, i) {\n      _classCallCheck(this, wi);\n      this.func = t, this.mask = e, this.range = i;\n    });\n    wi.ReadOnly = !1, wi.ReadWrite = !0, wi.disabled = new wi(519, wi.ReadOnly, [0, 1]);\n    var Ti = 7680;\n    var Ei = /*#__PURE__*/_createClass(function Ei(t, e, i, o, a, r) {\n      _classCallCheck(this, Ei);\n      this.test = t, this.ref = e, this.mask = i, this.fail = o, this.depthFail = a, this.pass = r;\n    });\n    Ei.disabled = new Ei({\n      func: 519,\n      mask: 0\n    }, 0, 0, Ti, Ti, Ti);\n    var Ii = /*#__PURE__*/_createClass(function Ii(t, e, i) {\n      _classCallCheck(this, Ii);\n      this.enable = t, this.mode = e, this.frontFace = i;\n    });\n    var Ci;\n    function Si(e, i, o, a, r, s, n) {\n      var l = e.context,\n        c = l.gl,\n        h = e.useProgram(\"collisionBox\"),\n        u = [];\n      var d = 0,\n        m = 0;\n      for (var _10 = 0; _10 < a.length; _10++) {\n        var _p14 = a[_10],\n          _f11 = i.getTile(_p14),\n          _g13 = _f11.getBucket(o);\n        if (!_g13) continue;\n        var _x10 = _p14.posMatrix;\n        0 === r[0] && 0 === r[1] || (_x10 = e.translatePosMatrix(_p14.posMatrix, _f11, r, s));\n        var _v8 = n ? _g13.textCollisionBox : _g13.iconCollisionBox,\n          _y8 = _g13.collisionCircleArray;\n        if (_y8.length > 0) {\n          var _i219 = t.create(),\n            _o110 = _x10;\n          t.mul(_i219, _g13.placementInvProjMatrix, e.transform.glCoordMatrix), t.mul(_i219, _i219, _g13.placementViewportMatrix), u.push({\n            circleArray: _y8,\n            circleOffset: m,\n            transform: _o110,\n            invTransform: _i219,\n            coord: _p14\n          }), d += _y8.length / 4, m = d;\n        }\n        _v8 && h.draw(l, c.LINES, wi.disabled, Ei.disabled, e.colorModeForRenderPass(), Ii.disabled, fe(_x10, e.transform, _f11), e.style.terrain && e.style.terrain.getTerrainData(_p14), o.id, _v8.layoutVertexBuffer, _v8.indexBuffer, _v8.segments, null, e.transform.zoom, null, null, _v8.collisionVertexBuffer);\n      }\n      if (!n || !u.length) return;\n      var _ = e.useProgram(\"collisionCircle\"),\n        p = new t.CollisionCircleLayoutArray();\n      p.resize(4 * d), p._trim();\n      var f = 0;\n      for (var _i220 = 0, _u31 = u; _i220 < _u31.length; _i220++) {\n        var _t328 = _u31[_i220];\n        for (var _e274 = 0; _e274 < _t328.circleArray.length / 4; _e274++) {\n          var _i221 = 4 * _e274,\n            _o111 = _t328.circleArray[_i221 + 0],\n            _a122 = _t328.circleArray[_i221 + 1],\n            _r186 = _t328.circleArray[_i221 + 2],\n            _s100 = _t328.circleArray[_i221 + 3];\n          p.emplace(f++, _o111, _a122, _r186, _s100, 0), p.emplace(f++, _o111, _a122, _r186, _s100, 1), p.emplace(f++, _o111, _a122, _r186, _s100, 2), p.emplace(f++, _o111, _a122, _r186, _s100, 3);\n        }\n      }\n      (!Ci || Ci.length < 2 * d) && (Ci = function (e) {\n        var i = 2 * e,\n          o = new t.QuadTriangleArray();\n        o.resize(i), o._trim();\n        for (var _t329 = 0; _t329 < i; _t329++) {\n          var _e275 = 6 * _t329;\n          o.uint16[_e275 + 0] = 4 * _t329 + 0, o.uint16[_e275 + 1] = 4 * _t329 + 1, o.uint16[_e275 + 2] = 4 * _t329 + 2, o.uint16[_e275 + 3] = 4 * _t329 + 2, o.uint16[_e275 + 4] = 4 * _t329 + 3, o.uint16[_e275 + 5] = 4 * _t329 + 0;\n        }\n        return o;\n      }(d));\n      var g = l.createIndexBuffer(Ci, !0),\n        x = l.createVertexBuffer(p, t.collisionCircleLayout.members, !0);\n      for (var _i222 = 0, _u32 = u; _i222 < _u32.length; _i222++) {\n        var _i223 = _u32[_i222];\n        var _a123 = {\n          u_matrix: _i223.transform,\n          u_inv_matrix: _i223.invTransform,\n          u_camera_to_center_distance: (v = e.transform).cameraToCenterDistance,\n          u_viewport_size: [v.width, v.height]\n        };\n        _.draw(l, c.TRIANGLES, wi.disabled, Ei.disabled, e.colorModeForRenderPass(), Ii.disabled, _a123, e.style.terrain && e.style.terrain.getTerrainData(_i223.coord), o.id, x, g, t.SegmentVector.simpleSegment(0, 2 * _i223.circleOffset, _i223.circleArray.length, _i223.circleArray.length / 2), null, e.transform.zoom, null, null, null);\n      }\n      var v;\n      x.destroy(), g.destroy();\n    }\n    Ii.disabled = new Ii(!1, 1029, 2305), Ii.backCCW = new Ii(!0, 1029, 2305);\n    var Di = t.identity(new Float32Array(16));\n    function zi(e, i, o, a, r, s) {\n      var _t$getAnchorAlignment2 = t.getAnchorAlignment(e),\n        n = _t$getAnchorAlignment2.horizontalAlign,\n        l = _t$getAnchorAlignment2.verticalAlign,\n        c = -(n - .5) * i,\n        h = -(l - .5) * o,\n        u = t.evaluateVariableOffset(e, a);\n      return new t.pointGeometry((c / r + u[0]) * s, (h / r + u[1]) * s);\n    }\n    function Pi(e, i, o, a, r, s, n, l, c, h, u) {\n      var d = e.text.placedSymbolArray,\n        m = e.text.dynamicLayoutVertexArray,\n        _ = e.icon.dynamicLayoutVertexArray,\n        p = {};\n      m.clear();\n      for (var _11 = 0; _11 < d.length; _11++) {\n        var _f12 = d.get(_11),\n          _g14 = e.allowVerticalPlacement && !_f12.placedOrientation,\n          _x11 = _f12.hidden || !_f12.crossTileID || _g14 ? null : a[_f12.crossTileID];\n        if (_x11) {\n          var _a124 = new t.pointGeometry(_f12.anchorX, _f12.anchorY),\n            _d17 = nt(_a124, o ? n : s, u),\n            _12 = lt(r.cameraToCenterDistance, _d17.signedDistanceFromCamera);\n          var _g15 = t.evaluateSizeForFeature(e.textSizeData, c, _f12) * _12 / t.ONE_EM;\n          o && (_g15 *= e.tilePixelRatio / l);\n          var _v9 = _x11.width,\n            _y9 = _x11.height,\n            _b11 = _x11.anchor,\n            _w9 = _x11.textOffset,\n            _T3 = _x11.textBoxScale,\n            _E2 = zi(_b11, _v9, _y9, _w9, _T3, _g15),\n            _I5 = o ? nt(_a124.add(_E2), s, u).point : _d17.point.add(i ? _E2.rotate(-r.angle) : _E2),\n            _C2 = e.allowVerticalPlacement && _f12.placedOrientation === t.WritingMode.vertical ? Math.PI / 2 : 0;\n          for (var _e276 = 0; _e276 < _f12.numGlyphs; _e276++) t.addDynamicAttributes(m, _I5, _C2);\n          h && _f12.associatedIconIndex >= 0 && (p[_f12.associatedIconIndex] = {\n            shiftedAnchor: _I5,\n            angle: _C2\n          });\n        } else gt(_f12.numGlyphs, m);\n      }\n      if (h) {\n        _.clear();\n        var _i224 = e.icon.placedSymbolArray;\n        for (var _e277 = 0; _e277 < _i224.length; _e277++) {\n          var _o112 = _i224.get(_e277);\n          if (_o112.hidden) gt(_o112.numGlyphs, _);else {\n            var _i225 = p[_e277];\n            if (_i225) for (var _e278 = 0; _e278 < _o112.numGlyphs; _e278++) t.addDynamicAttributes(_, _i225.shiftedAnchor, _i225.angle);else gt(_o112.numGlyphs, _);\n          }\n        }\n        e.icon.dynamicLayoutVertexBuffer.updateData(_);\n      }\n      e.text.dynamicLayoutVertexBuffer.updateData(m);\n    }\n    function Mi(t, e, i) {\n      return i.iconsInText && e ? \"symbolTextAndIcon\" : t ? \"symbolSDF\" : \"symbolIcon\";\n    }\n    function Ai(e, i, o, a, r, s, n, l, c, h, u, d) {\n      var m = e.context,\n        _ = m.gl,\n        p = e.transform,\n        f = \"map\" === l,\n        g = \"map\" === c,\n        x = \"viewport\" !== l && \"point\" !== o.layout.get(\"symbol-placement\"),\n        v = f && !g && !x,\n        y = !o.layout.get(\"symbol-sort-key\").isConstant();\n      var b = !1;\n      var w = e.depthModeForSublayer(0, wi.ReadOnly),\n        T = o.layout.get(\"text-variable-anchor\"),\n        E = [];\n      var _iterator195 = _createForOfIteratorHelper(a),\n        _step195;\n      try {\n        var _loop9 = function _loop9() {\n          var l = _step195.value;\n          var a = i.getTile(l),\n            c = a.getBucket(o);\n          if (!c) return \"continue\";\n          var u = r ? c.text : c.icon;\n          if (!u || !u.segments.get().length) return \"continue\";\n          var d = u.programConfigurations.get(o.id),\n            m = r || c.sdfIcons,\n            w = r ? c.textSizeData : c.iconSizeData,\n            I = g || 0 !== p.pitch,\n            C = e.useProgram(Mi(m, r, c), d),\n            S = t.evaluateSizeForZoom(w, p.zoom),\n            D = e.style.terrain && e.style.terrain.getTerrainData(l);\n          var z,\n            P,\n            M,\n            A,\n            L = [0, 0],\n            R = null;\n          if (r) {\n            if (P = a.glyphAtlasTexture, M = _.LINEAR, z = a.glyphAtlasTexture.size, c.iconsInText) {\n              L = a.imageAtlasTexture.size, R = a.imageAtlasTexture;\n              var _t331 = \"composite\" === w.kind || \"camera\" === w.kind;\n              A = I || e.options.rotating || e.options.zooming || _t331 ? _.LINEAR : _.NEAREST;\n            }\n          } else {\n            var _t332 = 1 !== o.layout.get(\"icon-size\").constantOr(0) || c.iconsNeedLinear;\n            P = a.imageAtlasTexture, M = m || e.options.rotating || e.options.zooming || _t332 || I ? _.LINEAR : _.NEAREST, z = a.imageAtlasTexture.size;\n          }\n          var k = bt(a, 1, e.transform.zoom),\n            B = rt(l.posMatrix, g, f, e.transform, k),\n            F = st(l.posMatrix, g, f, e.transform, k),\n            O = T && c.hasTextData(),\n            U = \"none\" !== o.layout.get(\"icon-text-fit\") && O && c.hasIconData();\n          if (x) {\n            var _t333 = e.style.terrain ? function (t, i) {\n                return e.style.terrain.getElevation(l, t, i);\n              } : null,\n              _i228 = \"map\" === o.layout.get(\"text-rotation-alignment\");\n            ht(c, l.posMatrix, e, r, B, F, g, h, _i228, _t333);\n          }\n          var N = e.translatePosMatrix(l.posMatrix, a, s, n),\n            G = x || r && T || U ? Di : B,\n            Z = e.translatePosMatrix(F, a, s, n, !0),\n            V = m && 0 !== o.paint.get(r ? \"text-halo-width\" : \"icon-halo-width\").constantOr(1);\n          var q;\n          q = m ? c.iconsInText ? Me(w.kind, S, v, g, e, N, G, Z, z, L) : Pe(w.kind, S, v, g, e, N, G, Z, r, z, !0) : ze(w.kind, S, v, g, e, N, G, Z, r, z);\n          var j = {\n            program: C,\n            buffers: u,\n            uniformValues: q,\n            atlasTexture: P,\n            atlasTextureIcon: R,\n            atlasInterpolation: M,\n            atlasInterpolationIcon: A,\n            isSDF: m,\n            hasHalo: V\n          };\n          if (y && c.canOverlap) {\n            b = !0;\n            var _e279 = u.segments.get();\n            var _iterator196 = _createForOfIteratorHelper(_e279),\n              _step196;\n            try {\n              for (_iterator196.s(); !(_step196 = _iterator196.n()).done;) {\n                var _i229 = _step196.value;\n                E.push({\n                  segments: new t.SegmentVector([_i229]),\n                  sortKey: _i229.sortKey,\n                  state: j,\n                  terrainData: D\n                });\n              }\n            } catch (err) {\n              _iterator196.e(err);\n            } finally {\n              _iterator196.f();\n            }\n          } else E.push({\n            segments: u.segments,\n            sortKey: 0,\n            state: j,\n            terrainData: D\n          });\n        };\n        for (_iterator195.s(); !(_step195 = _iterator195.n()).done;) {\n          var _ret4 = _loop9();\n          if (_ret4 === \"continue\") continue;\n        }\n      } catch (err) {\n        _iterator195.e(err);\n      } finally {\n        _iterator195.f();\n      }\n      b && E.sort(function (t, e) {\n        return t.sortKey - e.sortKey;\n      });\n      for (var _i226 = 0, _E3 = E; _i226 < _E3.length; _i226++) {\n        var _t330 = _E3[_i226];\n        var _i227 = _t330.state;\n        if (m.activeTexture.set(_.TEXTURE0), _i227.atlasTexture.bind(_i227.atlasInterpolation, _.CLAMP_TO_EDGE), _i227.atlasTextureIcon && (m.activeTexture.set(_.TEXTURE1), _i227.atlasTextureIcon && _i227.atlasTextureIcon.bind(_i227.atlasInterpolationIcon, _.CLAMP_TO_EDGE)), _i227.isSDF) {\n          var _a125 = _i227.uniformValues;\n          _i227.hasHalo && (_a125.u_is_halo = 1, Li(_i227.buffers, _t330.segments, o, e, _i227.program, w, u, d, _a125, _t330.terrainData)), _a125.u_is_halo = 0;\n        }\n        Li(_i227.buffers, _t330.segments, o, e, _i227.program, w, u, d, _i227.uniformValues, _t330.terrainData);\n      }\n    }\n    function Li(t, e, i, o, a, r, s, n, l, c) {\n      var h = o.context;\n      a.draw(h, h.gl.TRIANGLES, r, s, n, Ii.disabled, l, c, i.id, t.layoutVertexBuffer, t.indexBuffer, e, i.paint, o.transform.zoom, t.programConfigurations.get(i.id), t.dynamicLayoutVertexBuffer, t.opacityVertexBuffer);\n    }\n    function Ri(t, e, i, o, a, r, s) {\n      var n = t.context.gl,\n        l = i.paint.get(\"fill-pattern\"),\n        c = l && l.constantOr(1),\n        h = i.getCrossfadeParameters();\n      var u, d, m, _, p;\n      s ? (d = c && !i.getPaintProperty(\"fill-outline-color\") ? \"fillOutlinePattern\" : \"fillOutline\", u = n.LINES) : (d = c ? \"fillPattern\" : \"fill\", u = n.TRIANGLES);\n      var _iterator197 = _createForOfIteratorHelper(o),\n        _step197;\n      try {\n        for (_iterator197.s(); !(_step197 = _iterator197.n()).done;) {\n          var _f13 = _step197.value;\n          var _o113 = e.getTile(_f13);\n          if (c && !_o113.patternsLoaded()) continue;\n          var _g16 = _o113.getBucket(i);\n          if (!_g16) continue;\n          var _x12 = _g16.programConfigurations.get(i.id),\n            _v10 = t.useProgram(d, _x12),\n            _y10 = t.style.terrain && t.style.terrain.getTerrainData(_f13);\n          c && (t.context.activeTexture.set(n.TEXTURE0), _o113.imageAtlasTexture.bind(n.LINEAR, n.CLAMP_TO_EDGE), _x12.updatePaintBuffers(h));\n          var _b12 = l.constantOr(null);\n          if (_b12 && _o113.imageAtlas) {\n            var _t334 = _o113.imageAtlas,\n              _e280 = _t334.patternPositions[_b12.to.toString()],\n              _i230 = _t334.patternPositions[_b12.from.toString()];\n            _e280 && _i230 && _x12.setConstantPatternPositions(_e280, _i230);\n          }\n          var _w10 = _y10 ? _f13 : null,\n            _T4 = t.translatePosMatrix(_w10 ? _w10.posMatrix : _f13.posMatrix, _o113, i.paint.get(\"fill-translate\"), i.paint.get(\"fill-translate-anchor\"));\n          if (s) {\n            _ = _g16.indexBuffer2, p = _g16.segments2;\n            var _e281 = [n.drawingBufferWidth, n.drawingBufferHeight];\n            m = \"fillOutlinePattern\" === d && c ? _e(_T4, t, h, _o113, _e281) : me(_T4, _e281);\n          } else _ = _g16.indexBuffer, p = _g16.segments, m = c ? de(_T4, t, h, _o113) : ue(_T4);\n          _v10.draw(t.context, u, a, t.stencilModeForClipping(_f13), r, Ii.disabled, m, _y10, i.id, _g16.layoutVertexBuffer, _, p, i.paint, t.transform.zoom, _x12);\n        }\n      } catch (err) {\n        _iterator197.e(err);\n      } finally {\n        _iterator197.f();\n      }\n    }\n    function ki(t, e, i, o, a, r, s) {\n      var n = t.context,\n        l = n.gl,\n        c = i.paint.get(\"fill-extrusion-pattern\"),\n        h = c.constantOr(1),\n        u = i.getCrossfadeParameters(),\n        d = i.paint.get(\"fill-extrusion-opacity\");\n      var _iterator198 = _createForOfIteratorHelper(o),\n        _step198;\n      try {\n        for (_iterator198.s(); !(_step198 = _iterator198.n()).done;) {\n          var _m15 = _step198.value;\n          var _o114 = e.getTile(_m15),\n            _13 = _o114.getBucket(i);\n          if (!_13) continue;\n          var _p15 = t.style.terrain && t.style.terrain.getTerrainData(_m15),\n            _f14 = _13.programConfigurations.get(i.id),\n            _g17 = t.useProgram(h ? \"fillExtrusionPattern\" : \"fillExtrusion\", _f14);\n          h && (t.context.activeTexture.set(l.TEXTURE0), _o114.imageAtlasTexture.bind(l.LINEAR, l.CLAMP_TO_EDGE), _f14.updatePaintBuffers(u));\n          var _x13 = c.constantOr(null);\n          if (_x13 && _o114.imageAtlas) {\n            var _t335 = _o114.imageAtlas,\n              _e282 = _t335.patternPositions[_x13.to.toString()],\n              _i231 = _t335.patternPositions[_x13.from.toString()];\n            _e282 && _i231 && _f14.setConstantPatternPositions(_e282, _i231);\n          }\n          var _v11 = t.translatePosMatrix(_m15.posMatrix, _o114, i.paint.get(\"fill-extrusion-translate\"), i.paint.get(\"fill-extrusion-translate-anchor\")),\n            _y11 = i.paint.get(\"fill-extrusion-vertical-gradient\"),\n            _b13 = h ? he(_v11, t, _y11, d, _m15, u, _o114) : ce(_v11, t, _y11, d);\n          _g17.draw(n, n.gl.TRIANGLES, a, r, s, Ii.backCCW, _b13, _p15, i.id, _13.layoutVertexBuffer, _13.indexBuffer, _13.segments, i.paint, t.transform.zoom, _f14, t.style.terrain && _13.centroidVertexBuffer);\n        }\n      } catch (err) {\n        _iterator198.e(err);\n      } finally {\n        _iterator198.f();\n      }\n    }\n    function Bi(t, e, i, o, a, r, s) {\n      var n = t.context,\n        l = n.gl,\n        c = i.fbo;\n      if (!c) return;\n      var h = t.useProgram(\"hillshade\"),\n        u = t.style.terrain && t.style.terrain.getTerrainData(e);\n      n.activeTexture.set(l.TEXTURE0), l.bindTexture(l.TEXTURE_2D, c.colorAttachment.get()), h.draw(n, l.TRIANGLES, a, r, s, Ii.disabled, function (t, e, i, o) {\n        var a = i.paint.get(\"hillshade-shadow-color\"),\n          r = i.paint.get(\"hillshade-highlight-color\"),\n          s = i.paint.get(\"hillshade-accent-color\");\n        var n = i.paint.get(\"hillshade-illumination-direction\") * (Math.PI / 180);\n        \"viewport\" === i.paint.get(\"hillshade-illumination-anchor\") && (n -= t.transform.angle);\n        var l = !t.options.moving;\n        return {\n          u_matrix: o ? o.posMatrix : t.transform.calculatePosMatrix(e.tileID.toUnwrapped(), l),\n          u_image: 0,\n          u_latrange: ye(0, e.tileID),\n          u_light: [i.paint.get(\"hillshade-exaggeration\"), n],\n          u_shadow: a,\n          u_highlight: r,\n          u_accent: s\n        };\n      }(t, i, o, u ? e : null), u, o.id, t.rasterBoundsBuffer, t.quadTriangleIndexBuffer, t.rasterBoundsSegments);\n    }\n    function Fi(e, i, o, a, r, s) {\n      var n = e.context,\n        c = n.gl,\n        h = i.dem;\n      if (h && h.data) {\n        var _u33 = h.dim,\n          _d18 = h.stride,\n          _m16 = h.getPixels();\n        if (n.activeTexture.set(c.TEXTURE1), n.pixelStoreUnpackPremultiplyAlpha.set(!1), i.demTexture = i.demTexture || e.getTileTexture(_d18), i.demTexture) {\n          var _t336 = i.demTexture;\n          _t336.update(_m16, {\n            premultiply: !1\n          }), _t336.bind(c.NEAREST, c.CLAMP_TO_EDGE);\n        } else i.demTexture = new l(n, _m16, c.RGBA, {\n          premultiply: !1\n        }), i.demTexture.bind(c.NEAREST, c.CLAMP_TO_EDGE);\n        n.activeTexture.set(c.TEXTURE0);\n        var _14 = i.fbo;\n        if (!_14) {\n          var _t337 = new l(n, {\n            width: _u33,\n            height: _u33,\n            data: null\n          }, c.RGBA);\n          _t337.bind(c.LINEAR, c.CLAMP_TO_EDGE), _14 = i.fbo = n.createFramebuffer(_u33, _u33, !0), _14.colorAttachment.set(_t337.texture);\n        }\n        n.bindFramebuffer.set(_14.framebuffer), n.viewport.set([0, 0, _u33, _u33]), e.useProgram(\"hillshadePrepare\").draw(n, c.TRIANGLES, a, r, s, Ii.disabled, function (e, i) {\n          var o = i.stride,\n            a = t.create();\n          return t.ortho(a, 0, t.EXTENT, -t.EXTENT, 0, 0, 1), t.translate(a, a, [0, -t.EXTENT, 0]), {\n            u_matrix: a,\n            u_image: 1,\n            u_dimension: [o, o],\n            u_zoom: e.overscaledZ,\n            u_unpack: i.getUnpackVector()\n          };\n        }(i.tileID, h), null, o.id, e.rasterBoundsBuffer, e.quadTriangleIndexBuffer, e.rasterBoundsSegments), i.needsHillshadePrepare = !1;\n      }\n    }\n    function Oi(e, i, o, a, r, s) {\n      var n = a.paint.get(\"raster-fade-duration\");\n      if (!s && n > 0) {\n        var _a126 = t.exported.now(),\n          _s101 = (_a126 - e.timeAdded) / n,\n          _l54 = i ? (_a126 - i.timeAdded) / n : -1,\n          _c34 = o.getSource(),\n          _h24 = r.coveringZoomLevel({\n            tileSize: _c34.tileSize,\n            roundZoom: _c34.roundZoom\n          }),\n          _u34 = !i || Math.abs(i.tileID.overscaledZ - _h24) > Math.abs(e.tileID.overscaledZ - _h24),\n          _d19 = _u34 && e.refreshedUponExpiration ? 1 : t.clamp(_u34 ? _s101 : 1 - _l54, 0, 1);\n        return e.refreshedUponExpiration && _s101 >= 1 && (e.refreshedUponExpiration = !1), i ? {\n          opacity: 1,\n          mix: 1 - _d19\n        } : {\n          opacity: _d19,\n          mix: 0\n        };\n      }\n      return {\n        opacity: 1,\n        mix: 0\n      };\n    }\n    var Ui = new t.Color(1, 0, 0, 1),\n      Ni = new t.Color(0, 1, 0, 1),\n      Gi = new t.Color(0, 0, 1, 1),\n      Zi = new t.Color(1, 0, 1, 1),\n      Vi = new t.Color(0, 1, 1, 1);\n    function qi(t, e, i, o) {\n      $i(t, 0, e + i / 2, t.transform.width, i, o);\n    }\n    function ji(t, e, i, o) {\n      $i(t, e - i / 2, 0, i, t.transform.height, o);\n    }\n    function $i(t, e, i, o, a, r) {\n      var s = t.context,\n        n = s.gl;\n      n.enable(n.SCISSOR_TEST), n.scissor(e * t.pixelRatio, i * t.pixelRatio, o * t.pixelRatio, a * t.pixelRatio), s.clear({\n        color: r\n      }), n.disable(n.SCISSOR_TEST);\n    }\n    function Xi(e, i, o) {\n      var a = e.context,\n        r = a.gl,\n        s = o.posMatrix,\n        n = e.useProgram(\"debug\"),\n        l = wi.disabled,\n        c = Ei.disabled,\n        h = e.colorModeForRenderPass(),\n        u = \"$debug\",\n        d = e.style.terrain && e.style.terrain.getTerrainData(o);\n      a.activeTexture.set(r.TEXTURE0), e.emptyTexture.bind(r.LINEAR, r.CLAMP_TO_EDGE);\n      var m = i.getTileByID(o.key).latestRawTileData,\n        _ = Math.floor((m && m.byteLength || 0) / 1024),\n        p = i.getTile(o).tileSize,\n        f = 512 / Math.min(p, 512) * (o.overscaledZ / e.transform.zoom) * .5;\n      var g = o.canonical.toString();\n      o.overscaledZ !== o.canonical.z && (g += \" => \".concat(o.overscaledZ)), function (t, e) {\n        t.initDebugOverlayCanvas();\n        var i = t.debugOverlayCanvas,\n          o = t.context.gl,\n          a = t.debugOverlayCanvas.getContext(\"2d\");\n        a.clearRect(0, 0, i.width, i.height), a.shadowColor = \"white\", a.shadowBlur = 2, a.lineWidth = 1.5, a.strokeStyle = \"white\", a.textBaseline = \"top\", a.font = \"bold 36px Open Sans, sans-serif\", a.fillText(e, 5, 5), a.strokeText(e, 5, 5), t.debugOverlayTexture.update(i), t.debugOverlayTexture.bind(o.LINEAR, o.CLAMP_TO_EDGE);\n      }(e, \"\".concat(g, \" \").concat(_, \"kB\")), n.draw(a, r.TRIANGLES, l, c, yi.alphaBlended, Ii.disabled, ge(s, t.Color.transparent, f), null, u, e.debugBuffer, e.quadTriangleIndexBuffer, e.debugSegments), n.draw(a, r.LINE_STRIP, l, c, h, Ii.disabled, ge(s, t.Color.red), d, u, e.debugBuffer, e.tileBorderIndexBuffer, e.debugSegments);\n    }\n    function Wi(t, e, i) {\n      var o = t.context,\n        a = o.gl,\n        r = t.colorModeForRenderPass(),\n        s = new wi(a.LEQUAL, wi.ReadWrite, t.depthRangeFor3D),\n        n = t.useProgram(\"terrain\"),\n        l = e.getTerrainMesh(),\n        c = e.getTerrainData(i.tileID);\n      o.bindFramebuffer.set(null), o.viewport.set([0, 0, t.width, t.height]), o.activeTexture.set(a.TEXTURE0), a.bindTexture(a.TEXTURE_2D, e.getRTTFramebuffer().colorAttachment.get());\n      var h = t.transform.calculatePosMatrix(i.tileID.toUnwrapped());\n      n.draw(o, a.TRIANGLES, s, Ei.disabled, r, Ii.backCCW, {\n        u_matrix: h,\n        u_texture: 0\n      }, c, \"terrain\", l.vertexBuffer, l.indexBuffer, l.segments);\n    }\n    function Hi(t, e, i, o) {\n      var a = t.context,\n        r = i.tileSize * e.qualityFactor;\n      i.textures[o] || (i.textures[o] = t.getTileTexture(r) || new l(a, {\n        width: r,\n        height: r,\n        data: null\n      }, a.gl.RGBA), i.textures[o].bind(a.gl.LINEAR, a.gl.CLAMP_TO_EDGE), 0 === o && e.sourceCache.renderHistory.unshift(i.tileID.key));\n      var s = e.getRTTFramebuffer();\n      s.colorAttachment.set(i.textures[o].texture), a.bindFramebuffer.set(s.framebuffer), a.viewport.set([0, 0, r, r]);\n    }\n    var Ki = /*#__PURE__*/function () {\n      function Ki(t) {\n        _classCallCheck(this, Ki);\n        this._coordsDescendingInv = {}, this._coordsDescendingInvStr = {}, this.painter = t, this._renderToTexture = {\n          background: !0,\n          fill: !0,\n          line: !0,\n          raster: !0\n        }, this._coordsDescendingInv = {}, this._coordsDescendingInvStr = {}, this._stacks = [], this._prevType = null, this._rerender = {}, this._renderableTiles = t.style.terrain.sourceCache.getRenderableTiles(), this._init();\n      }\n      _createClass(Ki, [{\n        key: \"_init\",\n        value: function _init() {\n          var _this76 = this;\n          var t = this.painter.style,\n            e = t.terrain;\n          for (var _i232 in t.sourceCaches) {\n            this._coordsDescendingInv[_i232] = {};\n            var _o115 = t.sourceCaches[_i232].getVisibleCoordinates();\n            var _iterator199 = _createForOfIteratorHelper(_o115),\n              _step199;\n            try {\n              for (_iterator199.s(); !(_step199 = _iterator199.n()).done;) {\n                var _t338 = _step199.value;\n                var _o116 = e.sourceCache.getTerrainCoords(_t338);\n                for (var _t339 in _o116) this._coordsDescendingInv[_i232][_t339] || (this._coordsDescendingInv[_i232][_t339] = []), this._coordsDescendingInv[_i232][_t339].push(_o116[_t339]);\n              }\n            } catch (err) {\n              _iterator199.e(err);\n            } finally {\n              _iterator199.f();\n            }\n          }\n          var _iterator200 = _createForOfIteratorHelper(t._order),\n            _step200;\n          try {\n            for (_iterator200.s(); !(_step200 = _iterator200.n()).done;) {\n              var _e283 = _step200.value;\n              var _i234 = t._layers[_e283],\n                _o118 = _i234.source;\n              if (this._renderToTexture[_i234.type] && !this._coordsDescendingInvStr[_o118]) {\n                this._coordsDescendingInvStr[_o118] = {};\n                for (var _t340 in this._coordsDescendingInv[_o118]) this._coordsDescendingInvStr[_o118][_t340] = this._coordsDescendingInv[_o118][_t340].map(function (t) {\n                  return t.key;\n                }).sort().join();\n              }\n            }\n          } catch (err) {\n            _iterator200.e(err);\n          } finally {\n            _iterator200.f();\n          }\n          return this._renderableTiles.forEach(function (t) {\n            for (var _i233 in _this76._coordsDescendingInvStr) {\n              var _o117 = _this76._coordsDescendingInvStr[_i233][t.tileID.key];\n              _o117 && _o117 !== t.textureCoords[_i233] && t.clearTextures(_this76.painter), e.needsRerender(_i233, t.tileID) && t.clearTextures(_this76.painter);\n            }\n            _this76._rerender[t.tileID.key] = !t.textures.length;\n          }), e.clearRerenderCache(), e.sourceCache.removeOutdated(this.painter), this;\n        }\n      }, {\n        key: \"renderLayer\",\n        value: function renderLayer(e) {\n          var i = e.type,\n            o = this.painter,\n            a = o.style._order,\n            r = o.currentLayer,\n            s = r + 1 === a.length;\n          if (this._renderToTexture[i] && (this._prevType && this._renderToTexture[this._prevType] || this._stacks.push([]), this._prevType = i, this._stacks[this._stacks.length - 1].push(a[r]), !s)) return !0;\n          if (this._renderToTexture[this._prevType] || \"hillshade\" === i || this._renderToTexture[i] && s) {\n            this._prevType = i;\n            var _s102 = this._stacks.length - 1,\n              _n134 = this._stacks[_s102] || [];\n            var _iterator201 = _createForOfIteratorHelper(this._renderableTiles),\n              _step201;\n            try {\n              for (_iterator201.s(); !(_step201 = _iterator201.n()).done;) {\n                var _e284 = _step201.value;\n                if (Hi(o, o.style.terrain, _e284, _s102), this._rerender[_e284.tileID.key]) {\n                  o.context.clear({\n                    color: t.Color.transparent\n                  });\n                  for (var _t341 = 0; _t341 < _n134.length; _t341++) {\n                    var _i236 = o.style._layers[_n134[_t341]],\n                      _a128 = _i236.source ? this._coordsDescendingInv[_i236.source][_e284.tileID.key] : [_e284.tileID];\n                    o._renderTileClippingMasks(_i236, _a128), o.renderLayer(o, o.style.sourceCaches[_i236.source], _i236, _a128), _i236.source && (_e284.textureCoords[_i236.source] = this._coordsDescendingInvStr[_i236.source][_e284.tileID.key]);\n                  }\n                }\n                Wi(o, o.style.terrain, _e284);\n              }\n            } catch (err) {\n              _iterator201.e(err);\n            } finally {\n              _iterator201.f();\n            }\n            if (\"hillshade\" === i) {\n              this._stacks.push([a[r]]);\n              var _iterator202 = _createForOfIteratorHelper(this._renderableTiles),\n                _step202;\n              try {\n                for (_iterator202.s(); !(_step202 = _iterator202.n()).done;) {\n                  var _i235 = _step202.value;\n                  var _a127 = this._coordsDescendingInv[e.source][_i235.tileID.key];\n                  Hi(o, o.style.terrain, _i235, this._stacks.length - 1), o.context.clear({\n                    color: t.Color.transparent\n                  }), o._renderTileClippingMasks(e, _a127), o.renderLayer(o, o.style.sourceCaches[e.source], e, _a127), Wi(o, o.style.terrain, _i235);\n                }\n              } catch (err) {\n                _iterator202.e(err);\n              } finally {\n                _iterator202.f();\n              }\n              return !0;\n            }\n            return this._renderToTexture[i];\n          }\n          return !1;\n        }\n      }]);\n      return Ki;\n    }();\n    var Yi = {\n      symbol: function symbol(e, i, o, a, r) {\n        if (\"translucent\" !== e.renderPass) return;\n        var s = Ei.disabled,\n          n = e.colorModeForRenderPass();\n        o.layout.get(\"text-variable-anchor\") && function (e, i, o, a, r, s, n) {\n          var l = i.transform,\n            c = \"map\" === r,\n            h = \"map\" === s;\n          var _iterator203 = _createForOfIteratorHelper(e),\n            _step203;\n          try {\n            var _loop10 = function _loop10() {\n              var r = _step203.value;\n              var e = a.getTile(r),\n                s = e.getBucket(o);\n              if (!s || !s.text || !s.text.segments.get().length) return \"continue\";\n              var u = t.evaluateSizeForZoom(s.textSizeData, l.zoom),\n                d = bt(e, 1, i.transform.zoom),\n                m = rt(r.posMatrix, h, c, i.transform, d),\n                _ = \"none\" !== o.layout.get(\"icon-text-fit\") && s.hasIconData();\n              if (u) {\n                var _t342 = Math.pow(2, l.zoom - e.tileID.overscaledZ);\n                Pi(s, c, h, n, l, m, r.posMatrix, _t342, u, _, i.style.terrain ? function (t, e) {\n                  return i.style.terrain.getElevation(r, t, e);\n                } : null);\n              }\n            };\n            for (_iterator203.s(); !(_step203 = _iterator203.n()).done;) {\n              var _ret5 = _loop10();\n              if (_ret5 === \"continue\") continue;\n            }\n          } catch (err) {\n            _iterator203.e(err);\n          } finally {\n            _iterator203.f();\n          }\n        }(a, e, o, i, o.layout.get(\"text-rotation-alignment\"), o.layout.get(\"text-pitch-alignment\"), r), 0 !== o.paint.get(\"icon-opacity\").constantOr(1) && Ai(e, i, o, a, !1, o.paint.get(\"icon-translate\"), o.paint.get(\"icon-translate-anchor\"), o.layout.get(\"icon-rotation-alignment\"), o.layout.get(\"icon-pitch-alignment\"), o.layout.get(\"icon-keep-upright\"), s, n), 0 !== o.paint.get(\"text-opacity\").constantOr(1) && Ai(e, i, o, a, !0, o.paint.get(\"text-translate\"), o.paint.get(\"text-translate-anchor\"), o.layout.get(\"text-rotation-alignment\"), o.layout.get(\"text-pitch-alignment\"), o.layout.get(\"text-keep-upright\"), s, n), i.map.showCollisionBoxes && (Si(e, i, o, a, o.paint.get(\"text-translate\"), o.paint.get(\"text-translate-anchor\"), !0), Si(e, i, o, a, o.paint.get(\"icon-translate\"), o.paint.get(\"icon-translate-anchor\"), !1));\n      },\n      circle: function circle(e, i, o, a) {\n        if (\"translucent\" !== e.renderPass) return;\n        var r = o.paint.get(\"circle-opacity\"),\n          s = o.paint.get(\"circle-stroke-width\"),\n          n = o.paint.get(\"circle-stroke-opacity\"),\n          l = !o.layout.get(\"circle-sort-key\").isConstant();\n        if (0 === r.constantOr(1) && (0 === s.constantOr(1) || 0 === n.constantOr(1))) return;\n        var c = e.context,\n          h = c.gl,\n          u = e.depthModeForSublayer(0, wi.ReadOnly),\n          d = Ei.disabled,\n          m = e.colorModeForRenderPass(),\n          _ = [];\n        for (var _r187 = 0; _r187 < a.length; _r187++) {\n          var _s103 = a[_r187],\n            _n135 = i.getTile(_s103),\n            _c35 = _n135.getBucket(o);\n          if (!_c35) continue;\n          var _h25 = _c35.programConfigurations.get(o.id),\n            _u35 = e.useProgram(\"circle\", _h25),\n            _d20 = _c35.layoutVertexBuffer,\n            _m17 = _c35.indexBuffer,\n            _p16 = e.style.terrain && e.style.terrain.getTerrainData(_s103),\n            _f15 = {\n              programConfiguration: _h25,\n              program: _u35,\n              layoutVertexBuffer: _d20,\n              indexBuffer: _m17,\n              uniformValues: pe(e, _s103, _n135, o),\n              terrainData: _p16\n            };\n          if (l) {\n            var _e285 = _c35.segments.get();\n            var _iterator204 = _createForOfIteratorHelper(_e285),\n              _step204;\n            try {\n              for (_iterator204.s(); !(_step204 = _iterator204.n()).done;) {\n                var _i237 = _step204.value;\n                _.push({\n                  segments: new t.SegmentVector([_i237]),\n                  sortKey: _i237.sortKey,\n                  state: _f15\n                });\n              }\n            } catch (err) {\n              _iterator204.e(err);\n            } finally {\n              _iterator204.f();\n            }\n          } else _.push({\n            segments: _c35.segments,\n            sortKey: 0,\n            state: _f15\n          });\n        }\n        l && _.sort(function (t, e) {\n          return t.sortKey - e.sortKey;\n        });\n        for (var _i238 = 0, _arr3 = _; _i238 < _arr3.length; _i238++) {\n          var _t343 = _arr3[_i238];\n          var _t343$state = _t343.state,\n            _i239 = _t343$state.programConfiguration,\n            _a129 = _t343$state.program,\n            _r188 = _t343$state.layoutVertexBuffer,\n            _s104 = _t343$state.indexBuffer,\n            _n136 = _t343$state.uniformValues,\n            _l55 = _t343$state.terrainData;\n          _a129.draw(c, h.TRIANGLES, u, d, m, Ii.disabled, _n136, _l55, o.id, _r188, _s104, _t343.segments, o.paint, e.transform.zoom, _i239);\n        }\n      },\n      heatmap: function heatmap(e, i, o, a) {\n        if (0 !== o.paint.get(\"heatmap-opacity\")) if (\"offscreen\" === e.renderPass) {\n          var _r189 = e.context,\n            _s105 = _r189.gl,\n            _n137 = Ei.disabled,\n            _l56 = new yi([_s105.ONE, _s105.ONE], t.Color.transparent, [!0, !0, !0, !0]);\n          !function (t, e, i) {\n            var o = t.gl;\n            t.activeTexture.set(o.TEXTURE1), t.viewport.set([0, 0, e.width / 4, e.height / 4]);\n            var a = i.heatmapFbo;\n            if (a) o.bindTexture(o.TEXTURE_2D, a.colorAttachment.get()), t.bindFramebuffer.set(a.framebuffer);else {\n              var _r190 = o.createTexture();\n              o.bindTexture(o.TEXTURE_2D, _r190), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_WRAP_S, o.CLAMP_TO_EDGE), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_WRAP_T, o.CLAMP_TO_EDGE), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MIN_FILTER, o.LINEAR), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MAG_FILTER, o.LINEAR), a = i.heatmapFbo = t.createFramebuffer(e.width / 4, e.height / 4, !1), function (t, e, i, o) {\n                var a = t.gl;\n                a.texImage2D(a.TEXTURE_2D, 0, a.RGBA, e.width / 4, e.height / 4, 0, a.RGBA, t.extRenderToTextureHalfFloat ? t.extTextureHalfFloat.HALF_FLOAT_OES : a.UNSIGNED_BYTE, null), o.colorAttachment.set(i);\n              }(t, e, _r190, a);\n            }\n          }(_r189, e, o), _r189.clear({\n            color: t.Color.transparent\n          });\n          for (var _t344 = 0; _t344 < a.length; _t344++) {\n            var _c36 = a[_t344];\n            if (i.hasRenderableParent(_c36)) continue;\n            var _h26 = i.getTile(_c36),\n              _u36 = _h26.getBucket(o);\n            if (!_u36) continue;\n            var _d21 = _u36.programConfigurations.get(o.id),\n              _m18 = e.useProgram(\"heatmap\", _d21),\n              _15 = e.transform.zoom;\n            _m18.draw(_r189, _s105.TRIANGLES, wi.disabled, _n137, _l56, Ii.disabled, ve(_c36.posMatrix, _h26, _15, o.paint.get(\"heatmap-intensity\")), null, o.id, _u36.layoutVertexBuffer, _u36.indexBuffer, _u36.segments, o.paint, e.transform.zoom, _d21);\n          }\n          _r189.viewport.set([0, 0, e.width, e.height]);\n        } else \"translucent\" === e.renderPass && (e.context.setColorMode(e.colorModeForRenderPass()), function (e, i) {\n          var o = e.context,\n            a = o.gl,\n            r = i.heatmapFbo;\n          if (!r) return;\n          o.activeTexture.set(a.TEXTURE0), a.bindTexture(a.TEXTURE_2D, r.colorAttachment.get()), o.activeTexture.set(a.TEXTURE1);\n          var s = i.colorRampTexture;\n          s || (s = i.colorRampTexture = new l(o, i.colorRamp, a.RGBA)), s.bind(a.LINEAR, a.CLAMP_TO_EDGE), e.useProgram(\"heatmapTexture\").draw(o, a.TRIANGLES, wi.disabled, Ei.disabled, e.colorModeForRenderPass(), Ii.disabled, function (e, i, o, a) {\n            var r = t.create();\n            t.ortho(r, 0, e.width, e.height, 0, 0, 1);\n            var s = e.context.gl;\n            return {\n              u_matrix: r,\n              u_world: [s.drawingBufferWidth, s.drawingBufferHeight],\n              u_image: 0,\n              u_color_ramp: 1,\n              u_opacity: i.paint.get(\"heatmap-opacity\")\n            };\n          }(e, i), null, i.id, e.viewportBuffer, e.quadTriangleIndexBuffer, e.viewportSegments, i.paint, e.transform.zoom);\n        }(e, o));\n      },\n      line: function line(e, i, o, a) {\n        if (\"translucent\" !== e.renderPass) return;\n        var r = o.paint.get(\"line-opacity\"),\n          s = o.paint.get(\"line-width\");\n        if (0 === r.constantOr(1) || 0 === s.constantOr(1)) return;\n        var n = e.depthModeForSublayer(0, wi.ReadOnly),\n          c = e.colorModeForRenderPass(),\n          h = o.paint.get(\"line-dasharray\"),\n          u = o.paint.get(\"line-pattern\"),\n          d = u.constantOr(1),\n          m = o.paint.get(\"line-gradient\"),\n          _ = o.getCrossfadeParameters(),\n          p = d ? \"linePattern\" : h ? \"lineSDF\" : m ? \"lineGradient\" : \"line\",\n          f = e.context,\n          g = f.gl;\n        var x = !0;\n        var _iterator205 = _createForOfIteratorHelper(a),\n          _step205;\n        try {\n          for (_iterator205.s(); !(_step205 = _iterator205.n()).done;) {\n            var _r191 = _step205.value;\n            var _a130 = i.getTile(_r191);\n            if (d && !_a130.patternsLoaded()) continue;\n            var _s106 = _a130.getBucket(o);\n            if (!_s106) continue;\n            var _v12 = _s106.programConfigurations.get(o.id),\n              _y12 = e.context.program.get(),\n              _b14 = e.useProgram(p, _v12),\n              _w11 = x || _b14.program !== _y12,\n              _T5 = e.style.terrain && e.style.terrain.getTerrainData(_r191),\n              _E4 = u.constantOr(null);\n            if (_E4 && _a130.imageAtlas) {\n              var _t345 = _a130.imageAtlas,\n                _e286 = _t345.patternPositions[_E4.to.toString()],\n                _i240 = _t345.patternPositions[_E4.from.toString()];\n              _e286 && _i240 && _v12.setConstantPatternPositions(_e286, _i240);\n            }\n            var _I6 = _T5 ? _r191 : null,\n              _C3 = d ? Te(e, _a130, o, _, _I6) : h ? Ee(e, _a130, o, h, _, _I6) : m ? we(e, _a130, o, _s106.lineClipsArray.length, _I6) : be(e, _a130, o, _I6);\n            if (d) f.activeTexture.set(g.TEXTURE0), _a130.imageAtlasTexture.bind(g.LINEAR, g.CLAMP_TO_EDGE), _v12.updatePaintBuffers(_);else if (h && (_w11 || e.lineAtlas.dirty)) f.activeTexture.set(g.TEXTURE0), e.lineAtlas.bind(f);else if (m) {\n              var _a131 = _s106.gradients[o.id];\n              var _n138 = _a131.texture;\n              if (o.gradientVersion !== _a131.version) {\n                var _c37 = 256;\n                if (o.stepInterpolant) {\n                  var _o119 = i.getSource().maxzoom,\n                    _a132 = _r191.canonical.z === _o119 ? Math.ceil(1 << e.transform.maxZoom - _r191.canonical.z) : 1;\n                  _c37 = t.clamp(t.nextPowerOfTwo(_s106.maxLineLength / t.EXTENT * 1024 * _a132), 256, f.maxTextureSize);\n                }\n                _a131.gradient = t.renderColorRamp({\n                  expression: o.gradientExpression(),\n                  evaluationKey: \"lineProgress\",\n                  resolution: _c37,\n                  image: _a131.gradient || void 0,\n                  clips: _s106.lineClipsArray\n                }), _a131.texture ? _a131.texture.update(_a131.gradient) : _a131.texture = new l(f, _a131.gradient, g.RGBA), _a131.version = o.gradientVersion, _n138 = _a131.texture;\n              }\n              f.activeTexture.set(g.TEXTURE0), _n138.bind(o.stepInterpolant ? g.NEAREST : g.LINEAR, g.CLAMP_TO_EDGE);\n            }\n            _b14.draw(f, g.TRIANGLES, n, e.stencilModeForClipping(_r191), c, Ii.disabled, _C3, _T5, o.id, _s106.layoutVertexBuffer, _s106.indexBuffer, _s106.segments, o.paint, e.transform.zoom, _v12, _s106.layoutVertexBuffer2), x = !1;\n          }\n        } catch (err) {\n          _iterator205.e(err);\n        } finally {\n          _iterator205.f();\n        }\n      },\n      fill: function fill(e, i, o, a) {\n        var r = o.paint.get(\"fill-color\"),\n          s = o.paint.get(\"fill-opacity\");\n        if (0 === s.constantOr(1)) return;\n        var n = e.colorModeForRenderPass(),\n          l = o.paint.get(\"fill-pattern\"),\n          c = e.opaquePassEnabledForLayer() && !l.constantOr(1) && 1 === r.constantOr(t.Color.transparent).a && 1 === s.constantOr(0) ? \"opaque\" : \"translucent\";\n        if (e.renderPass === c) {\n          var _t346 = e.depthModeForSublayer(1, \"opaque\" === e.renderPass ? wi.ReadWrite : wi.ReadOnly);\n          Ri(e, i, o, a, _t346, n, !1);\n        }\n        if (\"translucent\" === e.renderPass && o.paint.get(\"fill-antialias\")) {\n          var _t347 = e.depthModeForSublayer(o.getPaintProperty(\"fill-outline-color\") ? 2 : 0, wi.ReadOnly);\n          Ri(e, i, o, a, _t347, n, !0);\n        }\n      },\n      \"fill-extrusion\": function fillExtrusion(t, e, i, o) {\n        var a = i.paint.get(\"fill-extrusion-opacity\");\n        if (0 !== a && \"translucent\" === t.renderPass) {\n          var _r192 = new wi(t.context.gl.LEQUAL, wi.ReadWrite, t.depthRangeFor3D);\n          if (1 !== a || i.paint.get(\"fill-extrusion-pattern\").constantOr(1)) ki(t, e, i, o, _r192, Ei.disabled, yi.disabled), ki(t, e, i, o, _r192, t.stencilModeFor3D(), t.colorModeForRenderPass());else {\n            var _a133 = t.colorModeForRenderPass();\n            ki(t, e, i, o, _r192, Ei.disabled, _a133);\n          }\n        }\n      },\n      hillshade: function hillshade(t, e, i, o) {\n        if (\"offscreen\" !== t.renderPass && \"translucent\" !== t.renderPass) return;\n        var a = t.context,\n          r = t.depthModeForSublayer(0, wi.ReadOnly),\n          s = t.colorModeForRenderPass(),\n          _ref125 = \"translucent\" === t.renderPass ? t.stencilConfigForOverlap(o) : [{}, o],\n          _ref126 = _slicedToArray(_ref125, 2),\n          n = _ref126[0],\n          l = _ref126[1];\n        var _iterator206 = _createForOfIteratorHelper(l),\n          _step206;\n        try {\n          for (_iterator206.s(); !(_step206 = _iterator206.n()).done;) {\n            var _o120 = _step206.value;\n            var _a134 = e.getTile(_o120);\n            void 0 !== _a134.needsHillshadePrepare && _a134.needsHillshadePrepare && \"offscreen\" === t.renderPass ? Fi(t, _a134, i, r, Ei.disabled, s) : \"translucent\" === t.renderPass && Bi(t, _o120, _a134, i, r, n[_o120.overscaledZ], s);\n          }\n        } catch (err) {\n          _iterator206.e(err);\n        } finally {\n          _iterator206.f();\n        }\n        a.viewport.set([0, 0, t.width, t.height]);\n      },\n      raster: function raster(t, e, i, o) {\n        if (\"translucent\" !== t.renderPass) return;\n        if (0 === i.paint.get(\"raster-opacity\")) return;\n        if (!o.length) return;\n        var a = t.context,\n          r = a.gl,\n          s = e.getSource(),\n          n = t.useProgram(\"raster\"),\n          l = t.colorModeForRenderPass(),\n          _ref127 = s instanceof D ? [{}, o] : t.stencilConfigForOverlap(o),\n          _ref128 = _slicedToArray(_ref127, 2),\n          c = _ref128[0],\n          h = _ref128[1],\n          u = h[h.length - 1].overscaledZ,\n          d = !t.options.moving;\n        var _iterator207 = _createForOfIteratorHelper(h),\n          _step207;\n        try {\n          for (_iterator207.s(); !(_step207 = _iterator207.n()).done;) {\n            var _o121 = _step207.value;\n            var _h27 = t.depthModeForSublayer(_o121.overscaledZ - u, 1 === i.paint.get(\"raster-opacity\") ? wi.ReadWrite : wi.ReadOnly, r.LESS),\n              _m19 = e.getTile(_o121);\n            _m19.registerFadeDuration(i.paint.get(\"raster-fade-duration\"));\n            var _16 = e.findLoadedParent(_o121, 0),\n              _p17 = Oi(_m19, _16, e, i, t.transform, t.style.terrain);\n            var _f16 = void 0,\n              _g18 = void 0;\n            var _x14 = \"nearest\" === i.paint.get(\"raster-resampling\") ? r.NEAREST : r.LINEAR;\n            a.activeTexture.set(r.TEXTURE0), _m19.texture.bind(_x14, r.CLAMP_TO_EDGE, r.LINEAR_MIPMAP_NEAREST), a.activeTexture.set(r.TEXTURE1), _16 ? (_16.texture.bind(_x14, r.CLAMP_TO_EDGE, r.LINEAR_MIPMAP_NEAREST), _f16 = Math.pow(2, _16.tileID.overscaledZ - _m19.tileID.overscaledZ), _g18 = [_m19.tileID.canonical.x * _f16 % 1, _m19.tileID.canonical.y * _f16 % 1]) : _m19.texture.bind(_x14, r.CLAMP_TO_EDGE, r.LINEAR_MIPMAP_NEAREST);\n            var _v13 = t.style.terrain && t.style.terrain.getTerrainData(_o121),\n              _y13 = _v13 ? _o121 : null,\n              _b15 = _y13 ? _y13.posMatrix : t.transform.calculatePosMatrix(_o121.toUnwrapped(), d),\n              _w12 = Se(_b15, _g18 || [0, 0], _f16 || 1, _p17, i);\n            s instanceof D ? n.draw(a, r.TRIANGLES, _h27, Ei.disabled, l, Ii.disabled, _w12, _v13, i.id, s.boundsBuffer, t.quadTriangleIndexBuffer, s.boundsSegments) : n.draw(a, r.TRIANGLES, _h27, c[_o121.overscaledZ], l, Ii.disabled, _w12, _v13, i.id, t.rasterBoundsBuffer, t.quadTriangleIndexBuffer, t.rasterBoundsSegments);\n          }\n        } catch (err) {\n          _iterator207.e(err);\n        } finally {\n          _iterator207.f();\n        }\n      },\n      background: function background(t, e, i, o) {\n        var a = i.paint.get(\"background-color\"),\n          r = i.paint.get(\"background-opacity\");\n        if (0 === r) return;\n        var s = t.context,\n          n = s.gl,\n          l = t.transform,\n          c = l.tileSize,\n          h = i.paint.get(\"background-pattern\");\n        if (t.isPatternMissing(h)) return;\n        var u = !h && 1 === a.a && 1 === r && t.opaquePassEnabledForLayer() ? \"opaque\" : \"translucent\";\n        if (t.renderPass !== u) return;\n        var d = Ei.disabled,\n          m = t.depthModeForSublayer(0, \"opaque\" === u ? wi.ReadWrite : wi.ReadOnly),\n          _ = t.colorModeForRenderPass(),\n          p = t.useProgram(h ? \"backgroundPattern\" : \"background\"),\n          f = o || l.coveringTiles({\n            tileSize: c,\n            terrain: t.style.terrain\n          });\n        h && (s.activeTexture.set(n.TEXTURE0), t.imageManager.bind(t.context));\n        var g = i.getCrossfadeParameters();\n        var _iterator208 = _createForOfIteratorHelper(f),\n          _step208;\n        try {\n          for (_iterator208.s(); !(_step208 = _iterator208.n()).done;) {\n            var _e287 = _step208.value;\n            var _l57 = o ? _e287.posMatrix : t.transform.calculatePosMatrix(_e287.toUnwrapped()),\n              _u37 = h ? Le(_l57, r, t, h, {\n                tileID: _e287,\n                tileSize: c\n              }, g) : Ae(_l57, r, a),\n              _f17 = t.style.terrain && t.style.terrain.getTerrainData(_e287);\n            p.draw(s, n.TRIANGLES, m, d, _, Ii.disabled, _u37, _f17, i.id, t.tileExtentBuffer, t.quadTriangleIndexBuffer, t.tileExtentSegments);\n          }\n        } catch (err) {\n          _iterator208.e(err);\n        } finally {\n          _iterator208.f();\n        }\n      },\n      debug: function debug(t, e, i) {\n        for (var _o122 = 0; _o122 < i.length; _o122++) Xi(t, e, i[_o122]);\n      },\n      custom: function custom(t, e, i) {\n        var o = t.context,\n          a = i.implementation;\n        if (\"offscreen\" === t.renderPass) {\n          var _e288 = a.prerender;\n          _e288 && (t.setCustomLayerDefaults(), o.setColorMode(t.colorModeForRenderPass()), _e288.call(a, o.gl, t.transform.customLayerMatrix()), o.setDirty(), t.setBaseState());\n        } else if (\"translucent\" === t.renderPass) {\n          t.setCustomLayerDefaults(), o.setColorMode(t.colorModeForRenderPass()), o.setStencilMode(Ei.disabled);\n          var _e289 = \"3d\" === a.renderingMode ? new wi(t.context.gl.LEQUAL, wi.ReadWrite, t.depthRangeFor3D) : t.depthModeForSublayer(0, wi.ReadOnly);\n          o.setDepthMode(_e289), a.render(o.gl, t.transform.customLayerMatrix()), o.setDirty(), t.setBaseState(), o.bindFramebuffer.set(null);\n        }\n      }\n    };\n    var Ji = /*#__PURE__*/function () {\n      function Ji(e, i) {\n        _classCallCheck(this, Ji);\n        this.context = new bi(e), this.transform = i, this._tileTextures = {}, this.terrainFacilitator = {\n          dirty: !0,\n          matrix: t.create(),\n          renderTime: 0\n        }, this.setup(), this.numSublayers = O.maxUnderzooming + O.maxOverzooming + 1, this.depthEpsilon = 1 / Math.pow(2, 16), this.crossTileSymbolIndex = new Xt(), this.gpuTimers = {};\n      }\n      _createClass(Ji, [{\n        key: \"resize\",\n        value: function resize(t, e, i) {\n          if (this.width = t * i, this.height = e * i, this.pixelRatio = i, this.context.viewport.set([0, 0, this.width, this.height]), this.style) {\n            var _iterator209 = _createForOfIteratorHelper(this.style._order),\n              _step209;\n            try {\n              for (_iterator209.s(); !(_step209 = _iterator209.n()).done;) {\n                var _t348 = _step209.value;\n                this.style._layers[_t348].resize();\n              }\n            } catch (err) {\n              _iterator209.e(err);\n            } finally {\n              _iterator209.f();\n            }\n          }\n        }\n      }, {\n        key: \"setup\",\n        value: function setup() {\n          var e = this.context,\n            i = new t.PosArray();\n          i.emplaceBack(0, 0), i.emplaceBack(t.EXTENT, 0), i.emplaceBack(0, t.EXTENT), i.emplaceBack(t.EXTENT, t.EXTENT), this.tileExtentBuffer = e.createVertexBuffer(i, Wt.members), this.tileExtentSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2);\n          var o = new t.PosArray();\n          o.emplaceBack(0, 0), o.emplaceBack(t.EXTENT, 0), o.emplaceBack(0, t.EXTENT), o.emplaceBack(t.EXTENT, t.EXTENT), this.debugBuffer = e.createVertexBuffer(o, Wt.members), this.debugSegments = t.SegmentVector.simpleSegment(0, 0, 4, 5);\n          var a = new t.RasterBoundsArray();\n          a.emplaceBack(0, 0, 0, 0), a.emplaceBack(t.EXTENT, 0, t.EXTENT, 0), a.emplaceBack(0, t.EXTENT, 0, t.EXTENT), a.emplaceBack(t.EXTENT, t.EXTENT, t.EXTENT, t.EXTENT), this.rasterBoundsBuffer = e.createVertexBuffer(a, S.members), this.rasterBoundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2);\n          var r = new t.PosArray();\n          r.emplaceBack(0, 0), r.emplaceBack(1, 0), r.emplaceBack(0, 1), r.emplaceBack(1, 1), this.viewportBuffer = e.createVertexBuffer(r, Wt.members), this.viewportSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2);\n          var s = new t.LineStripIndexArray();\n          s.emplaceBack(0), s.emplaceBack(1), s.emplaceBack(3), s.emplaceBack(2), s.emplaceBack(0), this.tileBorderIndexBuffer = e.createIndexBuffer(s);\n          var n = new t.TriangleIndexArray();\n          n.emplaceBack(0, 1, 2), n.emplaceBack(2, 1, 3), this.quadTriangleIndexBuffer = e.createIndexBuffer(n), this.emptyTexture = new l(e, {\n            width: 1,\n            height: 1,\n            data: new Uint8Array([0, 0, 0, 0])\n          }, e.gl.RGBA);\n          var c = this.context.gl;\n          this.stencilClearMode = new Ei({\n            func: c.ALWAYS,\n            mask: 0\n          }, 0, 255, c.ZERO, c.ZERO, c.ZERO);\n        }\n      }, {\n        key: \"clearStencil\",\n        value: function clearStencil() {\n          var e = this.context,\n            i = e.gl;\n          this.nextStencilID = 1, this.currentStencilSource = void 0;\n          var o = t.create();\n          t.ortho(o, 0, this.width, this.height, 0, 0, 1), t.scale(o, o, [i.drawingBufferWidth, i.drawingBufferHeight, 0]), this.useProgram(\"clippingMask\").draw(e, i.TRIANGLES, wi.disabled, this.stencilClearMode, yi.disabled, Ii.disabled, xe(o), null, \"$clipping\", this.viewportBuffer, this.quadTriangleIndexBuffer, this.viewportSegments);\n        }\n      }, {\n        key: \"_renderTileClippingMasks\",\n        value: function _renderTileClippingMasks(t, e) {\n          if (this.currentStencilSource === t.source || !t.isTileClipped() || !e || !e.length) return;\n          this.currentStencilSource = t.source;\n          var i = this.context,\n            o = i.gl;\n          this.nextStencilID + e.length > 256 && this.clearStencil(), i.setColorMode(yi.disabled), i.setDepthMode(wi.disabled);\n          var a = this.useProgram(\"clippingMask\");\n          this._tileClippingMaskIDs = {};\n          var _iterator210 = _createForOfIteratorHelper(e),\n            _step210;\n          try {\n            for (_iterator210.s(); !(_step210 = _iterator210.n()).done;) {\n              var _t349 = _step210.value;\n              var _e290 = this._tileClippingMaskIDs[_t349.key] = this.nextStencilID++,\n                _r193 = this.style.terrain && this.style.terrain.getTerrainData(_t349);\n              a.draw(i, o.TRIANGLES, wi.disabled, new Ei({\n                func: o.ALWAYS,\n                mask: 0\n              }, _e290, 255, o.KEEP, o.KEEP, o.REPLACE), yi.disabled, Ii.disabled, xe(_t349.posMatrix), _r193, \"$clipping\", this.tileExtentBuffer, this.quadTriangleIndexBuffer, this.tileExtentSegments);\n            }\n          } catch (err) {\n            _iterator210.e(err);\n          } finally {\n            _iterator210.f();\n          }\n        }\n      }, {\n        key: \"stencilModeFor3D\",\n        value: function stencilModeFor3D() {\n          this.currentStencilSource = void 0, this.nextStencilID + 1 > 256 && this.clearStencil();\n          var t = this.nextStencilID++,\n            e = this.context.gl;\n          return new Ei({\n            func: e.NOTEQUAL,\n            mask: 255\n          }, t, 255, e.KEEP, e.KEEP, e.REPLACE);\n        }\n      }, {\n        key: \"stencilModeForClipping\",\n        value: function stencilModeForClipping(t) {\n          var e = this.context.gl;\n          return new Ei({\n            func: e.EQUAL,\n            mask: 255\n          }, this._tileClippingMaskIDs[t.key], 0, e.KEEP, e.KEEP, e.REPLACE);\n        }\n      }, {\n        key: \"stencilConfigForOverlap\",\n        value: function stencilConfigForOverlap(t) {\n          var e = this.context.gl,\n            i = t.sort(function (t, e) {\n              return e.overscaledZ - t.overscaledZ;\n            }),\n            o = i[i.length - 1].overscaledZ,\n            a = i[0].overscaledZ - o + 1;\n          if (a > 1) {\n            this.currentStencilSource = void 0, this.nextStencilID + a > 256 && this.clearStencil();\n            var _t350 = {};\n            for (var _i241 = 0; _i241 < a; _i241++) _t350[_i241 + o] = new Ei({\n              func: e.GEQUAL,\n              mask: 255\n            }, _i241 + this.nextStencilID, 255, e.KEEP, e.KEEP, e.REPLACE);\n            return this.nextStencilID += a, [_t350, i];\n          }\n          return [_defineProperty({}, o, Ei.disabled), i];\n        }\n      }, {\n        key: \"colorModeForRenderPass\",\n        value: function colorModeForRenderPass() {\n          var e = this.context.gl;\n          if (this._showOverdrawInspector) {\n            var _i242 = 1 / 8;\n            return new yi([e.CONSTANT_COLOR, e.ONE], new t.Color(_i242, _i242, _i242, 0), [!0, !0, !0, !0]);\n          }\n          return \"opaque\" === this.renderPass ? yi.unblended : yi.alphaBlended;\n        }\n      }, {\n        key: \"depthModeForSublayer\",\n        value: function depthModeForSublayer(t, e, i) {\n          if (!this.opaquePassEnabledForLayer()) return wi.disabled;\n          var o = 1 - ((1 + this.currentLayer) * this.numSublayers + t) * this.depthEpsilon;\n          return new wi(i || this.context.gl.LEQUAL, e, [o, o]);\n        }\n      }, {\n        key: \"opaquePassEnabledForLayer\",\n        value: function opaquePassEnabledForLayer() {\n          return this.currentLayer < this.opaquePassCutoff;\n        }\n      }, {\n        key: \"render\",\n        value: function render(e, i) {\n          var _this77 = this;\n          this.style = e, this.options = i, this.lineAtlas = e.lineAtlas, this.imageManager = e.imageManager, this.glyphManager = e.glyphManager, this.symbolFadeChange = e.placement.symbolFadeChange(t.exported.now()), this.imageManager.beginFrame();\n          var o = this.style._order,\n            a = this.style.sourceCaches,\n            r = this.style.terrain && new Ki(this);\n          for (var _t351 in a) {\n            var _e291 = a[_t351];\n            _e291.used && _e291.prepare(this.context);\n          }\n          var s = {},\n            n = {},\n            l = {};\n          for (var _t352 in a) {\n            var _e292 = a[_t352];\n            s[_t352] = _e292.getVisibleCoordinates(), n[_t352] = s[_t352].slice().reverse(), l[_t352] = _e292.getVisibleCoordinates(!0).reverse();\n          }\n          this.opaquePassCutoff = 1 / 0;\n          for (var _t353 = 0; _t353 < o.length; _t353++) if (this.style._layers[o[_t353]].is3D()) {\n            this.opaquePassCutoff = _t353;\n            break;\n          }\n          if (r) {\n            this.opaquePassCutoff = 0;\n            var _e293 = this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);\n            (this.terrainFacilitator.dirty || !t.equals(this.terrainFacilitator.matrix, this.transform.projMatrix) || _e293.length) && (t.copy(this.terrainFacilitator.matrix, this.transform.projMatrix), this.terrainFacilitator.renderTime = Date.now(), this.terrainFacilitator.dirty = !1, function (e, i) {\n              var o = e.context,\n                a = o.gl,\n                r = yi.unblended,\n                s = new wi(a.LEQUAL, wi.ReadWrite, [0, 1]),\n                n = i.getTerrainMesh(),\n                l = i.sourceCache.getRenderableTiles(),\n                c = e.useProgram(\"terrainDepth\");\n              o.bindFramebuffer.set(i.getFramebuffer(\"depth\").framebuffer), o.viewport.set([0, 0, e.width / devicePixelRatio, e.height / devicePixelRatio]), o.clear({\n                color: t.Color.transparent,\n                depth: 1\n              });\n              var _iterator211 = _createForOfIteratorHelper(l),\n                _step211;\n              try {\n                for (_iterator211.s(); !(_step211 = _iterator211.n()).done;) {\n                  var _t354 = _step211.value;\n                  var _l58 = i.getTerrainData(_t354.tileID),\n                    _h28 = e.transform.calculatePosMatrix(_t354.tileID.toUnwrapped());\n                  c.draw(o, a.TRIANGLES, s, Ei.disabled, r, Ii.backCCW, {\n                    u_matrix: _h28\n                  }, _l58, \"terrain\", n.vertexBuffer, n.indexBuffer, n.segments);\n                }\n              } catch (err) {\n                _iterator211.e(err);\n              } finally {\n                _iterator211.f();\n              }\n              o.bindFramebuffer.set(null), o.viewport.set([0, 0, e.width, e.height]);\n            }(this, this.style.terrain), function (e, i) {\n              var o = e.context,\n                a = o.gl,\n                r = yi.unblended,\n                s = new wi(a.LEQUAL, wi.ReadWrite, [0, 1]),\n                n = i.getTerrainMesh(),\n                l = i.getCoordsTexture(),\n                c = i.sourceCache.getRenderableTiles(),\n                h = e.useProgram(\"terrainCoords\");\n              o.bindFramebuffer.set(i.getFramebuffer(\"coords\").framebuffer), o.viewport.set([0, 0, e.width / devicePixelRatio, e.height / devicePixelRatio]), o.clear({\n                color: t.Color.transparent,\n                depth: 1\n              }), i.coordsIndex = [];\n              var _iterator212 = _createForOfIteratorHelper(c),\n                _step212;\n              try {\n                for (_iterator212.s(); !(_step212 = _iterator212.n()).done;) {\n                  var _t355 = _step212.value;\n                  var _c38 = i.getTerrainData(_t355.tileID);\n                  o.activeTexture.set(a.TEXTURE0), a.bindTexture(a.TEXTURE_2D, l.texture);\n                  var _u38 = e.transform.calculatePosMatrix(_t355.tileID.toUnwrapped());\n                  h.draw(o, a.TRIANGLES, s, Ei.disabled, r, Ii.backCCW, {\n                    u_matrix: _u38,\n                    u_terrain_coords_id: (255 - i.coordsIndex.length) / 255,\n                    u_texture: 0\n                  }, _c38, \"terrain\", n.vertexBuffer, n.indexBuffer, n.segments), i.coordsIndex.push(_t355.tileID.key);\n                }\n              } catch (err) {\n                _iterator212.e(err);\n              } finally {\n                _iterator212.f();\n              }\n              o.bindFramebuffer.set(null), o.viewport.set([0, 0, e.width, e.height]);\n            }(this, this.style.terrain));\n          }\n          this.renderPass = \"offscreen\";\n          var _iterator213 = _createForOfIteratorHelper(o),\n            _step213;\n          try {\n            for (_iterator213.s(); !(_step213 = _iterator213.n()).done;) {\n              var _t359 = _step213.value;\n              var _e297 = this.style._layers[_t359];\n              if (!_e297.hasOffscreenPass() || _e297.isHidden(this.transform.zoom)) continue;\n              var _i245 = n[_e297.source];\n              (\"custom\" === _e297.type || _i245.length) && this.renderLayer(this, a[_e297.source], _e297, _i245);\n            }\n          } catch (err) {\n            _iterator213.e(err);\n          } finally {\n            _iterator213.f();\n          }\n          if (this.context.bindFramebuffer.set(null), this.context.clear({\n            color: i.showOverdrawInspector ? t.Color.black : t.Color.transparent,\n            depth: 1\n          }), this.clearStencil(), this._showOverdrawInspector = i.showOverdrawInspector, this.depthRangeFor3D = [0, 1 - (e._order.length + 2) * this.numSublayers * this.depthEpsilon], !r) for (this.renderPass = \"opaque\", this.currentLayer = o.length - 1; this.currentLayer >= 0; this.currentLayer--) {\n            var _t356 = this.style._layers[o[this.currentLayer]],\n              _e294 = a[_t356.source],\n              _i243 = s[_t356.source];\n            this._renderTileClippingMasks(_t356, _i243), this.renderLayer(this, _e294, _t356, _i243);\n          }\n          for (this.renderPass = \"translucent\", this.currentLayer = 0; this.currentLayer < o.length; this.currentLayer++) {\n            var _t357 = this.style._layers[o[this.currentLayer]],\n              _e295 = a[_t357.source];\n            if (r && r.renderLayer(_t357)) continue;\n            var _i244 = (\"symbol\" === _t357.type ? l : n)[_t357.source];\n            this._renderTileClippingMasks(_t357, s[_t357.source]), this.renderLayer(this, _e295, _t357, _i244);\n          }\n          if (this.options.showTileBoundaries) {\n            var _t358, _e296;\n            Object.values(this.style._layers).forEach(function (i) {\n              i.source && !i.isHidden(_this77.transform.zoom) && (i.source !== (_e296 && _e296.id) && (_e296 = _this77.style.sourceCaches[i.source]), (!_t358 || _t358.getSource().maxzoom < _e296.getSource().maxzoom) && (_t358 = _e296));\n            }), _t358 && Yi.debug(this, _t358, _t358.getVisibleCoordinates());\n          }\n          this.options.showPadding && function (t) {\n            var e = t.transform.padding;\n            qi(t, t.transform.height - (e.top || 0), 3, Ui), qi(t, e.bottom || 0, 3, Ni), ji(t, e.left || 0, 3, Gi), ji(t, t.transform.width - (e.right || 0), 3, Zi);\n            var i = t.transform.centerPoint;\n            !function (t, e, i, o) {\n              $i(t, e - 1, i - 10, 2, 20, o), $i(t, e - 10, i - 1, 20, 2, o);\n            }(t, i.x, t.transform.height - i.y, Vi);\n          }(this), this.context.setDefault();\n        }\n      }, {\n        key: \"renderLayer\",\n        value: function renderLayer(t, e, i, o) {\n          i.isHidden(this.transform.zoom) || (\"background\" === i.type || \"custom\" === i.type || (o || []).length) && (this.id = i.id, this.gpuTimingStart(i), Yi[i.type](t, e, i, o, this.style.placement.variableOffsets), this.gpuTimingEnd());\n        }\n      }, {\n        key: \"gpuTimingStart\",\n        value: function gpuTimingStart(t) {\n          if (!this.options.gpuTiming) return;\n          var e = this.context.extTimerQuery;\n          var i = this.gpuTimers[t.id];\n          i || (i = this.gpuTimers[t.id] = {\n            calls: 0,\n            cpuTime: 0,\n            query: e.createQueryEXT()\n          }), i.calls++, e.beginQueryEXT(e.TIME_ELAPSED_EXT, i.query);\n        }\n      }, {\n        key: \"gpuTimingEnd\",\n        value: function gpuTimingEnd() {\n          if (!this.options.gpuTiming) return;\n          var t = this.context.extTimerQuery;\n          t.endQueryEXT(t.TIME_ELAPSED_EXT);\n        }\n      }, {\n        key: \"collectGpuTimers\",\n        value: function collectGpuTimers() {\n          var t = this.gpuTimers;\n          return this.gpuTimers = {}, t;\n        }\n      }, {\n        key: \"queryGpuTimers\",\n        value: function queryGpuTimers(t) {\n          var e = {};\n          for (var _i246 in t) {\n            var _o123 = t[_i246],\n              _a135 = this.context.extTimerQuery,\n              _r194 = _a135.getQueryObjectEXT(_o123.query, _a135.QUERY_RESULT_EXT) / 1e6;\n            _a135.deleteQueryEXT(_o123.query), e[_i246] = _r194;\n          }\n          return e;\n        }\n      }, {\n        key: \"translatePosMatrix\",\n        value: function translatePosMatrix(e, i, o, a, r) {\n          if (!o[0] && !o[1]) return e;\n          var s = r ? \"map\" === a ? this.transform.angle : 0 : \"viewport\" === a ? -this.transform.angle : 0;\n          if (s) {\n            var _t360 = Math.sin(s),\n              _e298 = Math.cos(s);\n            o = [o[0] * _e298 - o[1] * _t360, o[0] * _t360 + o[1] * _e298];\n          }\n          var n = [r ? o[0] : bt(i, o[0], this.transform.zoom), r ? o[1] : bt(i, o[1], this.transform.zoom), 0],\n            l = new Float32Array(16);\n          return t.translate(l, e, n), l;\n        }\n      }, {\n        key: \"saveTileTexture\",\n        value: function saveTileTexture(t) {\n          var e = this._tileTextures[t.size[0]];\n          e ? e.push(t) : this._tileTextures[t.size[0]] = [t];\n        }\n      }, {\n        key: \"getTileTexture\",\n        value: function getTileTexture(t) {\n          var e = this._tileTextures[t];\n          return e && e.length > 0 ? e.pop() : null;\n        }\n      }, {\n        key: \"isPatternMissing\",\n        value: function isPatternMissing(t) {\n          if (!t) return !1;\n          if (!t.from || !t.to) return !0;\n          var e = this.imageManager.getPattern(t.from.toString()),\n            i = this.imageManager.getPattern(t.to.toString());\n          return !e || !i;\n        }\n      }, {\n        key: \"useProgram\",\n        value: function useProgram(t, e) {\n          this.cache = this.cache || {};\n          var i = t + (e ? e.cacheKey : \"\") + (this._showOverdrawInspector ? \"/overdraw\" : \"\") + (this.style.terrain ? \"/terrain\" : \"\");\n          return this.cache[i] || (this.cache[i] = new ne(this.context, t, oe[t], e, Re[t], this._showOverdrawInspector, this.style.terrain)), this.cache[i];\n        }\n      }, {\n        key: \"setCustomLayerDefaults\",\n        value: function setCustomLayerDefaults() {\n          this.context.unbindVAO(), this.context.cullFace.setDefault(), this.context.activeTexture.setDefault(), this.context.pixelStoreUnpack.setDefault(), this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(), this.context.pixelStoreUnpackFlipY.setDefault();\n        }\n      }, {\n        key: \"setBaseState\",\n        value: function setBaseState() {\n          var t = this.context.gl;\n          this.context.cullFace.set(!1), this.context.viewport.set([0, 0, this.width, this.height]), this.context.blendEquation.set(t.FUNC_ADD);\n        }\n      }, {\n        key: \"initDebugOverlayCanvas\",\n        value: function initDebugOverlayCanvas() {\n          null == this.debugOverlayCanvas && (this.debugOverlayCanvas = document.createElement(\"canvas\"), this.debugOverlayCanvas.width = 512, this.debugOverlayCanvas.height = 512, this.debugOverlayTexture = new l(this.context, this.debugOverlayCanvas, this.context.gl.RGBA));\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.emptyTexture.destroy(), this.debugOverlayTexture && this.debugOverlayTexture.destroy();\n        }\n      }]);\n      return Ji;\n    }();\n    var Qi = /*#__PURE__*/function () {\n      function Qi(t, e) {\n        _classCallCheck(this, Qi);\n        this.points = t, this.planes = e;\n      }\n      _createClass(Qi, null, [{\n        key: \"fromInvProjectionMatrix\",\n        value: function fromInvProjectionMatrix(e, i, o) {\n          var a = Math.pow(2, o),\n            r = [[-1, 1, -1, 1], [1, 1, -1, 1], [1, -1, -1, 1], [-1, -1, -1, 1], [-1, 1, 1, 1], [1, 1, 1, 1], [1, -1, 1, 1], [-1, -1, 1, 1]].map(function (o) {\n              var r = 1 / (o = t.transformMat4([], o, e))[3] / i * a;\n              return t.mul$1(o, o, [r, r, 1 / o[3], r]);\n            }),\n            s = [[0, 1, 2], [6, 5, 4], [0, 3, 7], [2, 1, 5], [3, 2, 6], [0, 4, 5]].map(function (e) {\n              var i = t.sub([], r[e[0]], r[e[1]]),\n                o = t.sub([], r[e[2]], r[e[1]]),\n                a = t.normalize([], t.cross([], i, o)),\n                s = -t.dot(a, r[e[1]]);\n              return a.concat(s);\n            });\n          return new Qi(r, s);\n        }\n      }]);\n      return Qi;\n    }();\n    var to = /*#__PURE__*/function () {\n      function to(e, i) {\n        _classCallCheck(this, to);\n        this.min = e, this.max = i, this.center = t.scale$1([], t.add([], this.min, this.max), .5);\n      }\n      _createClass(to, [{\n        key: \"quadrant\",\n        value: function quadrant(e) {\n          var i = [e % 2 == 0, e < 2],\n            o = t.clone$2(this.min),\n            a = t.clone$2(this.max);\n          for (var _t361 = 0; _t361 < i.length; _t361++) o[_t361] = i[_t361] ? this.min[_t361] : this.center[_t361], a[_t361] = i[_t361] ? this.center[_t361] : this.max[_t361];\n          return a[2] = this.max[2], new to(o, a);\n        }\n      }, {\n        key: \"distanceX\",\n        value: function distanceX(t) {\n          return Math.max(Math.min(this.max[0], t[0]), this.min[0]) - t[0];\n        }\n      }, {\n        key: \"distanceY\",\n        value: function distanceY(t) {\n          return Math.max(Math.min(this.max[1], t[1]), this.min[1]) - t[1];\n        }\n      }, {\n        key: \"intersects\",\n        value: function intersects(e) {\n          var i = [[this.min[0], this.min[1], this.min[2], 1], [this.max[0], this.min[1], this.min[2], 1], [this.max[0], this.max[1], this.min[2], 1], [this.min[0], this.max[1], this.min[2], 1], [this.min[0], this.min[1], this.max[2], 1], [this.max[0], this.min[1], this.max[2], 1], [this.max[0], this.max[1], this.max[2], 1], [this.min[0], this.max[1], this.max[2], 1]];\n          var o = !0;\n          for (var _a136 = 0; _a136 < e.planes.length; _a136++) {\n            var _r195 = e.planes[_a136];\n            var _s107 = 0;\n            for (var _e299 = 0; _e299 < i.length; _e299++) t.dot$1(_r195, i[_e299]) >= 0 && _s107++;\n            if (0 === _s107) return 0;\n            _s107 !== i.length && (o = !1);\n          }\n          if (o) return 2;\n          for (var _t362 = 0; _t362 < 3; _t362++) {\n            var _i247 = Number.MAX_VALUE,\n              _o124 = -Number.MAX_VALUE;\n            for (var _a137 = 0; _a137 < e.points.length; _a137++) {\n              var _r196 = e.points[_a137][_t362] - this.min[_t362];\n              _i247 = Math.min(_i247, _r196), _o124 = Math.max(_o124, _r196);\n            }\n            if (_o124 < 0 || _i247 > this.max[_t362] - this.min[_t362]) return 0;\n          }\n          return 1;\n        }\n      }]);\n      return to;\n    }();\n    var eo = /*#__PURE__*/function () {\n      function eo() {\n        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n        _classCallCheck(this, eo);\n        if (isNaN(t) || t < 0 || isNaN(e) || e < 0 || isNaN(i) || i < 0 || isNaN(o) || o < 0) throw new Error(\"Invalid value for edge-insets, top, bottom, left and right must all be numbers\");\n        this.top = t, this.bottom = e, this.left = i, this.right = o;\n      }\n      _createClass(eo, [{\n        key: \"interpolate\",\n        value: function interpolate(e, i, o) {\n          return null != i.top && null != e.top && (this.top = t.number(e.top, i.top, o)), null != i.bottom && null != e.bottom && (this.bottom = t.number(e.bottom, i.bottom, o)), null != i.left && null != e.left && (this.left = t.number(e.left, i.left, o)), null != i.right && null != e.right && (this.right = t.number(e.right, i.right, o)), this;\n        }\n      }, {\n        key: \"getCenter\",\n        value: function getCenter(e, i) {\n          var o = t.clamp((this.left + e - this.right) / 2, 0, e),\n            a = t.clamp((this.top + i - this.bottom) / 2, 0, i);\n          return new t.pointGeometry(o, a);\n        }\n      }, {\n        key: \"equals\",\n        value: function equals(t) {\n          return this.top === t.top && this.bottom === t.bottom && this.left === t.left && this.right === t.right;\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new eo(this.top, this.bottom, this.left, this.right);\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          return {\n            top: this.top,\n            bottom: this.bottom,\n            left: this.left,\n            right: this.right\n          };\n        }\n      }]);\n      return eo;\n    }();\n    var io = /*#__PURE__*/function () {\n      function io(e, i, o, a, r) {\n        _classCallCheck(this, io);\n        this.tileSize = 512, this.maxValidLatitude = 85.051129, this.freezeElevation = !1, this._renderWorldCopies = void 0 === r || !!r, this._minZoom = e || 0, this._maxZoom = i || 22, this._minPitch = null == o ? 0 : o, this._maxPitch = null == a ? 60 : a, this.setMaxBounds(), this.width = 0, this.height = 0, this._center = new t.LngLat(0, 0), this._elevation = 0, this.zoom = 0, this.angle = 0, this._fov = .6435011087932844, this._pitch = 0, this._unmodified = !0, this._edgeInsets = new eo(), this._posMatrixCache = {}, this._alignedPosMatrixCache = {};\n      }\n      _createClass(io, [{\n        key: \"clone\",\n        value: function clone() {\n          var t = new io(this._minZoom, this._maxZoom, this._minPitch, this.maxPitch, this._renderWorldCopies);\n          return t.tileSize = this.tileSize, t.latRange = this.latRange, t.width = this.width, t.height = this.height, t._center = this._center, t._elevation = this._elevation, t.zoom = this.zoom, t.angle = this.angle, t._fov = this._fov, t._pitch = this._pitch, t._unmodified = this._unmodified, t._edgeInsets = this._edgeInsets.clone(), t._calcMatrices(), t;\n        }\n      }, {\n        key: \"minZoom\",\n        get: function get() {\n          return this._minZoom;\n        },\n        set: function set(t) {\n          this._minZoom !== t && (this._minZoom = t, this.zoom = Math.max(this.zoom, t));\n        }\n      }, {\n        key: \"maxZoom\",\n        get: function get() {\n          return this._maxZoom;\n        },\n        set: function set(t) {\n          this._maxZoom !== t && (this._maxZoom = t, this.zoom = Math.min(this.zoom, t));\n        }\n      }, {\n        key: \"minPitch\",\n        get: function get() {\n          return this._minPitch;\n        },\n        set: function set(t) {\n          this._minPitch !== t && (this._minPitch = t, this.pitch = Math.max(this.pitch, t));\n        }\n      }, {\n        key: \"maxPitch\",\n        get: function get() {\n          return this._maxPitch;\n        },\n        set: function set(t) {\n          this._maxPitch !== t && (this._maxPitch = t, this.pitch = Math.min(this.pitch, t));\n        }\n      }, {\n        key: \"renderWorldCopies\",\n        get: function get() {\n          return this._renderWorldCopies;\n        },\n        set: function set(t) {\n          void 0 === t ? t = !0 : null === t && (t = !1), this._renderWorldCopies = t;\n        }\n      }, {\n        key: \"worldSize\",\n        get: function get() {\n          return this.tileSize * this.scale;\n        }\n      }, {\n        key: \"centerOffset\",\n        get: function get() {\n          return this.centerPoint._sub(this.size._div(2));\n        }\n      }, {\n        key: \"size\",\n        get: function get() {\n          return new t.pointGeometry(this.width, this.height);\n        }\n      }, {\n        key: \"bearing\",\n        get: function get() {\n          return -this.angle / Math.PI * 180;\n        },\n        set: function set(e) {\n          var i = -t.wrap(e, -180, 180) * Math.PI / 180;\n          var o;\n          this.angle !== i && (this._unmodified = !1, this.angle = i, this._calcMatrices(), this.rotationMatrix = (o = new t.ARRAY_TYPE(4), t.ARRAY_TYPE != Float32Array && (o[1] = 0, o[2] = 0), o[0] = 1, o[3] = 1, o), function (t, e, i) {\n            var o = e[0],\n              a = e[1],\n              r = e[2],\n              s = e[3],\n              n = Math.sin(i),\n              l = Math.cos(i);\n            t[0] = o * l + r * n, t[1] = a * l + s * n, t[2] = o * -n + r * l, t[3] = a * -n + s * l;\n          }(this.rotationMatrix, this.rotationMatrix, this.angle));\n        }\n      }, {\n        key: \"pitch\",\n        get: function get() {\n          return this._pitch / Math.PI * 180;\n        },\n        set: function set(e) {\n          var i = t.clamp(e, this.minPitch, this.maxPitch) / 180 * Math.PI;\n          this._pitch !== i && (this._unmodified = !1, this._pitch = i, this._calcMatrices());\n        }\n      }, {\n        key: \"fov\",\n        get: function get() {\n          return this._fov / Math.PI * 180;\n        },\n        set: function set(t) {\n          t = Math.max(.01, Math.min(60, t)), this._fov !== t && (this._unmodified = !1, this._fov = t / 180 * Math.PI, this._calcMatrices());\n        }\n      }, {\n        key: \"zoom\",\n        get: function get() {\n          return this._zoom;\n        },\n        set: function set(t) {\n          var e = Math.min(Math.max(t, this.minZoom), this.maxZoom);\n          this._zoom !== e && (this._unmodified = !1, this._zoom = e, this.scale = this.zoomScale(e), this.tileZoom = Math.floor(e), this.zoomFraction = e - this.tileZoom, this._constrain(), this._calcMatrices());\n        }\n      }, {\n        key: \"center\",\n        get: function get() {\n          return this._center;\n        },\n        set: function set(t) {\n          t.lat === this._center.lat && t.lng === this._center.lng || (this._unmodified = !1, this._center = t, this._constrain(), this._calcMatrices());\n        }\n      }, {\n        key: \"elevation\",\n        get: function get() {\n          return this._elevation;\n        },\n        set: function set(t) {\n          t !== this._elevation && (this._elevation = t, this._constrain(), this._calcMatrices());\n        }\n      }, {\n        key: \"padding\",\n        get: function get() {\n          return this._edgeInsets.toJSON();\n        },\n        set: function set(t) {\n          this._edgeInsets.equals(t) || (this._unmodified = !1, this._edgeInsets.interpolate(this._edgeInsets, t, 1), this._calcMatrices());\n        }\n      }, {\n        key: \"centerPoint\",\n        get: function get() {\n          return this._edgeInsets.getCenter(this.width, this.height);\n        }\n      }, {\n        key: \"isPaddingEqual\",\n        value: function isPaddingEqual(t) {\n          return this._edgeInsets.equals(t);\n        }\n      }, {\n        key: \"interpolatePadding\",\n        value: function interpolatePadding(t, e, i) {\n          this._unmodified = !1, this._edgeInsets.interpolate(t, e, i), this._constrain(), this._calcMatrices();\n        }\n      }, {\n        key: \"coveringZoomLevel\",\n        value: function coveringZoomLevel(t) {\n          var e = (t.roundZoom ? Math.round : Math.floor)(this.zoom + this.scaleZoom(this.tileSize / t.tileSize));\n          return Math.max(0, e);\n        }\n      }, {\n        key: \"getVisibleUnwrappedCoordinates\",\n        value: function getVisibleUnwrappedCoordinates(e) {\n          var i = [new t.UnwrappedTileID(0, e)];\n          if (this._renderWorldCopies) {\n            var _o125 = this.pointCoordinate(new t.pointGeometry(0, 0)),\n              _a138 = this.pointCoordinate(new t.pointGeometry(this.width, 0)),\n              _r197 = this.pointCoordinate(new t.pointGeometry(this.width, this.height)),\n              _s108 = this.pointCoordinate(new t.pointGeometry(0, this.height)),\n              _n139 = Math.floor(Math.min(_o125.x, _a138.x, _r197.x, _s108.x)),\n              _l59 = Math.floor(Math.max(_o125.x, _a138.x, _r197.x, _s108.x)),\n              _c39 = 1;\n            for (var _o126 = _n139 - _c39; _o126 <= _l59 + _c39; _o126++) 0 !== _o126 && i.push(new t.UnwrappedTileID(_o126, e));\n          }\n          return i;\n        }\n      }, {\n        key: \"coveringTiles\",\n        value: function coveringTiles(e) {\n          var i, o;\n          var a = this.coveringZoomLevel(e);\n          var r = a;\n          if (void 0 !== e.minzoom && a < e.minzoom) return [];\n          void 0 !== e.maxzoom && a > e.maxzoom && (a = e.maxzoom);\n          var s = this.pointCoordinate(this.getCameraPoint()),\n            n = t.MercatorCoordinate.fromLngLat(this.center),\n            l = Math.pow(2, a),\n            c = [l * s.x, l * s.y, 0],\n            h = [l * n.x, l * n.y, 0],\n            u = Qi.fromInvProjectionMatrix(this.invProjMatrix, this.worldSize, a);\n          var d = e.minzoom || 0;\n          !e.terrain && this.pitch <= 60 && this._edgeInsets.top < .1 && (d = a);\n          var m = e.terrain ? 2 / Math.min(this.tileSize, e.tileSize) * this.tileSize : 3,\n            _ = function _(t) {\n              return {\n                aabb: new to([t * l, 0, 0], [(t + 1) * l, l, 0]),\n                zoom: 0,\n                x: 0,\n                y: 0,\n                wrap: t,\n                fullyVisible: !1\n              };\n            },\n            p = [],\n            f = [],\n            g = a,\n            x = e.reparseOverscaled ? r : a;\n          if (this._renderWorldCopies) for (var _t363 = 1; _t363 <= 3; _t363++) p.push(_(-_t363)), p.push(_(_t363));\n          for (p.push(_(0)); p.length > 0;) {\n            var _a139 = p.pop(),\n              _r198 = _a139.x,\n              _s109 = _a139.y;\n            var _n140 = _a139.fullyVisible;\n            if (!_n140) {\n              var _t364 = _a139.aabb.intersects(u);\n              if (0 === _t364) continue;\n              _n140 = 2 === _t364;\n            }\n            var _l60 = e.terrain ? c : h,\n              _17 = _a139.aabb.distanceX(_l60),\n              _v14 = _a139.aabb.distanceY(_l60),\n              _y14 = Math.max(Math.abs(_17), Math.abs(_v14)),\n              _b16 = m + (1 << g - _a139.zoom) - 2;\n            if (_a139.zoom === g || _y14 > _b16 && _a139.zoom >= d) {\n              var _e300 = g - _a139.zoom,\n                _i248 = c[0] - .5 - (_r198 << _e300),\n                _o127 = c[1] - .5 - (_s109 << _e300);\n              f.push({\n                tileID: new t.OverscaledTileID(_a139.zoom === g ? x : _a139.zoom, _a139.wrap, _a139.zoom, _r198, _s109),\n                distanceSq: t.sqrLen([h[0] - .5 - _r198, h[1] - .5 - _s109]),\n                tileDistanceToCamera: Math.sqrt(_i248 * _i248 + _o127 * _o127)\n              });\n            } else for (var _l61 = 0; _l61 < 4; _l61++) {\n              var _c40 = (_r198 << 1) + _l61 % 2,\n                _h29 = (_s109 << 1) + (_l61 >> 1),\n                _u39 = _a139.zoom + 1;\n              var _d22 = _a139.aabb.quadrant(_l61);\n              if (e.terrain) {\n                var _r199 = new t.OverscaledTileID(_u39, _a139.wrap, _u39, _c40, _h29),\n                  _s110 = e.terrain.getMinMaxElevation(_r199),\n                  _n141 = null !== (i = _s110.minElevation) && void 0 !== i ? i : this.elevation,\n                  _l62 = null !== (o = _s110.maxElevation) && void 0 !== o ? o : this.elevation;\n                _d22 = new to([_d22.min[0], _d22.min[1], _n141], [_d22.max[0], _d22.max[1], _l62]);\n              }\n              p.push({\n                aabb: _d22,\n                zoom: _u39,\n                x: _c40,\n                y: _h29,\n                wrap: _a139.wrap,\n                fullyVisible: _n140\n              });\n            }\n          }\n          return f.sort(function (t, e) {\n            return t.distanceSq - e.distanceSq;\n          }).map(function (t) {\n            return t.tileID;\n          });\n        }\n      }, {\n        key: \"resize\",\n        value: function resize(t, e) {\n          this.width = t, this.height = e, this.pixelsToGLUnits = [2 / t, -2 / e], this._constrain(), this._calcMatrices();\n        }\n      }, {\n        key: \"unmodified\",\n        get: function get() {\n          return this._unmodified;\n        }\n      }, {\n        key: \"zoomScale\",\n        value: function zoomScale(t) {\n          return Math.pow(2, t);\n        }\n      }, {\n        key: \"scaleZoom\",\n        value: function scaleZoom(t) {\n          return Math.log(t) / Math.LN2;\n        }\n      }, {\n        key: \"project\",\n        value: function project(e) {\n          var i = t.clamp(e.lat, -this.maxValidLatitude, this.maxValidLatitude);\n          return new t.pointGeometry(t.mercatorXfromLng(e.lng) * this.worldSize, t.mercatorYfromLat(i) * this.worldSize);\n        }\n      }, {\n        key: \"unproject\",\n        value: function unproject(e) {\n          return new t.MercatorCoordinate(e.x / this.worldSize, e.y / this.worldSize).toLngLat();\n        }\n      }, {\n        key: \"point\",\n        get: function get() {\n          return this.project(this.center);\n        }\n      }, {\n        key: \"updateElevation\",\n        value: function updateElevation(t) {\n          this.freezeElevation || (this.elevation = t ? this.getElevation(this._center, t) : 0);\n        }\n      }, {\n        key: \"getElevation\",\n        value: function getElevation(e, i) {\n          var o = t.MercatorCoordinate.fromLngLat(e),\n            a = (1 << this.tileZoom) * t.EXTENT,\n            r = o.x * a,\n            s = o.y * a,\n            n = Math.floor(r / t.EXTENT),\n            l = Math.floor(s / t.EXTENT),\n            c = new t.OverscaledTileID(this.tileZoom, 0, this.tileZoom, n, l);\n          return i.getElevation(c, r % t.EXTENT, s % t.EXTENT, t.EXTENT);\n        }\n      }, {\n        key: \"getCameraPosition\",\n        value: function getCameraPosition() {\n          return {\n            lngLat: this.pointLocation(this.getCameraPoint()),\n            altitude: Math.cos(this._pitch) * this.cameraToCenterDistance / this._pixelPerMeter + this.elevation\n          };\n        }\n      }, {\n        key: \"recalculateZoom\",\n        value: function recalculateZoom(e) {\n          var i = this.pointLocation(this.centerPoint, e),\n            o = this.getElevation(i, e);\n          if (!(this.elevation - o)) return;\n          var a = this.getCameraPosition(),\n            r = t.MercatorCoordinate.fromLngLat(a.lngLat, a.altitude),\n            s = t.MercatorCoordinate.fromLngLat(i, o),\n            n = r.x - s.x,\n            l = r.y - s.y,\n            c = r.z - s.z,\n            h = Math.sqrt(n * n + l * l + c * c),\n            u = this.scaleZoom(this.cameraToCenterDistance / h / this.tileSize);\n          this._elevation = o, this._center = i, this.zoom = u;\n        }\n      }, {\n        key: \"setLocationAtPoint\",\n        value: function setLocationAtPoint(e, i) {\n          var o = this.pointCoordinate(i),\n            a = this.pointCoordinate(this.centerPoint),\n            r = this.locationCoordinate(e),\n            s = new t.MercatorCoordinate(r.x - (o.x - a.x), r.y - (o.y - a.y));\n          this.center = this.coordinateLocation(s), this._renderWorldCopies && (this.center = this.center.wrap());\n        }\n      }, {\n        key: \"locationPoint\",\n        value: function locationPoint(t, e) {\n          return e ? this.coordinatePoint(this.locationCoordinate(t), this.getElevation(t, e), this.pixelMatrix3D) : this.coordinatePoint(this.locationCoordinate(t));\n        }\n      }, {\n        key: \"pointLocation\",\n        value: function pointLocation(t, e) {\n          return this.coordinateLocation(this.pointCoordinate(t, e));\n        }\n      }, {\n        key: \"locationCoordinate\",\n        value: function locationCoordinate(e) {\n          return t.MercatorCoordinate.fromLngLat(e);\n        }\n      }, {\n        key: \"coordinateLocation\",\n        value: function coordinateLocation(t) {\n          return t && t.toLngLat();\n        }\n      }, {\n        key: \"pointCoordinate\",\n        value: function pointCoordinate(e, i) {\n          if (i) {\n            var _t365 = i.pointCoordinate(e);\n            if (null != _t365) return _t365;\n          }\n          var o = [e.x, e.y, 0, 1],\n            a = [e.x, e.y, 1, 1];\n          t.transformMat4(o, o, this.pixelMatrixInverse), t.transformMat4(a, a, this.pixelMatrixInverse);\n          var r = o[3],\n            s = a[3],\n            n = o[1] / r,\n            l = a[1] / s,\n            c = o[2] / r,\n            h = a[2] / s,\n            u = c === h ? 0 : (0 - c) / (h - c);\n          return new t.MercatorCoordinate(t.number(o[0] / r, a[0] / s, u) / this.worldSize, t.number(n, l, u) / this.worldSize);\n        }\n      }, {\n        key: \"coordinatePoint\",\n        value: function coordinatePoint(e) {\n          var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n          var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.pixelMatrix;\n          var a = [e.x * this.worldSize, e.y * this.worldSize, i, 1];\n          return t.transformMat4(a, a, o), new t.pointGeometry(a[0] / a[3], a[1] / a[3]);\n        }\n      }, {\n        key: \"getBounds\",\n        value: function getBounds() {\n          var e = Math.max(0, this.height / 2 - this.getHorizon());\n          return new t.LngLatBounds().extend(this.pointLocation(new t.pointGeometry(0, e))).extend(this.pointLocation(new t.pointGeometry(this.width, e))).extend(this.pointLocation(new t.pointGeometry(this.width, this.height))).extend(this.pointLocation(new t.pointGeometry(0, this.height)));\n        }\n      }, {\n        key: \"getMaxBounds\",\n        value: function getMaxBounds() {\n          return this.latRange && 2 === this.latRange.length && this.lngRange && 2 === this.lngRange.length ? new t.LngLatBounds([this.lngRange[0], this.latRange[0]], [this.lngRange[1], this.latRange[1]]) : null;\n        }\n      }, {\n        key: \"getHorizon\",\n        value: function getHorizon() {\n          return Math.tan(Math.PI / 2 - this._pitch) * this.cameraToCenterDistance * .85;\n        }\n      }, {\n        key: \"setMaxBounds\",\n        value: function setMaxBounds(t) {\n          t ? (this.lngRange = [t.getWest(), t.getEast()], this.latRange = [t.getSouth(), t.getNorth()], this._constrain()) : (this.lngRange = null, this.latRange = [-this.maxValidLatitude, this.maxValidLatitude]);\n        }\n      }, {\n        key: \"calculatePosMatrix\",\n        value: function calculatePosMatrix(e) {\n          var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n          var o = e.key,\n            a = i ? this._alignedPosMatrixCache : this._posMatrixCache;\n          if (a[o]) return a[o];\n          var r = e.canonical,\n            s = this.worldSize / this.zoomScale(r.z),\n            n = r.x + Math.pow(2, r.z) * e.wrap,\n            l = t.identity(new Float64Array(16));\n          return t.translate(l, l, [n * s, r.y * s, 0]), t.scale(l, l, [s / t.EXTENT, s / t.EXTENT, 1]), t.multiply(l, i ? this.alignedProjMatrix : this.projMatrix, l), a[o] = new Float32Array(l), a[o];\n        }\n      }, {\n        key: \"customLayerMatrix\",\n        value: function customLayerMatrix() {\n          return this.mercatorMatrix.slice();\n        }\n      }, {\n        key: \"_constrain\",\n        value: function _constrain() {\n          if (!this.center || !this.width || !this.height || this._constraining) return;\n          this._constraining = !0;\n          var e,\n            i,\n            o,\n            a,\n            r = -90,\n            s = 90,\n            n = -180,\n            l = 180;\n          var c = this.size,\n            h = this._unmodified;\n          if (this.latRange) {\n            var _i249 = this.latRange;\n            r = t.mercatorYfromLat(_i249[1]) * this.worldSize, s = t.mercatorYfromLat(_i249[0]) * this.worldSize, e = s - r < c.y ? c.y / (s - r) : 0;\n          }\n          if (this.lngRange) {\n            var _e301 = this.lngRange;\n            n = t.wrap(t.mercatorXfromLng(_e301[0]) * this.worldSize, 0, this.worldSize), l = t.wrap(t.mercatorXfromLng(_e301[1]) * this.worldSize, 0, this.worldSize), l < n && (l += this.worldSize), i = l - n < c.x ? c.x / (l - n) : 0;\n          }\n          var u = this.point,\n            d = Math.max(i || 0, e || 0);\n          if (d) return this.center = this.unproject(new t.pointGeometry(i ? (l + n) / 2 : u.x, e ? (s + r) / 2 : u.y)), this.zoom += this.scaleZoom(d), this._unmodified = h, void (this._constraining = !1);\n          if (this.latRange) {\n            var _t366 = u.y,\n              _e302 = c.y / 2;\n            _t366 - _e302 < r && (a = r + _e302), _t366 + _e302 > s && (a = s - _e302);\n          }\n          if (this.lngRange) {\n            var _e303 = (n + l) / 2,\n              _i250 = t.wrap(u.x, _e303 - this.worldSize / 2, _e303 + this.worldSize / 2),\n              _a140 = c.x / 2;\n            _i250 - _a140 < n && (o = n + _a140), _i250 + _a140 > l && (o = l - _a140);\n          }\n          void 0 === o && void 0 === a || (this.center = this.unproject(new t.pointGeometry(void 0 !== o ? o : u.x, void 0 !== a ? a : u.y)).wrap()), this._unmodified = h, this._constraining = !1;\n        }\n      }, {\n        key: \"_calcMatrices\",\n        value: function _calcMatrices() {\n          if (!this.height) return;\n          var e = this.centerOffset,\n            i = this.point.x,\n            o = this.point.y;\n          this.cameraToCenterDistance = .5 / Math.tan(this._fov / 2) * this.height, this._pixelPerMeter = t.mercatorZfromAltitude(1, this.center.lat) * this.worldSize;\n          var a = t.identity(new Float64Array(16));\n          t.scale(a, a, [this.width / 2, -this.height / 2, 1]), t.translate(a, a, [1, -1, 0]), this.labelPlaneMatrix = a, a = t.identity(new Float64Array(16)), t.scale(a, a, [1, -1, 1]), t.translate(a, a, [-1, -1, 0]), t.scale(a, a, [2 / this.width, 2 / this.height, 1]), this.glCoordMatrix = a, this.cameraToSeaLevelDistance = this.cameraToCenterDistance + this._elevation * this._pixelPerMeter / Math.cos(this._pitch);\n          var r = Math.PI / 2 + this._pitch,\n            s = this._fov * (.5 + e.y / this.height),\n            n = Math.sin(s) * this.cameraToSeaLevelDistance / Math.sin(t.clamp(Math.PI - r - s, .01, Math.PI - .01)),\n            l = this.getHorizon(),\n            c = 2 * Math.atan(l / this.cameraToCenterDistance) * (.5 + e.y / (2 * l)),\n            h = Math.sin(c) * this.cameraToSeaLevelDistance / Math.sin(t.clamp(Math.PI - r - c, .01, Math.PI - .01)),\n            u = Math.cos(Math.PI / 2 - this._pitch) * n + this.cameraToSeaLevelDistance,\n            d = Math.cos(Math.PI / 2 - this._pitch) * h + this.cameraToSeaLevelDistance,\n            m = 1.01 * Math.min(u, d),\n            _ = this.height / 50;\n          a = new Float64Array(16), t.perspective(a, this._fov, this.width / this.height, _, m), a[8] = 2 * -e.x / this.width, a[9] = 2 * e.y / this.height, t.scale(a, a, [1, -1, 1]), t.translate(a, a, [0, 0, -this.cameraToCenterDistance]), t.rotateX(a, a, this._pitch), t.rotateZ(a, a, this.angle), t.translate(a, a, [-i, -o, 0]), this.mercatorMatrix = t.scale([], a, [this.worldSize, this.worldSize, this.worldSize]), t.scale(a, a, [1, 1, this._pixelPerMeter]), this.pixelMatrix = t.multiply(new Float64Array(16), this.labelPlaneMatrix, a), t.translate(a, a, [0, 0, -this.elevation]), this.projMatrix = a, this.invProjMatrix = t.invert([], a), this.pixelMatrix3D = t.multiply(new Float64Array(16), this.labelPlaneMatrix, a);\n          var p = this.width % 2 / 2,\n            f = this.height % 2 / 2,\n            g = Math.cos(this.angle),\n            x = Math.sin(this.angle),\n            v = i - Math.round(i) + g * p + x * f,\n            y = o - Math.round(o) + g * f + x * p,\n            b = new Float64Array(a);\n          if (t.translate(b, b, [v > .5 ? v - 1 : v, y > .5 ? y - 1 : y, 0]), this.alignedProjMatrix = b, a = t.invert(new Float64Array(16), this.pixelMatrix), !a) throw new Error(\"failed to invert matrix\");\n          this.pixelMatrixInverse = a, this._posMatrixCache = {}, this._alignedPosMatrixCache = {};\n        }\n      }, {\n        key: \"maxPitchScaleFactor\",\n        value: function maxPitchScaleFactor() {\n          if (!this.pixelMatrixInverse) return 1;\n          var e = this.pointCoordinate(new t.pointGeometry(0, 0)),\n            i = [e.x * this.worldSize, e.y * this.worldSize, 0, 1];\n          return t.transformMat4(i, i, this.pixelMatrix)[3] / this.cameraToCenterDistance;\n        }\n      }, {\n        key: \"getCameraPoint\",\n        value: function getCameraPoint() {\n          var e = Math.tan(this._pitch) * (this.cameraToCenterDistance || 1);\n          return this.centerPoint.add(new t.pointGeometry(0, e));\n        }\n      }, {\n        key: \"getCameraQueryGeometry\",\n        value: function getCameraQueryGeometry(e) {\n          var i = this.getCameraPoint();\n          if (1 === e.length) return [e[0], i];\n          {\n            var _o128 = i.x,\n              _a141 = i.y,\n              _r200 = i.x,\n              _s111 = i.y;\n            var _iterator214 = _createForOfIteratorHelper(e),\n              _step214;\n            try {\n              for (_iterator214.s(); !(_step214 = _iterator214.n()).done;) {\n                var _t367 = _step214.value;\n                _o128 = Math.min(_o128, _t367.x), _a141 = Math.min(_a141, _t367.y), _r200 = Math.max(_r200, _t367.x), _s111 = Math.max(_s111, _t367.y);\n              }\n            } catch (err) {\n              _iterator214.e(err);\n            } finally {\n              _iterator214.f();\n            }\n            return [new t.pointGeometry(_o128, _a141), new t.pointGeometry(_r200, _a141), new t.pointGeometry(_r200, _s111), new t.pointGeometry(_o128, _s111), new t.pointGeometry(_o128, _a141)];\n          }\n        }\n      }]);\n      return io;\n    }();\n    var oo = /*#__PURE__*/function () {\n      function oo(e) {\n        _classCallCheck(this, oo);\n        this._hashName = e && encodeURIComponent(e), t.bindAll([\"_getCurrentHash\", \"_onHashChange\", \"_updateHash\"], this), this._updateHash = function (t, e) {\n          var i = !1,\n            o = null;\n          var a = function a() {\n            o = null, i && (t(), o = setTimeout(a, 300), i = !1);\n          };\n          return function () {\n            return i = !0, o || a(), o;\n          };\n        }(this._updateHashUnthrottled.bind(this));\n      }\n      _createClass(oo, [{\n        key: \"addTo\",\n        value: function addTo(t) {\n          return this._map = t, addEventListener(\"hashchange\", this._onHashChange, !1), this._map.on(\"moveend\", this._updateHash), this;\n        }\n      }, {\n        key: \"remove\",\n        value: function remove() {\n          return removeEventListener(\"hashchange\", this._onHashChange, !1), this._map.off(\"moveend\", this._updateHash), clearTimeout(this._updateHash()), delete this._map, this;\n        }\n      }, {\n        key: \"getHashString\",\n        value: function getHashString(t) {\n          var e = this._map.getCenter(),\n            i = Math.round(100 * this._map.getZoom()) / 100,\n            o = Math.ceil((i * Math.LN2 + Math.log(512 / 360 / .5)) / Math.LN10),\n            a = Math.pow(10, o),\n            r = Math.round(e.lng * a) / a,\n            s = Math.round(e.lat * a) / a,\n            n = this._map.getBearing(),\n            l = this._map.getPitch();\n          var c = \"\";\n          if (c += t ? \"/\".concat(r, \"/\").concat(s, \"/\").concat(i) : \"\".concat(i, \"/\").concat(s, \"/\").concat(r), (n || l) && (c += \"/\" + Math.round(10 * n) / 10), l && (c += \"/\".concat(Math.round(l))), this._hashName) {\n            var _t368 = this._hashName;\n            var _e304 = !1;\n            var _i251 = window.location.hash.slice(1).split(\"&\").map(function (i) {\n              var o = i.split(\"=\")[0];\n              return o === _t368 ? (_e304 = !0, \"\".concat(o, \"=\").concat(c)) : i;\n            }).filter(function (t) {\n              return t;\n            });\n            return _e304 || _i251.push(\"\".concat(_t368, \"=\").concat(c)), \"#\".concat(_i251.join(\"&\"));\n          }\n          return \"#\".concat(c);\n        }\n      }, {\n        key: \"_getCurrentHash\",\n        value: function _getCurrentHash() {\n          var _this78 = this;\n          var t = window.location.hash.replace(\"#\", \"\");\n          if (this._hashName) {\n            var _e305;\n            return t.split(\"&\").map(function (t) {\n              return t.split(\"=\");\n            }).forEach(function (t) {\n              t[0] === _this78._hashName && (_e305 = t);\n            }), (_e305 && _e305[1] || \"\").split(\"/\");\n          }\n          return t.split(\"/\");\n        }\n      }, {\n        key: \"_onHashChange\",\n        value: function _onHashChange() {\n          var t = this._getCurrentHash();\n          if (t.length >= 3 && !t.some(function (t) {\n            return isNaN(t);\n          })) {\n            var _e306 = this._map.dragRotate.isEnabled() && this._map.touchZoomRotate.isEnabled() ? +(t[3] || 0) : this._map.getBearing();\n            return this._map.jumpTo({\n              center: [+t[2], +t[1]],\n              zoom: +t[0],\n              bearing: _e306,\n              pitch: +(t[4] || 0)\n            }), !0;\n          }\n          return !1;\n        }\n      }, {\n        key: \"_updateHashUnthrottled\",\n        value: function _updateHashUnthrottled() {\n          var t = window.location.href.replace(/(#.+)?$/, this.getHashString());\n          try {\n            window.history.replaceState(window.history.state, null, t);\n          } catch (t) {}\n        }\n      }]);\n      return oo;\n    }();\n    var ao = {\n        linearity: .3,\n        easing: t.bezier(0, 0, .3, 1)\n      },\n      ro = t.extend({\n        deceleration: 2500,\n        maxSpeed: 1400\n      }, ao),\n      so = t.extend({\n        deceleration: 20,\n        maxSpeed: 1400\n      }, ao),\n      no = t.extend({\n        deceleration: 1e3,\n        maxSpeed: 360\n      }, ao),\n      lo = t.extend({\n        deceleration: 1e3,\n        maxSpeed: 90\n      }, ao);\n    var co = /*#__PURE__*/function () {\n      function co(t) {\n        _classCallCheck(this, co);\n        this._map = t, this.clear();\n      }\n      _createClass(co, [{\n        key: \"clear\",\n        value: function clear() {\n          this._inertiaBuffer = [];\n        }\n      }, {\n        key: \"record\",\n        value: function record(e) {\n          this._drainInertiaBuffer(), this._inertiaBuffer.push({\n            time: t.exported.now(),\n            settings: e\n          });\n        }\n      }, {\n        key: \"_drainInertiaBuffer\",\n        value: function _drainInertiaBuffer() {\n          var e = this._inertiaBuffer,\n            i = t.exported.now();\n          for (; e.length > 0 && i - e[0].time > 160;) e.shift();\n        }\n      }, {\n        key: \"_onMoveEnd\",\n        value: function _onMoveEnd(e) {\n          if (this._drainInertiaBuffer(), this._inertiaBuffer.length < 2) return;\n          var i = {\n            zoom: 0,\n            bearing: 0,\n            pitch: 0,\n            pan: new t.pointGeometry(0, 0),\n            pinchAround: void 0,\n            around: void 0\n          };\n          var _iterator215 = _createForOfIteratorHelper(this._inertiaBuffer),\n            _step215;\n          try {\n            for (_iterator215.s(); !(_step215 = _iterator215.n()).done;) {\n              var _t372 = _step215.value.settings;\n              i.zoom += _t372.zoomDelta || 0, i.bearing += _t372.bearingDelta || 0, i.pitch += _t372.pitchDelta || 0, _t372.panDelta && i.pan._add(_t372.panDelta), _t372.around && (i.around = _t372.around), _t372.pinchAround && (i.pinchAround = _t372.pinchAround);\n            }\n          } catch (err) {\n            _iterator215.e(err);\n          } finally {\n            _iterator215.f();\n          }\n          var o = this._inertiaBuffer[this._inertiaBuffer.length - 1].time - this._inertiaBuffer[0].time,\n            a = {};\n          if (i.pan.mag()) {\n            var _r201 = uo(i.pan.mag(), o, t.extend({}, ro, e || {}));\n            a.offset = i.pan.mult(_r201.amount / i.pan.mag()), a.center = this._map.transform.center, ho(a, _r201);\n          }\n          if (i.zoom) {\n            var _t369 = uo(i.zoom, o, so);\n            a.zoom = this._map.transform.zoom + _t369.amount, ho(a, _t369);\n          }\n          if (i.bearing) {\n            var _e307 = uo(i.bearing, o, no);\n            a.bearing = this._map.transform.bearing + t.clamp(_e307.amount, -179, 179), ho(a, _e307);\n          }\n          if (i.pitch) {\n            var _t370 = uo(i.pitch, o, lo);\n            a.pitch = this._map.transform.pitch + _t370.amount, ho(a, _t370);\n          }\n          if (a.zoom || a.bearing) {\n            var _t371 = void 0 === i.pinchAround ? i.around : i.pinchAround;\n            a.around = _t371 ? this._map.unproject(_t371) : this._map.getCenter();\n          }\n          return this.clear(), t.extend(a, {\n            noMoveStart: !0\n          });\n        }\n      }]);\n      return co;\n    }();\n    function ho(t, e) {\n      (!t.duration || t.duration < e.duration) && (t.duration = e.duration, t.easing = e.easing);\n    }\n    function uo(e, i, o) {\n      var a = o.maxSpeed,\n        r = o.linearity,\n        s = o.deceleration,\n        n = t.clamp(e * r / (i / 1e3), -a, a),\n        l = Math.abs(n) / (s * r);\n      return {\n        easing: o.easing,\n        duration: 1e3 * l,\n        amount: n * (l / 2)\n      };\n    }\n    var mo = /*#__PURE__*/function (_t$Event) {\n      _inherits(mo, _t$Event);\n      var _super123 = _createSuper(mo);\n      function mo(e, i, o) {\n        var _this79;\n        var a = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n        _classCallCheck(this, mo);\n        var s = r.mousePos(i.getCanvasContainer(), o),\n          n = i.unproject(s);\n        _this79 = _super123.call(this, e, t.extend({\n          point: s,\n          lngLat: n,\n          originalEvent: o\n        }, a)), _this79._defaultPrevented = !1, _this79.target = i;\n        return _this79;\n      }\n      _createClass(mo, [{\n        key: \"preventDefault\",\n        value: function preventDefault() {\n          this._defaultPrevented = !0;\n        }\n      }, {\n        key: \"defaultPrevented\",\n        get: function get() {\n          return this._defaultPrevented;\n        }\n      }]);\n      return mo;\n    }(t.Event);\n    var _o = /*#__PURE__*/function (_t$Event2) {\n      _inherits(_o, _t$Event2);\n      var _super124 = _createSuper(_o);\n      function _o(e, i, o) {\n        var _this80;\n        _classCallCheck(this, _o);\n        var a = \"touchend\" === e ? o.changedTouches : o.touches,\n          s = r.touchPos(i.getCanvasContainer(), a),\n          n = s.map(function (t) {\n            return i.unproject(t);\n          }),\n          l = s.reduce(function (t, e, i, o) {\n            return t.add(e.div(o.length));\n          }, new t.pointGeometry(0, 0));\n        _this80 = _super124.call(this, e, {\n          points: s,\n          point: l,\n          lngLats: n,\n          lngLat: i.unproject(l),\n          originalEvent: o\n        }), _this80._defaultPrevented = !1;\n        return _this80;\n      }\n      _createClass(_o, [{\n        key: \"preventDefault\",\n        value: function preventDefault() {\n          this._defaultPrevented = !0;\n        }\n      }, {\n        key: \"defaultPrevented\",\n        get: function get() {\n          return this._defaultPrevented;\n        }\n      }]);\n      return _o;\n    }(t.Event);\n    var po = /*#__PURE__*/function (_t$Event3) {\n      _inherits(po, _t$Event3);\n      var _super125 = _createSuper(po);\n      function po(t, e, i) {\n        var _this81;\n        _classCallCheck(this, po);\n        _this81 = _super125.call(this, t, {\n          originalEvent: i\n        }), _this81._defaultPrevented = !1;\n        return _this81;\n      }\n      _createClass(po, [{\n        key: \"preventDefault\",\n        value: function preventDefault() {\n          this._defaultPrevented = !0;\n        }\n      }, {\n        key: \"defaultPrevented\",\n        get: function get() {\n          return this._defaultPrevented;\n        }\n      }]);\n      return po;\n    }(t.Event);\n    var fo = /*#__PURE__*/function () {\n      function fo(t, e) {\n        _classCallCheck(this, fo);\n        this._map = t, this._clickTolerance = e.clickTolerance;\n      }\n      _createClass(fo, [{\n        key: \"reset\",\n        value: function reset() {\n          delete this._mousedownPos;\n        }\n      }, {\n        key: \"wheel\",\n        value: function wheel(t) {\n          return this._firePreventable(new po(t.type, this._map, t));\n        }\n      }, {\n        key: \"mousedown\",\n        value: function mousedown(t, e) {\n          return this._mousedownPos = e, this._firePreventable(new mo(t.type, this._map, t));\n        }\n      }, {\n        key: \"mouseup\",\n        value: function mouseup(t) {\n          this._map.fire(new mo(t.type, this._map, t));\n        }\n      }, {\n        key: \"click\",\n        value: function click(t, e) {\n          this._mousedownPos && this._mousedownPos.dist(e) >= this._clickTolerance || this._map.fire(new mo(t.type, this._map, t));\n        }\n      }, {\n        key: \"dblclick\",\n        value: function dblclick(t) {\n          return this._firePreventable(new mo(t.type, this._map, t));\n        }\n      }, {\n        key: \"mouseover\",\n        value: function mouseover(t) {\n          this._map.fire(new mo(t.type, this._map, t));\n        }\n      }, {\n        key: \"mouseout\",\n        value: function mouseout(t) {\n          this._map.fire(new mo(t.type, this._map, t));\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(t) {\n          return this._firePreventable(new _o(t.type, this._map, t));\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(t) {\n          this._map.fire(new _o(t.type, this._map, t));\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(t) {\n          this._map.fire(new _o(t.type, this._map, t));\n        }\n      }, {\n        key: \"touchcancel\",\n        value: function touchcancel(t) {\n          this._map.fire(new _o(t.type, this._map, t));\n        }\n      }, {\n        key: \"_firePreventable\",\n        value: function _firePreventable(t) {\n          if (this._map.fire(t), t.defaultPrevented) return {};\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return !0;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return !1;\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {}\n      }, {\n        key: \"disable\",\n        value: function disable() {}\n      }]);\n      return fo;\n    }();\n    var go = /*#__PURE__*/function () {\n      function go(t) {\n        _classCallCheck(this, go);\n        this._map = t;\n      }\n      _createClass(go, [{\n        key: \"reset\",\n        value: function reset() {\n          this._delayContextMenu = !1, this._ignoreContextMenu = !0, delete this._contextMenuEvent;\n        }\n      }, {\n        key: \"mousemove\",\n        value: function mousemove(t) {\n          this._map.fire(new mo(t.type, this._map, t));\n        }\n      }, {\n        key: \"mousedown\",\n        value: function mousedown() {\n          this._delayContextMenu = !0, this._ignoreContextMenu = !1;\n        }\n      }, {\n        key: \"mouseup\",\n        value: function mouseup() {\n          this._delayContextMenu = !1, this._contextMenuEvent && (this._map.fire(new mo(\"contextmenu\", this._map, this._contextMenuEvent)), delete this._contextMenuEvent);\n        }\n      }, {\n        key: \"contextmenu\",\n        value: function contextmenu(t) {\n          this._delayContextMenu ? this._contextMenuEvent = t : this._ignoreContextMenu || this._map.fire(new mo(t.type, this._map, t)), this._map.listens(\"contextmenu\") && t.preventDefault();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return !0;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return !1;\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {}\n      }, {\n        key: \"disable\",\n        value: function disable() {}\n      }]);\n      return go;\n    }();\n    var xo = /*#__PURE__*/function () {\n      function xo(t, e) {\n        _classCallCheck(this, xo);\n        this._map = t, this._el = t.getCanvasContainer(), this._container = t.getContainer(), this._clickTolerance = e.clickTolerance || 1;\n      }\n      _createClass(xo, [{\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return !!this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return !!this._active;\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this.isEnabled() || (this._enabled = !0);\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this.isEnabled() && (this._enabled = !1);\n        }\n      }, {\n        key: \"mousedown\",\n        value: function mousedown(t, e) {\n          this.isEnabled() && t.shiftKey && 0 === t.button && (r.disableDrag(), this._startPos = this._lastPos = e, this._active = !0);\n        }\n      }, {\n        key: \"mousemoveWindow\",\n        value: function mousemoveWindow(t, e) {\n          if (!this._active) return;\n          var i = e;\n          if (this._lastPos.equals(i) || !this._box && i.dist(this._startPos) < this._clickTolerance) return;\n          var o = this._startPos;\n          this._lastPos = i, this._box || (this._box = r.create(\"div\", \"maplibregl-boxzoom mapboxgl-boxzoom\", this._container), this._container.classList.add(\"maplibregl-crosshair\", \"mapboxgl-crosshair\"), this._fireEvent(\"boxzoomstart\", t));\n          var a = Math.min(o.x, i.x),\n            s = Math.max(o.x, i.x),\n            n = Math.min(o.y, i.y),\n            l = Math.max(o.y, i.y);\n          r.setTransform(this._box, \"translate(\".concat(a, \"px,\").concat(n, \"px)\")), this._box.style.width = s - a + \"px\", this._box.style.height = l - n + \"px\";\n        }\n      }, {\n        key: \"mouseupWindow\",\n        value: function mouseupWindow(e, i) {\n          var _this82 = this;\n          if (!this._active) return;\n          if (0 !== e.button) return;\n          var o = this._startPos,\n            a = i;\n          if (this.reset(), r.suppressClick(), o.x !== a.x || o.y !== a.y) return this._map.fire(new t.Event(\"boxzoomend\", {\n            originalEvent: e\n          })), {\n            cameraAnimation: function cameraAnimation(t) {\n              return t.fitScreenCoordinates(o, a, _this82._map.getBearing(), {\n                linear: !0\n              });\n            }\n          };\n          this._fireEvent(\"boxzoomcancel\", e);\n        }\n      }, {\n        key: \"keydown\",\n        value: function keydown(t) {\n          this._active && 27 === t.keyCode && (this.reset(), this._fireEvent(\"boxzoomcancel\", t));\n        }\n      }, {\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1, this._container.classList.remove(\"maplibregl-crosshair\", \"mapboxgl-crosshair\"), this._box && (r.remove(this._box), this._box = null), r.enableDrag(), delete this._startPos, delete this._lastPos;\n        }\n      }, {\n        key: \"_fireEvent\",\n        value: function _fireEvent(e, i) {\n          return this._map.fire(new t.Event(e, {\n            originalEvent: i\n          }));\n        }\n      }]);\n      return xo;\n    }();\n    function vo(t, e) {\n      if (t.length !== e.length) throw new Error(\"The number of touches and points are not equal - touches \".concat(t.length, \", points \").concat(e.length));\n      var i = {};\n      for (var _o129 = 0; _o129 < t.length; _o129++) i[t[_o129].identifier] = e[_o129];\n      return i;\n    }\n    var yo = /*#__PURE__*/function () {\n      function yo(t) {\n        _classCallCheck(this, yo);\n        this.reset(), this.numTouches = t.numTouches;\n      }\n      _createClass(yo, [{\n        key: \"reset\",\n        value: function reset() {\n          delete this.centroid, delete this.startTime, delete this.touches, this.aborted = !1;\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(e, i, o) {\n          (this.centroid || o.length > this.numTouches) && (this.aborted = !0), this.aborted || (void 0 === this.startTime && (this.startTime = e.timeStamp), o.length === this.numTouches && (this.centroid = function (e) {\n            var i = new t.pointGeometry(0, 0);\n            var _iterator216 = _createForOfIteratorHelper(e),\n              _step216;\n            try {\n              for (_iterator216.s(); !(_step216 = _iterator216.n()).done;) {\n                var _t373 = _step216.value;\n                i._add(_t373);\n              }\n            } catch (err) {\n              _iterator216.e(err);\n            } finally {\n              _iterator216.f();\n            }\n            return i.div(e.length);\n          }(i), this.touches = vo(o, i)));\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(t, e, i) {\n          if (this.aborted || !this.centroid) return;\n          var o = vo(i, e);\n          for (var _t374 in this.touches) {\n            var _e308 = this.touches[_t374],\n              _i252 = o[_t374];\n            (!_i252 || _i252.dist(_e308) > 30) && (this.aborted = !0);\n          }\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(t, e, i) {\n          if ((!this.centroid || t.timeStamp - this.startTime > 500) && (this.aborted = !0), 0 === i.length) {\n            var _t375 = !this.aborted && this.centroid;\n            if (this.reset(), _t375) return _t375;\n          }\n        }\n      }]);\n      return yo;\n    }();\n    var bo = /*#__PURE__*/function () {\n      function bo(t) {\n        _classCallCheck(this, bo);\n        this.singleTap = new yo(t), this.numTaps = t.numTaps, this.reset();\n      }\n      _createClass(bo, [{\n        key: \"reset\",\n        value: function reset() {\n          this.lastTime = 1 / 0, delete this.lastTap, this.count = 0, this.singleTap.reset();\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(t, e, i) {\n          this.singleTap.touchstart(t, e, i);\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(t, e, i) {\n          this.singleTap.touchmove(t, e, i);\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(t, e, i) {\n          var o = this.singleTap.touchend(t, e, i);\n          if (o) {\n            var _e309 = t.timeStamp - this.lastTime < 500,\n              _i253 = !this.lastTap || this.lastTap.dist(o) < 30;\n            if (_e309 && _i253 || this.reset(), this.count++, this.lastTime = t.timeStamp, this.lastTap = o, this.count === this.numTaps) return this.reset(), o;\n          }\n        }\n      }]);\n      return bo;\n    }();\n    var wo = /*#__PURE__*/function () {\n      function wo() {\n        _classCallCheck(this, wo);\n        this._zoomIn = new bo({\n          numTouches: 1,\n          numTaps: 2\n        }), this._zoomOut = new bo({\n          numTouches: 2,\n          numTaps: 1\n        }), this.reset();\n      }\n      _createClass(wo, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1, this._zoomIn.reset(), this._zoomOut.reset();\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(t, e, i) {\n          this._zoomIn.touchstart(t, e, i), this._zoomOut.touchstart(t, e, i);\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(t, e, i) {\n          this._zoomIn.touchmove(t, e, i), this._zoomOut.touchmove(t, e, i);\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(t, e, i) {\n          var _this83 = this;\n          var o = this._zoomIn.touchend(t, e, i),\n            a = this._zoomOut.touchend(t, e, i);\n          return o ? (this._active = !0, t.preventDefault(), setTimeout(function () {\n            return _this83.reset();\n          }, 0), {\n            cameraAnimation: function cameraAnimation(e) {\n              return e.easeTo({\n                duration: 300,\n                zoom: e.getZoom() + 1,\n                around: e.unproject(o)\n              }, {\n                originalEvent: t\n              });\n            }\n          }) : a ? (this._active = !0, t.preventDefault(), setTimeout(function () {\n            return _this83.reset();\n          }, 0), {\n            cameraAnimation: function cameraAnimation(e) {\n              return e.easeTo({\n                duration: 300,\n                zoom: e.getZoom() - 1,\n                around: e.unproject(a)\n              }, {\n                originalEvent: t\n              });\n            }\n          }) : void 0;\n        }\n      }, {\n        key: \"touchcancel\",\n        value: function touchcancel() {\n          this.reset();\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this._enabled = !0;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }]);\n      return wo;\n    }();\n    var To = {\n      0: 1,\n      2: 2\n    };\n    var Eo = /*#__PURE__*/function () {\n      function Eo(t) {\n        _classCallCheck(this, Eo);\n        this.reset(), this._clickTolerance = t.clickTolerance || 1;\n      }\n      _createClass(Eo, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1, this._moved = !1, delete this._lastPoint, delete this._eventButton;\n        }\n      }, {\n        key: \"_correctButton\",\n        value: function _correctButton(t, e) {\n          return !1;\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(t, e) {\n          return {};\n        }\n      }, {\n        key: \"mousedown\",\n        value: function mousedown(t, e) {\n          if (this._lastPoint) return;\n          var i = r.mouseButton(t);\n          this._correctButton(t, i) && (this._lastPoint = e, this._eventButton = i);\n        }\n      }, {\n        key: \"mousemoveWindow\",\n        value: function mousemoveWindow(t, e) {\n          var i = this._lastPoint;\n          if (i) if (t.preventDefault(), function (t, e) {\n            var i = To[e];\n            return void 0 === t.buttons || (t.buttons & i) !== i;\n          }(t, this._eventButton)) this.reset();else if (this._moved || !(e.dist(i) < this._clickTolerance)) return this._moved = !0, this._lastPoint = e, this._move(i, e);\n        }\n      }, {\n        key: \"mouseupWindow\",\n        value: function mouseupWindow(t) {\n          this._lastPoint && r.mouseButton(t) === this._eventButton && (this._moved && r.suppressClick(), this.reset());\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this._enabled = !0;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }]);\n      return Eo;\n    }();\n    var Io = /*#__PURE__*/function (_Eo) {\n      _inherits(Io, _Eo);\n      var _super126 = _createSuper(Io);\n      function Io() {\n        _classCallCheck(this, Io);\n        return _super126.apply(this, arguments);\n      }\n      _createClass(Io, [{\n        key: \"mousedown\",\n        value: function mousedown(t, e) {\n          _get(_getPrototypeOf(Io.prototype), \"mousedown\", this).call(this, t, e), this._lastPoint && (this._active = !0);\n        }\n      }, {\n        key: \"_correctButton\",\n        value: function _correctButton(t, e) {\n          return 0 === e && !t.ctrlKey;\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(t, e) {\n          return {\n            around: e,\n            panDelta: e.sub(t)\n          };\n        }\n      }]);\n      return Io;\n    }(Eo);\n    var Co = /*#__PURE__*/function (_Eo2) {\n      _inherits(Co, _Eo2);\n      var _super127 = _createSuper(Co);\n      function Co() {\n        _classCallCheck(this, Co);\n        return _super127.apply(this, arguments);\n      }\n      _createClass(Co, [{\n        key: \"_correctButton\",\n        value: function _correctButton(t, e) {\n          return 0 === e && t.ctrlKey || 2 === e;\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(t, e) {\n          var i = .8 * (e.x - t.x);\n          if (i) return this._active = !0, {\n            bearingDelta: i\n          };\n        }\n      }, {\n        key: \"contextmenu\",\n        value: function contextmenu(t) {\n          t.preventDefault();\n        }\n      }]);\n      return Co;\n    }(Eo);\n    var So = /*#__PURE__*/function (_Eo3) {\n      _inherits(So, _Eo3);\n      var _super128 = _createSuper(So);\n      function So() {\n        _classCallCheck(this, So);\n        return _super128.apply(this, arguments);\n      }\n      _createClass(So, [{\n        key: \"_correctButton\",\n        value: function _correctButton(t, e) {\n          return 0 === e && t.ctrlKey || 2 === e;\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(t, e) {\n          var i = -.5 * (e.y - t.y);\n          if (i) return this._active = !0, {\n            pitchDelta: i\n          };\n        }\n      }, {\n        key: \"contextmenu\",\n        value: function contextmenu(t) {\n          t.preventDefault();\n        }\n      }]);\n      return So;\n    }(Eo);\n    var Do = /*#__PURE__*/function () {\n      function Do(t, e) {\n        _classCallCheck(this, Do);\n        this._minTouches = t.cooperativeGestures ? 2 : 1, this._clickTolerance = t.clickTolerance || 1, this._map = e, this.reset();\n      }\n      _createClass(Do, [{\n        key: \"reset\",\n        value: function reset() {\n          var _this84 = this;\n          this._active = !1, this._touches = {}, this._sum = new t.pointGeometry(0, 0), setTimeout(function () {\n            _this84._cancelCooperativeMessage = !1;\n          }, 200);\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(t, e, i) {\n          return this._calculateTransform(t, e, i);\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(t, e, i) {\n          if (this._map._cooperativeGestures && (2 === this._minTouches && i.length < 2 && !this._cancelCooperativeMessage ? this._map._onCooperativeGesture(t, !1, i.length) : this._cancelCooperativeMessage || (this._cancelCooperativeMessage = !0)), this._active && !(i.length < this._minTouches)) return t.preventDefault(), this._calculateTransform(t, e, i);\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(t, e, i) {\n          this._calculateTransform(t, e, i), this._active && i.length < this._minTouches && this.reset();\n        }\n      }, {\n        key: \"touchcancel\",\n        value: function touchcancel() {\n          this.reset();\n        }\n      }, {\n        key: \"_calculateTransform\",\n        value: function _calculateTransform(e, i, o) {\n          o.length > 0 && (this._active = !0);\n          var a = vo(o, i),\n            r = new t.pointGeometry(0, 0),\n            s = new t.pointGeometry(0, 0);\n          var n = 0;\n          for (var _t376 in a) {\n            var _e310 = a[_t376],\n              _i254 = this._touches[_t376];\n            _i254 && (r._add(_e310), s._add(_e310.sub(_i254)), n++, a[_t376] = _e310);\n          }\n          if (this._touches = a, n < this._minTouches || !s.mag()) return;\n          var l = s.div(n);\n          return this._sum._add(l), this._sum.mag() < this._clickTolerance ? void 0 : {\n            around: r.div(n),\n            panDelta: l\n          };\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this._enabled = !0;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }]);\n      return Do;\n    }();\n    var zo = /*#__PURE__*/function () {\n      function zo() {\n        _classCallCheck(this, zo);\n        this.reset();\n      }\n      _createClass(zo, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1, delete this._firstTwoTouches;\n        }\n      }, {\n        key: \"_start\",\n        value: function _start(t) {}\n      }, {\n        key: \"_move\",\n        value: function _move(t, e, i) {\n          return {};\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(t, e, i) {\n          this._firstTwoTouches || i.length < 2 || (this._firstTwoTouches = [i[0].identifier, i[1].identifier], this._start([e[0], e[1]]));\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(t, e, i) {\n          if (!this._firstTwoTouches) return;\n          t.preventDefault();\n          var _this$_firstTwoTouche = _slicedToArray(this._firstTwoTouches, 2),\n            o = _this$_firstTwoTouche[0],\n            a = _this$_firstTwoTouche[1],\n            r = Po(i, e, o),\n            s = Po(i, e, a);\n          if (!r || !s) return;\n          var n = this._aroundCenter ? null : r.add(s).div(2);\n          return this._move([r, s], n, t);\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(t, e, i) {\n          if (!this._firstTwoTouches) return;\n          var _this$_firstTwoTouche2 = _slicedToArray(this._firstTwoTouches, 2),\n            o = _this$_firstTwoTouche2[0],\n            a = _this$_firstTwoTouche2[1],\n            s = Po(i, e, o),\n            n = Po(i, e, a);\n          s && n || (this._active && r.suppressClick(), this.reset());\n        }\n      }, {\n        key: \"touchcancel\",\n        value: function touchcancel() {\n          this.reset();\n        }\n      }, {\n        key: \"enable\",\n        value: function enable(t) {\n          this._enabled = !0, this._aroundCenter = !!t && \"center\" === t.around;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }]);\n      return zo;\n    }();\n    function Po(t, e, i) {\n      for (var _o130 = 0; _o130 < t.length; _o130++) if (t[_o130].identifier === i) return e[_o130];\n    }\n    function Mo(t, e) {\n      return Math.log(t / e) / Math.LN2;\n    }\n    var Ao = /*#__PURE__*/function (_zo) {\n      _inherits(Ao, _zo);\n      var _super129 = _createSuper(Ao);\n      function Ao() {\n        _classCallCheck(this, Ao);\n        return _super129.apply(this, arguments);\n      }\n      _createClass(Ao, [{\n        key: \"reset\",\n        value: function reset() {\n          _get(_getPrototypeOf(Ao.prototype), \"reset\", this).call(this), delete this._distance, delete this._startDistance;\n        }\n      }, {\n        key: \"_start\",\n        value: function _start(t) {\n          this._startDistance = this._distance = t[0].dist(t[1]);\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(t, e) {\n          var i = this._distance;\n          if (this._distance = t[0].dist(t[1]), this._active || !(Math.abs(Mo(this._distance, this._startDistance)) < .1)) return this._active = !0, {\n            zoomDelta: Mo(this._distance, i),\n            pinchAround: e\n          };\n        }\n      }]);\n      return Ao;\n    }(zo);\n    function Lo(t, e) {\n      return 180 * t.angleWith(e) / Math.PI;\n    }\n    var Ro = /*#__PURE__*/function (_zo2) {\n      _inherits(Ro, _zo2);\n      var _super130 = _createSuper(Ro);\n      function Ro() {\n        _classCallCheck(this, Ro);\n        return _super130.apply(this, arguments);\n      }\n      _createClass(Ro, [{\n        key: \"reset\",\n        value: function reset() {\n          _get(_getPrototypeOf(Ro.prototype), \"reset\", this).call(this), delete this._minDiameter, delete this._startVector, delete this._vector;\n        }\n      }, {\n        key: \"_start\",\n        value: function _start(t) {\n          this._startVector = this._vector = t[0].sub(t[1]), this._minDiameter = t[0].dist(t[1]);\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(t, e) {\n          var i = this._vector;\n          if (this._vector = t[0].sub(t[1]), this._active || !this._isBelowThreshold(this._vector)) return this._active = !0, {\n            bearingDelta: Lo(this._vector, i),\n            pinchAround: e\n          };\n        }\n      }, {\n        key: \"_isBelowThreshold\",\n        value: function _isBelowThreshold(t) {\n          this._minDiameter = Math.min(this._minDiameter, t.mag());\n          var e = 25 / (Math.PI * this._minDiameter) * 360,\n            i = Lo(t, this._startVector);\n          return Math.abs(i) < e;\n        }\n      }]);\n      return Ro;\n    }(zo);\n    function ko(t) {\n      return Math.abs(t.y) > Math.abs(t.x);\n    }\n    var Bo = /*#__PURE__*/function (_zo3) {\n      _inherits(Bo, _zo3);\n      var _super131 = _createSuper(Bo);\n      function Bo(t) {\n        var _this85;\n        _classCallCheck(this, Bo);\n        _this85 = _super131.call(this), _this85._map = t;\n        return _this85;\n      }\n      _createClass(Bo, [{\n        key: \"reset\",\n        value: function reset() {\n          _get(_getPrototypeOf(Bo.prototype), \"reset\", this).call(this), this._valid = void 0, delete this._firstMove, delete this._lastPoints;\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(t, e, i) {\n          _get(_getPrototypeOf(Bo.prototype), \"touchstart\", this).call(this, t, e, i), this._currentTouchCount = i.length;\n        }\n      }, {\n        key: \"_start\",\n        value: function _start(t) {\n          this._lastPoints = t, ko(t[0].sub(t[1])) && (this._valid = !1);\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(t, e, i) {\n          if (this._map._cooperativeGestures && this._currentTouchCount < 3) return;\n          var o = t[0].sub(this._lastPoints[0]),\n            a = t[1].sub(this._lastPoints[1]);\n          return this._valid = this.gestureBeginsVertically(o, a, i.timeStamp), this._valid ? (this._lastPoints = t, this._active = !0, {\n            pitchDelta: (o.y + a.y) / 2 * -.5\n          }) : void 0;\n        }\n      }, {\n        key: \"gestureBeginsVertically\",\n        value: function gestureBeginsVertically(t, e, i) {\n          if (void 0 !== this._valid) return this._valid;\n          var o = t.mag() >= 2,\n            a = e.mag() >= 2;\n          if (!o && !a) return;\n          if (!o || !a) return void 0 === this._firstMove && (this._firstMove = i), i - this._firstMove < 100 && void 0;\n          var r = t.y > 0 == e.y > 0;\n          return ko(t) && ko(e) && r;\n        }\n      }]);\n      return Bo;\n    }(zo);\n    var Fo = {\n      panStep: 100,\n      bearingStep: 15,\n      pitchStep: 10\n    };\n    var Oo = /*#__PURE__*/function () {\n      function Oo() {\n        _classCallCheck(this, Oo);\n        var t = Fo;\n        this._panStep = t.panStep, this._bearingStep = t.bearingStep, this._pitchStep = t.pitchStep, this._rotationDisabled = !1;\n      }\n      _createClass(Oo, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1;\n        }\n      }, {\n        key: \"keydown\",\n        value: function keydown(t) {\n          var _this86 = this;\n          if (t.altKey || t.ctrlKey || t.metaKey) return;\n          var e = 0,\n            i = 0,\n            o = 0,\n            a = 0,\n            r = 0;\n          switch (t.keyCode) {\n            case 61:\n            case 107:\n            case 171:\n            case 187:\n              e = 1;\n              break;\n            case 189:\n            case 109:\n            case 173:\n              e = -1;\n              break;\n            case 37:\n              t.shiftKey ? i = -1 : (t.preventDefault(), a = -1);\n              break;\n            case 39:\n              t.shiftKey ? i = 1 : (t.preventDefault(), a = 1);\n              break;\n            case 38:\n              t.shiftKey ? o = 1 : (t.preventDefault(), r = -1);\n              break;\n            case 40:\n              t.shiftKey ? o = -1 : (t.preventDefault(), r = 1);\n              break;\n            default:\n              return;\n          }\n          return this._rotationDisabled && (i = 0, o = 0), {\n            cameraAnimation: function cameraAnimation(s) {\n              var n = s.getZoom();\n              s.easeTo({\n                duration: 300,\n                easeId: \"keyboardHandler\",\n                easing: Uo,\n                zoom: e ? Math.round(n) + e * (t.shiftKey ? 2 : 1) : n,\n                bearing: s.getBearing() + i * _this86._bearingStep,\n                pitch: s.getPitch() + o * _this86._pitchStep,\n                offset: [-a * _this86._panStep, -r * _this86._panStep],\n                center: s.getCenter()\n              }, {\n                originalEvent: t\n              });\n            }\n          };\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this._enabled = !0;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }, {\n        key: \"disableRotation\",\n        value: function disableRotation() {\n          this._rotationDisabled = !0;\n        }\n      }, {\n        key: \"enableRotation\",\n        value: function enableRotation() {\n          this._rotationDisabled = !1;\n        }\n      }]);\n      return Oo;\n    }();\n    function Uo(t) {\n      return t * (2 - t);\n    }\n    var No = 4.000244140625;\n    var Go = /*#__PURE__*/function () {\n      function Go(e, i) {\n        _classCallCheck(this, Go);\n        this._map = e, this._el = e.getCanvasContainer(), this._handler = i, this._delta = 0, this._defaultZoomRate = .01, this._wheelZoomRate = .0022222222222222222, t.bindAll([\"_onTimeout\"], this);\n      }\n      _createClass(Go, [{\n        key: \"setZoomRate\",\n        value: function setZoomRate(t) {\n          this._defaultZoomRate = t;\n        }\n      }, {\n        key: \"setWheelZoomRate\",\n        value: function setWheelZoomRate(t) {\n          this._wheelZoomRate = t;\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return !!this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return !!this._active || void 0 !== this._finishTimeout;\n        }\n      }, {\n        key: \"isZooming\",\n        value: function isZooming() {\n          return !!this._zooming;\n        }\n      }, {\n        key: \"enable\",\n        value: function enable(t) {\n          this.isEnabled() || (this._enabled = !0, this._aroundCenter = t && \"center\" === t.around);\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this.isEnabled() && (this._enabled = !1);\n        }\n      }, {\n        key: \"wheel\",\n        value: function wheel(e) {\n          if (!this.isEnabled()) return;\n          if (this._map._cooperativeGestures) {\n            if (!this._map._metaPress) return;\n            e.preventDefault();\n          }\n          var i = e.deltaMode === WheelEvent.DOM_DELTA_LINE ? 40 * e.deltaY : e.deltaY;\n          var o = t.exported.now(),\n            a = o - (this._lastWheelEventTime || 0);\n          this._lastWheelEventTime = o, 0 !== i && i % No == 0 ? this._type = \"wheel\" : 0 !== i && Math.abs(i) < 4 ? this._type = \"trackpad\" : a > 400 ? (this._type = null, this._lastValue = i, this._timeout = setTimeout(this._onTimeout, 40, e)) : this._type || (this._type = Math.abs(a * i) < 200 ? \"trackpad\" : \"wheel\", this._timeout && (clearTimeout(this._timeout), this._timeout = null, i += this._lastValue)), e.shiftKey && i && (i /= 4), this._type && (this._lastWheelEvent = e, this._delta -= i, this._active || this._start(e)), e.preventDefault();\n        }\n      }, {\n        key: \"_onTimeout\",\n        value: function _onTimeout(t) {\n          this._type = \"wheel\", this._delta -= this._lastValue, this._active || this._start(t);\n        }\n      }, {\n        key: \"_start\",\n        value: function _start(e) {\n          if (!this._delta) return;\n          this._frameId && (this._frameId = null), this._active = !0, this.isZooming() || (this._zooming = !0), this._finishTimeout && (clearTimeout(this._finishTimeout), delete this._finishTimeout);\n          var i = r.mousePos(this._el, e);\n          this._around = t.LngLat.convert(this._aroundCenter ? this._map.getCenter() : this._map.unproject(i)), this._aroundPoint = this._map.transform.locationPoint(this._around), this._frameId || (this._frameId = !0, this._handler._triggerRenderFrame());\n        }\n      }, {\n        key: \"renderFrame\",\n        value: function renderFrame() {\n          var _this87 = this;\n          if (!this._frameId) return;\n          if (this._frameId = null, !this.isActive()) return;\n          var e = this._map.transform;\n          if (0 !== this._delta) {\n            var _t377 = \"wheel\" === this._type && Math.abs(this._delta) > No ? this._wheelZoomRate : this._defaultZoomRate;\n            var _i255 = 2 / (1 + Math.exp(-Math.abs(this._delta * _t377)));\n            this._delta < 0 && 0 !== _i255 && (_i255 = 1 / _i255);\n            var _o131 = \"number\" == typeof this._targetZoom ? e.zoomScale(this._targetZoom) : e.scale;\n            this._targetZoom = Math.min(e.maxZoom, Math.max(e.minZoom, e.scaleZoom(_o131 * _i255))), \"wheel\" === this._type && (this._startZoom = e.zoom, this._easing = this._smoothOutEasing(200)), this._delta = 0;\n          }\n          var i = \"number\" == typeof this._targetZoom ? this._targetZoom : e.zoom,\n            o = this._startZoom,\n            a = this._easing;\n          var r,\n            s = !1;\n          if (\"wheel\" === this._type && o && a) {\n            var _e311 = Math.min((t.exported.now() - this._lastWheelEventTime) / 200, 1),\n              _n142 = a(_e311);\n            r = t.number(o, i, _n142), _e311 < 1 ? this._frameId || (this._frameId = !0) : s = !0;\n          } else r = i, s = !0;\n          return this._active = !0, s && (this._active = !1, this._finishTimeout = setTimeout(function () {\n            _this87._zooming = !1, _this87._handler._triggerRenderFrame(), delete _this87._targetZoom, delete _this87._finishTimeout;\n          }, 200)), {\n            noInertia: !0,\n            needsRenderFrame: !s,\n            zoomDelta: r - e.zoom,\n            around: this._aroundPoint,\n            originalEvent: this._lastWheelEvent\n          };\n        }\n      }, {\n        key: \"_smoothOutEasing\",\n        value: function _smoothOutEasing(e) {\n          var i = t.ease;\n          if (this._prevEase) {\n            var _e312 = this._prevEase,\n              _o132 = (t.exported.now() - _e312.start) / _e312.duration,\n              _a142 = _e312.easing(_o132 + .01) - _e312.easing(_o132),\n              _r202 = .27 / Math.sqrt(_a142 * _a142 + 1e-4) * .01,\n              _s112 = Math.sqrt(.0729 - _r202 * _r202);\n            i = t.bezier(_r202, _s112, .25, 1);\n          }\n          return this._prevEase = {\n            start: t.exported.now(),\n            duration: e,\n            easing: i\n          }, i;\n        }\n      }, {\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1;\n        }\n      }]);\n      return Go;\n    }();\n    var Zo = /*#__PURE__*/function () {\n      function Zo(t, e) {\n        _classCallCheck(this, Zo);\n        this._clickZoom = t, this._tapZoom = e;\n      }\n      _createClass(Zo, [{\n        key: \"enable\",\n        value: function enable() {\n          this._clickZoom.enable(), this._tapZoom.enable();\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._clickZoom.disable(), this._tapZoom.disable();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._clickZoom.isEnabled() && this._tapZoom.isEnabled();\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._clickZoom.isActive() || this._tapZoom.isActive();\n        }\n      }]);\n      return Zo;\n    }();\n    var Vo = /*#__PURE__*/function () {\n      function Vo() {\n        _classCallCheck(this, Vo);\n        this.reset();\n      }\n      _createClass(Vo, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1;\n        }\n      }, {\n        key: \"dblclick\",\n        value: function dblclick(t, e) {\n          return t.preventDefault(), {\n            cameraAnimation: function cameraAnimation(i) {\n              i.easeTo({\n                duration: 300,\n                zoom: i.getZoom() + (t.shiftKey ? -1 : 1),\n                around: i.unproject(e)\n              }, {\n                originalEvent: t\n              });\n            }\n          };\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this._enabled = !0;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }]);\n      return Vo;\n    }();\n    var qo = /*#__PURE__*/function () {\n      function qo() {\n        _classCallCheck(this, qo);\n        this._tap = new bo({\n          numTouches: 1,\n          numTaps: 1\n        }), this.reset();\n      }\n      _createClass(qo, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1, delete this._swipePoint, delete this._swipeTouch, delete this._tapTime, this._tap.reset();\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(t, e, i) {\n          this._swipePoint || (this._tapTime && t.timeStamp - this._tapTime > 500 && this.reset(), this._tapTime ? i.length > 0 && (this._swipePoint = e[0], this._swipeTouch = i[0].identifier) : this._tap.touchstart(t, e, i));\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(t, e, i) {\n          if (this._tapTime) {\n            if (this._swipePoint) {\n              if (i[0].identifier !== this._swipeTouch) return;\n              var _o133 = e[0],\n                _a143 = _o133.y - this._swipePoint.y;\n              return this._swipePoint = _o133, t.preventDefault(), this._active = !0, {\n                zoomDelta: _a143 / 128\n              };\n            }\n          } else this._tap.touchmove(t, e, i);\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(t, e, i) {\n          this._tapTime ? this._swipePoint && 0 === i.length && this.reset() : this._tap.touchend(t, e, i) && (this._tapTime = t.timeStamp);\n        }\n      }, {\n        key: \"touchcancel\",\n        value: function touchcancel() {\n          this.reset();\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this._enabled = !0;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }]);\n      return qo;\n    }();\n    var jo = /*#__PURE__*/function () {\n      function jo(t, e, i) {\n        _classCallCheck(this, jo);\n        this._el = t, this._mousePan = e, this._touchPan = i;\n      }\n      _createClass(jo, [{\n        key: \"enable\",\n        value: function enable(t) {\n          this._inertiaOptions = t || {}, this._mousePan.enable(), this._touchPan.enable(), this._el.classList.add(\"maplibregl-touch-drag-pan\", \"mapboxgl-touch-drag-pan\");\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._mousePan.disable(), this._touchPan.disable(), this._el.classList.remove(\"maplibregl-touch-drag-pan\", \"mapboxgl-touch-drag-pan\");\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._mousePan.isEnabled() && this._touchPan.isEnabled();\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._mousePan.isActive() || this._touchPan.isActive();\n        }\n      }]);\n      return jo;\n    }();\n    var $o = /*#__PURE__*/function () {\n      function $o(t, e, i) {\n        _classCallCheck(this, $o);\n        this._pitchWithRotate = t.pitchWithRotate, this._mouseRotate = e, this._mousePitch = i;\n      }\n      _createClass($o, [{\n        key: \"enable\",\n        value: function enable() {\n          this._mouseRotate.enable(), this._pitchWithRotate && this._mousePitch.enable();\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._mouseRotate.disable(), this._mousePitch.disable();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._mouseRotate.isEnabled() && (!this._pitchWithRotate || this._mousePitch.isEnabled());\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._mouseRotate.isActive() || this._mousePitch.isActive();\n        }\n      }]);\n      return $o;\n    }();\n    var Xo = /*#__PURE__*/function () {\n      function Xo(t, e, i, o) {\n        _classCallCheck(this, Xo);\n        this._el = t, this._touchZoom = e, this._touchRotate = i, this._tapDragZoom = o, this._rotationDisabled = !1, this._enabled = !0;\n      }\n      _createClass(Xo, [{\n        key: \"enable\",\n        value: function enable(t) {\n          this._touchZoom.enable(t), this._rotationDisabled || this._touchRotate.enable(t), this._tapDragZoom.enable(), this._el.classList.add(\"maplibregl-touch-zoom-rotate\", \"mapboxgl-touch-zoom-rotate\");\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._touchZoom.disable(), this._touchRotate.disable(), this._tapDragZoom.disable(), this._el.classList.remove(\"maplibregl-touch-zoom-rotate\", \"mapboxgl-touch-zoom-rotate\");\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._touchZoom.isEnabled() && (this._rotationDisabled || this._touchRotate.isEnabled()) && this._tapDragZoom.isEnabled();\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._touchZoom.isActive() || this._touchRotate.isActive() || this._tapDragZoom.isActive();\n        }\n      }, {\n        key: \"disableRotation\",\n        value: function disableRotation() {\n          this._rotationDisabled = !0, this._touchRotate.disable();\n        }\n      }, {\n        key: \"enableRotation\",\n        value: function enableRotation() {\n          this._rotationDisabled = !1, this._touchZoom.isEnabled() && this._touchRotate.enable();\n        }\n      }]);\n      return Xo;\n    }();\n    var Wo = function Wo(t) {\n      return t.zoom || t.drag || t.pitch || t.rotate;\n    };\n    var Ho = /*#__PURE__*/function (_t$Event4) {\n      _inherits(Ho, _t$Event4);\n      var _super132 = _createSuper(Ho);\n      function Ho() {\n        _classCallCheck(this, Ho);\n        return _super132.apply(this, arguments);\n      }\n      return _createClass(Ho);\n    }(t.Event);\n    function Ko(t) {\n      return t.panDelta && t.panDelta.mag() || t.zoomDelta || t.bearingDelta || t.pitchDelta;\n    }\n    var Yo = /*#__PURE__*/function () {\n      function Yo(e, i) {\n        _classCallCheck(this, Yo);\n        this._map = e, this._el = this._map.getCanvasContainer(), this._handlers = [], this._handlersById = {}, this._changes = [], this._inertia = new co(e), this._bearingSnap = i.bearingSnap, this._previousActiveHandlers = {}, this._eventsInProgress = {}, this._addDefaultHandlers(i), t.bindAll([\"handleEvent\", \"handleWindowEvent\"], this);\n        var o = this._el;\n        this._listeners = [[o, \"touchstart\", {\n          passive: !0\n        }], [o, \"touchmove\", {\n          passive: !1\n        }], [o, \"touchend\", void 0], [o, \"touchcancel\", void 0], [o, \"mousedown\", void 0], [o, \"mousemove\", void 0], [o, \"mouseup\", void 0], [document, \"mousemove\", {\n          capture: !0\n        }], [document, \"mouseup\", void 0], [o, \"mouseover\", void 0], [o, \"mouseout\", void 0], [o, \"dblclick\", void 0], [o, \"click\", void 0], [o, \"keydown\", {\n          capture: !1\n        }], [o, \"keyup\", void 0], [o, \"wheel\", {\n          passive: !1\n        }], [o, \"contextmenu\", void 0], [window, \"blur\", void 0]];\n        var _iterator217 = _createForOfIteratorHelper(this._listeners),\n          _step217;\n        try {\n          for (_iterator217.s(); !(_step217 = _iterator217.n()).done;) {\n            var _step217$value = _slicedToArray(_step217.value, 3),\n              _t378 = _step217$value[0],\n              _e313 = _step217$value[1],\n              _i256 = _step217$value[2];\n            r.addEventListener(_t378, _e313, _t378 === document ? this.handleWindowEvent : this.handleEvent, _i256);\n          }\n        } catch (err) {\n          _iterator217.e(err);\n        } finally {\n          _iterator217.f();\n        }\n      }\n      _createClass(Yo, [{\n        key: \"destroy\",\n        value: function destroy() {\n          var _iterator218 = _createForOfIteratorHelper(this._listeners),\n            _step218;\n          try {\n            for (_iterator218.s(); !(_step218 = _iterator218.n()).done;) {\n              var _step218$value = _slicedToArray(_step218.value, 3),\n                _t379 = _step218$value[0],\n                _e314 = _step218$value[1],\n                _i257 = _step218$value[2];\n              r.removeEventListener(_t379, _e314, _t379 === document ? this.handleWindowEvent : this.handleEvent, _i257);\n            }\n          } catch (err) {\n            _iterator218.e(err);\n          } finally {\n            _iterator218.f();\n          }\n        }\n      }, {\n        key: \"_addDefaultHandlers\",\n        value: function _addDefaultHandlers(t) {\n          var e = this._map,\n            i = e.getCanvasContainer();\n          this._add(\"mapEvent\", new fo(e, t));\n          var o = e.boxZoom = new xo(e, t);\n          this._add(\"boxZoom\", o);\n          var a = new wo(),\n            r = new Vo();\n          e.doubleClickZoom = new Zo(r, a), this._add(\"tapZoom\", a), this._add(\"clickZoom\", r);\n          var s = new qo();\n          this._add(\"tapDragZoom\", s);\n          var n = e.touchPitch = new Bo(e);\n          this._add(\"touchPitch\", n);\n          var l = new Co(t),\n            c = new So(t);\n          e.dragRotate = new $o(t, l, c), this._add(\"mouseRotate\", l, [\"mousePitch\"]), this._add(\"mousePitch\", c, [\"mouseRotate\"]);\n          var h = new Io(t),\n            u = new Do(t, e);\n          e.dragPan = new jo(i, h, u), this._add(\"mousePan\", h), this._add(\"touchPan\", u, [\"touchZoom\", \"touchRotate\"]);\n          var d = new Ro(),\n            m = new Ao();\n          e.touchZoomRotate = new Xo(i, m, d, s), this._add(\"touchRotate\", d, [\"touchPan\", \"touchZoom\"]), this._add(\"touchZoom\", m, [\"touchPan\", \"touchRotate\"]);\n          var _ = e.scrollZoom = new Go(e, this);\n          this._add(\"scrollZoom\", _, [\"mousePan\"]);\n          var p = e.keyboard = new Oo();\n          this._add(\"keyboard\", p), this._add(\"blockableMapEvent\", new go(e));\n          for (var _i258 = 0, _arr4 = [\"boxZoom\", \"doubleClickZoom\", \"tapDragZoom\", \"touchPitch\", \"dragRotate\", \"dragPan\", \"touchZoomRotate\", \"scrollZoom\", \"keyboard\"]; _i258 < _arr4.length; _i258++) {\n            var _i259 = _arr4[_i258];\n            t.interactive && t[_i259] && e[_i259].enable(t[_i259]);\n          }\n        }\n      }, {\n        key: \"_add\",\n        value: function _add(t, e, i) {\n          this._handlers.push({\n            handlerName: t,\n            handler: e,\n            allowed: i\n          }), this._handlersById[t] = e;\n        }\n      }, {\n        key: \"stop\",\n        value: function stop(t) {\n          if (!this._updatingCamera) {\n            var _iterator219 = _createForOfIteratorHelper(this._handlers),\n              _step219;\n            try {\n              for (_iterator219.s(); !(_step219 = _iterator219.n()).done;) {\n                var _t380 = _step219.value.handler;\n                _t380.reset();\n              }\n            } catch (err) {\n              _iterator219.e(err);\n            } finally {\n              _iterator219.f();\n            }\n            this._inertia.clear(), this._fireEvents({}, {}, t), this._changes = [];\n          }\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          var _iterator220 = _createForOfIteratorHelper(this._handlers),\n            _step220;\n          try {\n            for (_iterator220.s(); !(_step220 = _iterator220.n()).done;) {\n              var _t381 = _step220.value.handler;\n              if (_t381.isActive()) return !0;\n            }\n          } catch (err) {\n            _iterator220.e(err);\n          } finally {\n            _iterator220.f();\n          }\n          return !1;\n        }\n      }, {\n        key: \"isZooming\",\n        value: function isZooming() {\n          return !!this._eventsInProgress.zoom || this._map.scrollZoom.isZooming();\n        }\n      }, {\n        key: \"isRotating\",\n        value: function isRotating() {\n          return !!this._eventsInProgress.rotate;\n        }\n      }, {\n        key: \"isMoving\",\n        value: function isMoving() {\n          return Boolean(Wo(this._eventsInProgress)) || this.isZooming();\n        }\n      }, {\n        key: \"_blockedByActive\",\n        value: function _blockedByActive(t, e, i) {\n          for (var _o134 in t) if (_o134 !== i && (!e || e.indexOf(_o134) < 0)) return !0;\n          return !1;\n        }\n      }, {\n        key: \"handleWindowEvent\",\n        value: function handleWindowEvent(t) {\n          this.handleEvent(t, \"\".concat(t.type, \"Window\"));\n        }\n      }, {\n        key: \"_getMapTouches\",\n        value: function _getMapTouches(t) {\n          var e = [];\n          var _iterator221 = _createForOfIteratorHelper(t),\n            _step221;\n          try {\n            for (_iterator221.s(); !(_step221 = _iterator221.n()).done;) {\n              var _i260 = _step221.value;\n              this._el.contains(_i260.target) && e.push(_i260);\n            }\n          } catch (err) {\n            _iterator221.e(err);\n          } finally {\n            _iterator221.f();\n          }\n          return e;\n        }\n      }, {\n        key: \"handleEvent\",\n        value: function handleEvent(t, e) {\n          if (\"blur\" === t.type) return void this.stop(!0);\n          this._updatingCamera = !0;\n          var i = \"renderFrame\" === t.type ? void 0 : t,\n            o = {\n              needsRenderFrame: !1\n            },\n            a = {},\n            s = {},\n            n = t.touches,\n            l = n ? this._getMapTouches(n) : void 0,\n            c = l ? r.touchPos(this._el, l) : r.mousePos(this._el, t);\n          var _iterator222 = _createForOfIteratorHelper(this._handlers),\n            _step222;\n          try {\n            for (_iterator222.s(); !(_step222 = _iterator222.n()).done;) {\n              var _step222$value = _step222.value,\n                _r203 = _step222$value.handlerName,\n                _n143 = _step222$value.handler,\n                _h30 = _step222$value.allowed;\n              if (!_n143.isEnabled()) continue;\n              var _u40 = void 0;\n              this._blockedByActive(s, _h30, _r203) ? _n143.reset() : _n143[e || t.type] && (_u40 = _n143[e || t.type](t, c, l), this.mergeHandlerResult(o, a, _u40, _r203, i), _u40 && _u40.needsRenderFrame && this._triggerRenderFrame()), (_u40 || _n143.isActive()) && (s[_r203] = _n143);\n            }\n          } catch (err) {\n            _iterator222.e(err);\n          } finally {\n            _iterator222.f();\n          }\n          var h = {};\n          for (var _t382 in this._previousActiveHandlers) s[_t382] || (h[_t382] = i);\n          this._previousActiveHandlers = s, (Object.keys(h).length || Ko(o)) && (this._changes.push([o, a, h]), this._triggerRenderFrame()), (Object.keys(s).length || Ko(o)) && this._map._stop(!0), this._updatingCamera = !1;\n          var u = o.cameraAnimation;\n          u && (this._inertia.clear(), this._fireEvents({}, {}, !0), this._changes = [], u(this._map));\n        }\n      }, {\n        key: \"mergeHandlerResult\",\n        value: function mergeHandlerResult(e, i, o, a, r) {\n          if (!o) return;\n          t.extend(e, o);\n          var s = {\n            handlerName: a,\n            originalEvent: o.originalEvent || r\n          };\n          void 0 !== o.zoomDelta && (i.zoom = s), void 0 !== o.panDelta && (i.drag = s), void 0 !== o.pitchDelta && (i.pitch = s), void 0 !== o.bearingDelta && (i.rotate = s);\n        }\n      }, {\n        key: \"_applyChanges\",\n        value: function _applyChanges() {\n          var e = {},\n            i = {},\n            o = {};\n          var _iterator223 = _createForOfIteratorHelper(this._changes),\n            _step223;\n          try {\n            for (_iterator223.s(); !(_step223 = _iterator223.n()).done;) {\n              var _step223$value = _slicedToArray(_step223.value, 3),\n                _a144 = _step223$value[0],\n                _r204 = _step223$value[1],\n                _s113 = _step223$value[2];\n              _a144.panDelta && (e.panDelta = (e.panDelta || new t.pointGeometry(0, 0))._add(_a144.panDelta)), _a144.zoomDelta && (e.zoomDelta = (e.zoomDelta || 0) + _a144.zoomDelta), _a144.bearingDelta && (e.bearingDelta = (e.bearingDelta || 0) + _a144.bearingDelta), _a144.pitchDelta && (e.pitchDelta = (e.pitchDelta || 0) + _a144.pitchDelta), void 0 !== _a144.around && (e.around = _a144.around), void 0 !== _a144.pinchAround && (e.pinchAround = _a144.pinchAround), _a144.noInertia && (e.noInertia = _a144.noInertia), t.extend(i, _r204), t.extend(o, _s113);\n            }\n          } catch (err) {\n            _iterator223.e(err);\n          } finally {\n            _iterator223.f();\n          }\n          this._updateMapTransform(e, i, o), this._changes = [];\n        }\n      }, {\n        key: \"_updateMapTransform\",\n        value: function _updateMapTransform(e, i, o) {\n          var a = this._map,\n            r = a.transform,\n            s = a.style && a.style.terrain;\n          if (!(Ko(e) || s && this._drag)) return this._fireEvents(i, o, !0);\n          var n = e.panDelta,\n            l = e.zoomDelta,\n            c = e.bearingDelta,\n            h = e.pitchDelta,\n            u = e.around,\n            d = e.pinchAround;\n          void 0 !== d && (u = d), a._stop(!0), u = u || a.transform.centerPoint;\n          var m = r.pointLocation(n ? u.sub(n) : u);\n          c && (r.bearing += c), h && (r.pitch += h), l && (r.zoom += l), s ? i.drag && !this._drag ? (this._drag = {\n            center: r.centerPoint,\n            lngLat: r.pointLocation(u),\n            point: u,\n            handlerName: i.drag.handlerName\n          }, a.fire(new t.Event(\"freezeElevation\", {\n            freeze: !0\n          }))) : this._drag && o[this._drag.handlerName] ? (a.fire(new t.Event(\"freezeElevation\", {\n            freeze: !1\n          })), this._drag = null) : i.drag && this._drag && (r.center = r.pointLocation(r.centerPoint.sub(n))) : r.setLocationAtPoint(m, u), this._map._update(), e.noInertia || this._inertia.record(e), this._fireEvents(i, o, !0);\n        }\n      }, {\n        key: \"_fireEvents\",\n        value: function _fireEvents(e, i, o) {\n          var _this88 = this;\n          var a = Wo(this._eventsInProgress),\n            r = Wo(e),\n            s = {};\n          for (var _t383 in e) {\n            var _i261 = e[_t383].originalEvent;\n            this._eventsInProgress[_t383] || (s[\"\".concat(_t383, \"start\")] = _i261), this._eventsInProgress[_t383] = e[_t383];\n          }\n          !a && r && this._fireEvent(\"movestart\", r.originalEvent);\n          for (var _t384 in s) this._fireEvent(_t384, s[_t384]);\n          r && this._fireEvent(\"move\", r.originalEvent);\n          for (var _t385 in e) {\n            var _i262 = e[_t385].originalEvent;\n            this._fireEvent(_t385, _i262);\n          }\n          var n = {};\n          var l;\n          for (var _t386 in this._eventsInProgress) {\n            var _this$_eventsInProgre = this._eventsInProgress[_t386],\n              _e315 = _this$_eventsInProgre.handlerName,\n              _o135 = _this$_eventsInProgre.originalEvent;\n            this._handlersById[_e315].isActive() || (delete this._eventsInProgress[_t386], l = i[_e315] || _o135, n[\"\".concat(_t386, \"end\")] = l);\n          }\n          for (var _t387 in n) this._fireEvent(_t387, n[_t387]);\n          var c = Wo(this._eventsInProgress);\n          if (o && (a || r) && !c) {\n            this._updatingCamera = !0;\n            var _e316 = this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),\n              _i263 = function _i263(t) {\n                return 0 !== t && -_this88._bearingSnap < t && t < _this88._bearingSnap;\n              };\n            _e316 ? (_i263(_e316.bearing || this._map.getBearing()) && (_e316.bearing = 0), this._map.easeTo(_e316, {\n              originalEvent: l\n            })) : (this._map.fire(new t.Event(\"moveend\", {\n              originalEvent: l\n            })), _i263(this._map.getBearing()) && this._map.resetNorth()), this._updatingCamera = !1;\n          }\n        }\n      }, {\n        key: \"_fireEvent\",\n        value: function _fireEvent(e, i) {\n          this._map.fire(new t.Event(e, i ? {\n            originalEvent: i\n          } : {}));\n        }\n      }, {\n        key: \"_requestFrame\",\n        value: function _requestFrame() {\n          var _this89 = this;\n          return this._map.triggerRepaint(), this._map._renderTaskQueue.add(function (t) {\n            delete _this89._frameId, _this89.handleEvent(new Ho(\"renderFrame\", {\n              timeStamp: t\n            })), _this89._applyChanges();\n          });\n        }\n      }, {\n        key: \"_triggerRenderFrame\",\n        value: function _triggerRenderFrame() {\n          void 0 === this._frameId && (this._frameId = this._requestFrame());\n        }\n      }]);\n      return Yo;\n    }();\n    var Jo = {\n      extend: function extend(e) {\n        for (var _len6 = arguments.length, i = new Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {\n          i[_key6 - 1] = arguments[_key6];\n        }\n        return t.extend.apply(t, [e].concat(i));\n      },\n      run: function run(t) {\n        t();\n      },\n      logToElement: function logToElement(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"log\";\n        var o = window.document.getElementById(i);\n        o && (e && (o.innerHTML = \"\"), o.innerHTML += \"<br>\".concat(t));\n      }\n    };\n    var Qo = /*#__PURE__*/function (_t$Evented10) {\n      _inherits(Qo, _t$Evented10);\n      var _super133 = _createSuper(Qo);\n      function Qo(e, i) {\n        var _this90;\n        _classCallCheck(this, Qo);\n        _this90 = _super133.call(this), _this90._moving = !1, _this90._zooming = !1, _this90.transform = e, _this90._bearingSnap = i.bearingSnap, t.bindAll([\"_renderFrameCallback\"], _assertThisInitialized(_this90));\n        return _this90;\n      }\n      _createClass(Qo, [{\n        key: \"getCenter\",\n        value: function getCenter() {\n          return new t.LngLat(this.transform.center.lng, this.transform.center.lat);\n        }\n      }, {\n        key: \"setCenter\",\n        value: function setCenter(t, e) {\n          return this.jumpTo({\n            center: t\n          }, e);\n        }\n      }, {\n        key: \"panBy\",\n        value: function panBy(e, i, o) {\n          return e = t.pointGeometry.convert(e).mult(-1), this.panTo(this.transform.center, t.extend({\n            offset: e\n          }, i), o);\n        }\n      }, {\n        key: \"panTo\",\n        value: function panTo(e, i, o) {\n          return this.easeTo(t.extend({\n            center: e\n          }, i), o);\n        }\n      }, {\n        key: \"getZoom\",\n        value: function getZoom() {\n          return this.transform.zoom;\n        }\n      }, {\n        key: \"setZoom\",\n        value: function setZoom(t, e) {\n          return this.jumpTo({\n            zoom: t\n          }, e), this;\n        }\n      }, {\n        key: \"zoomTo\",\n        value: function zoomTo(e, i, o) {\n          return this.easeTo(t.extend({\n            zoom: e\n          }, i), o);\n        }\n      }, {\n        key: \"zoomIn\",\n        value: function zoomIn(t, e) {\n          return this.zoomTo(this.getZoom() + 1, t, e), this;\n        }\n      }, {\n        key: \"zoomOut\",\n        value: function zoomOut(t, e) {\n          return this.zoomTo(this.getZoom() - 1, t, e), this;\n        }\n      }, {\n        key: \"getBearing\",\n        value: function getBearing() {\n          return this.transform.bearing;\n        }\n      }, {\n        key: \"setBearing\",\n        value: function setBearing(t, e) {\n          return this.jumpTo({\n            bearing: t\n          }, e), this;\n        }\n      }, {\n        key: \"getPadding\",\n        value: function getPadding() {\n          return this.transform.padding;\n        }\n      }, {\n        key: \"setPadding\",\n        value: function setPadding(t, e) {\n          return this.jumpTo({\n            padding: t\n          }, e), this;\n        }\n      }, {\n        key: \"rotateTo\",\n        value: function rotateTo(e, i, o) {\n          return this.easeTo(t.extend({\n            bearing: e\n          }, i), o);\n        }\n      }, {\n        key: \"resetNorth\",\n        value: function resetNorth(e, i) {\n          return this.rotateTo(0, t.extend({\n            duration: 1e3\n          }, e), i), this;\n        }\n      }, {\n        key: \"resetNorthPitch\",\n        value: function resetNorthPitch(e, i) {\n          return this.easeTo(t.extend({\n            bearing: 0,\n            pitch: 0,\n            duration: 1e3\n          }, e), i), this;\n        }\n      }, {\n        key: \"snapToNorth\",\n        value: function snapToNorth(t, e) {\n          return Math.abs(this.getBearing()) < this._bearingSnap ? this.resetNorth(t, e) : this;\n        }\n      }, {\n        key: \"getPitch\",\n        value: function getPitch() {\n          return this.transform.pitch;\n        }\n      }, {\n        key: \"setPitch\",\n        value: function setPitch(t, e) {\n          return this.jumpTo({\n            pitch: t\n          }, e), this;\n        }\n      }, {\n        key: \"cameraForBounds\",\n        value: function cameraForBounds(e, i) {\n          e = t.LngLatBounds.convert(e);\n          var o = i && i.bearing || 0;\n          return this._cameraForBoxAndBearing(e.getNorthWest(), e.getSouthEast(), o, i);\n        }\n      }, {\n        key: \"_cameraForBoxAndBearing\",\n        value: function _cameraForBoxAndBearing(e, i, o, a) {\n          var r = {\n            top: 0,\n            bottom: 0,\n            right: 0,\n            left: 0\n          };\n          if (\"number\" == typeof (a = t.extend({\n            padding: r,\n            offset: [0, 0],\n            maxZoom: this.transform.maxZoom\n          }, a)).padding) {\n            var _t388 = a.padding;\n            a.padding = {\n              top: _t388,\n              bottom: _t388,\n              right: _t388,\n              left: _t388\n            };\n          }\n          a.padding = t.extend(r, a.padding);\n          var s = this.transform,\n            n = s.padding,\n            l = s.project(t.LngLat.convert(e)),\n            c = s.project(t.LngLat.convert(i)),\n            h = l.rotate(-o * Math.PI / 180),\n            u = c.rotate(-o * Math.PI / 180),\n            d = new t.pointGeometry(Math.max(h.x, u.x), Math.max(h.y, u.y)),\n            m = new t.pointGeometry(Math.min(h.x, u.x), Math.min(h.y, u.y)),\n            _ = d.sub(m),\n            p = (s.width - (n.left + n.right + a.padding.left + a.padding.right)) / _.x,\n            f = (s.height - (n.top + n.bottom + a.padding.top + a.padding.bottom)) / _.y;\n          if (f < 0 || p < 0) return void t.warnOnce(\"Map cannot fit within canvas with the given bounds, padding, and/or offset.\");\n          var g = Math.min(s.scaleZoom(s.scale * Math.min(p, f)), a.maxZoom),\n            x = t.pointGeometry.convert(a.offset),\n            v = new t.pointGeometry((a.padding.left - a.padding.right) / 2, (a.padding.top - a.padding.bottom) / 2).rotate(o * Math.PI / 180),\n            y = x.add(v).mult(s.scale / s.zoomScale(g));\n          return {\n            center: s.unproject(l.add(c).div(2).sub(y)),\n            zoom: g,\n            bearing: o\n          };\n        }\n      }, {\n        key: \"fitBounds\",\n        value: function fitBounds(t, e, i) {\n          return this._fitInternal(this.cameraForBounds(t, e), e, i);\n        }\n      }, {\n        key: \"fitScreenCoordinates\",\n        value: function fitScreenCoordinates(e, i, o, a, r) {\n          return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.pointGeometry.convert(e)), this.transform.pointLocation(t.pointGeometry.convert(i)), o, a), a, r);\n        }\n      }, {\n        key: \"_fitInternal\",\n        value: function _fitInternal(e, i, o) {\n          return e ? (delete (i = t.extend(e, i)).padding, i.linear ? this.easeTo(i, o) : this.flyTo(i, o)) : this;\n        }\n      }, {\n        key: \"jumpTo\",\n        value: function jumpTo(e, i) {\n          this.stop();\n          var o = this.transform;\n          var a = !1,\n            r = !1,\n            s = !1;\n          return \"zoom\" in e && o.zoom !== +e.zoom && (a = !0, o.zoom = +e.zoom), void 0 !== e.center && (o.center = t.LngLat.convert(e.center)), \"bearing\" in e && o.bearing !== +e.bearing && (r = !0, o.bearing = +e.bearing), \"pitch\" in e && o.pitch !== +e.pitch && (s = !0, o.pitch = +e.pitch), null == e.padding || o.isPaddingEqual(e.padding) || (o.padding = e.padding), this.fire(new t.Event(\"movestart\", i)).fire(new t.Event(\"move\", i)), a && this.fire(new t.Event(\"zoomstart\", i)).fire(new t.Event(\"zoom\", i)).fire(new t.Event(\"zoomend\", i)), r && this.fire(new t.Event(\"rotatestart\", i)).fire(new t.Event(\"rotate\", i)).fire(new t.Event(\"rotateend\", i)), s && this.fire(new t.Event(\"pitchstart\", i)).fire(new t.Event(\"pitch\", i)).fire(new t.Event(\"pitchend\", i)), this.fire(new t.Event(\"moveend\", i));\n        }\n      }, {\n        key: \"calculateCameraOptionsFromTo\",\n        value: function calculateCameraOptionsFromTo(e, i, o) {\n          var a = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n          var r = t.MercatorCoordinate.fromLngLat(e, i),\n            s = t.MercatorCoordinate.fromLngLat(o, a),\n            n = s.x - r.x,\n            l = s.y - r.y,\n            c = s.z - r.z,\n            h = Math.hypot(n, l, c);\n          if (0 === h) throw new Error(\"Can't calculate camera options with same From and To\");\n          var u = Math.hypot(n, l),\n            d = this.transform.scaleZoom(this.transform.cameraToCenterDistance / h / this.transform.tileSize),\n            m = 180 * Math.atan2(n, -l) / Math.PI;\n          var _ = 180 * Math.acos(u / h) / Math.PI;\n          return _ = c < 0 ? 90 - _ : 90 + _, {\n            center: s.toLngLat(),\n            zoom: d,\n            pitch: _,\n            bearing: m\n          };\n        }\n      }, {\n        key: \"easeTo\",\n        value: function easeTo(e, i) {\n          var _this91 = this;\n          this._stop(!1, e.easeId), (!1 === (e = t.extend({\n            offset: [0, 0],\n            duration: 500,\n            easing: t.ease\n          }, e)).animate || !e.essential && t.exported.prefersReducedMotion) && (e.duration = 0);\n          var o = this.transform,\n            a = this.getZoom(),\n            r = this.getBearing(),\n            s = this.getPitch(),\n            n = this.getPadding(),\n            l = \"zoom\" in e ? +e.zoom : a,\n            c = \"bearing\" in e ? this._normalizeBearing(e.bearing, r) : r,\n            h = \"pitch\" in e ? +e.pitch : s,\n            u = \"padding\" in e ? e.padding : o.padding,\n            d = t.pointGeometry.convert(e.offset);\n          var m = o.centerPoint.add(d);\n          var _ = o.pointLocation(m),\n            p = t.LngLat.convert(e.center || _);\n          this._normalizeCenter(p);\n          var f = o.project(_),\n            g = o.project(p).sub(f),\n            x = o.zoomScale(l - a);\n          var v, y;\n          e.around && (v = t.LngLat.convert(e.around), y = o.locationPoint(v));\n          var b = {\n            moving: this._moving,\n            zooming: this._zooming,\n            rotating: this._rotating,\n            pitching: this._pitching\n          };\n          return this._zooming = this._zooming || l !== a, this._rotating = this._rotating || r !== c, this._pitching = this._pitching || h !== s, this._padding = !o.isPaddingEqual(u), this._easeId = e.easeId, this._prepareEase(i, e.noMoveStart, b), this._ease(function (e) {\n            if (_this91._zooming && (o.zoom = t.number(a, l, e)), _this91._rotating && (o.bearing = t.number(r, c, e)), _this91._pitching && (o.pitch = t.number(s, h, e)), _this91._padding && (o.interpolatePadding(n, u, e), m = o.centerPoint.add(d)), v) o.setLocationAtPoint(v, y);else {\n              var _t389 = o.zoomScale(o.zoom - a),\n                _i264 = l > a ? Math.min(2, x) : Math.max(.5, x),\n                _r205 = Math.pow(_i264, 1 - e),\n                _s114 = o.unproject(f.add(g.mult(e * _r205)).mult(_t389));\n              o.setLocationAtPoint(o.renderWorldCopies ? _s114.wrap() : _s114, m);\n            }\n            _this91._fireMoveEvents(i);\n          }, function (t) {\n            _this91._afterEase(i, t);\n          }, e), this;\n        }\n      }, {\n        key: \"_prepareEase\",\n        value: function _prepareEase(e, i) {\n          var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          this._moving = !0, this.fire(new t.Event(\"freezeElevation\", {\n            freeze: !0\n          })), i || o.moving || this.fire(new t.Event(\"movestart\", e)), this._zooming && !o.zooming && this.fire(new t.Event(\"zoomstart\", e)), this._rotating && !o.rotating && this.fire(new t.Event(\"rotatestart\", e)), this._pitching && !o.pitching && this.fire(new t.Event(\"pitchstart\", e));\n        }\n      }, {\n        key: \"_fireMoveEvents\",\n        value: function _fireMoveEvents(e) {\n          this.fire(new t.Event(\"move\", e)), this._zooming && this.fire(new t.Event(\"zoom\", e)), this._rotating && this.fire(new t.Event(\"rotate\", e)), this._pitching && this.fire(new t.Event(\"pitch\", e));\n        }\n      }, {\n        key: \"_afterEase\",\n        value: function _afterEase(e, i) {\n          if (this._easeId && i && this._easeId === i) return;\n          delete this._easeId, this.fire(new t.Event(\"freezeElevation\", {\n            freeze: !1\n          }));\n          var o = this._zooming,\n            a = this._rotating,\n            r = this._pitching;\n          this._moving = !1, this._zooming = !1, this._rotating = !1, this._pitching = !1, this._padding = !1, o && this.fire(new t.Event(\"zoomend\", e)), a && this.fire(new t.Event(\"rotateend\", e)), r && this.fire(new t.Event(\"pitchend\", e)), this.fire(new t.Event(\"moveend\", e));\n        }\n      }, {\n        key: \"flyTo\",\n        value: function flyTo(e, i) {\n          var _this92 = this;\n          if (!e.essential && t.exported.prefersReducedMotion) {\n            var _o136 = t.pick(e, [\"center\", \"zoom\", \"bearing\", \"pitch\", \"around\"]);\n            return this.jumpTo(_o136, i);\n          }\n          this.stop(), e = t.extend({\n            offset: [0, 0],\n            speed: 1.2,\n            curve: 1.42,\n            easing: t.ease\n          }, e);\n          var o = this.transform,\n            a = this.getZoom(),\n            r = this.getBearing(),\n            s = this.getPitch(),\n            n = this.getPadding(),\n            l = \"zoom\" in e ? t.clamp(+e.zoom, o.minZoom, o.maxZoom) : a,\n            c = \"bearing\" in e ? this._normalizeBearing(e.bearing, r) : r,\n            h = \"pitch\" in e ? +e.pitch : s,\n            u = \"padding\" in e ? e.padding : o.padding,\n            d = o.zoomScale(l - a),\n            m = t.pointGeometry.convert(e.offset);\n          var _ = o.centerPoint.add(m);\n          var p = o.pointLocation(_),\n            f = t.LngLat.convert(e.center || p);\n          this._normalizeCenter(f);\n          var g = o.project(p),\n            x = o.project(f).sub(g);\n          var v = e.curve;\n          var y = Math.max(o.width, o.height),\n            b = y / d,\n            w = x.mag();\n          if (\"minZoom\" in e) {\n            var _i265 = t.clamp(Math.min(e.minZoom, a, l), o.minZoom, o.maxZoom),\n              _r206 = y / o.zoomScale(_i265 - a);\n            v = Math.sqrt(_r206 / w * 2);\n          }\n          var T = v * v;\n          function E(t) {\n            var e = (b * b - y * y + (t ? -1 : 1) * T * T * w * w) / (2 * (t ? b : y) * T * w);\n            return Math.log(Math.sqrt(e * e + 1) - e);\n          }\n          function I(t) {\n            return (Math.exp(t) - Math.exp(-t)) / 2;\n          }\n          function C(t) {\n            return (Math.exp(t) + Math.exp(-t)) / 2;\n          }\n          var S = E(0);\n          var D = function D(t) {\n              return C(S) / C(S + v * t);\n            },\n            z = function z(t) {\n              return y * ((C(S) * (I(e = S + v * t) / C(e)) - I(S)) / T) / w;\n              var e;\n            },\n            P = (E(1) - S) / v;\n          if (Math.abs(w) < 1e-6 || !isFinite(P)) {\n            if (Math.abs(y - b) < 1e-6) return this.easeTo(e, i);\n            var _t390 = b < y ? -1 : 1;\n            P = Math.abs(Math.log(b / y)) / v, z = function z() {\n              return 0;\n            }, D = function D(e) {\n              return Math.exp(_t390 * v * e);\n            };\n          }\n          return e.duration = \"duration\" in e ? +e.duration : 1e3 * P / (\"screenSpeed\" in e ? +e.screenSpeed / v : +e.speed), e.maxDuration && e.duration > e.maxDuration && (e.duration = 0), this._zooming = !0, this._rotating = r !== c, this._pitching = h !== s, this._padding = !o.isPaddingEqual(u), this._prepareEase(i, !1), this._ease(function (e) {\n            var d = e * P,\n              p = 1 / D(d);\n            o.zoom = 1 === e ? l : a + o.scaleZoom(p), _this92._rotating && (o.bearing = t.number(r, c, e)), _this92._pitching && (o.pitch = t.number(s, h, e)), _this92._padding && (o.interpolatePadding(n, u, e), _ = o.centerPoint.add(m));\n            var v = 1 === e ? f : o.unproject(g.add(x.mult(z(d))).mult(p));\n            o.setLocationAtPoint(o.renderWorldCopies ? v.wrap() : v, _), _this92._fireMoveEvents(i);\n          }, function () {\n            return _this92._afterEase(i);\n          }, e), this;\n        }\n      }, {\n        key: \"isEasing\",\n        value: function isEasing() {\n          return !!this._easeFrameId;\n        }\n      }, {\n        key: \"stop\",\n        value: function stop() {\n          return this._stop();\n        }\n      }, {\n        key: \"_stop\",\n        value: function _stop(t, e) {\n          if (this._easeFrameId && (this._cancelRenderFrame(this._easeFrameId), delete this._easeFrameId, delete this._onEaseFrame), this._onEaseEnd) {\n            var _t391 = this._onEaseEnd;\n            delete this._onEaseEnd, _t391.call(this, e);\n          }\n          if (!t) {\n            var _t392 = this.handlers;\n            _t392 && _t392.stop(!1);\n          }\n          return this;\n        }\n      }, {\n        key: \"_ease\",\n        value: function _ease(e, i, o) {\n          !1 === o.animate || 0 === o.duration ? (e(1), i()) : (this._easeStart = t.exported.now(), this._easeOptions = o, this._onEaseFrame = e, this._onEaseEnd = i, this._easeFrameId = this._requestRenderFrame(this._renderFrameCallback));\n        }\n      }, {\n        key: \"_renderFrameCallback\",\n        value: function _renderFrameCallback() {\n          var e = Math.min((t.exported.now() - this._easeStart) / this._easeOptions.duration, 1);\n          this._onEaseFrame(this._easeOptions.easing(e)), e < 1 ? this._easeFrameId = this._requestRenderFrame(this._renderFrameCallback) : this.stop();\n        }\n      }, {\n        key: \"_normalizeBearing\",\n        value: function _normalizeBearing(e, i) {\n          e = t.wrap(e, -180, 180);\n          var o = Math.abs(e - i);\n          return Math.abs(e - 360 - i) < o && (e -= 360), Math.abs(e + 360 - i) < o && (e += 360), e;\n        }\n      }, {\n        key: \"_normalizeCenter\",\n        value: function _normalizeCenter(t) {\n          var e = this.transform;\n          if (!e.renderWorldCopies || e.lngRange) return;\n          var i = t.lng - e.center.lng;\n          t.lng += i > 180 ? -360 : i < -180 ? 360 : 0;\n        }\n      }]);\n      return Qo;\n    }(t.Evented);\n    var ta = /*#__PURE__*/function () {\n      function ta() {\n        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        _classCallCheck(this, ta);\n        this.options = e, t.bindAll([\"_toggleAttribution\", \"_updateData\", \"_updateCompact\", \"_updateCompactMinimize\"], this);\n      }\n      _createClass(ta, [{\n        key: \"getDefaultPosition\",\n        value: function getDefaultPosition() {\n          return \"bottom-right\";\n        }\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          return this._map = t, this._compact = this.options && this.options.compact, this._container = r.create(\"details\", \"maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib\"), this._compactButton = r.create(\"summary\", \"maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button\", this._container), this._compactButton.addEventListener(\"click\", this._toggleAttribution), this._setElementTitle(this._compactButton, \"ToggleAttribution\"), this._innerContainer = r.create(\"div\", \"maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner\", this._container), this._updateAttributions(), this._updateCompact(), this._map.on(\"styledata\", this._updateData), this._map.on(\"sourcedata\", this._updateData), this._map.on(\"terrain\", this._updateData), this._map.on(\"resize\", this._updateCompact), this._map.on(\"drag\", this._updateCompactMinimize), this._container;\n        }\n      }, {\n        key: \"onRemove\",\n        value: function onRemove() {\n          r.remove(this._container), this._map.off(\"styledata\", this._updateData), this._map.off(\"sourcedata\", this._updateData), this._map.off(\"terrain\", this._updateData), this._map.off(\"resize\", this._updateCompact), this._map.off(\"drag\", this._updateCompactMinimize), this._map = void 0, this._compact = void 0, this._attribHTML = void 0;\n        }\n      }, {\n        key: \"_setElementTitle\",\n        value: function _setElementTitle(t, e) {\n          var i = this._map._getUIString(\"AttributionControl.\".concat(e));\n          t.title = i, t.setAttribute(\"aria-label\", i);\n        }\n      }, {\n        key: \"_toggleAttribution\",\n        value: function _toggleAttribution() {\n          this._container.classList.contains(\"maplibregl-compact\") && (this._container.classList.contains(\"maplibregl-compact-show\") ? (this._container.setAttribute(\"open\", \"\"), this._container.classList.remove(\"maplibregl-compact-show\", \"mapboxgl-compact-show\")) : (this._container.classList.add(\"maplibregl-compact-show\", \"mapboxgl-compact-show\"), this._container.removeAttribute(\"open\")));\n        }\n      }, {\n        key: \"_updateData\",\n        value: function _updateData(t) {\n          !t || \"metadata\" !== t.sourceDataType && \"visibility\" !== t.sourceDataType && \"style\" !== t.dataType && \"terrain\" !== t.type || this._updateAttributions();\n        }\n      }, {\n        key: \"_updateAttributions\",\n        value: function _updateAttributions() {\n          if (!this._map.style) return;\n          var t = [];\n          if (this.options.customAttribution && (Array.isArray(this.options.customAttribution) ? t = t.concat(this.options.customAttribution.map(function (t) {\n            return \"string\" != typeof t ? \"\" : t;\n          })) : \"string\" == typeof this.options.customAttribution && t.push(this.options.customAttribution)), this._map.style.stylesheet) {\n            var _t393 = this._map.style.stylesheet;\n            this.styleOwner = _t393.owner, this.styleId = _t393.id;\n          }\n          var e = this._map.style.sourceCaches;\n          for (var _i266 in e) {\n            var _o137 = e[_i266];\n            if (_o137.used || _o137.usedForTerrain) {\n              var _e317 = _o137.getSource();\n              _e317.attribution && t.indexOf(_e317.attribution) < 0 && t.push(_e317.attribution);\n            }\n          }\n          t = t.filter(function (t) {\n            return String(t).trim();\n          }), t.sort(function (t, e) {\n            return t.length - e.length;\n          }), t = t.filter(function (e, i) {\n            for (var _o138 = i + 1; _o138 < t.length; _o138++) if (t[_o138].indexOf(e) >= 0) return !1;\n            return !0;\n          });\n          var i = t.join(\" | \");\n          i !== this._attribHTML && (this._attribHTML = i, t.length ? (this._innerContainer.innerHTML = i, this._container.classList.remove(\"maplibregl-attrib-empty\", \"mapboxgl-attrib-empty\")) : this._container.classList.add(\"maplibregl-attrib-empty\", \"mapboxgl-attrib-empty\"), this._updateCompact(), this._editLink = null);\n        }\n      }, {\n        key: \"_updateCompact\",\n        value: function _updateCompact() {\n          this._map.getCanvasContainer().offsetWidth <= 640 || this._compact ? !1 === this._compact ? this._container.setAttribute(\"open\", \"\") : this._container.classList.contains(\"maplibregl-compact\") || this._container.classList.contains(\"maplibregl-attrib-empty\") || (this._container.setAttribute(\"open\", \"\"), this._container.classList.add(\"maplibregl-compact\", \"mapboxgl-compact\", \"maplibregl-compact-show\", \"mapboxgl-compact-show\")) : (this._container.setAttribute(\"open\", \"\"), this._container.classList.contains(\"maplibregl-compact\") && this._container.classList.remove(\"maplibregl-compact\", \"maplibregl-compact-show\", \"mapboxgl-compact\", \"mapboxgl-compact-show\"));\n        }\n      }, {\n        key: \"_updateCompactMinimize\",\n        value: function _updateCompactMinimize() {\n          this._container.classList.contains(\"maplibregl-compact\") && this._container.classList.contains(\"maplibregl-compact-show\") && this._container.classList.remove(\"maplibregl-compact-show\", \"mapboxgl-compact-show\");\n        }\n      }]);\n      return ta;\n    }();\n    var ea = /*#__PURE__*/function () {\n      function ea() {\n        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        _classCallCheck(this, ea);\n        this.options = e, t.bindAll([\"_updateCompact\"], this);\n      }\n      _createClass(ea, [{\n        key: \"getDefaultPosition\",\n        value: function getDefaultPosition() {\n          return \"bottom-left\";\n        }\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          this._map = t, this._compact = this.options && this.options.compact, this._container = r.create(\"div\", \"maplibregl-ctrl mapboxgl-ctrl\");\n          var e = r.create(\"a\", \"maplibregl-ctrl-logo mapboxgl-ctrl-logo\");\n          return e.target = \"_blank\", e.rel = \"noopener nofollow\", e.href = \"https://maplibre.org/\", e.setAttribute(\"aria-label\", this._map._getUIString(\"LogoControl.Title\")), e.setAttribute(\"rel\", \"noopener nofollow\"), this._container.appendChild(e), this._container.style.display = \"block\", this._map.on(\"resize\", this._updateCompact), this._updateCompact(), this._container;\n        }\n      }, {\n        key: \"onRemove\",\n        value: function onRemove() {\n          r.remove(this._container), this._map.off(\"resize\", this._updateCompact), this._map = void 0, this._compact = void 0;\n        }\n      }, {\n        key: \"_updateCompact\",\n        value: function _updateCompact() {\n          var t = this._container.children;\n          if (t.length) {\n            var _e318 = t[0];\n            this._map.getCanvasContainer().offsetWidth <= 640 || this._compact ? !1 !== this._compact && _e318.classList.add(\"maplibregl-compact\", \"mapboxgl-compact\") : _e318.classList.remove(\"maplibregl-compact\", \"mapboxgl-compact\");\n          }\n        }\n      }]);\n      return ea;\n    }();\n    var ia = /*#__PURE__*/function () {\n      function ia() {\n        _classCallCheck(this, ia);\n        this._queue = [], this._id = 0, this._cleared = !1, this._currentlyRunning = !1;\n      }\n      _createClass(ia, [{\n        key: \"add\",\n        value: function add(t) {\n          var e = ++this._id;\n          return this._queue.push({\n            callback: t,\n            id: e,\n            cancelled: !1\n          }), e;\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(t) {\n          var e = this._currentlyRunning,\n            i = e ? this._queue.concat(e) : this._queue;\n          var _iterator224 = _createForOfIteratorHelper(i),\n            _step224;\n          try {\n            for (_iterator224.s(); !(_step224 = _iterator224.n()).done;) {\n              var _e319 = _step224.value;\n              if (_e319.id === t) return void (_e319.cancelled = !0);\n            }\n          } catch (err) {\n            _iterator224.e(err);\n          } finally {\n            _iterator224.f();\n          }\n        }\n      }, {\n        key: \"run\",\n        value: function run() {\n          var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          if (this._currentlyRunning) throw new Error(\"Attempting to run(), but is already running.\");\n          var e = this._currentlyRunning = this._queue;\n          this._queue = [];\n          var _iterator225 = _createForOfIteratorHelper(e),\n            _step225;\n          try {\n            for (_iterator225.s(); !(_step225 = _iterator225.n()).done;) {\n              var _i267 = _step225.value;\n              if (!_i267.cancelled && (_i267.callback(t), this._cleared)) break;\n            }\n          } catch (err) {\n            _iterator225.e(err);\n          } finally {\n            _iterator225.f();\n          }\n          this._cleared = !1, this._currentlyRunning = !1;\n        }\n      }, {\n        key: \"clear\",\n        value: function clear() {\n          this._currentlyRunning && (this._cleared = !0), this._queue = [];\n        }\n      }]);\n      return ia;\n    }();\n    var oa = {\n        \"AttributionControl.ToggleAttribution\": \"Toggle attribution\",\n        \"AttributionControl.MapFeedback\": \"Map feedback\",\n        \"FullscreenControl.Enter\": \"Enter fullscreen\",\n        \"FullscreenControl.Exit\": \"Exit fullscreen\",\n        \"GeolocateControl.FindMyLocation\": \"Find my location\",\n        \"GeolocateControl.LocationNotAvailable\": \"Location not available\",\n        \"LogoControl.Title\": \"Mapbox logo\",\n        \"NavigationControl.ResetBearing\": \"Reset bearing to north\",\n        \"NavigationControl.ZoomIn\": \"Zoom in\",\n        \"NavigationControl.ZoomOut\": \"Zoom out\",\n        \"ScaleControl.Feet\": \"ft\",\n        \"ScaleControl.Meters\": \"m\",\n        \"ScaleControl.Kilometers\": \"km\",\n        \"ScaleControl.Miles\": \"mi\",\n        \"ScaleControl.NauticalMiles\": \"nm\",\n        \"TerrainControl.enableTerrain\": \"Enable terrain\",\n        \"TerrainControl.disableTerrain\": \"Disable terrain\"\n      },\n      aa = {\n        center: [0, 0],\n        zoom: 0,\n        bearing: 0,\n        pitch: 0,\n        minZoom: -2,\n        maxZoom: 22,\n        minPitch: 0,\n        maxPitch: 60,\n        interactive: !0,\n        scrollZoom: !0,\n        boxZoom: !0,\n        dragRotate: !0,\n        dragPan: !0,\n        keyboard: !0,\n        doubleClickZoom: !0,\n        touchZoomRotate: !0,\n        touchPitch: !0,\n        cooperativeGestures: void 0,\n        bearingSnap: 7,\n        clickTolerance: 3,\n        pitchWithRotate: !0,\n        hash: !1,\n        attributionControl: !0,\n        maplibreLogo: !1,\n        failIfMajorPerformanceCaveat: !1,\n        preserveDrawingBuffer: !1,\n        trackResize: !0,\n        renderWorldCopies: !0,\n        refreshExpiredTiles: !0,\n        maxTileCacheSize: null,\n        localIdeographFontFamily: \"sans-serif\",\n        transformRequest: null,\n        fadeDuration: 300,\n        crossSourceCollisions: !0\n      },\n      ra = {\n        showCompass: !0,\n        showZoom: !0,\n        visualizePitch: !1\n      };\n    var sa = /*#__PURE__*/function () {\n      function sa(e, i) {\n        var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n        _classCallCheck(this, sa);\n        this._clickTolerance = 10, this.element = i, this.mouseRotate = new Co({\n          clickTolerance: e.dragRotate._mouseRotate._clickTolerance\n        }), this.map = e, o && (this.mousePitch = new So({\n          clickTolerance: e.dragRotate._mousePitch._clickTolerance\n        })), t.bindAll([\"mousedown\", \"mousemove\", \"mouseup\", \"touchstart\", \"touchmove\", \"touchend\", \"reset\"], this), r.addEventListener(i, \"mousedown\", this.mousedown), r.addEventListener(i, \"touchstart\", this.touchstart, {\n          passive: !1\n        }), r.addEventListener(i, \"touchmove\", this.touchmove), r.addEventListener(i, \"touchend\", this.touchend), r.addEventListener(i, \"touchcancel\", this.reset);\n      }\n      _createClass(sa, [{\n        key: \"down\",\n        value: function down(t, e) {\n          this.mouseRotate.mousedown(t, e), this.mousePitch && this.mousePitch.mousedown(t, e), r.disableDrag();\n        }\n      }, {\n        key: \"move\",\n        value: function move(t, e) {\n          var i = this.map,\n            o = this.mouseRotate.mousemoveWindow(t, e);\n          if (o && o.bearingDelta && i.setBearing(i.getBearing() + o.bearingDelta), this.mousePitch) {\n            var _o139 = this.mousePitch.mousemoveWindow(t, e);\n            _o139 && _o139.pitchDelta && i.setPitch(i.getPitch() + _o139.pitchDelta);\n          }\n        }\n      }, {\n        key: \"off\",\n        value: function off() {\n          var t = this.element;\n          r.removeEventListener(t, \"mousedown\", this.mousedown), r.removeEventListener(t, \"touchstart\", this.touchstart, {\n            passive: !1\n          }), r.removeEventListener(t, \"touchmove\", this.touchmove), r.removeEventListener(t, \"touchend\", this.touchend), r.removeEventListener(t, \"touchcancel\", this.reset), this.offTemp();\n        }\n      }, {\n        key: \"offTemp\",\n        value: function offTemp() {\n          r.enableDrag(), r.removeEventListener(window, \"mousemove\", this.mousemove), r.removeEventListener(window, \"mouseup\", this.mouseup);\n        }\n      }, {\n        key: \"mousedown\",\n        value: function mousedown(e) {\n          this.down(t.extend({}, e, {\n            ctrlKey: !0,\n            preventDefault: function preventDefault() {\n              return e.preventDefault();\n            }\n          }), r.mousePos(this.element, e)), r.addEventListener(window, \"mousemove\", this.mousemove), r.addEventListener(window, \"mouseup\", this.mouseup);\n        }\n      }, {\n        key: \"mousemove\",\n        value: function mousemove(t) {\n          this.move(t, r.mousePos(this.element, t));\n        }\n      }, {\n        key: \"mouseup\",\n        value: function mouseup(t) {\n          this.mouseRotate.mouseupWindow(t), this.mousePitch && this.mousePitch.mouseupWindow(t), this.offTemp();\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(t) {\n          1 !== t.targetTouches.length ? this.reset() : (this._startPos = this._lastPos = r.touchPos(this.element, t.targetTouches)[0], this.down({\n            type: \"mousedown\",\n            button: 0,\n            ctrlKey: !0,\n            preventDefault: function preventDefault() {\n              return t.preventDefault();\n            }\n          }, this._startPos));\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(t) {\n          1 !== t.targetTouches.length ? this.reset() : (this._lastPos = r.touchPos(this.element, t.targetTouches)[0], this.move({\n            preventDefault: function preventDefault() {\n              return t.preventDefault();\n            }\n          }, this._lastPos));\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(t) {\n          0 === t.targetTouches.length && this._startPos && this._lastPos && this._startPos.dist(this._lastPos) < this._clickTolerance && this.element.click(), this.reset();\n        }\n      }, {\n        key: \"reset\",\n        value: function reset() {\n          this.mouseRotate.reset(), this.mousePitch && this.mousePitch.reset(), delete this._startPos, delete this._lastPos, this.offTemp();\n        }\n      }]);\n      return sa;\n    }();\n    function na(e, i, o) {\n      if (e = new t.LngLat(e.lng, e.lat), i) {\n        var _a145 = new t.LngLat(e.lng - 360, e.lat),\n          _r207 = new t.LngLat(e.lng + 360, e.lat),\n          _s115 = o.locationPoint(e).distSqr(i);\n        o.locationPoint(_a145).distSqr(i) < _s115 ? e = _a145 : o.locationPoint(_r207).distSqr(i) < _s115 && (e = _r207);\n      }\n      for (; Math.abs(e.lng - o.center.lng) > 180;) {\n        var _t394 = o.locationPoint(e);\n        if (_t394.x >= 0 && _t394.y >= 0 && _t394.x <= o.width && _t394.y <= o.height) break;\n        e.lng > o.center.lng ? e.lng -= 360 : e.lng += 360;\n      }\n      return e;\n    }\n    var la = {\n      center: \"translate(-50%,-50%)\",\n      top: \"translate(-50%,0)\",\n      \"top-left\": \"translate(0,0)\",\n      \"top-right\": \"translate(-100%,0)\",\n      bottom: \"translate(-50%,-100%)\",\n      \"bottom-left\": \"translate(0,-100%)\",\n      \"bottom-right\": \"translate(-100%,-100%)\",\n      left: \"translate(0,-50%)\",\n      right: \"translate(-100%,-50%)\"\n    };\n    function ca(t, e, i) {\n      var o = t.classList;\n      for (var _t395 in la) o.remove(\"maplibregl-\".concat(i, \"-anchor-\").concat(_t395), \"mapboxgl-\".concat(i, \"-anchor-\").concat(_t395));\n      o.add(\"maplibregl-\".concat(i, \"-anchor-\").concat(e), \"mapboxgl-\".concat(i, \"-anchor-\").concat(e));\n    }\n    var ha = /*#__PURE__*/function (_t$Evented11) {\n      _inherits(ha, _t$Evented11);\n      var _super134 = _createSuper(ha);\n      function ha(e, i) {\n        var _this93;\n        _classCallCheck(this, ha);\n        if (_this93 = _super134.call(this), (e instanceof HTMLElement || i) && (e = t.extend({\n          element: e\n        }, i)), t.bindAll([\"_update\", \"_onMove\", \"_onUp\", \"_addDragHandler\", \"_onMapClick\", \"_onKeyPress\"], _assertThisInitialized(_this93)), _this93._anchor = e && e.anchor || \"center\", _this93._color = e && e.color || \"#3FB1CE\", _this93._scale = e && e.scale || 1, _this93._draggable = e && e.draggable || !1, _this93._clickTolerance = e && e.clickTolerance || 0, _this93._isDragging = !1, _this93._state = \"inactive\", _this93._rotation = e && e.rotation || 0, _this93._rotationAlignment = e && e.rotationAlignment || \"auto\", _this93._pitchAlignment = e && e.pitchAlignment && \"auto\" !== e.pitchAlignment ? e.pitchAlignment : _this93._rotationAlignment, e && e.element) _this93._element = e.element, _this93._offset = t.pointGeometry.convert(e && e.offset || [0, 0]);else {\n          _this93._defaultMarker = !0, _this93._element = r.create(\"div\"), _this93._element.setAttribute(\"aria-label\", \"Map marker\");\n          var _i268 = r.createNS(\"http://www.w3.org/2000/svg\", \"svg\"),\n            _o140 = 41,\n            _a146 = 27;\n          _i268.setAttributeNS(null, \"display\", \"block\"), _i268.setAttributeNS(null, \"height\", \"\".concat(_o140, \"px\")), _i268.setAttributeNS(null, \"width\", \"\".concat(_a146, \"px\")), _i268.setAttributeNS(null, \"viewBox\", \"0 0 \".concat(_a146, \" \").concat(_o140));\n          var _s116 = r.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n          _s116.setAttributeNS(null, \"stroke\", \"none\"), _s116.setAttributeNS(null, \"stroke-width\", \"1\"), _s116.setAttributeNS(null, \"fill\", \"none\"), _s116.setAttributeNS(null, \"fill-rule\", \"evenodd\");\n          var _n144 = r.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n          _n144.setAttributeNS(null, \"fill-rule\", \"nonzero\");\n          var _l63 = r.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n          _l63.setAttributeNS(null, \"transform\", \"translate(3.0, 29.0)\"), _l63.setAttributeNS(null, \"fill\", \"#000000\");\n          var _c41 = [{\n            rx: \"10.5\",\n            ry: \"5.25002273\"\n          }, {\n            rx: \"10.5\",\n            ry: \"5.25002273\"\n          }, {\n            rx: \"9.5\",\n            ry: \"4.77275007\"\n          }, {\n            rx: \"8.5\",\n            ry: \"4.29549936\"\n          }, {\n            rx: \"7.5\",\n            ry: \"3.81822308\"\n          }, {\n            rx: \"6.5\",\n            ry: \"3.34094679\"\n          }, {\n            rx: \"5.5\",\n            ry: \"2.86367051\"\n          }, {\n            rx: \"4.5\",\n            ry: \"2.38636864\"\n          }];\n          for (var _i269 = 0, _c42 = _c41; _i269 < _c42.length; _i269++) {\n            var _t396 = _c42[_i269];\n            var _e320 = r.createNS(\"http://www.w3.org/2000/svg\", \"ellipse\");\n            _e320.setAttributeNS(null, \"opacity\", \"0.04\"), _e320.setAttributeNS(null, \"cx\", \"10.5\"), _e320.setAttributeNS(null, \"cy\", \"5.80029008\"), _e320.setAttributeNS(null, \"rx\", _t396.rx), _e320.setAttributeNS(null, \"ry\", _t396.ry), _l63.appendChild(_e320);\n          }\n          var _h31 = r.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n          _h31.setAttributeNS(null, \"fill\", _this93._color);\n          var _u41 = r.createNS(\"http://www.w3.org/2000/svg\", \"path\");\n          _u41.setAttributeNS(null, \"d\", \"M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z\"), _h31.appendChild(_u41);\n          var _d23 = r.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n          _d23.setAttributeNS(null, \"opacity\", \"0.25\"), _d23.setAttributeNS(null, \"fill\", \"#000000\");\n          var _m20 = r.createNS(\"http://www.w3.org/2000/svg\", \"path\");\n          _m20.setAttributeNS(null, \"d\", \"M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z\"), _d23.appendChild(_m20);\n          var _18 = r.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n          _18.setAttributeNS(null, \"transform\", \"translate(6.0, 7.0)\"), _18.setAttributeNS(null, \"fill\", \"#FFFFFF\");\n          var _p18 = r.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n          _p18.setAttributeNS(null, \"transform\", \"translate(8.0, 8.0)\");\n          var _f18 = r.createNS(\"http://www.w3.org/2000/svg\", \"circle\");\n          _f18.setAttributeNS(null, \"fill\", \"#000000\"), _f18.setAttributeNS(null, \"opacity\", \"0.25\"), _f18.setAttributeNS(null, \"cx\", \"5.5\"), _f18.setAttributeNS(null, \"cy\", \"5.5\"), _f18.setAttributeNS(null, \"r\", \"5.4999962\");\n          var _g19 = r.createNS(\"http://www.w3.org/2000/svg\", \"circle\");\n          _g19.setAttributeNS(null, \"fill\", \"#FFFFFF\"), _g19.setAttributeNS(null, \"cx\", \"5.5\"), _g19.setAttributeNS(null, \"cy\", \"5.5\"), _g19.setAttributeNS(null, \"r\", \"5.4999962\"), _p18.appendChild(_f18), _p18.appendChild(_g19), _n144.appendChild(_l63), _n144.appendChild(_h31), _n144.appendChild(_d23), _n144.appendChild(_18), _n144.appendChild(_p18), _i268.appendChild(_n144), _i268.setAttributeNS(null, \"height\", _o140 * _this93._scale + \"px\"), _i268.setAttributeNS(null, \"width\", _a146 * _this93._scale + \"px\"), _this93._element.appendChild(_i268), _this93._offset = t.pointGeometry.convert(e && e.offset || [0, -14]);\n        }\n        _this93._element.classList.add(\"maplibregl-marker\", \"mapboxgl-marker\"), _this93._element.addEventListener(\"dragstart\", function (t) {\n          t.preventDefault();\n        }), _this93._element.addEventListener(\"mousedown\", function (t) {\n          t.preventDefault();\n        }), ca(_this93._element, _this93._anchor, \"marker\"), _this93._popup = null;\n        return _possibleConstructorReturn(_this93);\n      }\n      _createClass(ha, [{\n        key: \"addTo\",\n        value: function addTo(t) {\n          return this.remove(), this._map = t, t.getCanvasContainer().appendChild(this._element), t.on(\"move\", this._update), t.on(\"moveend\", this._update), this.setDraggable(this._draggable), this._update(), this._map.on(\"click\", this._onMapClick), this;\n        }\n      }, {\n        key: \"remove\",\n        value: function remove() {\n          return this._opacityTimeout && (clearTimeout(this._opacityTimeout), delete this._opacityTimeout), this._map && (this._map.off(\"click\", this._onMapClick), this._map.off(\"move\", this._update), this._map.off(\"moveend\", this._update), this._map.off(\"mousedown\", this._addDragHandler), this._map.off(\"touchstart\", this._addDragHandler), this._map.off(\"mouseup\", this._onUp), this._map.off(\"touchend\", this._onUp), this._map.off(\"mousemove\", this._onMove), this._map.off(\"touchmove\", this._onMove), delete this._map), r.remove(this._element), this._popup && this._popup.remove(), this;\n        }\n      }, {\n        key: \"getLngLat\",\n        value: function getLngLat() {\n          return this._lngLat;\n        }\n      }, {\n        key: \"setLngLat\",\n        value: function setLngLat(e) {\n          return this._lngLat = t.LngLat.convert(e), this._pos = null, this._popup && this._popup.setLngLat(this._lngLat), this._update(), this;\n        }\n      }, {\n        key: \"getElement\",\n        value: function getElement() {\n          return this._element;\n        }\n      }, {\n        key: \"setPopup\",\n        value: function setPopup(t) {\n          if (this._popup && (this._popup.remove(), this._popup = null, this._element.removeEventListener(\"keypress\", this._onKeyPress), this._originalTabIndex || this._element.removeAttribute(\"tabindex\")), t) {\n            if (!(\"offset\" in t.options)) {\n              var _e321 = 38.1,\n                _i270 = 13.5,\n                _o141 = Math.sqrt(Math.pow(_i270, 2) / 2);\n              t.options.offset = this._defaultMarker ? {\n                top: [0, 0],\n                \"top-left\": [0, 0],\n                \"top-right\": [0, 0],\n                bottom: [0, -_e321],\n                \"bottom-left\": [_o141, -1 * (_e321 - _i270 + _o141)],\n                \"bottom-right\": [-_o141, -1 * (_e321 - _i270 + _o141)],\n                left: [_i270, -1 * (_e321 - _i270)],\n                right: [-_i270, -1 * (_e321 - _i270)]\n              } : this._offset;\n            }\n            this._popup = t, this._lngLat && this._popup.setLngLat(this._lngLat), this._originalTabIndex = this._element.getAttribute(\"tabindex\"), this._originalTabIndex || this._element.setAttribute(\"tabindex\", \"0\"), this._element.addEventListener(\"keypress\", this._onKeyPress);\n          }\n          return this;\n        }\n      }, {\n        key: \"_onKeyPress\",\n        value: function _onKeyPress(t) {\n          var e = t.code,\n            i = t.charCode || t.keyCode;\n          \"Space\" !== e && \"Enter\" !== e && 32 !== i && 13 !== i || this.togglePopup();\n        }\n      }, {\n        key: \"_onMapClick\",\n        value: function _onMapClick(t) {\n          var e = t.originalEvent.target,\n            i = this._element;\n          this._popup && (e === i || i.contains(e)) && this.togglePopup();\n        }\n      }, {\n        key: \"getPopup\",\n        value: function getPopup() {\n          return this._popup;\n        }\n      }, {\n        key: \"togglePopup\",\n        value: function togglePopup() {\n          var t = this._popup;\n          return t ? (t.isOpen() ? t.remove() : t.addTo(this._map), this) : this;\n        }\n      }, {\n        key: \"_update\",\n        value: function _update(t) {\n          var _this94 = this;\n          if (!this._map) return;\n          this._map.transform.renderWorldCopies && (this._lngLat = na(this._lngLat, this._pos, this._map.transform)), this._pos = this._map.project(this._lngLat)._add(this._offset);\n          var e = \"\";\n          \"viewport\" === this._rotationAlignment || \"auto\" === this._rotationAlignment ? e = \"rotateZ(\".concat(this._rotation, \"deg)\") : \"map\" === this._rotationAlignment && (e = \"rotateZ(\".concat(this._rotation - this._map.getBearing(), \"deg)\"));\n          var i = \"\";\n          \"viewport\" === this._pitchAlignment || \"auto\" === this._pitchAlignment ? i = \"rotateX(0deg)\" : \"map\" === this._pitchAlignment && (i = \"rotateX(\".concat(this._map.getPitch(), \"deg)\")), t && \"moveend\" !== t.type || (this._pos = this._pos.round()), r.setTransform(this._element, \"\".concat(la[this._anchor], \" translate(\").concat(this._pos.x, \"px, \").concat(this._pos.y, \"px) \").concat(i, \" \").concat(e)), this._map.style && this._map.style.terrain && !this._opacityTimeout && (this._opacityTimeout = setTimeout(function () {\n            var t = _this94._map.unproject(_this94._pos),\n              e = 40075016.686 * Math.abs(Math.cos(_this94._lngLat.lat * Math.PI / 180)) / Math.pow(2, _this94._map.transform.tileZoom + 8);\n            _this94._element.style.opacity = t.distanceTo(_this94._lngLat) > 20 * e ? \"0.2\" : \"1.0\", _this94._opacityTimeout = null;\n          }, 100));\n        }\n      }, {\n        key: \"getOffset\",\n        value: function getOffset() {\n          return this._offset;\n        }\n      }, {\n        key: \"setOffset\",\n        value: function setOffset(e) {\n          return this._offset = t.pointGeometry.convert(e), this._update(), this;\n        }\n      }, {\n        key: \"_onMove\",\n        value: function _onMove(e) {\n          if (!this._isDragging) {\n            var _t397 = this._clickTolerance || this._map._clickTolerance;\n            this._isDragging = e.point.dist(this._pointerdownPos) >= _t397;\n          }\n          this._isDragging && (this._pos = e.point.sub(this._positionDelta), this._lngLat = this._map.unproject(this._pos), this.setLngLat(this._lngLat), this._element.style.pointerEvents = \"none\", \"pending\" === this._state && (this._state = \"active\", this.fire(new t.Event(\"dragstart\"))), this.fire(new t.Event(\"drag\")));\n        }\n      }, {\n        key: \"_onUp\",\n        value: function _onUp() {\n          this._element.style.pointerEvents = \"auto\", this._positionDelta = null, this._pointerdownPos = null, this._isDragging = !1, this._map.off(\"mousemove\", this._onMove), this._map.off(\"touchmove\", this._onMove), \"active\" === this._state && this.fire(new t.Event(\"dragend\")), this._state = \"inactive\";\n        }\n      }, {\n        key: \"_addDragHandler\",\n        value: function _addDragHandler(t) {\n          this._element.contains(t.originalEvent.target) && (t.preventDefault(), this._positionDelta = t.point.sub(this._pos).add(this._offset), this._pointerdownPos = t.point, this._state = \"pending\", this._map.on(\"mousemove\", this._onMove), this._map.on(\"touchmove\", this._onMove), this._map.once(\"mouseup\", this._onUp), this._map.once(\"touchend\", this._onUp));\n        }\n      }, {\n        key: \"setDraggable\",\n        value: function setDraggable(t) {\n          return this._draggable = !!t, this._map && (t ? (this._map.on(\"mousedown\", this._addDragHandler), this._map.on(\"touchstart\", this._addDragHandler)) : (this._map.off(\"mousedown\", this._addDragHandler), this._map.off(\"touchstart\", this._addDragHandler))), this;\n        }\n      }, {\n        key: \"isDraggable\",\n        value: function isDraggable() {\n          return this._draggable;\n        }\n      }, {\n        key: \"setRotation\",\n        value: function setRotation(t) {\n          return this._rotation = t || 0, this._update(), this;\n        }\n      }, {\n        key: \"getRotation\",\n        value: function getRotation() {\n          return this._rotation;\n        }\n      }, {\n        key: \"setRotationAlignment\",\n        value: function setRotationAlignment(t) {\n          return this._rotationAlignment = t || \"auto\", this._update(), this;\n        }\n      }, {\n        key: \"getRotationAlignment\",\n        value: function getRotationAlignment() {\n          return this._rotationAlignment;\n        }\n      }, {\n        key: \"setPitchAlignment\",\n        value: function setPitchAlignment(t) {\n          return this._pitchAlignment = t && \"auto\" !== t ? t : this._rotationAlignment, this._update(), this;\n        }\n      }, {\n        key: \"getPitchAlignment\",\n        value: function getPitchAlignment() {\n          return this._pitchAlignment;\n        }\n      }]);\n      return ha;\n    }(t.Evented);\n    var ua = {\n      positionOptions: {\n        enableHighAccuracy: !1,\n        maximumAge: 0,\n        timeout: 6e3\n      },\n      fitBoundsOptions: {\n        maxZoom: 15\n      },\n      trackUserLocation: !1,\n      showAccuracyCircle: !0,\n      showUserLocation: !0\n    };\n    var da,\n      ma = 0,\n      _a = !1;\n    var pa = {\n      maxWidth: 100,\n      unit: \"metric\"\n    };\n    function fa(t, e, i) {\n      var o = i && i.maxWidth || 100,\n        a = t._container.clientHeight / 2,\n        r = t.unproject([0, a]),\n        s = t.unproject([o, a]),\n        n = r.distanceTo(s);\n      if (i && \"imperial\" === i.unit) {\n        var _i271 = 3.2808 * n;\n        _i271 > 5280 ? ga(e, o, _i271 / 5280, t._getUIString(\"ScaleControl.Miles\")) : ga(e, o, _i271, t._getUIString(\"ScaleControl.Feet\"));\n      } else i && \"nautical\" === i.unit ? ga(e, o, n / 1852, t._getUIString(\"ScaleControl.NauticalMiles\")) : n >= 1e3 ? ga(e, o, n / 1e3, t._getUIString(\"ScaleControl.Kilometers\")) : ga(e, o, n, t._getUIString(\"ScaleControl.Meters\"));\n    }\n    function ga(t, e, i, o) {\n      var a = function (t) {\n        var e = Math.pow(10, \"\".concat(Math.floor(t)).length - 1);\n        var i = t / e;\n        return i = i >= 10 ? 10 : i >= 5 ? 5 : i >= 3 ? 3 : i >= 2 ? 2 : i >= 1 ? 1 : function (t) {\n          var e = Math.pow(10, Math.ceil(-Math.log(t) / Math.LN10));\n          return Math.round(t * e) / e;\n        }(i), e * i;\n      }(i);\n      t.style.width = e * (a / i) + \"px\", t.innerHTML = \"\".concat(a, \"&nbsp;\").concat(o);\n    }\n    var xa = {\n        closeButton: !0,\n        closeOnClick: !0,\n        focusAfterOpen: !0,\n        className: \"\",\n        maxWidth: \"240px\"\n      },\n      va = [\"a[href]\", \"[tabindex]:not([tabindex='-1'])\", \"[contenteditable]:not([contenteditable='false'])\", \"button:not([disabled])\", \"input:not([disabled])\", \"select:not([disabled])\", \"textarea:not([disabled])\"].join(\", \");\n    function ya(e) {\n      if (e) {\n        if (\"number\" == typeof e) {\n          var _i272 = Math.round(Math.sqrt(.5 * Math.pow(e, 2)));\n          return {\n            center: new t.pointGeometry(0, 0),\n            top: new t.pointGeometry(0, e),\n            \"top-left\": new t.pointGeometry(_i272, _i272),\n            \"top-right\": new t.pointGeometry(-_i272, _i272),\n            bottom: new t.pointGeometry(0, -e),\n            \"bottom-left\": new t.pointGeometry(_i272, -_i272),\n            \"bottom-right\": new t.pointGeometry(-_i272, -_i272),\n            left: new t.pointGeometry(e, 0),\n            right: new t.pointGeometry(-e, 0)\n          };\n        }\n        if (e instanceof t.pointGeometry || Array.isArray(e)) {\n          var _i273 = t.pointGeometry.convert(e);\n          return {\n            center: _i273,\n            top: _i273,\n            \"top-left\": _i273,\n            \"top-right\": _i273,\n            bottom: _i273,\n            \"bottom-left\": _i273,\n            \"bottom-right\": _i273,\n            left: _i273,\n            right: _i273\n          };\n        }\n        return {\n          center: t.pointGeometry.convert(e.center || [0, 0]),\n          top: t.pointGeometry.convert(e.top || [0, 0]),\n          \"top-left\": t.pointGeometry.convert(e[\"top-left\"] || [0, 0]),\n          \"top-right\": t.pointGeometry.convert(e[\"top-right\"] || [0, 0]),\n          bottom: t.pointGeometry.convert(e.bottom || [0, 0]),\n          \"bottom-left\": t.pointGeometry.convert(e[\"bottom-left\"] || [0, 0]),\n          \"bottom-right\": t.pointGeometry.convert(e[\"bottom-right\"] || [0, 0]),\n          left: t.pointGeometry.convert(e.left || [0, 0]),\n          right: t.pointGeometry.convert(e.right || [0, 0])\n        };\n      }\n      return ya(new t.pointGeometry(0, 0));\n    }\n    var ba = {\n      supported: e,\n      setRTLTextPlugin: t.setRTLTextPlugin,\n      getRTLTextPluginStatus: t.getRTLTextPluginStatus,\n      Map: /*#__PURE__*/function (_Qo) {\n        _inherits(Map, _Qo);\n        var _super135 = _createSuper(Map);\n        function Map(e) {\n          var _this95;\n          _classCallCheck(this, Map);\n          var i;\n          if (t.PerformanceUtils.mark(t.PerformanceMarkers.create), null != (e = t.extend({}, aa, e)).minZoom && null != e.maxZoom && e.minZoom > e.maxZoom) throw new Error(\"maxZoom must be greater than or equal to minZoom\");\n          if (null != e.minPitch && null != e.maxPitch && e.minPitch > e.maxPitch) throw new Error(\"maxPitch must be greater than or equal to minPitch\");\n          if (null != e.minPitch && e.minPitch < 0) throw new Error(\"minPitch must be greater than or equal to 0\");\n          if (null != e.maxPitch && e.maxPitch > 85) throw new Error(\"maxPitch must be less than or equal to 85\");\n          if (_this95 = _super135.call(this, new io(e.minZoom, e.maxZoom, e.minPitch, e.maxPitch, e.renderWorldCopies), {\n            bearingSnap: e.bearingSnap\n          }), _this95._interactive = e.interactive, _this95._cooperativeGestures = e.cooperativeGestures, _this95._maxTileCacheSize = e.maxTileCacheSize, _this95._failIfMajorPerformanceCaveat = e.failIfMajorPerformanceCaveat, _this95._preserveDrawingBuffer = e.preserveDrawingBuffer, _this95._antialias = e.antialias, _this95._trackResize = e.trackResize, _this95._bearingSnap = e.bearingSnap, _this95._refreshExpiredTiles = e.refreshExpiredTiles, _this95._fadeDuration = e.fadeDuration, _this95._crossSourceCollisions = e.crossSourceCollisions, _this95._crossFadingFactor = 1, _this95._collectResourceTiming = e.collectResourceTiming, _this95._renderTaskQueue = new ia(), _this95._controls = [], _this95._mapId = t.uniqueId(), _this95._locale = t.extend({}, oa, e.locale), _this95._clickTolerance = e.clickTolerance, _this95._pixelRatio = null !== (i = e.pixelRatio) && void 0 !== i ? i : devicePixelRatio, _this95._requestManager = new s(e.transformRequest), \"string\" == typeof e.container) {\n            if (_this95._container = document.getElementById(e.container), !_this95._container) throw new Error(\"Container '\".concat(e.container, \"' not found.\"));\n          } else {\n            if (!(e.container instanceof HTMLElement)) throw new Error(\"Invalid type: 'container' must be a String or HTMLElement.\");\n            _this95._container = e.container;\n          }\n          if (e.maxBounds && _this95.setMaxBounds(e.maxBounds), t.bindAll([\"_onWindowOnline\", \"_onWindowResize\", \"_onMapScroll\", \"_contextLost\", \"_contextRestored\"], _assertThisInitialized(_this95)), _this95._setupContainer(), _this95._setupPainter(), void 0 === _this95.painter) throw new Error(\"Failed to initialize WebGL.\");\n          _this95.on(\"move\", function () {\n            return _this95._update(!1);\n          }), _this95.on(\"moveend\", function () {\n            return _this95._update(!1);\n          }), _this95.on(\"zoom\", function () {\n            return _this95._update(!0);\n          }), _this95.on(\"terrain\", function () {\n            _this95.painter.terrainFacilitator.dirty = !0, _this95._update(!0);\n          }), \"undefined\" != typeof window && (addEventListener(\"online\", _this95._onWindowOnline, !1), addEventListener(\"resize\", _this95._onWindowResize, !1), addEventListener(\"orientationchange\", _this95._onWindowResize, !1)), _this95.handlers = new Yo(_assertThisInitialized(_this95), e), _this95._cooperativeGestures && _this95._setupCooperativeGestures(), _this95._hash = e.hash && new oo(\"string\" == typeof e.hash && e.hash || void 0).addTo(_assertThisInitialized(_this95)), _this95._hash && _this95._hash._onHashChange() || (_this95.jumpTo({\n            center: e.center,\n            zoom: e.zoom,\n            bearing: e.bearing,\n            pitch: e.pitch\n          }), e.bounds && (_this95.resize(), _this95.fitBounds(e.bounds, t.extend({}, e.fitBoundsOptions, {\n            duration: 0\n          })))), _this95.resize(), _this95._localIdeographFontFamily = e.localIdeographFontFamily, e.style && _this95.setStyle(e.style, {\n            localIdeographFontFamily: e.localIdeographFontFamily\n          }), e.attributionControl && _this95.addControl(new ta({\n            customAttribution: e.customAttribution\n          })), e.maplibreLogo && _this95.addControl(new ea(), e.logoPosition), _this95.on(\"style.load\", function () {\n            _this95.transform.unmodified && _this95.jumpTo(_this95.style.stylesheet);\n          }), _this95.on(\"data\", function (e) {\n            _this95._update(\"style\" === e.dataType), _this95.fire(new t.Event(\"\".concat(e.dataType, \"data\"), e));\n          }), _this95.on(\"dataloading\", function (e) {\n            _this95.fire(new t.Event(\"\".concat(e.dataType, \"dataloading\"), e));\n          }), _this95.on(\"dataabort\", function (e) {\n            _this95.fire(new t.Event(\"sourcedataabort\", e));\n          });\n          return _possibleConstructorReturn(_this95);\n        }\n        _createClass(Map, [{\n          key: \"_getMapId\",\n          value: function _getMapId() {\n            return this._mapId;\n          }\n        }, {\n          key: \"addControl\",\n          value: function addControl(e, i) {\n            if (void 0 === i && (i = e.getDefaultPosition ? e.getDefaultPosition() : \"top-right\"), !e || !e.onAdd) return this.fire(new t.ErrorEvent(new Error(\"Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.\")));\n            var o = e.onAdd(this);\n            this._controls.push(e);\n            var a = this._controlPositions[i];\n            return -1 !== i.indexOf(\"bottom\") ? a.insertBefore(o, a.firstChild) : a.appendChild(o), this;\n          }\n        }, {\n          key: \"removeControl\",\n          value: function removeControl(e) {\n            if (!e || !e.onRemove) return this.fire(new t.ErrorEvent(new Error(\"Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.\")));\n            var i = this._controls.indexOf(e);\n            return i > -1 && this._controls.splice(i, 1), e.onRemove(this), this;\n          }\n        }, {\n          key: \"hasControl\",\n          value: function hasControl(t) {\n            return this._controls.indexOf(t) > -1;\n          }\n        }, {\n          key: \"calculateCameraOptionsFromTo\",\n          value: function calculateCameraOptionsFromTo(t, e, i, o) {\n            return null == o && this.style.terrain && (o = this.transform.getElevation(i, this.style.terrain)), _get(_getPrototypeOf(Map.prototype), \"calculateCameraOptionsFromTo\", this).call(this, t, e, i, o);\n          }\n        }, {\n          key: \"resize\",\n          value: function resize(e) {\n            var i = this._containerDimensions(),\n              o = i[0],\n              a = i[1];\n            this._resizeCanvas(o, a, this.getPixelRatio()), this.transform.resize(o, a), this.painter.resize(o, a, this.getPixelRatio());\n            var r = !this._moving;\n            return r && (this.stop(), this.fire(new t.Event(\"movestart\", e)).fire(new t.Event(\"move\", e))), this.fire(new t.Event(\"resize\", e)), r && this.fire(new t.Event(\"moveend\", e)), this;\n          }\n        }, {\n          key: \"getPixelRatio\",\n          value: function getPixelRatio() {\n            return this._pixelRatio;\n          }\n        }, {\n          key: \"setPixelRatio\",\n          value: function setPixelRatio(t) {\n            var _this$_containerDimen = this._containerDimensions(),\n              _this$_containerDimen2 = _slicedToArray(_this$_containerDimen, 2),\n              e = _this$_containerDimen2[0],\n              i = _this$_containerDimen2[1];\n            this._pixelRatio = t, this._resizeCanvas(e, i, t), this.painter.resize(e, i, t);\n          }\n        }, {\n          key: \"getBounds\",\n          value: function getBounds() {\n            return this.transform.getBounds();\n          }\n        }, {\n          key: \"getMaxBounds\",\n          value: function getMaxBounds() {\n            return this.transform.getMaxBounds();\n          }\n        }, {\n          key: \"setMaxBounds\",\n          value: function setMaxBounds(e) {\n            return this.transform.setMaxBounds(t.LngLatBounds.convert(e)), this._update();\n          }\n        }, {\n          key: \"setMinZoom\",\n          value: function setMinZoom(t) {\n            if ((t = null == t ? -2 : t) >= -2 && t <= this.transform.maxZoom) return this.transform.minZoom = t, this._update(), this.getZoom() < t && this.setZoom(t), this;\n            throw new Error(\"minZoom must be between -2 and the current maxZoom, inclusive\");\n          }\n        }, {\n          key: \"getMinZoom\",\n          value: function getMinZoom() {\n            return this.transform.minZoom;\n          }\n        }, {\n          key: \"setMaxZoom\",\n          value: function setMaxZoom(t) {\n            if ((t = null == t ? 22 : t) >= this.transform.minZoom) return this.transform.maxZoom = t, this._update(), this.getZoom() > t && this.setZoom(t), this;\n            throw new Error(\"maxZoom must be greater than the current minZoom\");\n          }\n        }, {\n          key: \"getMaxZoom\",\n          value: function getMaxZoom() {\n            return this.transform.maxZoom;\n          }\n        }, {\n          key: \"setMinPitch\",\n          value: function setMinPitch(t) {\n            if ((t = null == t ? 0 : t) < 0) throw new Error(\"minPitch must be greater than or equal to 0\");\n            if (t >= 0 && t <= this.transform.maxPitch) return this.transform.minPitch = t, this._update(), this.getPitch() < t && this.setPitch(t), this;\n            throw new Error(\"minPitch must be between 0 and the current maxPitch, inclusive\");\n          }\n        }, {\n          key: \"getMinPitch\",\n          value: function getMinPitch() {\n            return this.transform.minPitch;\n          }\n        }, {\n          key: \"setMaxPitch\",\n          value: function setMaxPitch(t) {\n            if ((t = null == t ? 60 : t) > 85) throw new Error(\"maxPitch must be less than or equal to 85\");\n            if (t >= this.transform.minPitch) return this.transform.maxPitch = t, this._update(), this.getPitch() > t && this.setPitch(t), this;\n            throw new Error(\"maxPitch must be greater than the current minPitch\");\n          }\n        }, {\n          key: \"getMaxPitch\",\n          value: function getMaxPitch() {\n            return this.transform.maxPitch;\n          }\n        }, {\n          key: \"getRenderWorldCopies\",\n          value: function getRenderWorldCopies() {\n            return this.transform.renderWorldCopies;\n          }\n        }, {\n          key: \"setRenderWorldCopies\",\n          value: function setRenderWorldCopies(t) {\n            return this.transform.renderWorldCopies = t, this._update();\n          }\n        }, {\n          key: \"project\",\n          value: function project(e) {\n            return this.transform.locationPoint(t.LngLat.convert(e), this.style && this.style.terrain);\n          }\n        }, {\n          key: \"unproject\",\n          value: function unproject(e) {\n            return this.transform.pointLocation(t.pointGeometry.convert(e), this.style && this.style.terrain);\n          }\n        }, {\n          key: \"isMoving\",\n          value: function isMoving() {\n            return this._moving || this.handlers.isMoving();\n          }\n        }, {\n          key: \"isZooming\",\n          value: function isZooming() {\n            return this._zooming || this.handlers.isZooming();\n          }\n        }, {\n          key: \"isRotating\",\n          value: function isRotating() {\n            return this._rotating || this.handlers.isRotating();\n          }\n        }, {\n          key: \"_createDelegatedListener\",\n          value: function _createDelegatedListener(t, e, i) {\n            var _this96 = this;\n            if (\"mouseenter\" === t || \"mouseover\" === t) {\n              var _o142 = !1;\n              var _a147 = function _a147(a) {\n                var r = _this96.getLayer(e) ? _this96.queryRenderedFeatures(a.point, {\n                  layers: [e]\n                }) : [];\n                r.length ? _o142 || (_o142 = !0, i.call(_this96, new mo(t, _this96, a.originalEvent, {\n                  features: r\n                }))) : _o142 = !1;\n              };\n              return {\n                layer: e,\n                listener: i,\n                delegates: {\n                  mousemove: _a147,\n                  mouseout: function mouseout() {\n                    _o142 = !1;\n                  }\n                }\n              };\n            }\n            if (\"mouseleave\" === t || \"mouseout\" === t) {\n              var _o143 = !1;\n              var _a148 = function _a148(a) {\n                  (_this96.getLayer(e) ? _this96.queryRenderedFeatures(a.point, {\n                    layers: [e]\n                  }) : []).length ? _o143 = !0 : _o143 && (_o143 = !1, i.call(_this96, new mo(t, _this96, a.originalEvent)));\n                },\n                _r208 = function _r208(e) {\n                  _o143 && (_o143 = !1, i.call(_this96, new mo(t, _this96, e.originalEvent)));\n                };\n              return {\n                layer: e,\n                listener: i,\n                delegates: {\n                  mousemove: _a148,\n                  mouseout: _r208\n                }\n              };\n            }\n            {\n              var _o144 = function _o144(t) {\n                var o = _this96.getLayer(e) ? _this96.queryRenderedFeatures(t.point, {\n                  layers: [e]\n                }) : [];\n                o.length && (t.features = o, i.call(_this96, t), delete t.features);\n              };\n              return {\n                layer: e,\n                listener: i,\n                delegates: _defineProperty({}, t, _o144)\n              };\n            }\n          }\n        }, {\n          key: \"on\",\n          value: function on(t, e, i) {\n            if (void 0 === i) return _get(_getPrototypeOf(Map.prototype), \"on\", this).call(this, t, e);\n            var o = this._createDelegatedListener(t, e, i);\n            this._delegatedListeners = this._delegatedListeners || {}, this._delegatedListeners[t] = this._delegatedListeners[t] || [], this._delegatedListeners[t].push(o);\n            for (var _t398 in o.delegates) this.on(_t398, o.delegates[_t398]);\n            return this;\n          }\n        }, {\n          key: \"once\",\n          value: function once(t, e, i) {\n            if (void 0 === i) return _get(_getPrototypeOf(Map.prototype), \"once\", this).call(this, t, e);\n            var o = this._createDelegatedListener(t, e, i);\n            for (var _t399 in o.delegates) this.once(_t399, o.delegates[_t399]);\n            return this;\n          }\n        }, {\n          key: \"off\",\n          value: function off(t, e, i) {\n            var _this97 = this;\n            return void 0 === i ? _get(_getPrototypeOf(Map.prototype), \"off\", this).call(this, t, e) : (this._delegatedListeners && this._delegatedListeners[t] && function (o) {\n              var a = _this97._delegatedListeners[t];\n              for (var _t400 = 0; _t400 < a.length; _t400++) {\n                var _o145 = a[_t400];\n                if (_o145.layer === e && _o145.listener === i) {\n                  for (var _t401 in _o145.delegates) _this97.off(_t401, _o145.delegates[_t401]);\n                  return a.splice(_t400, 1), _this97;\n                }\n              }\n            }(), this);\n          }\n        }, {\n          key: \"queryRenderedFeatures\",\n          value: function queryRenderedFeatures(e, i) {\n            if (!this.style) return [];\n            var o;\n            if (void 0 !== i || void 0 === e || e instanceof t.pointGeometry || Array.isArray(e) || (i = e, e = void 0), i = i || {}, (e = e || [[0, 0], [this.transform.width, this.transform.height]]) instanceof t.pointGeometry || \"number\" == typeof e[0]) o = [t.pointGeometry.convert(e)];else {\n              var _i274 = t.pointGeometry.convert(e[0]),\n                _a149 = t.pointGeometry.convert(e[1]);\n              o = [_i274, new t.pointGeometry(_a149.x, _i274.y), _a149, new t.pointGeometry(_i274.x, _a149.y), _i274];\n            }\n            return this.style.queryRenderedFeatures(o, i, this.transform);\n          }\n        }, {\n          key: \"querySourceFeatures\",\n          value: function querySourceFeatures(t, e) {\n            return this.style.querySourceFeatures(t, e);\n          }\n        }, {\n          key: \"setStyle\",\n          value: function setStyle(e, i) {\n            return !1 !== (i = t.extend({}, {\n              localIdeographFontFamily: this._localIdeographFontFamily\n            }, i)).diff && i.localIdeographFontFamily === this._localIdeographFontFamily && this.style && e ? (this._diffStyle(e, i), this) : (this._localIdeographFontFamily = i.localIdeographFontFamily, this._updateStyle(e, i));\n          }\n        }, {\n          key: \"setTransformRequest\",\n          value: function setTransformRequest(t) {\n            return this._requestManager.setTransformRequest(t), this;\n          }\n        }, {\n          key: \"_getUIString\",\n          value: function _getUIString(t) {\n            var e = this._locale[t];\n            if (null == e) throw new Error(\"Missing UI string '\".concat(t, \"'\"));\n            return e;\n          }\n        }, {\n          key: \"_updateStyle\",\n          value: function _updateStyle(t, e) {\n            return this.style && (this.style.setEventedParent(null), this.style._remove()), t ? (this.style = new ee(this, e || {}), this.style.setEventedParent(this, {\n              style: this.style\n            }), \"string\" == typeof t ? this.style.loadURL(t) : this.style.loadJSON(t), this) : (delete this.style, this);\n          }\n        }, {\n          key: \"_lazyInitEmptyStyle\",\n          value: function _lazyInitEmptyStyle() {\n            this.style || (this.style = new ee(this, {}), this.style.setEventedParent(this, {\n              style: this.style\n            }), this.style.loadEmpty());\n          }\n        }, {\n          key: \"_diffStyle\",\n          value: function _diffStyle(e, i) {\n            var _this98 = this;\n            if (\"string\" == typeof e) {\n              var _o146 = this._requestManager.transformRequest(e, t.ResourceType.Style);\n              t.getJSON(_o146, function (e, o) {\n                e ? _this98.fire(new t.ErrorEvent(e)) : o && _this98._updateDiff(o, i);\n              });\n            } else \"object\" == typeof e && this._updateDiff(e, i);\n          }\n        }, {\n          key: \"_updateDiff\",\n          value: function _updateDiff(e, i) {\n            try {\n              this.style.setState(e) && this._update(!0);\n            } catch (o) {\n              t.warnOnce(\"Unable to perform style diff: \".concat(o.message || o.error || o, \".  Rebuilding the style from scratch.\")), this._updateStyle(e, i);\n            }\n          }\n        }, {\n          key: \"getStyle\",\n          value: function getStyle() {\n            if (this.style) return this.style.serialize();\n          }\n        }, {\n          key: \"isStyleLoaded\",\n          value: function isStyleLoaded() {\n            return this.style ? this.style.loaded() : t.warnOnce(\"There is no style added to the map.\");\n          }\n        }, {\n          key: \"addSource\",\n          value: function addSource(t, e) {\n            return this._lazyInitEmptyStyle(), this.style.addSource(t, e), this._update(!0);\n          }\n        }, {\n          key: \"isSourceLoaded\",\n          value: function isSourceLoaded(e) {\n            var i = this.style && this.style.sourceCaches[e];\n            if (void 0 !== i) return i.loaded();\n            this.fire(new t.ErrorEvent(new Error(\"There is no source with ID '\".concat(e, \"'\"))));\n          }\n        }, {\n          key: \"setTerrain\",\n          value: function setTerrain(t) {\n            return this.style.setTerrain(t), this;\n          }\n        }, {\n          key: \"getTerrain\",\n          value: function getTerrain() {\n            return this.style.terrain && this.style.terrain.options;\n          }\n        }, {\n          key: \"areTilesLoaded\",\n          value: function areTilesLoaded() {\n            var t = this.style && this.style.sourceCaches;\n            for (var _e322 in t) {\n              var _i275 = t[_e322]._tiles;\n              for (var _t402 in _i275) {\n                var _e323 = _i275[_t402];\n                if (\"loaded\" !== _e323.state && \"errored\" !== _e323.state) return !1;\n              }\n            }\n            return !0;\n          }\n        }, {\n          key: \"addSourceType\",\n          value: function addSourceType(t, e, i) {\n            return this._lazyInitEmptyStyle(), this.style.addSourceType(t, e, i);\n          }\n        }, {\n          key: \"removeSource\",\n          value: function removeSource(t) {\n            return this.style.removeSource(t), this._update(!0);\n          }\n        }, {\n          key: \"getSource\",\n          value: function getSource(t) {\n            return this.style.getSource(t);\n          }\n        }, {\n          key: \"addImage\",\n          value: function addImage(e, i) {\n            var _ref130 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n              _ref130$pixelRatio = _ref130.pixelRatio,\n              o = _ref130$pixelRatio === void 0 ? 1 : _ref130$pixelRatio,\n              _ref130$sdf = _ref130.sdf,\n              a = _ref130$sdf === void 0 ? !1 : _ref130$sdf,\n              r = _ref130.stretchX,\n              s = _ref130.stretchY,\n              n = _ref130.content;\n            if (this._lazyInitEmptyStyle(), i instanceof HTMLImageElement || t.isImageBitmap(i)) {\n              var _t$exported$getImageD = t.exported.getImageData(i),\n                _l64 = _t$exported$getImageD.width,\n                _c43 = _t$exported$getImageD.height,\n                _h32 = _t$exported$getImageD.data;\n              this.style.addImage(e, {\n                data: new t.RGBAImage({\n                  width: _l64,\n                  height: _c43\n                }, _h32),\n                pixelRatio: o,\n                stretchX: r,\n                stretchY: s,\n                content: n,\n                sdf: a,\n                version: 0\n              });\n            } else {\n              if (void 0 === i.width || void 0 === i.height) return this.fire(new t.ErrorEvent(new Error(\"Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`\")));\n              {\n                var _l65 = i.width,\n                  _c44 = i.height,\n                  _h33 = i.data,\n                  _u42 = i;\n                this.style.addImage(e, {\n                  data: new t.RGBAImage({\n                    width: _l65,\n                    height: _c44\n                  }, new Uint8Array(_h33)),\n                  pixelRatio: o,\n                  stretchX: r,\n                  stretchY: s,\n                  content: n,\n                  sdf: a,\n                  version: 0,\n                  userImage: _u42\n                }), _u42.onAdd && _u42.onAdd(this, e);\n              }\n            }\n          }\n        }, {\n          key: \"updateImage\",\n          value: function updateImage(e, i) {\n            var o = this.style.getImage(e);\n            if (!o) return this.fire(new t.ErrorEvent(new Error(\"The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.\")));\n            var a = i instanceof HTMLImageElement || t.isImageBitmap(i) ? t.exported.getImageData(i) : i,\n              r = a.width,\n              s = a.height,\n              n = a.data;\n            if (void 0 === r || void 0 === s) return this.fire(new t.ErrorEvent(new Error(\"Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`\")));\n            if (r !== o.data.width || s !== o.data.height) return this.fire(new t.ErrorEvent(new Error(\"The width and height of the updated image must be that same as the previous version of the image\")));\n            var l = !(i instanceof HTMLImageElement || t.isImageBitmap(i));\n            o.data.replace(n, l), this.style.updateImage(e, o);\n          }\n        }, {\n          key: \"hasImage\",\n          value: function hasImage(e) {\n            return e ? !!this.style.getImage(e) : (this.fire(new t.ErrorEvent(new Error(\"Missing required image id\"))), !1);\n          }\n        }, {\n          key: \"removeImage\",\n          value: function removeImage(t) {\n            this.style.removeImage(t);\n          }\n        }, {\n          key: \"loadImage\",\n          value: function loadImage(e, i) {\n            t.getImage(this._requestManager.transformRequest(e, t.ResourceType.Image), i);\n          }\n        }, {\n          key: \"listImages\",\n          value: function listImages() {\n            return this.style.listImages();\n          }\n        }, {\n          key: \"addLayer\",\n          value: function addLayer(t, e) {\n            return this._lazyInitEmptyStyle(), this.style.addLayer(t, e), this._update(!0);\n          }\n        }, {\n          key: \"moveLayer\",\n          value: function moveLayer(t, e) {\n            return this.style.moveLayer(t, e), this._update(!0);\n          }\n        }, {\n          key: \"removeLayer\",\n          value: function removeLayer(t) {\n            return this.style.removeLayer(t), this._update(!0);\n          }\n        }, {\n          key: \"getLayer\",\n          value: function getLayer(t) {\n            return this.style.getLayer(t);\n          }\n        }, {\n          key: \"setLayerZoomRange\",\n          value: function setLayerZoomRange(t, e, i) {\n            return this.style.setLayerZoomRange(t, e, i), this._update(!0);\n          }\n        }, {\n          key: \"setFilter\",\n          value: function setFilter(t, e) {\n            var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n            return this.style.setFilter(t, e, i), this._update(!0);\n          }\n        }, {\n          key: \"getFilter\",\n          value: function getFilter(t) {\n            return this.style.getFilter(t);\n          }\n        }, {\n          key: \"setPaintProperty\",\n          value: function setPaintProperty(t, e, i) {\n            var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n            return this.style.setPaintProperty(t, e, i, o), this._update(!0);\n          }\n        }, {\n          key: \"getPaintProperty\",\n          value: function getPaintProperty(t, e) {\n            return this.style.getPaintProperty(t, e);\n          }\n        }, {\n          key: \"setLayoutProperty\",\n          value: function setLayoutProperty(t, e, i) {\n            var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n            return this.style.setLayoutProperty(t, e, i, o), this._update(!0);\n          }\n        }, {\n          key: \"getLayoutProperty\",\n          value: function getLayoutProperty(t, e) {\n            return this.style.getLayoutProperty(t, e);\n          }\n        }, {\n          key: \"setLight\",\n          value: function setLight(t) {\n            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n            return this._lazyInitEmptyStyle(), this.style.setLight(t, e), this._update(!0);\n          }\n        }, {\n          key: \"getLight\",\n          value: function getLight() {\n            return this.style.getLight();\n          }\n        }, {\n          key: \"setFeatureState\",\n          value: function setFeatureState(t, e) {\n            return this.style.setFeatureState(t, e), this._update();\n          }\n        }, {\n          key: \"removeFeatureState\",\n          value: function removeFeatureState(t, e) {\n            return this.style.removeFeatureState(t, e), this._update();\n          }\n        }, {\n          key: \"getFeatureState\",\n          value: function getFeatureState(t) {\n            return this.style.getFeatureState(t);\n          }\n        }, {\n          key: \"getContainer\",\n          value: function getContainer() {\n            return this._container;\n          }\n        }, {\n          key: \"getCanvasContainer\",\n          value: function getCanvasContainer() {\n            return this._canvasContainer;\n          }\n        }, {\n          key: \"getCanvas\",\n          value: function getCanvas() {\n            return this._canvas;\n          }\n        }, {\n          key: \"_containerDimensions\",\n          value: function _containerDimensions() {\n            var t = 0,\n              e = 0;\n            return this._container && (t = this._container.clientWidth || 400, e = this._container.clientHeight || 300), [t, e];\n          }\n        }, {\n          key: \"_setupContainer\",\n          value: function _setupContainer() {\n            var t = this._container;\n            t.classList.add(\"maplibregl-map\", \"mapboxgl-map\");\n            var e = this._canvasContainer = r.create(\"div\", \"maplibregl-canvas-container mapboxgl-canvas-container\", t);\n            this._interactive && e.classList.add(\"maplibregl-interactive\", \"mapboxgl-interactive\"), this._canvas = r.create(\"canvas\", \"maplibregl-canvas mapboxgl-canvas\", e), this._canvas.addEventListener(\"webglcontextlost\", this._contextLost, !1), this._canvas.addEventListener(\"webglcontextrestored\", this._contextRestored, !1), this._canvas.setAttribute(\"tabindex\", \"0\"), this._canvas.setAttribute(\"aria-label\", \"Map\"), this._canvas.setAttribute(\"role\", \"region\");\n            var i = this._containerDimensions();\n            this._resizeCanvas(i[0], i[1], this.getPixelRatio());\n            var o = this._controlContainer = r.create(\"div\", \"maplibregl-control-container mapboxgl-control-container\", t),\n              a = this._controlPositions = {};\n            [\"top-left\", \"top-right\", \"bottom-left\", \"bottom-right\"].forEach(function (t) {\n              a[t] = r.create(\"div\", \"maplibregl-ctrl-\".concat(t, \" mapboxgl-ctrl-\").concat(t), o);\n            }), this._container.addEventListener(\"scroll\", this._onMapScroll, !1);\n          }\n        }, {\n          key: \"_setupCooperativeGestures\",\n          value: function _setupCooperativeGestures() {\n            var _this99 = this;\n            var t = this._container;\n            this._metaPress = !1, this._cooperativeGesturesScreen = r.create(\"div\", \"maplibregl-cooperative-gesture-screen\", t);\n            var e = \"Control\",\n              i = \"boolean\" != typeof this._cooperativeGestures && this._cooperativeGestures.windowsHelpText ? this._cooperativeGestures.windowsHelpText : \"Use Ctrl + scroll to zoom the map\";\n            0 === navigator.platform.indexOf(\"Mac\") && (i = \"boolean\" != typeof this._cooperativeGestures && this._cooperativeGestures.macHelpText ? this._cooperativeGestures.macHelpText : \"Use ⌘ + scroll to zoom the map\", e = \"Meta\"), this._cooperativeGesturesScreen.innerHTML = \"\\n            <div class=\\\"maplibregl-desktop-message\\\">\".concat(i, \"</div>\\n            <div class=\\\"maplibregl-mobile-message\\\">\").concat(\"boolean\" != typeof this._cooperativeGestures && this._cooperativeGestures.mobileHelpText ? this._cooperativeGestures.mobileHelpText : \"Use two fingers to move the map\", \"</div>\\n        \"), document.addEventListener(\"keydown\", function (t) {\n              t.key === e && (_this99._metaPress = !0);\n            }), document.addEventListener(\"keyup\", function (t) {\n              t.key === e && (_this99._metaPress = !1);\n            }), this._canvasContainer.addEventListener(\"wheel\", function (t) {\n              _this99._onCooperativeGesture(t, _this99._metaPress, 1);\n            }, !1), this._canvasContainer.classList.remove(\"mapboxgl-touch-drag-pan\", \"maplibregl-touch-drag-pan\");\n          }\n        }, {\n          key: \"_resizeCanvas\",\n          value: function _resizeCanvas(t, e, i) {\n            this._canvas.width = i * t, this._canvas.height = i * e, this._canvas.style.width = \"\".concat(t, \"px\"), this._canvas.style.height = \"\".concat(e, \"px\");\n          }\n        }, {\n          key: \"_setupPainter\",\n          value: function _setupPainter() {\n            var i = t.extend({}, e.webGLContextAttributes, {\n                failIfMajorPerformanceCaveat: this._failIfMajorPerformanceCaveat,\n                preserveDrawingBuffer: this._preserveDrawingBuffer,\n                antialias: this._antialias || !1\n              }),\n              o = this._canvas.getContext(\"webgl\", i) || this._canvas.getContext(\"experimental-webgl\", i);\n            o ? (this.painter = new Ji(o, this.transform), t.exported$1.testSupport(o)) : this.fire(new t.ErrorEvent(new Error(\"Failed to initialize WebGL\")));\n          }\n        }, {\n          key: \"_contextLost\",\n          value: function _contextLost(e) {\n            e.preventDefault(), this._frame && (this._frame.cancel(), this._frame = null), this.fire(new t.Event(\"webglcontextlost\", {\n              originalEvent: e\n            }));\n          }\n        }, {\n          key: \"_contextRestored\",\n          value: function _contextRestored(e) {\n            this._setupPainter(), this.resize(), this._update(), this.fire(new t.Event(\"webglcontextrestored\", {\n              originalEvent: e\n            }));\n          }\n        }, {\n          key: \"_onMapScroll\",\n          value: function _onMapScroll(t) {\n            if (t.target === this._container) return this._container.scrollTop = 0, this._container.scrollLeft = 0, !1;\n          }\n        }, {\n          key: \"_onCooperativeGesture\",\n          value: function _onCooperativeGesture(t, e, i) {\n            var _this100 = this;\n            return !e && i < 2 && (this._cooperativeGesturesScreen.classList.add(\"maplibregl-show\"), setTimeout(function () {\n              _this100._cooperativeGesturesScreen.classList.remove(\"maplibregl-show\");\n            }, 100)), !1;\n          }\n        }, {\n          key: \"loaded\",\n          value: function loaded() {\n            return !this._styleDirty && !this._sourcesDirty && !!this.style && this.style.loaded();\n          }\n        }, {\n          key: \"_update\",\n          value: function _update(t) {\n            return this.style ? (this._styleDirty = this._styleDirty || t, this._sourcesDirty = !0, this.triggerRepaint(), this) : this;\n          }\n        }, {\n          key: \"_requestRenderFrame\",\n          value: function _requestRenderFrame(t) {\n            return this._update(), this._renderTaskQueue.add(t);\n          }\n        }, {\n          key: \"_cancelRenderFrame\",\n          value: function _cancelRenderFrame(t) {\n            this._renderTaskQueue.remove(t);\n          }\n        }, {\n          key: \"_render\",\n          value: function _render(e) {\n            var _this101 = this;\n            var i,\n              o = 0;\n            var a = this.painter.context.extTimerQuery;\n            if (this.listens(\"gpu-timing-frame\") && (i = a.createQueryEXT(), a.beginQueryEXT(a.TIME_ELAPSED_EXT, i), o = t.exported.now()), this.painter.context.setDirty(), this.painter.setBaseState(), this._renderTaskQueue.run(e), this._removed) return;\n            var r = !1;\n            if (this.style && this._styleDirty) {\n              this._styleDirty = !1;\n              var _e324 = this.transform.zoom,\n                _i276 = t.exported.now();\n              this.style.zoomHistory.update(_e324, _i276);\n              var _o147 = new t.EvaluationParameters(_e324, {\n                  now: _i276,\n                  fadeDuration: this._fadeDuration,\n                  zoomHistory: this.style.zoomHistory,\n                  transition: this.style.getTransition()\n                }),\n                _a150 = _o147.crossFadingFactor();\n              1 === _a150 && _a150 === this._crossFadingFactor || (r = !0, this._crossFadingFactor = _a150), this.style.update(_o147);\n            }\n            if (this.style && this._sourcesDirty && (this._sourcesDirty = !1, this.style._updateSources(this.transform)), this.style.terrain && this.style.terrain.sourceCache.update(this.transform, this.style.terrain), this.transform.updateElevation(this.style.terrain), this._placementDirty = this.style && this.style._updatePlacement(this.painter.transform, this.showCollisionBoxes, this._fadeDuration, this._crossSourceCollisions), this.painter.render(this.style, {\n              showTileBoundaries: this.showTileBoundaries,\n              showOverdrawInspector: this._showOverdrawInspector,\n              rotating: this.isRotating(),\n              zooming: this.isZooming(),\n              moving: this.isMoving(),\n              fadeDuration: this._fadeDuration,\n              showPadding: this.showPadding,\n              gpuTiming: !!this.listens(\"gpu-timing-layer\")\n            }), this.fire(new t.Event(\"render\")), this.loaded() && !this._loaded && (this._loaded = !0, t.PerformanceUtils.mark(t.PerformanceMarkers.load), this.fire(new t.Event(\"load\"))), this.style && (this.style.hasTransitions() || r) && (this._styleDirty = !0), this.style && !this._placementDirty && this.style._releaseSymbolFadeTiles(), this.listens(\"gpu-timing-frame\")) {\n              var _e325 = t.exported.now() - o;\n              a.endQueryEXT(a.TIME_ELAPSED_EXT, i), setTimeout(function () {\n                var o = a.getQueryObjectEXT(i, a.QUERY_RESULT_EXT) / 1e6;\n                a.deleteQueryEXT(i), _this101.fire(new t.Event(\"gpu-timing-frame\", {\n                  cpuTime: _e325,\n                  gpuTime: o\n                }));\n              }, 50);\n            }\n            if (this.listens(\"gpu-timing-layer\")) {\n              var _e326 = this.painter.collectGpuTimers();\n              setTimeout(function () {\n                var i = _this101.painter.queryGpuTimers(_e326);\n                _this101.fire(new t.Event(\"gpu-timing-layer\", {\n                  layerTimes: i\n                }));\n              }, 50);\n            }\n            var s = this._sourcesDirty || this._styleDirty || this._placementDirty;\n            return s || this._repaint ? this.triggerRepaint() : !this.isMoving() && this.loaded() && this.fire(new t.Event(\"idle\")), !this._loaded || this._fullyLoaded || s || (this._fullyLoaded = !0, t.PerformanceUtils.mark(t.PerformanceMarkers.fullLoad)), this;\n          }\n        }, {\n          key: \"redraw\",\n          value: function redraw() {\n            return this.style && (this._frame && (this._frame.cancel(), this._frame = null), this._render(0)), this;\n          }\n        }, {\n          key: \"remove\",\n          value: function remove() {\n            this._hash && this._hash.remove();\n            var _iterator226 = _createForOfIteratorHelper(this._controls),\n              _step226;\n            try {\n              for (_iterator226.s(); !(_step226 = _iterator226.n()).done;) {\n                var _t403 = _step226.value;\n                _t403.onRemove(this);\n              }\n            } catch (err) {\n              _iterator226.e(err);\n            } finally {\n              _iterator226.f();\n            }\n            this._controls = [], this._frame && (this._frame.cancel(), this._frame = null), this._renderTaskQueue.clear(), this.painter.destroy(), this.handlers.destroy(), delete this.handlers, this.setStyle(null), \"undefined\" != typeof window && (removeEventListener(\"resize\", this._onWindowResize, !1), removeEventListener(\"orientationchange\", this._onWindowResize, !1), removeEventListener(\"online\", this._onWindowOnline, !1));\n            var e = this.painter.context.gl.getExtension(\"WEBGL_lose_context\");\n            e && e.loseContext(), this._canvas.removeEventListener(\"webglcontextrestored\", this._contextRestored, !1), this._canvas.removeEventListener(\"webglcontextlost\", this._contextLost, !1), r.remove(this._canvasContainer), r.remove(this._controlContainer), this._cooperativeGestures && r.remove(this._cooperativeGesturesScreen), this._container.classList.remove(\"maplibregl-map\", \"mapboxgl-map\"), t.PerformanceUtils.clearMetrics(), this._removed = !0, this.fire(new t.Event(\"remove\"));\n          }\n        }, {\n          key: \"triggerRepaint\",\n          value: function triggerRepaint() {\n            var _this102 = this;\n            this.style && !this._frame && (this._frame = t.exported.frame(function (e) {\n              t.PerformanceUtils.frame(e), _this102._frame = null, _this102._render(e);\n            }));\n          }\n        }, {\n          key: \"_onWindowOnline\",\n          value: function _onWindowOnline() {\n            this._update();\n          }\n        }, {\n          key: \"_onWindowResize\",\n          value: function _onWindowResize(t) {\n            this._trackResize && this.resize({\n              originalEvent: t\n            })._update();\n          }\n        }, {\n          key: \"showTileBoundaries\",\n          get: function get() {\n            return !!this._showTileBoundaries;\n          },\n          set: function set(t) {\n            this._showTileBoundaries !== t && (this._showTileBoundaries = t, this._update());\n          }\n        }, {\n          key: \"showPadding\",\n          get: function get() {\n            return !!this._showPadding;\n          },\n          set: function set(t) {\n            this._showPadding !== t && (this._showPadding = t, this._update());\n          }\n        }, {\n          key: \"showCollisionBoxes\",\n          get: function get() {\n            return !!this._showCollisionBoxes;\n          },\n          set: function set(t) {\n            this._showCollisionBoxes !== t && (this._showCollisionBoxes = t, t ? this.style._generateCollisionBoxes() : this._update());\n          }\n        }, {\n          key: \"showOverdrawInspector\",\n          get: function get() {\n            return !!this._showOverdrawInspector;\n          },\n          set: function set(t) {\n            this._showOverdrawInspector !== t && (this._showOverdrawInspector = t, this._update());\n          }\n        }, {\n          key: \"repaint\",\n          get: function get() {\n            return !!this._repaint;\n          },\n          set: function set(t) {\n            this._repaint !== t && (this._repaint = t, this.triggerRepaint());\n          }\n        }, {\n          key: \"vertices\",\n          get: function get() {\n            return !!this._vertices;\n          },\n          set: function set(t) {\n            this._vertices = t, this._update();\n          }\n        }, {\n          key: \"_setCacheLimits\",\n          value: function _setCacheLimits(e, i) {\n            t.setCacheLimits(e, i);\n          }\n        }, {\n          key: \"version\",\n          get: function get() {\n            return \"2.4.0\";\n          }\n        }]);\n        return Map;\n      }(Qo),\n      NavigationControl: /*#__PURE__*/function () {\n        function NavigationControl(e) {\n          var _this103 = this;\n          _classCallCheck(this, NavigationControl);\n          this.options = t.extend({}, ra, e), this._container = r.create(\"div\", \"maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group\"), this._container.addEventListener(\"contextmenu\", function (t) {\n            return t.preventDefault();\n          }), this.options.showZoom && (t.bindAll([\"_setButtonTitle\", \"_updateZoomButtons\"], this), this._zoomInButton = this._createButton(\"maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in\", function (t) {\n            return _this103._map.zoomIn({}, {\n              originalEvent: t\n            });\n          }), r.create(\"span\", \"maplibregl-ctrl-icon mapboxgl-ctrl-icon\", this._zoomInButton).setAttribute(\"aria-hidden\", \"true\"), this._zoomOutButton = this._createButton(\"maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out\", function (t) {\n            return _this103._map.zoomOut({}, {\n              originalEvent: t\n            });\n          }), r.create(\"span\", \"maplibregl-ctrl-icon mapboxgl-ctrl-icon\", this._zoomOutButton).setAttribute(\"aria-hidden\", \"true\")), this.options.showCompass && (t.bindAll([\"_rotateCompassArrow\"], this), this._compass = this._createButton(\"maplibregl-ctrl-compass mapboxgl-ctrl-compass\", function (t) {\n            _this103.options.visualizePitch ? _this103._map.resetNorthPitch({}, {\n              originalEvent: t\n            }) : _this103._map.resetNorth({}, {\n              originalEvent: t\n            });\n          }), this._compassIcon = r.create(\"span\", \"maplibregl-ctrl-icon mapboxgl-ctrl-icon\", this._compass), this._compassIcon.setAttribute(\"aria-hidden\", \"true\"));\n        }\n        _createClass(NavigationControl, [{\n          key: \"_updateZoomButtons\",\n          value: function _updateZoomButtons() {\n            var t = this._map.getZoom(),\n              e = t === this._map.getMaxZoom(),\n              i = t === this._map.getMinZoom();\n            this._zoomInButton.disabled = e, this._zoomOutButton.disabled = i, this._zoomInButton.setAttribute(\"aria-disabled\", e.toString()), this._zoomOutButton.setAttribute(\"aria-disabled\", i.toString());\n          }\n        }, {\n          key: \"_rotateCompassArrow\",\n          value: function _rotateCompassArrow() {\n            var t = this.options.visualizePitch ? \"scale(\".concat(1 / Math.pow(Math.cos(this._map.transform.pitch * (Math.PI / 180)), .5), \") rotateX(\").concat(this._map.transform.pitch, \"deg) rotateZ(\").concat(this._map.transform.angle * (180 / Math.PI), \"deg)\") : \"rotate(\".concat(this._map.transform.angle * (180 / Math.PI), \"deg)\");\n            this._compassIcon.style.transform = t;\n          }\n        }, {\n          key: \"onAdd\",\n          value: function onAdd(t) {\n            return this._map = t, this.options.showZoom && (this._setButtonTitle(this._zoomInButton, \"ZoomIn\"), this._setButtonTitle(this._zoomOutButton, \"ZoomOut\"), this._map.on(\"zoom\", this._updateZoomButtons), this._updateZoomButtons()), this.options.showCompass && (this._setButtonTitle(this._compass, \"ResetBearing\"), this.options.visualizePitch && this._map.on(\"pitch\", this._rotateCompassArrow), this._map.on(\"rotate\", this._rotateCompassArrow), this._rotateCompassArrow(), this._handler = new sa(this._map, this._compass, this.options.visualizePitch)), this._container;\n          }\n        }, {\n          key: \"onRemove\",\n          value: function onRemove() {\n            r.remove(this._container), this.options.showZoom && this._map.off(\"zoom\", this._updateZoomButtons), this.options.showCompass && (this.options.visualizePitch && this._map.off(\"pitch\", this._rotateCompassArrow), this._map.off(\"rotate\", this._rotateCompassArrow), this._handler.off(), delete this._handler), delete this._map;\n          }\n        }, {\n          key: \"_createButton\",\n          value: function _createButton(t, e) {\n            var i = r.create(\"button\", t, this._container);\n            return i.type = \"button\", i.addEventListener(\"click\", e), i;\n          }\n        }, {\n          key: \"_setButtonTitle\",\n          value: function _setButtonTitle(t, e) {\n            var i = this._map._getUIString(\"NavigationControl.\".concat(e));\n            t.title = i, t.setAttribute(\"aria-label\", i);\n          }\n        }]);\n        return NavigationControl;\n      }(),\n      GeolocateControl: /*#__PURE__*/function (_t$Evented12) {\n        _inherits(GeolocateControl, _t$Evented12);\n        var _super136 = _createSuper(GeolocateControl);\n        function GeolocateControl(e) {\n          var _this104;\n          _classCallCheck(this, GeolocateControl);\n          _this104 = _super136.call(this), _this104.options = t.extend({}, ua, e), t.bindAll([\"_onSuccess\", \"_onError\", \"_onZoom\", \"_finish\", \"_setupUI\", \"_updateCamera\", \"_updateMarker\"], _assertThisInitialized(_this104));\n          return _this104;\n        }\n        _createClass(GeolocateControl, [{\n          key: \"onAdd\",\n          value: function onAdd(t) {\n            var e;\n            return this._map = t, this._container = r.create(\"div\", \"maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group\"), e = this._setupUI, void 0 !== da ? e(da) : void 0 !== window.navigator.permissions ? window.navigator.permissions.query({\n              name: \"geolocation\"\n            }).then(function (t) {\n              da = \"denied\" !== t.state, e(da);\n            }) : (da = !!window.navigator.geolocation, e(da)), this._container;\n          }\n        }, {\n          key: \"onRemove\",\n          value: function onRemove() {\n            void 0 !== this._geolocationWatchID && (window.navigator.geolocation.clearWatch(this._geolocationWatchID), this._geolocationWatchID = void 0), this.options.showUserLocation && this._userLocationDotMarker && this._userLocationDotMarker.remove(), this.options.showAccuracyCircle && this._accuracyCircleMarker && this._accuracyCircleMarker.remove(), r.remove(this._container), this._map.off(\"zoom\", this._onZoom), this._map = void 0, ma = 0, _a = !1;\n          }\n        }, {\n          key: \"_isOutOfMapMaxBounds\",\n          value: function _isOutOfMapMaxBounds(t) {\n            var e = this._map.getMaxBounds(),\n              i = t.coords;\n            return e && (i.longitude < e.getWest() || i.longitude > e.getEast() || i.latitude < e.getSouth() || i.latitude > e.getNorth());\n          }\n        }, {\n          key: \"_setErrorState\",\n          value: function _setErrorState() {\n            switch (this._watchState) {\n              case \"WAITING_ACTIVE\":\n                this._watchState = \"ACTIVE_ERROR\", this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active\", \"mapboxgl-ctrl-geolocate-active\"), this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-active-error\", \"mapboxgl-ctrl-geolocate-active-error\");\n                break;\n              case \"ACTIVE_LOCK\":\n                this._watchState = \"ACTIVE_ERROR\", this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active\", \"mapboxgl-ctrl-geolocate-active\"), this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-active-error\", \"mapboxgl-ctrl-geolocate-active-error\"), this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-waiting\", \"mapboxgl-ctrl-geolocate-waiting\");\n                break;\n              case \"BACKGROUND\":\n                this._watchState = \"BACKGROUND_ERROR\", this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background\", \"mapboxgl-ctrl-geolocate-background\"), this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-background-error\", \"mapboxgl-ctrl-geolocate-background-error\"), this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-waiting\", \"mapboxgl-ctrl-geolocate-waiting\");\n                break;\n              case \"ACTIVE_ERROR\":\n                break;\n              default:\n                throw new Error(\"Unexpected watchState \".concat(this._watchState));\n            }\n          }\n        }, {\n          key: \"_onSuccess\",\n          value: function _onSuccess(e) {\n            if (this._map) {\n              if (this._isOutOfMapMaxBounds(e)) return this._setErrorState(), this.fire(new t.Event(\"outofmaxbounds\", e)), this._updateMarker(), void this._finish();\n              if (this.options.trackUserLocation) switch (this._lastKnownPosition = e, this._watchState) {\n                case \"WAITING_ACTIVE\":\n                case \"ACTIVE_LOCK\":\n                case \"ACTIVE_ERROR\":\n                  this._watchState = \"ACTIVE_LOCK\", this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-waiting\", \"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active-error\", \"mapboxgl-ctrl-geolocate-active-error\"), this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-active\", \"mapboxgl-ctrl-geolocate-active\");\n                  break;\n                case \"BACKGROUND\":\n                case \"BACKGROUND_ERROR\":\n                  this._watchState = \"BACKGROUND\", this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-waiting\", \"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background-error\", \"mapboxgl-ctrl-geolocate-background-error\"), this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-background\", \"mapboxgl-ctrl-geolocate-background\");\n                  break;\n                default:\n                  throw new Error(\"Unexpected watchState \".concat(this._watchState));\n              }\n              this.options.showUserLocation && \"OFF\" !== this._watchState && this._updateMarker(e), this.options.trackUserLocation && \"ACTIVE_LOCK\" !== this._watchState || this._updateCamera(e), this.options.showUserLocation && this._dotElement.classList.remove(\"maplibregl-user-location-dot-stale\", \"mapboxgl-user-location-dot-stale\"), this.fire(new t.Event(\"geolocate\", e)), this._finish();\n            }\n          }\n        }, {\n          key: \"_updateCamera\",\n          value: function _updateCamera(e) {\n            var i = new t.LngLat(e.coords.longitude, e.coords.latitude),\n              o = e.coords.accuracy,\n              a = this._map.getBearing(),\n              r = t.extend({\n                bearing: a\n              }, this.options.fitBoundsOptions);\n            this._map.fitBounds(i.toBounds(o), r, {\n              geolocateSource: !0\n            });\n          }\n        }, {\n          key: \"_updateMarker\",\n          value: function _updateMarker(e) {\n            if (e) {\n              var _i277 = new t.LngLat(e.coords.longitude, e.coords.latitude);\n              this._accuracyCircleMarker.setLngLat(_i277).addTo(this._map), this._userLocationDotMarker.setLngLat(_i277).addTo(this._map), this._accuracy = e.coords.accuracy, this.options.showUserLocation && this.options.showAccuracyCircle && this._updateCircleRadius();\n            } else this._userLocationDotMarker.remove(), this._accuracyCircleMarker.remove();\n          }\n        }, {\n          key: \"_updateCircleRadius\",\n          value: function _updateCircleRadius() {\n            var t = this._map._container.clientHeight / 2,\n              e = this._map.unproject([0, t]),\n              i = this._map.unproject([1, t]),\n              o = e.distanceTo(i),\n              a = Math.ceil(2 * this._accuracy / o);\n            this._circleElement.style.width = \"\".concat(a, \"px\"), this._circleElement.style.height = \"\".concat(a, \"px\");\n          }\n        }, {\n          key: \"_onZoom\",\n          value: function _onZoom() {\n            this.options.showUserLocation && this.options.showAccuracyCircle && this._updateCircleRadius();\n          }\n        }, {\n          key: \"_onError\",\n          value: function _onError(e) {\n            if (this._map) {\n              if (this.options.trackUserLocation) if (1 === e.code) {\n                this._watchState = \"OFF\", this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-waiting\", \"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active\", \"mapboxgl-ctrl-geolocate-active\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active-error\", \"mapboxgl-ctrl-geolocate-active-error\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background\", \"mapboxgl-ctrl-geolocate-background\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background-error\", \"mapboxgl-ctrl-geolocate-background-error\"), this._geolocateButton.disabled = !0;\n                var _t404 = this._map._getUIString(\"GeolocateControl.LocationNotAvailable\");\n                this._geolocateButton.title = _t404, this._geolocateButton.setAttribute(\"aria-label\", _t404), void 0 !== this._geolocationWatchID && this._clearWatch();\n              } else {\n                if (3 === e.code && _a) return;\n                this._setErrorState();\n              }\n              \"OFF\" !== this._watchState && this.options.showUserLocation && this._dotElement.classList.add(\"maplibregl-user-location-dot-stale\", \"mapboxgl-user-location-dot-stale\"), this.fire(new t.Event(\"error\", e)), this._finish();\n            }\n          }\n        }, {\n          key: \"_finish\",\n          value: function _finish() {\n            this._timeoutId && clearTimeout(this._timeoutId), this._timeoutId = void 0;\n          }\n        }, {\n          key: \"_setupUI\",\n          value: function _setupUI(e) {\n            var _this105 = this;\n            if (this._container.addEventListener(\"contextmenu\", function (t) {\n              return t.preventDefault();\n            }), this._geolocateButton = r.create(\"button\", \"maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate\", this._container), r.create(\"span\", \"maplibregl-ctrl-icon mapboxgl-ctrl-icon\", this._geolocateButton).setAttribute(\"aria-hidden\", \"true\"), this._geolocateButton.type = \"button\", !1 === e) {\n              t.warnOnce(\"Geolocation support is not available so the GeolocateControl will be disabled.\");\n              var _e327 = this._map._getUIString(\"GeolocateControl.LocationNotAvailable\");\n              this._geolocateButton.disabled = !0, this._geolocateButton.title = _e327, this._geolocateButton.setAttribute(\"aria-label\", _e327);\n            } else {\n              var _t405 = this._map._getUIString(\"GeolocateControl.FindMyLocation\");\n              this._geolocateButton.title = _t405, this._geolocateButton.setAttribute(\"aria-label\", _t405);\n            }\n            this.options.trackUserLocation && (this._geolocateButton.setAttribute(\"aria-pressed\", \"false\"), this._watchState = \"OFF\"), this.options.showUserLocation && (this._dotElement = r.create(\"div\", \"maplibregl-user-location-dot mapboxgl-user-location-dot\"), this._userLocationDotMarker = new ha(this._dotElement), this._circleElement = r.create(\"div\", \"maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle\"), this._accuracyCircleMarker = new ha({\n              element: this._circleElement,\n              pitchAlignment: \"map\"\n            }), this.options.trackUserLocation && (this._watchState = \"OFF\"), this._map.on(\"zoom\", this._onZoom)), this._geolocateButton.addEventListener(\"click\", this.trigger.bind(this)), this._setup = !0, this.options.trackUserLocation && this._map.on(\"movestart\", function (e) {\n              e.geolocateSource || \"ACTIVE_LOCK\" !== _this105._watchState || e.originalEvent && \"resize\" === e.originalEvent.type || (_this105._watchState = \"BACKGROUND\", _this105._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-background\", \"mapboxgl-ctrl-geolocate-background\"), _this105._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active\", \"mapboxgl-ctrl-geolocate-active\"), _this105.fire(new t.Event(\"trackuserlocationend\")));\n            });\n          }\n        }, {\n          key: \"trigger\",\n          value: function trigger() {\n            if (!this._setup) return t.warnOnce(\"Geolocate control triggered before added to a map\"), !1;\n            if (this.options.trackUserLocation) {\n              switch (this._watchState) {\n                case \"OFF\":\n                  this._watchState = \"WAITING_ACTIVE\", this.fire(new t.Event(\"trackuserlocationstart\"));\n                  break;\n                case \"WAITING_ACTIVE\":\n                case \"ACTIVE_LOCK\":\n                case \"ACTIVE_ERROR\":\n                case \"BACKGROUND_ERROR\":\n                  ma--, _a = !1, this._watchState = \"OFF\", this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-waiting\", \"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active\", \"mapboxgl-ctrl-geolocate-active\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active-error\", \"mapboxgl-ctrl-geolocate-active-error\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background\", \"mapboxgl-ctrl-geolocate-background\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background-error\", \"mapboxgl-ctrl-geolocate-background-error\"), this.fire(new t.Event(\"trackuserlocationend\"));\n                  break;\n                case \"BACKGROUND\":\n                  this._watchState = \"ACTIVE_LOCK\", this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background\", \"mapboxgl-ctrl-geolocate-background\"), this._lastKnownPosition && this._updateCamera(this._lastKnownPosition), this.fire(new t.Event(\"trackuserlocationstart\"));\n                  break;\n                default:\n                  throw new Error(\"Unexpected watchState \".concat(this._watchState));\n              }\n              switch (this._watchState) {\n                case \"WAITING_ACTIVE\":\n                  this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-waiting\", \"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-active\", \"mapboxgl-ctrl-geolocate-active\");\n                  break;\n                case \"ACTIVE_LOCK\":\n                  this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-active\", \"mapboxgl-ctrl-geolocate-active\");\n                  break;\n                case \"OFF\":\n                  break;\n                default:\n                  throw new Error(\"Unexpected watchState \".concat(this._watchState));\n              }\n              if (\"OFF\" === this._watchState && void 0 !== this._geolocationWatchID) this._clearWatch();else if (void 0 === this._geolocationWatchID) {\n                var _t406;\n                this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-waiting\", \"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.setAttribute(\"aria-pressed\", \"true\"), ma++, ma > 1 ? (_t406 = {\n                  maximumAge: 6e5,\n                  timeout: 0\n                }, _a = !0) : (_t406 = this.options.positionOptions, _a = !1), this._geolocationWatchID = window.navigator.geolocation.watchPosition(this._onSuccess, this._onError, _t406);\n              }\n            } else window.navigator.geolocation.getCurrentPosition(this._onSuccess, this._onError, this.options.positionOptions), this._timeoutId = setTimeout(this._finish, 1e4);\n            return !0;\n          }\n        }, {\n          key: \"_clearWatch\",\n          value: function _clearWatch() {\n            window.navigator.geolocation.clearWatch(this._geolocationWatchID), this._geolocationWatchID = void 0, this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-waiting\", \"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.setAttribute(\"aria-pressed\", \"false\"), this.options.showUserLocation && this._updateMarker(null);\n          }\n        }]);\n        return GeolocateControl;\n      }(t.Evented),\n      AttributionControl: ta,\n      LogoControl: ea,\n      ScaleControl: /*#__PURE__*/function () {\n        function ScaleControl(e) {\n          _classCallCheck(this, ScaleControl);\n          this.options = t.extend({}, pa, e), t.bindAll([\"_onMove\", \"setUnit\"], this);\n        }\n        _createClass(ScaleControl, [{\n          key: \"getDefaultPosition\",\n          value: function getDefaultPosition() {\n            return \"bottom-left\";\n          }\n        }, {\n          key: \"_onMove\",\n          value: function _onMove() {\n            fa(this._map, this._container, this.options);\n          }\n        }, {\n          key: \"onAdd\",\n          value: function onAdd(t) {\n            return this._map = t, this._container = r.create(\"div\", \"maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale\", t.getContainer()), this._map.on(\"move\", this._onMove), this._onMove(), this._container;\n          }\n        }, {\n          key: \"onRemove\",\n          value: function onRemove() {\n            r.remove(this._container), this._map.off(\"move\", this._onMove), this._map = void 0;\n          }\n        }, {\n          key: \"setUnit\",\n          value: function setUnit(t) {\n            this.options.unit = t, fa(this._map, this._container, this.options);\n          }\n        }]);\n        return ScaleControl;\n      }(),\n      FullscreenControl: /*#__PURE__*/function () {\n        function FullscreenControl(e) {\n          _classCallCheck(this, FullscreenControl);\n          this._fullscreen = !1, e && e.container && (e.container instanceof HTMLElement ? this._container = e.container : t.warnOnce(\"Full screen control 'container' must be a DOM element.\")), t.bindAll([\"_onClickFullscreen\", \"_changeIcon\"], this), \"onfullscreenchange\" in document ? this._fullscreenchange = \"fullscreenchange\" : \"onmozfullscreenchange\" in document ? this._fullscreenchange = \"mozfullscreenchange\" : \"onwebkitfullscreenchange\" in document ? this._fullscreenchange = \"webkitfullscreenchange\" : \"onmsfullscreenchange\" in document && (this._fullscreenchange = \"MSFullscreenChange\");\n        }\n        _createClass(FullscreenControl, [{\n          key: \"onAdd\",\n          value: function onAdd(e) {\n            return this._map = e, this._container || (this._container = this._map.getContainer()), this._controlContainer = r.create(\"div\", \"maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group\"), this._checkFullscreenSupport() ? this._setupUI() : (this._controlContainer.style.display = \"none\", t.warnOnce(\"This device does not support fullscreen mode.\")), this._controlContainer;\n          }\n        }, {\n          key: \"onRemove\",\n          value: function onRemove() {\n            r.remove(this._controlContainer), this._map = null, window.document.removeEventListener(this._fullscreenchange, this._changeIcon);\n          }\n        }, {\n          key: \"_checkFullscreenSupport\",\n          value: function _checkFullscreenSupport() {\n            return !!(document.fullscreenEnabled || document.mozFullScreenEnabled || document.msFullscreenEnabled || document.webkitFullscreenEnabled);\n          }\n        }, {\n          key: \"_setupUI\",\n          value: function _setupUI() {\n            var t = this._fullscreenButton = r.create(\"button\", \"maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen\", this._controlContainer);\n            r.create(\"span\", \"maplibregl-ctrl-icon mapboxgl-ctrl-icon\", t).setAttribute(\"aria-hidden\", \"true\"), t.type = \"button\", this._updateTitle(), this._fullscreenButton.addEventListener(\"click\", this._onClickFullscreen), window.document.addEventListener(this._fullscreenchange, this._changeIcon);\n          }\n        }, {\n          key: \"_updateTitle\",\n          value: function _updateTitle() {\n            var t = this._getTitle();\n            this._fullscreenButton.setAttribute(\"aria-label\", t), this._fullscreenButton.title = t;\n          }\n        }, {\n          key: \"_getTitle\",\n          value: function _getTitle() {\n            return this._map._getUIString(this._isFullscreen() ? \"FullscreenControl.Exit\" : \"FullscreenControl.Enter\");\n          }\n        }, {\n          key: \"_isFullscreen\",\n          value: function _isFullscreen() {\n            return this._fullscreen;\n          }\n        }, {\n          key: \"_changeIcon\",\n          value: function _changeIcon() {\n            (window.document.fullscreenElement || window.document.mozFullScreenElement || window.document.webkitFullscreenElement || window.document.msFullscreenElement) === this._container !== this._fullscreen && (this._fullscreen = !this._fullscreen, this._fullscreenButton.classList.toggle(\"maplibregl-ctrl-shrink\"), this._fullscreenButton.classList.toggle(\"mapboxgl-ctrl-shrink\"), this._fullscreenButton.classList.toggle(\"maplibregl-ctrl-fullscreen\"), this._fullscreenButton.classList.toggle(\"mapboxgl-ctrl-fullscreen\"), this._updateTitle());\n          }\n        }, {\n          key: \"_onClickFullscreen\",\n          value: function _onClickFullscreen() {\n            this._isFullscreen() ? window.document.exitFullscreen ? window.document.exitFullscreen() : window.document.mozCancelFullScreen ? window.document.mozCancelFullScreen() : window.document.msExitFullscreen ? window.document.msExitFullscreen() : window.document.webkitCancelFullScreen && window.document.webkitCancelFullScreen() : this._container.requestFullscreen ? this._container.requestFullscreen() : this._container.mozRequestFullScreen ? this._container.mozRequestFullScreen() : this._container.msRequestFullscreen ? this._container.msRequestFullscreen() : this._container.webkitRequestFullscreen && this._container.webkitRequestFullscreen();\n          }\n        }]);\n        return FullscreenControl;\n      }(),\n      TerrainControl: /*#__PURE__*/function () {\n        function TerrainControl(e) {\n          _classCallCheck(this, TerrainControl);\n          this.options = e, t.bindAll([\"_toggleTerrain\", \"_updateTerrainIcon\"], this);\n        }\n        _createClass(TerrainControl, [{\n          key: \"onAdd\",\n          value: function onAdd(t) {\n            return this._map = t, this._container = r.create(\"div\", \"maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group\"), this._terrainButton = r.create(\"button\", \"maplibregl-ctrl-terrain mapboxgl-ctrl-terrain\", this._container), r.create(\"span\", \"maplibregl-ctrl-icon mapboxgl-ctrl-icon\", this._terrainButton).setAttribute(\"aria-hidden\", \"true\"), this._terrainButton.type = \"button\", this._terrainButton.addEventListener(\"click\", this._toggleTerrain), this._updateTerrainIcon(), this._map.on(\"terrain\", this._updateTerrainIcon), this._container;\n          }\n        }, {\n          key: \"onRemove\",\n          value: function onRemove() {\n            r.remove(this._container), this._map.off(\"terrain\", this._updateTerrainIcon), this._map = void 0;\n          }\n        }, {\n          key: \"_toggleTerrain\",\n          value: function _toggleTerrain() {\n            this._map.getTerrain() ? this._map.setTerrain(null) : this._map.setTerrain(this.options), this._updateTerrainIcon();\n          }\n        }, {\n          key: \"_updateTerrainIcon\",\n          value: function _updateTerrainIcon() {\n            this._terrainButton.classList.remove(\"maplibregl-ctrl-terrain\", \"mapboxgl-ctrl-terrain\"), this._terrainButton.classList.remove(\"maplibregl-ctrl-terrain-enabled\", \"mapboxgl-ctrl-terrain-enabled\"), this._map.style.terrain ? (this._terrainButton.classList.add(\"maplibregl-ctrl-terrain-enabled\", \"mapboxgl-ctrl-terrain-enabled\"), this._terrainButton.title = this._map._getUIString(\"TerrainControl.disableTerrain\")) : (this._terrainButton.classList.add(\"maplibregl-ctrl-terrain\", \"mapboxgl-ctrl-terrain\"), this._terrainButton.title = this._map._getUIString(\"TerrainControl.enableTerrain\"));\n          }\n        }]);\n        return TerrainControl;\n      }(),\n      Popup: /*#__PURE__*/function (_t$Evented13) {\n        _inherits(Popup, _t$Evented13);\n        var _super137 = _createSuper(Popup);\n        function Popup(e) {\n          var _this106;\n          _classCallCheck(this, Popup);\n          _this106 = _super137.call(this), _this106.options = t.extend(Object.create(xa), e), t.bindAll([\"_update\", \"_onClose\", \"remove\", \"_onMouseMove\", \"_onMouseUp\", \"_onDrag\"], _assertThisInitialized(_this106));\n          return _this106;\n        }\n        _createClass(Popup, [{\n          key: \"addTo\",\n          value: function addTo(e) {\n            return this._map && this.remove(), this._map = e, this.options.closeOnClick && this._map.on(\"click\", this._onClose), this.options.closeOnMove && this._map.on(\"move\", this._onClose), this._map.on(\"remove\", this.remove), this._update(), this._focusFirstElement(), this._trackPointer ? (this._map.on(\"mousemove\", this._onMouseMove), this._map.on(\"mouseup\", this._onMouseUp), this._container && this._container.classList.add(\"maplibregl-popup-track-pointer\", \"mapboxgl-popup-track-pointer\"), this._map._canvasContainer.classList.add(\"maplibregl-track-pointer\", \"mapboxgl-track-pointer\")) : this._map.on(\"move\", this._update), this.fire(new t.Event(\"open\")), this;\n          }\n        }, {\n          key: \"isOpen\",\n          value: function isOpen() {\n            return !!this._map;\n          }\n        }, {\n          key: \"remove\",\n          value: function remove() {\n            return this._content && r.remove(this._content), this._container && (r.remove(this._container), delete this._container), this._map && (this._map.off(\"move\", this._update), this._map.off(\"move\", this._onClose), this._map.off(\"click\", this._onClose), this._map.off(\"remove\", this.remove), this._map.off(\"mousemove\", this._onMouseMove), this._map.off(\"mouseup\", this._onMouseUp), this._map.off(\"drag\", this._onDrag), delete this._map), this.fire(new t.Event(\"close\")), this;\n          }\n        }, {\n          key: \"getLngLat\",\n          value: function getLngLat() {\n            return this._lngLat;\n          }\n        }, {\n          key: \"setLngLat\",\n          value: function setLngLat(e) {\n            return this._lngLat = t.LngLat.convert(e), this._pos = null, this._trackPointer = !1, this._update(), this._map && (this._map.on(\"move\", this._update), this._map.off(\"mousemove\", this._onMouseMove), this._container && this._container.classList.remove(\"maplibregl-popup-track-pointer\", \"mapboxgl-popup-track-pointer\"), this._map._canvasContainer.classList.remove(\"maplibregl-track-pointer\", \"mapboxgl-track-pointer\")), this;\n          }\n        }, {\n          key: \"trackPointer\",\n          value: function trackPointer() {\n            return this._trackPointer = !0, this._pos = null, this._update(), this._map && (this._map.off(\"move\", this._update), this._map.on(\"mousemove\", this._onMouseMove), this._map.on(\"drag\", this._onDrag), this._container && this._container.classList.add(\"maplibregl-popup-track-pointer\", \"mapboxgl-popup-track-pointer\"), this._map._canvasContainer.classList.add(\"maplibregl-track-pointer\", \"mapboxgl-track-pointer\")), this;\n          }\n        }, {\n          key: \"getElement\",\n          value: function getElement() {\n            return this._container;\n          }\n        }, {\n          key: \"setText\",\n          value: function setText(t) {\n            return this.setDOMContent(document.createTextNode(t));\n          }\n        }, {\n          key: \"setHTML\",\n          value: function setHTML(t) {\n            var e = document.createDocumentFragment(),\n              i = document.createElement(\"body\");\n            var o;\n            for (i.innerHTML = t; o = i.firstChild, o;) e.appendChild(o);\n            return this.setDOMContent(e);\n          }\n        }, {\n          key: \"getMaxWidth\",\n          value: function getMaxWidth() {\n            return this._container && this._container.style.maxWidth;\n          }\n        }, {\n          key: \"setMaxWidth\",\n          value: function setMaxWidth(t) {\n            return this.options.maxWidth = t, this._update(), this;\n          }\n        }, {\n          key: \"setDOMContent\",\n          value: function setDOMContent(t) {\n            if (this._content) for (; this._content.hasChildNodes();) this._content.firstChild && this._content.removeChild(this._content.firstChild);else this._content = r.create(\"div\", \"maplibregl-popup-content mapboxgl-popup-content\", this._container);\n            return this._content.appendChild(t), this._createCloseButton(), this._update(), this._focusFirstElement(), this;\n          }\n        }, {\n          key: \"addClassName\",\n          value: function addClassName(t) {\n            this._container && this._container.classList.add(t);\n          }\n        }, {\n          key: \"removeClassName\",\n          value: function removeClassName(t) {\n            this._container && this._container.classList.remove(t);\n          }\n        }, {\n          key: \"setOffset\",\n          value: function setOffset(t) {\n            return this.options.offset = t, this._update(), this;\n          }\n        }, {\n          key: \"toggleClassName\",\n          value: function toggleClassName(t) {\n            if (this._container) return this._container.classList.toggle(t);\n          }\n        }, {\n          key: \"_createCloseButton\",\n          value: function _createCloseButton() {\n            this.options.closeButton && (this._closeButton = r.create(\"button\", \"maplibregl-popup-close-button mapboxgl-popup-close-button\", this._content), this._closeButton.type = \"button\", this._closeButton.setAttribute(\"aria-label\", \"Close popup\"), this._closeButton.innerHTML = \"&#215;\", this._closeButton.addEventListener(\"click\", this._onClose));\n          }\n        }, {\n          key: \"_onMouseUp\",\n          value: function _onMouseUp(t) {\n            this._update(t.point);\n          }\n        }, {\n          key: \"_onMouseMove\",\n          value: function _onMouseMove(t) {\n            this._update(t.point);\n          }\n        }, {\n          key: \"_onDrag\",\n          value: function _onDrag(t) {\n            this._update(t.point);\n          }\n        }, {\n          key: \"_update\",\n          value: function _update(t) {\n            var _this107 = this;\n            if (!this._map || !this._lngLat && !this._trackPointer || !this._content) return;\n            if (this._container || (this._container = r.create(\"div\", \"maplibregl-popup mapboxgl-popup\", this._map.getContainer()), this._tip = r.create(\"div\", \"maplibregl-popup-tip mapboxgl-popup-tip\", this._container), this._container.appendChild(this._content), this.options.className && this.options.className.split(\" \").forEach(function (t) {\n              return _this107._container.classList.add(t);\n            }), this._trackPointer && this._container.classList.add(\"maplibregl-popup-track-pointer\", \"mapboxgl-popup-track-pointer\")), this.options.maxWidth && this._container.style.maxWidth !== this.options.maxWidth && (this._container.style.maxWidth = this.options.maxWidth), this._map.transform.renderWorldCopies && !this._trackPointer && (this._lngLat = na(this._lngLat, this._pos, this._map.transform)), this._trackPointer && !t) return;\n            var e = this._pos = this._trackPointer && t ? t : this._map.project(this._lngLat);\n            var i = this.options.anchor;\n            var o = ya(this.options.offset);\n            if (!i) {\n              var _t407 = this._container.offsetWidth,\n                _a151 = this._container.offsetHeight;\n              var _r209;\n              _r209 = e.y + o.bottom.y < _a151 ? [\"top\"] : e.y > this._map.transform.height - _a151 ? [\"bottom\"] : [], e.x < _t407 / 2 ? _r209.push(\"left\") : e.x > this._map.transform.width - _t407 / 2 && _r209.push(\"right\"), i = 0 === _r209.length ? \"bottom\" : _r209.join(\"-\");\n            }\n            var a = e.add(o[i]).round();\n            r.setTransform(this._container, \"\".concat(la[i], \" translate(\").concat(a.x, \"px,\").concat(a.y, \"px)\")), ca(this._container, i, \"popup\");\n          }\n        }, {\n          key: \"_focusFirstElement\",\n          value: function _focusFirstElement() {\n            if (!this.options.focusAfterOpen || !this._container) return;\n            var t = this._container.querySelector(va);\n            t && t.focus();\n          }\n        }, {\n          key: \"_onClose\",\n          value: function _onClose() {\n            this.remove();\n          }\n        }]);\n        return Popup;\n      }(t.Evented),\n      Marker: ha,\n      Style: ee,\n      LngLat: t.LngLat,\n      LngLatBounds: t.LngLatBounds,\n      Point: t.pointGeometry,\n      MercatorCoordinate: t.MercatorCoordinate,\n      Evented: t.Evented,\n      AJAXError: t.AJAXError,\n      config: t.config,\n      CanvasSource: P,\n      GeoJSONSource: C,\n      ImageSource: D,\n      RasterDEMTileSource: I,\n      RasterTileSource: T,\n      VectorTileSource: w,\n      VideoSource: z,\n      prewarm: function prewarm() {\n        j().acquire(G);\n      },\n      clearPrewarmedResources: function clearPrewarmedResources() {\n        var t = q;\n        t && (t.isPreloaded() && 1 === t.numActive() ? (t.release(G), q = null) : console.warn(\"Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()\"));\n      },\n      get version() {\n        return \"2.4.0\";\n      },\n      get workerCount() {\n        return Z.workerCount;\n      },\n      set workerCount(t) {\n        Z.workerCount = t;\n      },\n      get maxParallelImageRequests() {\n        return t.config.MAX_PARALLEL_IMAGE_REQUESTS;\n      },\n      set maxParallelImageRequests(e) {\n        t.config.MAX_PARALLEL_IMAGE_REQUESTS = e;\n      },\n      clearStorage: function clearStorage(e) {\n        t.clearTileCache(e);\n      },\n      workerUrl: \"\",\n      addProtocol: function addProtocol(e, i) {\n        t.config.REGISTERED_PROTOCOLS[e] = i;\n      },\n      removeProtocol: function removeProtocol(e) {\n        delete t.config.REGISTERED_PROTOCOLS[e];\n      }\n    };\n    return Jo.extend(ba, {\n      isSafari: t.isSafari,\n      getPerformanceMetrics: t.PerformanceUtils.getPerformanceMetrics\n    }), ba;\n  });\n\n  //\n\n  var maplibregl$1 = maplibregl;\n  return maplibregl$1;\n});","map":{"version":3,"names":["maplibregl$1","maplibregl"],"sources":["C:\\Users\\HIMANSHI\\Desktop\\Mapping\\frontend\\node_modules\\maplibre-gl\\rollup\\maplibregl.js"],"sourcesContent":["//\n// Our custom intro provides a specialized \"define()\" function, called by the\n// AMD modules below, that sets up the worker blob URL and then executes the\n// main module, storing its exported value as 'maplibregl'\n\n// The three \"chunks\" imported here are produced by a first Rollup pass,\n// which outputs them as AMD modules.\n\n// Shared dependencies, i.e.:\n/*\ndefine(['exports'], function (exports) {\n    // Code for all common dependencies\n    // Each module's exports are attached attached to 'exports' (with\n    // names rewritten to avoid collisions, etc.)\n})\n*/\nimport './build/maplibregl/shared';\n\n// Worker and its unique dependencies, i.e.:\n/*\ndefine(['./shared.js'], function (__shared__js) {\n    //  Code for worker script and its unique dependencies.\n    //  Expects the output of 'shared' module to be passed in as an argument,\n    //  since all references to common deps look like, e.g.,\n    //  __shared__js.shapeText().\n});\n*/\n// When this wrapper function is passed to our custom define() above,\n// it gets stringified, together with the shared wrapper (using\n// Function.toString()), and the resulting string of code is made into a\n// Blob URL that gets used by the main module to create the web workers.\nimport './build/maplibregl/worker';\n\n// Main module and its unique dependencies\n/*\ndefine(['./shared.js'], function (__shared__js) {\n    //  Code for main GL JS module and its unique dependencies.\n    //  Expects the output of 'shared' module to be passed in as an argument,\n    //  since all references to common deps look like, e.g.,\n    //  __shared__js.shapeText().\n    //\n    //  Returns the actual maplibregl (i.e. src/index.js)\n});\n*/\nimport './build/maplibregl/index';\n\nexport default maplibregl;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA;;EA8CA,IAAAA,YAAA,GAAeC,UAAU"},"metadata":{},"sourceType":"script","externalDependencies":[]}