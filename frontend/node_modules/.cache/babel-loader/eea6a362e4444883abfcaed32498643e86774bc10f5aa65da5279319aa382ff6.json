{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/HIMANSHI/Desktop/Mapping/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useRef}from\"react\";import axios from'axios';import{MdRoom,MdCancel}from\"react-icons/md\";import{ImCross}from\"react-icons/im\";import\"./login.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(_ref){var setShowLogin=_ref.setShowLogin,myStorage=_ref.myStorage,setCurrentUser=_ref.setCurrentUser;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),failure=_useState2[0],setFailure=_useState2[1];var nameRef=useRef();var passwordRef=useRef();var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var User,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();User={username:nameRef.current.value,password:passwordRef.current.value};_context.prev=2;_context.next=5;return axios.post(\"/users/login\",User);case 5:res=_context.sent;myStorage.setItem(\"user\",res.data.username);setCurrentUser(res.data.username);setShowLogin(false);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);setFailure(true);case 14:case\"end\":return _context.stop();}},_callee,null,[[2,11]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"loginContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"logo\",children:[/*#__PURE__*/_jsx(MdRoom,{style:{fontSize:\"18px\",color:\"teal\"}}),\"TravelGuide\"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"username\",ref:nameRef}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",ref:passwordRef}),/*#__PURE__*/_jsx(\"button\",{className:\"loginBtn\",children:\"Login\"}),failure&&/*#__PURE__*/_jsxs(\"span\",{className:\"failure\",children:[\"invalid credentials\",/*#__PURE__*/_jsx(ImCross,{style:{fontSize:\"7px\",margin:\"5px\"}})]})]}),/*#__PURE__*/_jsx(MdCancel,{className:\"loginCancel\",onClick:function onClick(){return setShowLogin(false);}})]});}","map":{"version":3,"names":["useState","useRef","axios","MdRoom","MdCancel","ImCross","jsx","_jsx","jsxs","_jsxs","Login","_ref","setShowLogin","myStorage","setCurrentUser","_useState","_useState2","_slicedToArray","failure","setFailure","nameRef","passwordRef","handleSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","User","res","wrap","_callee$","_context","prev","next","preventDefault","username","current","value","password","post","sent","setItem","data","t0","stop","_x","apply","arguments","className","children","style","fontSize","color","onSubmit","type","placeholder","ref","margin","onClick"],"sources":["C:/Users/HIMANSHI/Desktop/Mapping/frontend/src/components/Login.jsx"],"sourcesContent":["import { useState, useRef } from \"react\";\r\nimport axios from 'axios';\r\nimport { MdRoom , MdCancel } from \"react-icons/md\";\r\nimport { ImCross } from \"react-icons/im\";\r\nimport \"./login.css\";\r\n\r\n\r\n\r\nexport default function Login({setShowLogin,myStorage,setCurrentUser}) {\r\n\r\n    const [failure, setFailure] = useState(false);\r\n    const nameRef = useRef();\r\n    const passwordRef = useRef();\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const User = {\r\n            username: nameRef.current.value,\r\n            password:passwordRef.current.value,\r\n        };\r\n\r\n        try {\r\n            const res = await axios.post(\"/users/login\",User);\r\n           \r\n            myStorage.setItem(\"user\",res.data.username);\r\n            setCurrentUser(res.data.username);\r\n            setShowLogin(false);\r\n           \r\n        }catch(err) {\r\n            \r\n            setFailure(true);\r\n        }\r\n    }\r\n\r\n    return (\r\n\r\n        <div className=\"loginContainer\">\r\n            <div className=\"logo\">\r\n                <MdRoom style={{ fontSize: \"18px\", color: \"teal\" }} />\r\n                TravelGuide\r\n            </div>\r\n            <form onSubmit = {handleSubmit}>\r\n                {/* whenever those values are changed ref will change  */}\r\n                <input type=\"text\" placeholder=\"username\" ref={nameRef}/>\r\n                <input type=\"password\" placeholder=\"password\" ref={passwordRef}/>\r\n                <button className=\"loginBtn\">Login</button>\r\n                {failure &&\r\n                    <span className=\"failure\">invalid credentials\r\n                        <ImCross style={{\r\n                            fontSize: \"7px\",\r\n                            margin: \"5px\",\r\n\r\n                        }}\r\n                        />\r\n                    </span>\r\n                }\r\n            </form>\r\n            <MdCancel \r\n            className=\"loginCancel\" \r\n            onClick={()=>setShowLogin(false)}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}